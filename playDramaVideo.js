define("jobs/pc/playDramaVideo.js",["../../components/units/pageJob","../../units/newbase","../../units/playBase2","../../units/slideWidgetForId","../../units/tabForId","../../units/responseForSlide","../../units/dramaSeries","../../units/seriesForScroll","../../units/dramaTrailer","../../units/sourceViewpoint","../../units/sourcePopularBang","../../units/sourcePKBang","../../units/starsBarrage","../../units/videoBuy","../../units/productSlide","../../units/sourceTabSelect","../../units/sourceForScroll","../../units/videoinfoChange","../../units/authExpandV2","../../units/playerPopup","../../units/qiyu","../../units/playCount","../../units/relateRoles","../../units/adVideoExtension","../../units/playerBangdans","../../units/appDownload","../../units/toHistoryUrl","../../units/movieTickets","../../units/iqiyiHot","../../units/iqiyiHotPingback","../../units/qiyuSendPingback","../../units/activityNoticeTopNav","../../units/activityNotice","../../units/flashPlayerControl","../../units/changeTrywatchTitle","../../units/checkJujiVipWrap","../../units/videoShopGuide","../../units/videoScore","../../units/appleAdInPlay","../../units/safe/popVip","../../units/userUpgrade/upgrade","../../units/alading","../../units/paopaoLoad"],function(e,t,a){var i=e("../../components/units/pageJob");e("../../units/newbase");var n=e("../../units/playBase2"),o=[e("../../units/slideWidgetForId"),e("../../units/tabForId"),e("../../units/responseForSlide"),e("../../units/dramaSeries"),e("../../units/seriesForScroll"),e("../../units/dramaTrailer"),e("../../units/sourceViewpoint"),e("../../units/sourcePopularBang"),e("../../units/sourcePKBang"),e("../../units/starsBarrage"),e("../../units/videoBuy"),e("../../units/productSlide"),e("../../units/sourceTabSelect"),e("../../units/sourceForScroll"),e("../../units/videoinfoChange"),e("../../units/authExpandV2"),e("../../units/playerPopup"),e("../../units/qiyu"),e("../../units/playCount"),e("../../units/relateRoles"),e("../../units/adVideoExtension"),e("../../units/playerBangdans"),e("../../units/appDownload"),e("../../units/toHistoryUrl"),e("../../units/movieTickets"),e("../../units/iqiyiHot"),e("../../units/iqiyiHotPingback"),e("../../units/qiyuSendPingback"),e("../../units/activityNoticeTopNav"),e("../../units/activityNotice"),e("../../units/flashPlayerControl"),e("../../units/changeTrywatchTitle"),e("../../units/checkJujiVipWrap"),e("../../units/videoShopGuide"),e("../../units/videoScore"),e("../../units/appleAdInPlay"),e("../../units/safe/popVip"),e("../../units/userUpgrade/upgrade"),e("../../units/alading"),e("../../units/paopaoLoad")];o=n.concat(o),a.exports={addJobs:function(){o.forEach(function(e){i.add(e)})},start:function(){i.start()}}});
define("config/config.js",[],function(e,t,n){var a={projectName:"qiyiV2",projectVersion:"20161014155655",templateVersion:"20161013162223",commonVersion:"20161013162223",developer:"liujinjuan",jobPath:"jobs/pc",commonPath:"common",templatePath:"templates/scripts",env:"product",projectDebug:!1,cookie:{pc:"QC020"},supportTs:Q.browser.iPad||Q.browser.iPhone||navigator.userAgent.match(/miuivideo\//i)};"development"==a.env,n.exports=a});
define("units/newbase.js",["../config/projectConfig","../config/siteDomain","../kit/qiyiPlayer","../config/video","../kit/userInfo","./resizePageWidth","../kit/responsive","./loginFloater","../patches/swfInterfacePatch","./navAppdownResponse","./pcUserRegistLoginBoxManagerLoader","./vertifyEmail","./navHackForIpad","./uploadVideoLink","./sso","./pcplayHistoryV2Loader","./profileGuide","./navMessageFloater","./pcNavUpload","./creditRecordV2","./thirdPartNoLogin","./thirdPartyLogin","./userInfoCenterMailSuggest","./loginNoticeToFlash","./navControlsLoader","./suggest","./vipAdPop","./vipNewHeader","./topLineFloaterV2","./userUpgrade/upgrade","./lazyload","../kit/flashSnsAuth","./iframeOpenWin","./pcYingYinDownload","./externalLogin","./qipaLogin","./qrCodeLogin","./mobileActivityTip","./dotNewIcon","./uc/rtSubUpUr","./bindMobile_vip","./vip/vipOpenAutoPay","./safe/abnormalLogin","./abnormalVerifyPhone","./vip/vipUnFreeze","./checkWebSel","./consoleHireInfo","./vipPay/initPay_floater"],function(e){Q.external.checkAdSupport=function(e){var t;return"viewPoint"==e&&(t=Q.$("#data-adsidebar-tpl")),t?!0:!1};var t=e("../config/projectConfig");t.setConfig({});var a=e("../config/siteDomain"),n=e("../kit/qiyiPlayer"),i=e("../config/video");e("../kit/userInfo"),e("./resizePageWidth"),e("../kit/responsive"),e("./loginFloater"),e("../patches/swfInterfacePatch"),e("./navAppdownResponse"),e("./pcUserRegistLoginBoxManagerLoader"),e("./vertifyEmail"),e("./navHackForIpad"),e("./uploadVideoLink"),e("./sso"),e("./pcplayHistoryV2Loader"),e("./profileGuide"),e("./navMessageFloater"),e("./pcNavUpload"),e("./creditRecordV2"),e("./thirdPartNoLogin"),e("./thirdPartyLogin"),e("./userInfoCenterMailSuggest"),e("./loginNoticeToFlash"),e("./navControlsLoader"),e("./suggest"),e("./vipAdPop"),e("./vipNewHeader"),e("./topLineFloaterV2"),e("./userUpgrade/upgrade"),e("./lazyload"),e("../kit/flashSnsAuth"),e("./iframeOpenWin"),e("./pcYingYinDownload"),e("./externalLogin"),e("./qipaLogin"),e("./qrCodeLogin"),e("./mobileActivityTip"),e("./dotNewIcon"),e("./uc/rtSubUpUr"),e("./bindMobile_vip"),e("./vip/vipOpenAutoPay"),e("./safe/abnormalLogin"),e("./abnormalVerifyPhone"),e("./vip/vipUnFreeze"),e("./checkWebSel"),e("./consoleHireInfo"),e("./vipPay/initPay_floater");try{document.domain=a.SITE_DOMAIN}catch(o){}window.Q=window.Q||{},Q.kit=Q.kit||{},Q.kit.QiyiPlayer=n,window.lib=window.lib||{},window.lib.swf=window.lib.swf||{},Q.swf=Q.swf||{},Q.config=Q.config||{},Q.config.video=i,window.onerror=function(){},window.onunload=function(){}});
define("kit/qiyiPlayer.js",["./qiyiFlashPlayer","./qiyiHtml5Player","./qiyiUnifiedPlayer","../config/video"],function(e,t,n){var a=e("./qiyiFlashPlayer"),i=e("./qiyiHtml5Player"),r=e("./qiyiUnifiedPlayer"),o=e("../config/video"),l=Q.PageInfo&&Q.PageInfo.playPageInfo||{};l.cid;var s=Q.Class("QiyiPlayer",{construct:function(e){var t=null;if(window.QiyiPlayerLoader&&window.QiyiPlayerLoader.isActived)t=new r(e);else if(o){e.playerid=e.playerid||"video",t=new i(e);var n=Q.$("#"+e.playerid);n&&(n.__player=t)}else t=new a(e);return Q.event.customEvent.fire({type:"playercreated"}),t.on("videoChanged",Q.external.onVideoChanged),t},statics:{_players:{},rechargeTag:!1,getPlayer:function(e){return this._players[e]?this._players[e]:(this._players[e]=new s({playerid:e}),this._players[e])},destroy:function(e){var t=this._players;if(e)t[e].un(),t[e]=null,delete t[e];else{for(var n in t)t[n].un();this._players={}}}}});n.exports=s});
define("kit/qiyiFlashPlayer.js",["./flashPlayer"],function(e,t,n){var a=e("./flashPlayer");n.exports=Q.Class("QiyiFlashPlayer",{extend:a,construct:function(e){this.callsuper(e)},methods:{jsNotifyAdManager:function(e){this._flashcall("jsNotifyAdManager",e)},setUserLogin:function(e){this._flashcall("setQiyiUserLogin",e)},setVisits:function(e){Q.log.log("setVisits__"+e),this._flashcall("setQiyiVisits",e)},setLight:function(e){"true"==e?Q.log.log("openLight....."):Q.log.log("closeLight....."),this._flashcall("setLight",e)},setSubscribe:function(e){Q.log.log("setSubscribe....."),this._flashcall("setQiyiSubscribe",e)},setFollowInfo:function(e){Q.log.log("setSubscribeInfo....."),this._flashcall("setSubscribeInfo",e)},setSubscribeStateChange:function(e){Q.log.log("setSubscribeStateChange....."),this._flashcall("setSubscribeStateChange",e)},setNextVideoInfo:function(e){Q.log.log("setNextVideoInfo:"+JSON.stringify(e)),this._flashcall("setNextQiyiVideoInfo",e)},setFullMoive:function(e){this._flashcall("setQiyiFullMoive",e)},setEPG:function(e){this._flashcall("setEPG",e)},expand:function(e){this._flashcall("expand",e)},forceToSaveCurVideoInfo:function(e){Q.log.log("forceToSaveCurVideoInfo:"+JSON.stringify(e)),this._flashcall("forceToSaveCurVideoInfo",e)},resumeVideo:function(e){Q.log.log("resumeQiyiVideo:"+JSON.stringify(e)),this._flashcall("resumeQiyiVideo",e)},setContinuePlayState:function(e){Q.log.log("setContinuePlayState:"+JSON.stringify(e)),this._flashcall("setContinuePlayState",e)},switchVideo:function(e){Q.player.demandPb&&Q.player.demandPb();var t=this;this.getVideoInfo(function(n){n.tvid!=e.tvid&&(Q.log.log("switchVideo:"+JSON.stringify(e)),t._flashcall("switchVideo",e))})},switchNextVideo:function(){this._flashcall("switchNextVideo")},switchPrevVideo:function(){this._flashcall("switchPreVideo")},getSwitchVideoType:function(e){this._flashcall("getSwitchVideoType",void 0,e)},addVideoList:function(e){this._flashcall("addVideoList",e)},removeVideoList:function(e){this._flashcall("removeVideoList",e)},removeFromList:function(e){Q.log.log("removeFromList:"+JSON.stringify(e)),this._flashcall("removeVideoList",e)},revertFromList:function(e){Q.log.log("revertFromList:"+JSON.stringify(e)),this._flashcall("revertFromList",e)},notifyAdClick:function(){Q.log.log("notifyAdClick:"+JSON.stringify()),this._flashcall("notifyAdClick")},setDeskTVInfo:function(e){Q.log.log("setDeskTVInfo:"+JSON.stringify(e)),this._flashcall("setDeskTVInfo",e)},setFocusResult:function(e){Q.log.log("setFocusResult:"+JSON.stringify(e)),this._flashcall("setFocusResult",e)},setFocusInfo:function(e){Q.log.log("setFocusInfo:"+JSON.stringify(e)),this._flashcall("setFocusInfo",e)},setFlashLotteryInfo:function(e){this._flashcall("setFlashLotteryInfo",e)},setBarrageStatus:function(e){this._flashcall("setBarrageStatus",e)},setSelfSendBarrageInfo:function(e){this._flashcall("setSelfSendBarrageInfo",e)},setBarrageSetting:function(e){this._flashcall("setBarrageSetting",e)},setPlayerChangeToSmall:function(e){this.smallWindowMode=e,this._flashcall("setSmallWindowMode",e)},loadQiyiVideo:function(e){this._flashcall("loadQiyiVideo",e)},setActivityNoticeInfo:function(e){this._flashcall("setActivityNoticeInfo",e)},initQiyiVideo:function(){this._flashcall("initQiyiVideo")},zoomVideo:function(e){this._flashcall("zoomVideo",e)},zoomQiyiVideo:function(e){this._flashcall("zoomQiyiVideo",e)},setTimeListener:function(e){this._flashcall("setTimeListener",e)},liveChatMessage:function(e){this._flashcall("liveChatMessage",e)}}})});
define("kit/flashPlayer.js",["./player","./videoInfo"],function(e,t,n){var a=e("./player"),i=e("./videoInfo"),r=new Q.ic.InfoCenter({moduleName:"FlashPlayer"});n.exports=Q.Class("FlashPlayer",{extend:a,construct:function(e){this.callsuper(e);var t=Q.$("*[data-widget-player]"),n=Q.url.queryToJson(window.location.search);this._tvid=n.tvid||t&&t.attr("data-player-tvid")||"",this._videoid=n.videoid||t&&t.attr("data-player-videoid")||"",this._fire()},methods:{load:function(e){Q.log.log("js call load"),this._flashcall("loadQiyiVideo",e)},loadLocal:function(e){this._flashcall("loadQiyiVideoLocal",e)},play:function(){this._flashcall("playQiyiVideo"),Q.log.log("js call play")},resume:function(){this._flashcall("resumeQiyiVideo"),Q.log.log("js call resume")},replay:function(){this._flashcall("replayQiyiVideo"),Q.log.log("js call replay")},pause:function(){this._flashcall("pauseQiyiVideo")},seek:function(e){this._flashcall("seekQiyiVideo",e)},stop:function(){Q.log.log("js call stop"),this._flashcall("stopQiyiVideo")},getPlayInfo:function(e){this._flashcall("getQiyiPlayerInfo",void 0,function(t){var n=t||"",a=n?JSON.parse(n.replace(/\r/g,"").replace(/\n/g,"")):"";a&&(a.currentTime=a.currentTime/1e3,e(a))})},getHasBarrageConfigInfo:function(){this._flashcall("getHasBarrageConfigInfo")},getCommentConfigInfo:function(){this._flashcall("getCommentConfigInfo")},getIsInMainVideo:function(e){this._flashcall("getIsInMainVideo",void 0,e)},getInitVideoInfo:function(e){e({vid:this._videoid,tvid:this._tvid})},getVideoInfo:function(e){var t=this;i.get({tvid:t._tvid,vid:t._videoid,usage:"pc"},function(t){e&&e(t)})},loadComplete:function(e){this._flashcall("loadComplete",void 0,e)},_fire:function(){var e=this,t=Q.event.customEvent;t.on("swf_playerStateChange",function(t){t=t||{},t.data=t.data||{};var n=t.data.state||"";Q.log.log(n+"--player state--"+(new Date).getTime()),t.data.vid!=e._videoid&&("dataready"==n.toLocaleLowerCase()&&(e._videoid=t.data.vid,e._tvid=t.data.tvid,e.getVideoInfo(function(t){t.ve=Q.getVideoEventID()||"",e.fire({type:"videoChanged",data:t})})),e.fire({type:"vidChanged",data:t.data})),e.fire({type:n.toLocaleLowerCase(),data:t.data})}),t.on("js_videoChanged",function(t){r.log("js_videoChanged"),e._videoid=t.data.vid,e._tvid=t.data.tvid,e.getVideoInfo(function(t){r.log("js_videoChanged fire videoChanged event"),e.fire({type:"videoChanged",data:t})})}),t.on("swf_playNextVideo",function(){e.fire({type:"playnext"})}),t.on("swf_loadComplete",function(t){t=t||{},t.data=t.data||{},e.fire({type:"loadComplete",data:t.data})}),t.on("swf_setLight",function(t){t=t||{},t.data=t.data||{};var n="false"==t.data.open;e.fire({type:"setLight",data:n})}),t.on("swf_moveToQitan",function(){var t=Q.$("[data-widget-qitancomment='comment']");if(t){e.fire({type:"setLight",data:!1}),e.setLight("true");var n=Q.page.getScrollTop(),a=t.getPosition(),i=Q.anim.create(t);i.onCompute=function(){window.scrollTo(0,this.info.scrollTo.animArray[this.counter]),this.counter++},i.duration(200).from("scrollTo",n).to("scrollTo",a.top-100).go()}}),t.on("swf_playerLoadSuccess",function(t){e.fire({type:"loadSuccess",data:t.data})}),t.on("swf_showLoginPanel",function(t){e.fire({type:"showLoginPanel",data:t.data})}),t.on("swf_expand",function(t){e.fire({type:"expand",data:t.data})}),t.on("swf_authenticationResult",function(t){e.fire({type:"authenticationResult",data:{isTryWatch:"true"==t.data.isTryWatch,tvid:t.data.tvid}})}),t.on("swf_recharge",function(t){t=t||{},t=t.data||{};var n=t.code,a=t.from,i=t.tvid,r=t.vid;e.fire({type:"recharge",data:{code:n,from:a,tvid:i,vid:r}})}),t.on("swf_subscribe",function(){e.fire({type:"subscribe"})}),t.on("swf_pgcFollow",function(t){e.fire({type:"pgcFollow",data:t.data})}),t.on("swf_refreshPage",function(){e.fire({type:"refreshPage"})}),t.on("swf_download",function(t){e.fire({type:"downloadVideo",data:t.data})}),t.on("swf_requestVideoList",function(t){e.fire({type:"flashRequireList",data:t})}),t.on("swf_requestLogin",function(){e.fire({type:"flashRequestLogin"})}),t.on("swf_switchFullScreen",function(t){e.fire({type:"switchFullScreen",data:t.data.value})}),t.on("swf_addToTable",function(){e.fire({type:"addToTable"})}),t.on("swf_focusTips",function(t){e.fire({type:"focusTips",data:t.data})}),t.on("swf_liveHitStopTime",function(t){e.fire({type:"liveHitStopTime",data:t.data})}),t.on("swf_programStateChange",function(t){e.fire({type:"programStateChange",data:t.data})}),t.on("swf_channelChanged",function(t){e.fire({type:"liveChannelChanged",data:t.data})}),t.on("swf_focusUploader",function(t){e.fire({type:"focusUploader",data:t.data})}),t.on("swf_getFocusInfo",function(t){e.fire({type:"getFocusInfo",data:t.data})}),t.on("swf_findGoods",function(t){e.fire({type:"findGoods",data:t.data})}),t.on("swf_barrageReply",function(t){e.fire({type:"barrageReply",data:t.data})}),t.on("swf_barrageReceiveData",function(t){e.fire({type:"barrageReceiveData",data:t.data})}),t.on("swf_setBarrageInteractInfo",function(t){e.fire({type:"setBarrageInteractInfo",data:t.data})}),t.on("swf_userClickScore",function(t){e.fire({type:"userClickScore",data:t.data})}),t.on("swf_barrageStateChange",function(t){e.fire({type:"barrageState",data:t.data})}),t.on("swf_setHasBarrageConfigInfo",function(t){e.fire({type:"setHasBarrageConfigInfo",data:t.data})}),t.on("swf_requestReward",function(t){e.fire({type:"requestReward",data:t.data})}),t.on("swf_setJsDoSomething",function(t){e.fire({type:"setJsDoSomething",data:t.data})}),t.on("swf_commentAllowed",function(t){e.fire({type:"commentAllowed",data:t.data})})}}})});
define("kit/remoteInterface.js",["./checkRemoteData","./rhf8vg","./qoepingback"],function(e,t,n){var a=e("./checkRemoteData"),i=e("./rhf8vg"),r="789f23df6ebb918b767638003f1e52f4",o=new Q.ic.InfoCenter({moduleName:"RemoteInterface"}),l=e("./qoepingback"),s=Q.Class("RemoteInterface",{construct:function(e){this._remoteInterfaces=e},methods:{send:function(e,t){var n=e.ifname,s=e.param,m=e.method||"GET",d=e.jsonp,h=e.spliter||"1",U=this,c=this._getIfData(n),V=new Date,u=e.timeout||2e4,p=e.withCredentials,f=e.ifr,g=e.dataType,y=Q.cookie.get("P00001"),b=e.qoe,v={data:s,dataType:g,method:m,jsonp:d,spliter:h,cors:e.cors,withCredentials:p,timeout:u,ifr:f,qoe:b,memory:e.memory,encodeFn:e.encodeFn,jsonpCallback:e.jsonpCallback,onsuccess:function(i,r){e.qoe&&l.sendQOEPingback(n+"_succ",e.startTime),new Date-V>5e3&&(o.log("RemoteInterface ["+n+"] timeout."),o.log("RemoteInterface ["+c.url+"] timeout.")),(d||"object"==typeof s&&("varname"in s||"cb"in s))&&("code"in r||(r={code:"A00000",data:r}));try{o.log("send url : "+U._getUrl(c.url,s)+", Check "+"result : "+a.check(c.struct,r))}catch(m){o.error("RemoteInterface error url "+c.url+";error message "+m.message)}t&&t(r)},onfailure:function(a,i){o.error("RemoteInterface onfailure url: "+c.url),o.error("RemoteInterface data: "+JSON.stringify(i)),e.qoe&&(i.code&&"A000000"===i.code?l.sendQOEPingback(n+"_succ",e.startTime):l.sendQOEPingback(n+"_err",e.startTime)),t&&t(i||{code:"E00000"})}};e.antiCsrf&&y&&(v.data=v.data||{},v.data.antiCsrf=Q.crypto.md5(y)),e.guard&&y&&(v.data=v.data||{},v.data.d41fc5=1*new Date+"",v.data.ea166b=Q.crypto.md5(y+r+v.data.d41fc5));var k=c.url;e.rhf8vg&&(s.isFromSafeLevel="1",k=i(c.url,s,e.safePlatFormKey,e.safeSrckeyKey,e.domain).fullUrl,v.data={}),e.startTime=+new Date,Q.http.json(k,v)},_getIfData:function(e){return this._remoteInterfaces[e]||this._remoteInterfaces},_log:function(e){o.log("iferror"+e)},_getUrl:function(e,t){var n=[];for(var a in t)n.push(a+"="+t[a]);return e+"?"+n.join("&")}}});n.exports=s});
define("interfaces/config.js",["../config/siteDomain","../kit/changeToTwUrl"],function(e,t,a){var n=e("../config/siteDomain"),i=e("../kit/changeToTwUrl").getHostname(),r=n.getDomain(),o="https";a.exports={http:{timeout:2e4},interfaces:{tm:"http://cache.m.iqiyi.com/h5/tmm/",mm:"http://qisu.video.qiyi.com/r/qisu/mac/mm/",a:"http://cache.m.iqiyi.com/h5/a/",ss:"http://cache.m.iqiyi.com/h5/s/",sc:"http://cache.m.iqiyi.com/h5/sd/",cp:"http://cache.m.iqiyi.com/h5/qiyichupin/",index:"http://cache.m.iqiyi.com/h5/index/",ch:"http://cache.m.iqiyi.com/h5/c/",p:"http://cache.m.iqiyi.com/p/",pc:"http://cache.m.iqiyi.com/pc/",pr:"http://cache.video.qiyi.com/pc/pr/",v:"http://cache.m.iqiyi.com/h5/vlist/",s:"http://cache.m.iqiyi.com/h5/slist/",sd:"http://cache.m.iqiyi.com/h5/sdate/",mt:"http://cache.m.iqiyi.com/qmt/",tmts:"http://cache.m.iqiyi.com/jp/tmts/",vj:"http://cache.m.iqiyi.com/jp/vi/",wx:"http://pub.m.iqiyi.com/api/getWxInfo",cu:"http://pub.m.iqiyi.com/api/getClientUrl",qipavs:"http://pub.m.iqiyi.com/qipa-api/services/source/status",qipaweixininfo:"http://qipa.iqiyi.com/qipa-api/services/weixin/sourceinfo",wxInfo:"http://pub.m.iqiyi.com/api/getWxInfo",topicAlbum:"http://cache.m.iqiyi.com/h5/tal/",topicBrother:"http://cache.m.iqiyi.com/h5/htl/",topicInfo:"http://cache.m.iqiyi.com/h5/ti/",topicList:"http://cache.m.iqiyi.com/h5/tl/",avlist:"http://cache.video.qiyi.com/jp/avlist/",sdvlst:"http://cache.video.qiyi.com/jp/sdvlst/",sdvlatest:"http://cache.video.qiyi.com/jp/sdvlst/latest",ssvlst:"http://cache.video.qiyi.com/jp/ssvlst/",sslst:"http://cache.video.qiyi.com/jp/sslst/",sdlst:"http://cache.video.qiyi.com/jp/sdlst/",othlist:"http://cache.video.qiyi.com/jp/othlist/",login:o+"://BEA3AA1908656AABCCFF76582C4C6660/apis/reglogin/login.action",authlogin:"http://passport."+r+"/apis/user/authlogin.action",getUserInfo:"http://passport.iqiyi.com/apis/user/get_info_by_uid.action",dyCheck:"http://subscription.iqiyi.com/dingyue/api/isSubscribed.action",dySet:"http://subscription.iqiyi.com/dingyue/api/subscribe.action",dyDel:"http://subscription.iqiyi.com/dingyue/api/unsubscribe.action",subVideo:"http://subscription.iqiyi.com/services/subscribe/add.htm",unsubVideo:"http://subscription.iqiyi.com/services/subscribe/cancel.htm",collectVideo:"http://subscription.iqiyi.com/services/subscribe/toCollect.htm",ugcMyspaceEdit:"http://www.iqiyi.com/u/api/user/get_my_space",ugcMyspaceSave:"http://www.iqiyi.com/u/api/space_settings/set_my_space",ugcMyspaceUpload:"http://www.iqiyi.com/u/api/user/space_upload_pic",ugcNewspaceUpload:"http://renzheng.iqiyi.com/services/custom/uploadpic.htm",ugcMyspaceVideoList:"http://www.iqiyi.com/u/api/user/get_my_space_video_list",ugcMyspaceVideoListAlbum:"http://www.iqiyi.com/u/api/space/video/get_list",ugcGetPlayHistory:"http://www.iqiyi.com/u/api/get_paged_play_record",ugcSetNickname:"http://www.iqiyi.com/u/api/user/set_uname",ugcSetOtherInfo:"http://www.iqiyi.com/u/api/user/set_user_otherinfo",ugcSetUserInfo:"http://passport.iqiyi.com/apis/user/update_info.action",ugcSetOtherUserInfo:"http://passport.iqiyi.com/apis/user/update_ext_info.action",ugcSetExperienceInfo:"http://passport.iqiyi.com/apis/ext/update_experiences.action",ugcGetSchoolList:"http://passport.iqiyi.com/apis/ext/get_school_list.action",ugcGetSchoolInfo:"http://passport.iqiyi.com/apis/ext/query_school.action",ugcUpdatePushWay:"http://subscription.iqiyi.com/dingyue/pushway/updatePushWay.action",setPrivateInfo:"http://passport.iqiyi.com/apis/user/set_private_info.action",ugcIsEmailActived:"http://passport.iqiyi.com/apis/email/is_activated.action",ugcActiveEmail:"http://passport.iqiyi.com/apis/user/send_activation_email.action",ugcFlowStatistics:"http://www.iqiyi.com/u/api/stat/get_vv",ugcFansStatistics:"http://www.iqiyi.com/u/api/stat/get_fans",ugcBonusStatistics:"http://www.iqiyi.com/u/api/stat/get_money",ugcBonusHistory:"http://www.iqiyi.com/u/api/stat/get_money_table",ugcHotVideoRank:"http://www.iqiyi.com/u/api/stat/get_hot_video",ugcPlaySrcRank:"http://www.iqiyi.com/u/api/stat/get_video_source",ugcSaveVideoInfo:"/api/video/save_video_info",ugcAddFollow:"http://i.iqiyi.com/u/api/relation/follow",ugcRemoveFollow:"http://i.iqiyi.com/u/api/relation/unfollow",ugcPushFollow:"http://www.iqiyi.com/u/api/relation/get_recommendation_users",ugcRemoveFans:"http://www.iqiyi.com/u/api/relation/remove_fans",ugcGetFans:"http://www.iqiyi.com/u/api/relation/get_fans",ugcGetFollows:"http://www.iqiyi.com/u/api/space/relation/get_list",ugcGetFollower:"http://www.iqiyi.com/u/api/relation/get_follower",ugcGetTimeline:"http://www.iqiyi.com/u/api/timeline/get_user_timeline",ugcGetTimeline2:"http://www.iqiyi.com/u/api/space/feed/get_list",ugcGetSubTimeline:"http://www.iqiyi.com/u/api/timeline/get_user_subscription_timeline",ugcGetRel:"http://sns.uc.iqiyi.com/apis/friend/are_friends.action",ugcGetColumns:"http://www.iqiyi.com/u/api/column/get_paged_guest_column",ugcGetColumnVideos:"http://www.iqiyi.com/u/api/column/get_guest_videos_by_column",ugcGetColumnVideosForRecm:"http://www.iqiyi.com/u/api/space/main/get_select_column_videos",ugcGetColumnList:"http://www.iqiyi.com/u/api/space/main/get_column_list",ugcGetSingleColumn:"http://www.iqiyi.com/u/api/space/main/get_singlecolumn",ugcGetColumnListOfSingleColumn:"http://www.iqiyi.com/u/api/space/main/get_li_columnlist",bigVugcGetVideoColumns:"http://www.iqiyi.com/u/api/V/video/get_paged_video",bigVugcGetBodanLists:"http://www.iqiyi.com/u/api/V/album/get_paged_album",bigVugcGetBodanVideos:"http://www.iqiyi.com/u/api/V/album/get_paged_video",ugcGetVideoList:"http://www.iqiyi.com/u/api/video/get_paged_video",ugcSearchVideo:"http://search.video.iqiyi.com/qiso3/",ugcSearchVideoForAddAlbum:"http://www.iqiyi.com/u/api/video/get_paged_video",ugcDelVideoList:"http://i.iqiyi.com/u/api/video/delete_video",ugcGetAlbumList:"http://i.iqiyi.com/u/api/album/get_paged_album",ugcDelAlbumList:"http://www.iqiyi.com/u/api/album/delete_album",ugcAddVideoListForAlbumList:"http://i.iqiyi.com/u/api/album/add_video2album",ugcRemoveVideoFromAlbum:"http://i.iqiyi.com/u/api/album/remove_video",ugcGetVideoFromAlbum:"http://www.iqiyi.com/u/api/video/get_paged_video_by_album",ugcSaveAlbumInfo:"http://www.iqiyi.com/u/api/album/save_album_info",ugcCheckAlbumInfo:"http://api.t.qiyi.com/qx_api/comment/admin/check_keywords",ugcCheckAlbumTitleRepeat:"http://i.iqiyi.com/u/api/album/checkRepeatAlbumName",ugcConvertPPSVideo:"http://i.iqiyi.com/u/api/video/repack",ugcGetAlbumOfVideo:"http://www.iqiyi.com/u/api/video/get_belonged_albums",ugcGetGuestAlbum:"http://www.iqiyi.com/u/api/album/get_paged_guest_album",ugcGetGuestAlbumVideo:"http://www.iqiyi.com/u/api/album/get_guest_videos_by_album",ugcSetAlbumCover:"http://www.iqiyi.com/u/api/album/change_album_poster",ugcValidateUrl:"http://www.iqiyi.com/u/api/album/validate_url",ugcGetPvStatus:"http://i.iqiyi.com/u/api/video/get_preview_status",getVideoTagSuggest:"http://www.iqiyi.com/u/api/video/get_tag_suggestion",saveVideoTags:"http://www.iqiyi.com/u/api/video/save_video_info",uploadVideo:"http://up.ipd.pps.tv/api/video/save_video_info",appealVideo:"http://i.iqiyi.com/u/api/video/webappeal",ugcAlbumSaveAlbum:"http://www.iqiyi.com/u/api/album/save_album_info",ugcAlbumGetPageVideo:"http://www.iqiyi.com/u/api/video/get_page_video",ugcAlbumGetVideo:"http://www.iqiyi.com/u/api/video/get_video",ugcAlbumGetPageAddedVideo:"http://www.iqiyi.com/u/api/video/get_videos_in_album",ugcRequestUploadImg:"http://upload.iqiyi.com/request_image_upload",ugcCrAutoSet:"http://www.iqiyi.com/u/api/video/process_setting",ugcCrGetInfringedVideos:"http://www.iqiyi.com/u/api/video/get_paged_copr",ugcCrGetInfringeVideos:"http://www.iqiyi.com/u/api/video/get_top_torts",ugcCrDealInfringe:"http://www.iqiyi.com/u/api/video/process_tort",ugcCrGetAppealVideos:"http://www.iqiyi.com/u/api/video/get_paged_tort",ugcCrSubmitAppealInfo:"http://www.iqiyi.com/u/api/video/appeal",ugcCrGetCount:"http://www.iqiyi.com/u/api/video/period_counter",getMyVideoList:"http://mixer.video.iqiyi.com/jp/mixin/videos/users/",getMyPlayList:"http://mixer.video.iqiyi.com/jp/mixin/playlists/users/",getMyAlbumList:"http://mixer.video.iqiyi.com/jp/albums/users/",getMyVideoOfRecmdVideoSet:"http://www.iqiyi.com/u/api/space/main/get_select_videos",getMyNewVideoOfRecmdVideoSet:"http://www.iqiyi.com/u/api/M/video/get_paged_video",getBigVVideoOfRecmdVideoSet:"http://www.iqiyi.com/u/api/V/player/get_select_albums",saveRecmdVideoSet:"http://www.iqiyi.com/u/api/space_settings/set_my_space",getMyZoneRecmdVideo:"http://www.iqiyi.com/u/api/space/main/get_recommendation_videos",getMyZoneAlbumList:"http://www.iqiyi.com/u/api/space/main/get_ablum_list",getMyZoneVideoList:"http://www.iqiyi.com/u/api/space/main/get_videos",getMyZoneSingleAlbum:"http://www.iqiyi.com/u/api/space/main/get_singleablum",getMyZoneFansList:"http://www.iqiyi.com/u/api/space/main/get_fans_list",getMyZoneFollowsList:"http://www.iqiyi.com/u/api/space/main/get_follow_list",saveMyZoneBlockSetting:"http://www.iqiyi.com/u/api/space_settings/setting_block",getAlbumListOfSingleAlbum:"http://www.iqiyi.com/u/api/space/main/get_li_ablumlist",getCustomHtml:"http://www.iqiyi.com/u/api/space_settings/get_html",getSpaceTab:"http://www.iqiyi.com/u/api/space_settings/get_space_tab",setSpaceTab:"http://www.iqiyi.com/u/api/space_settings/set_space_tab",getWeiboHtml:"http://www.iqiyi.com/u/api/space_settings/get_weibo_html",getLunbo:"http://www.iqiyi.com/u/api/space_settings/get_piclist",ugcGetFavList:"http://www.iqiyi.com/u/api/fav/get_paged_fav",ugcDelFavList:"http://www.iqiyi.com/u/api/fav/del_fav",brandBlockSave:"http://renzheng.iqiyi.com/services/custom/setModule.htm",brandPositionSave:"http://renzheng.iqiyi.com/services/custom/set.htm",brandBlockDel:"http://renzheng.iqiyi.com/services/custom/delModule.htm",ugcGetRecommendList:"http://www.iqiyi.com/u/api/space/main/get_recommendation_users",ugcLoginReadOne:"http://notice.iqiyi.com/apis/msg/update_status.action",ugcLogoutReadOne:"http://nl.notice.iqiyi.com/apis/msg/update_status.action",ugcLoginReadAll:"http://notice.iqiyi.com/apis/msg/update_all_status.action",ugcLogoutReadAll:"http://nl.notice.iqiyi.com/apis/msg/update_all_status.action",ugcLoginDelOne:"http://notice.iqiyi.com/apis/msg/del.action",ugcLogoutDelOne:"http://nl.notice.iqiyi.com/apis/msg/del.action",ugcLoginDelAll:"http://notice.iqiyi.com/apis/msg/del_all.action",ugcLogoutDelAll:"http://nl.notice.iqiyi.com/apis/msg/del_all.action",ugcGetUpdate:"http://www.iqiyi.com/u/api/news/update",ugcGetComment:"http://www.iqiyi.com/u/api/news/comment",ugcReplyComment:"http://api.t.iqiyi.com/qx_api/comment/reply",ugcGetPmList:"http://www.iqiyi.com/u/api/news/message",ugcSendPrivateMsg:"http://notice.iqiyi.com/apis/msg/send_private_msg.action",ugcGetPmDialogList:"http://www.iqiyi.com/u/api/news/dialog",ugcGetFavorList:"http://www.iqiyi.com/u/api/news/like",ugcGetNoticeList:"http://www.iqiyi.com/u/api/news/note",ugcGetUserPopup:"http://www.iqiyi.com/u/api/user/user_card",ugcGetUserPopup2:"http://i.iqiyi.com/u/api/user/userInfofloat",ugcUploadTagSegment:"http://qiqu.iqiyi.com/apis/video/tags/getsegment",ugcGetllegalUrl:"http://kylin.sp.iqiyi.com/shield/check_character",ugcSetBlockStatus:"http://www.iqiyi.com/u/api/home_settings/set_block_status",ugcModuleOperate:"http://www.iqiyi.com/u/api/space_settings/move_block",ugcgetFansList:"http://www.iqiyi.com/u/api/space/main/get_fans_list",ugcgetFollowList:"http://www.iqiyi.com/u/api/space/main/get_follow_list",ugcGetFeedList:"http://www.iqiyi.com/u/api/space/main/get_feed_list",ugcGetRecommendVideo:"http://www.iqiyi.com/u/api/space/main/get_player",ugcRelatedTags:"http://qiqu.iqiyi.com/apis/tags/relatedtags/get",ugcGetTagUrl:"http://qiqu.iqiyi.com/apis/tags/geturl",updateSubs:"http://timeline.i.iqiyi.com/timeline-api/get_friends_recent_feeds",userRecomd:"http://qiyu.iqiyi.com/user",tagsVI:"http://qiqu.iqiyi.com/apis/video/tags/get",ugcVI:"http://mixer.video.iqiyi.com/jp/mixin/videos/",ugcVRecommend:"http://mixer.video.iqiyi.com/jp/recommend/videos",upDownQuery:"http://up.video.iqiyi.com/ugc-updown/quud.do",upDownUpdate:"http://up.video.iqiyi.com/ugc-updown/aud.do",ugcCollections:"http://mixer.video.iqiyi.com/jp/mixin/collections/",userRecommend:"http://mixer.video.iqiyi.com/jp/recommend/users",tvProgram:"http://mixer.video.iqiyi.com/jp/lives/programs/channels",getRelatedBodan:"http://qiyu.iqiyi.com/portal/resys30",voteQuery:"http://up.video.iqiyi.com/ugc-updown/qudb.do",voteUpdate:"http://up.video.iqiyi.com/ugc-updown/aud.do",voteBoxQuery:"http://vote.i.iqiyi.com/eagle/outer/get_simple_votes",voteBoxUpdate:"http://vote.i.iqiyi.com/eagle/outer/join_vote",navNew:"http://notice.iqiyi.com/apis/msg/mixer/navnew.action",getLoginNavMsg:"http://notice.iqiyi.com/apis/msg/mixer/navall.action",getLogoutNavMsg:"http://nl.notice.iqiyi.com/apis/msg/mixer/navall.action",getLoginNavMsgCnt:"http://notice.iqiyi.com/apis/msg/hasnew.action",getLogoutNavMsgCnt:"http://nl.notice.iqiyi.com/apis/msg/hasnew.action",getBread:"http://cache.video.qiyi.com/cms/",getOnlineVideo:"/api/video/get_outsite_video_info",ugcGetBigVTimeLine:"http://www.iqiyi.com/u/api/bigv/timeline/get_user_timeline",ugcGetBigVUsers:"http://www.iqiyi.com/u/api/bigv/category/usersinfo",soundAlbums:"http://mixer.video.iqiyi.com/jp/mixin/albums/",soundVideos:"http://mixer.video.iqiyi.com/jp/mixin/videos/",episodeVideoPlay:"http://mixer.video.iqiyi.com/jp/mixin/videos/",delResAll:"http://api.t.iqiyi.com/qx_api/comment/delete_passportmsg_by_contentids",readResAll:"http://notice.iqiyi.com/apis/msg/update_all_status.action",getPlayMovSite:"http://rq.video.iqiyi.com/aries/e.jsonp",getPlayTvSite:"http://search.video.iqiyi.com/m?if=video_library&video_library_type=play_source&platform=1",getPlayTvUgc:"http://rq.video.iqiyi.com/aries/u.jsonp",getMovlbnewsData:"http://rq.video.iqiyi.com/aries/t/l.fjsonp",getMovlbpreviewData:"http://rq.video.iqiyi.com/aries/t/p.fjsonp",getMovlbpartData:"http://rq.video.iqiyi.com/aries/t/t.fjsonp",getMovlbpiclistData:"http://rq.video.iqiyi.com/aries/t/i.fjsonp",getMovPicView:"http://rq.video.iqiyi.com/aries/i.jsonp",getMovlblistData:"http://rq.video.iqiyi.com/aries/t/a.fjsonp",getRelatedStars:"http://rq.video.iqiyi.com/star/s/rs.jsonp",getBaiduPrivilege:"http://passport.iqiyi.com/apis/thirdparty/privilege.action",getSearchTopNews:"http://search.video.qiyi.com/m?if=video_library",p13nRecommend:"http://qiyu.iqiyi.com/p13n",p13n20Recommend:"http://qiyu.iqiyi.com/p13n20",getVoteRankStar:"http://vote.i.iqiyi.com/eagle/runman/get_rank_star",getVienxRankStar:"http://product.vienx.iqiyi.com/v1/rank/sendgift.json",getRunmanVotes:"http://vote.i.iqiyi.com/eagle/runman/get_vote",getBatchCommentCount:"http://api.t.iqiyi.com/qx_api/comment/get_batch_count",getVoteMsg:"http://api.t.iqiyi.com/qx_api/comment/vote/get_vote_detail",voteJoined:"http://api.t.iqiyi.com/qx_api/comment/vote/join_vote",deleteFeedUrl:"http://www.iqiyi.com/u/api/timeline/del_feed",huatiGetPersonalVote:"http://vote.i.iqiyi.com/eagle/outer/get_personal_vote",huatiJoinVote:"http://vote.i.iqiyi.com/eagle/outer/join_common_vote",huatiGetVotes:"http://vote.i.iqiyi.com/eagle/outer/get_votes",qjDrawLottery:"http://uaa.iqiyi.com/qiji_draw_lottery/interface/draw_lottery.json",getActivityNews:"http://www.iqiyi.com/qiji/notice",getFeatureTop:"http://top.inter.qiyi.com/index/feature",suggest:"http://suggest.video.iqiyi.com/",suggestZhidahao:"http://renzheng.iqiyi.com/services/zhidahao/stickylist.htm",hotWord:"http://search.video.qiyi.com/m",getRelatedStar:"http://qipu.qiyi.com/graph/getRelatedCelebrities",getRelatedStarWithAlbumId:"http://qipu.qiyi.com/graph/getRelatedCelebritiesOfVideo",intentStarProperty:"http://so.iqiyi.com/intentStarProperty",IntentRecognitionInterface:"http://so.iqiyi.com/intent?if=video&type=list&pos=1",intentRole:"http://so.iqiyi.com/intentRole?if=video&type=list&pos=1",intentVideo:"http://so.iqiyi.com/intentVideo?if=video&type=list&pos=1",scenceshot:"http://so.iqiyi.com/scenceshot",matches:"http://mixer.video.iqiyi.com/jp/w/apis/v1/sports/",getStarPicPreview:"http://rq.video.iqiyi.com/star/s/p.jsonp",getStarpiclistData:"http://rq.video.iqiyi.com/star/s/i.jsonp",getStarworksData:"http://rq.video.iqiyi.com/star/s/w.jsonp",getPayment:"http://www.iqiyi.com/u/api/stat/get_payment",requestPayment:"http://www.iqiyi.com/u/api/stat/request_payment",rebaseUserInfo:"http://passport.pps.tv/apis/user/authlogin.action",getUsOpenGuessInfo:"http://vote.i.iqiyi.com/eagle/extension/usopen/get_user_votes_info",getWorldCupGuessInfo:"http://vote.i.iqiyi.com/eagle/extension/worldcup/get_user_votes_info",snsTextShare:"http://passport."+r+"/apis/share/textshare.action",getWCLotteryLimit:"http://api.credit.iqiyi.com/services/worldcup/canLottery",uaaIsEmpty:"http://uaa.iqiyi.com/video_index/v1/is_album_empty",feedBackGetTicket:"http://feedback.iqiyi.com/f/b/g.html",feedBackSave:"http://feedback.iqiyi.com/f/b/s.html",fbCheck:"http://feedback.iqiyi.com/new/check_around",fbQlist:"http://feedback.iqiyi.com/new/get_questions",fbSubmit:"http://feedback.iqiyi.com/new/save_feedback",appStoreMgrLogin:"/login.action",appStoreMgrGetAppList:"/app/getpage.action",appStoreMgrCreateApp:"/app/add.action",appStoreMgrUpdateApp:"/app/update.action",appStoreMgrGetAppInfo:"/app/showdetail.action",appStoreMgrSetAppStatus:"/app/set_status.action",appStoreMgrCreateDev:"/developer/add.action",appStoreMgrGetDevList:"/developer/getpage.action",appStoreMgrUpdateDev:"/developer/update.action",appStoreMgrDelDev:"/developer/delete.action",appStoreMgrDetailApp:"/app/detail.action",appStoreSimilarGame:"/app/searchgame.action",appStoreAppCategory:"/app/category.action",appStoreAppSearch:"/app/search.action",appStoreAppAudit:"/app/audit.action",appStoreDevMgrGetAppList:"/developer/app/getpage.action",appStoreDevMgrGetAppInfo:"/developer/app/showdetail.action",appStoreDevMgrUpdateApp:" /developer/app/update.action",appStoreDevAppSearch:"/developer/app/search.action",appStoreDevMgrOnline:"/developer/app/set_online.action",appStoreDevMgrCreateApp:"/developer/app/add.action",appStoreDevMgrDetailApp:"/developer/app/detail.action",appStoreDevSimilarGame:"/developer/app/searchgame.action",appStoreDevAppCategory:"/developer/app/category.action",openapiSendMailCode:"/developer/register/captcha/send",openapiCheckMailCode:"/developer/register/captcha/check",openapiCreateApp:"/developer/app/create",openapiDevSaveDetail:"/developer/register/info/submit",openapiDevAuditList:"/developer/manager/developer/search",openapiDevAuditView:"/developer/manager/developer/detail",openapiDevSetAudit:"/developer/manager/developer/audit",openapiAppCreate:"/developer/app/create",openapiAppView:"/developer/app/detail",openapiAppUpdate:"/developer/app/update",openapiAppSearch:"/developer/app/search",openapiCustomizePlayer:"/developer/player/meta/info",openapiPlayerSearch:"/developer/player/meta/getAppAuthority",openapiCreateSdk:"/developer/resource/sdk/add",openapiViewRes:"/developer/resource/detail",openapiUpdateResPage:"/developer/resource/updatePage",openapiUpdateRes:"/developer/resource/update",openapiDelRes:"/developer/resource/delete",openapiCreateDoc:"/developer/resource/doc/add",openapiCreateApi:"/developer/resource/api/add",openapiSearchRes:"/developer/resource/search",openapiSearchMsg:"/developer/message/user/list",openapiSendMsg:"/developer/message/mgr/send",openapiPersonReport:"/developer/statistic/personal/search",openapiMgrReport:"/developer/statistic/mgr/search",openapiPersonExportVV:"/developer/statistic/download/personal/report/apptv",openapiPersonExportDown:"/developer/statistic/download/personal/report/app",openapiMgrExportVV:"/developer/statistic/download/mgr/report/appvv",openapiMgrExportDown:"/developer/statistic/download/mgr/report/app",openapiAppAuditList:"/developer/manager/app/search",openapiAppAuditView:"/developer/manager/app/detail",openapiAppSetAudit:"/developer/manager/app/audit",openapiviewAppAuth:"/developer/manager/developer/audit",openapiBulletinSearch:"/developer/index/broadCast",openapiVideoList:"/developer/file/list",openapiAddAlbum:"/developer/file/addAlbumUpload",openapiEditVideo:"/developer/file/info",openapiDelVideoList:"/developer/file/delete",openapiViewDevInfo:"/developer/manager/develop/audit",getVipBuyFrag:"http://serv.vip.iqiyi.com/pay/buyLayer.action",checkBuyState:"http://api.vip.iqiyi.com/services/at.action",subcribleLive:"http://serv.vip.iqiyi.com/vms/api/process.action",saveRemindPhone:"http://serv.vip.iqiyi.com/user/stat/saveValue.action",getSteamBuyFrag:"http://serv.vip.iqiyi.com/pay/movieLayerSp.action",getHuatiInfo:"http://qiqu.iqiyi.com/apis/topic/videolist",uploadSettingOfVideo:"http://qiyu.iqiyi.com/theme_p13n/set_init",uploadScoreOfVideo:"http://score.video.iqiyi.com/beaver-api/external/add_movie_score",uploadActionOfVideo:"http://qiyu.iqiyi.com/movie_p13n/record_action",getActionOfVideo:"http://qiyu.iqiyi.com/movie_p13n/read_action",saveUserTag:"http://usergame.iqiyi.com/services/usertag/save",getVideoScore:"http://score.video.iqiyi.com/beaver-api/external/get_user_movie_score",ucUnSub:"http://subscription.iqiyi.com/services/subscribe/cancel.htm",ucRtUpUr:"http://subscription.iqiyi.com/services/subscribe/resetUnread.htm",ufavUrl:"http://www.iqiyi.com/u/fav?",userProfilePlatform:"http://uaa.iqiyi.com/video_index/v1/fgtw/get_platform_distribution",userProfileProvince:"http://uaa.iqiyi.com/video_index/v1/fgtw/get_province_distribution",userProfilePhoto:"http://uaa.iqiyi.com/video_index/v1/fgtw/get_user_profile",platformDistribution:"http://uaa.iqiyi.com/video_index/v1/get_platform_distribution",provinceDistribution:"http://uaa.iqiyi.com/video_index/v1/get_province_distribution",albumUserPhoto:"http://uaa.iqiyi.com/video_index/v1/get_user_profile",albumInfo:"http://mixer.video.iqiyi.com/jp/albums/",followCountUr:"http://sns.uc.iqiyi.com/apis/friend/user_fans_cnt.action",utwfavUrl:"http://"+i+"/u/fav?",urecordUrl:"http://www.iqiyi.com/u/record?",utwrecordUrl:"http://"+i+"/u/record?",getTagsetUser:"http://qiqu.iqiyi.com/apis/tagsetusers",addToFavorite:"http://mall.iqiyi.com/apis/favourite/save.action",isFavorite:"http://mall.iqiyi.com/apis/favourite/is_favor.action",removeFromFavorite:"http://mall.iqiyi.com/apis/favourite/remove.action",getAwardList:"http://query.reward.iqiyi.com/play/queryUserReward.action",getRewardInfo:"http://query.reward.iqiyi.com/pay/queryPayList.action",getBigVRewardInfo:"http://query.reward.iqiyi.com/zone/queryUserReward.action",getBigVRankInfo:"http://query.reward.iqiyi.com/fansOfVRank/queryRewardHero.action",resources:"http://mixer.video.iqiyi.com/jp/mixin/resources/"}}});
define("kit/userInfo.js",["../config/siteDomain","../interfaces/isLogin","../action/reLogin"],function(require,exports,module){var ic=new Q.ic.InfoCenter({moduleName:"kit/userInfo"}),siteDomain=require("../config/siteDomain"),customEvent=Q.event.customEvent,RIIsLogin=require("../interfaces/isLogin"),relogin=require("../action/reLogin"),callbackList=[],UserInfo=Q.Class("UserInfo",{properties:{uid:"",name:"",phone:"",icon:"",email:"",deadline_date:"",deadline_t:"",deadline_day:"",level:"",vipType:"",payType:"",remind:"",status:"",isThirdParty:!1,thirdPartyFrom:"",type:"",mobile:"",vip:!1,mediaBigVUser:!1,shareProfitUser:void 0,lockedVip:!1,expireVip:!1,expectPayVip:!1,mobilePayVip:!1,bindedSNS:null,isLoginInfo:null,accounts:null,tokens:null,subaccount:null,surplus:"",isAwardVip:!1,pps:!1,isAutoRenew:!1,isHitUser:null,isAbLogin:null},construct:function(){this.hasVipInfo=!1,this.isValidVip=!1},methods:{init:function(){this.bindEvent(),this.checkUserInfo()},bindEvent:function(){customEvent.on("login",this.doLogin.bind(this)),customEvent.on("logout",this.doLogout.bind(this))},doLogin:function(){this.checkUserInfo()},doLogout:function(){this.clearUserInfo()},checkUserInfo:function(){if(this.isLogin()){var p00002=Q.cookie.get("P00002");null!==p00002&&""!==p00002&&(p00002=window.JSON?window.JSON.parse(p00002):eval("("+p00002+")"),this.uid=p00002.uid,this.name=p00002.nickname,this.email=p00002.email)}},getUserInfo:function(){if(this.isLogin()){var p00002=Q.cookie.get("P00002");if(null!==p00002&&""!==p00002)return window.JSON?window.JSON.parse(p00002):eval("("+p00002+")")}},getSubAuthCookies:function(){var e=Q.cookie.get("P00007");return"deleted"===e&&(e=""),e},getAuthCookies:function(){var e=Q.cookie.get("P00001");return"deleted"===e&&(e=""),e},getIsThirdParty:function(){return this.isThirdParty},setIsThirdParty:function(e){return this.isThirdParty=e,this.isThirdParty},checkVipInfo:function(e,t){this.isLogin()&&(this.hasVipInfo?e&&e(t?this[t]:""):this.getInfoFromInterface(e,t))},getInfoFromInterface:function(e,t){var n=this;if(n.isLoginInfo)e&&e(t?n[t]:"");else if(callbackList&&callbackList.length)callbackList.push({cb:e,param:t});else{callbackList.push({cb:e,param:t});var a={};a.param=a.param||{},a.dataType="jsonp";var i=new RIIsLogin;i.sendInfoAction(a,function(e){if("A00005"==e.code||"A00055"==e.code)relogin.reLogin(e);else{if("A00000"==e.code){n.setVipInfo(e.data||{}),n.isLoginInfo=e.data.userinfo||{},n.phone=e.data.userinfo.phone||" ",n.icon=e.data.userinfo.icon||" ";var t=n.isMain(e.data.accounts);n.thirdPartyFrom=t||"10",n.accounts=e.data.accounts||[],n.tokens=e.data.tokens||{},n.setShareProfitUserInfo(e.data||{}),n.setMediaBigVUser(e.data||{}),n.isHitUser=e.data.insecure_account||" ",n.isAbLogin=e.data.ablogin}else ic.warn("调用vip信息接口（http://passport.iqiyi.com/apis/user/info.action）失败。"),n.clearVipInfo();for(var a;callbackList&&callbackList.length>0;)try{var i=callbackList.shift();a="A00000"==e.code?i.param?n[i.param]:"":!1,i.cb&&i.cb(a)}catch(r){ic.log(r)}}})}},getBindedSnsInfo:function(e){var t=this;this.tokens?e&&e(this.tokens):this.getInfoFromInterface(function(){e&&e(t.tokens)})},getPhoneInfo:function(e){var t=this;this.phone?e&&e(this.phone):this.getInfoFromInterface(function(){e&&e(t.phone)})},getIconInfo:function(e){var t=this;this.icon?e&&e(this.icon):this.getInfoFromInterface(function(){e&&e(t.icon)})},isMain:function(e){for(var t,n=0;n<e.length;n++)e[n].is_main===!0&&(t=e[n].type);return t},getThirdPartyFromInfo:function(e){var t=this;this.getInfoFromInterface(function(){e&&e(t.thirdPartyFrom)})},getIsLoginInfo:function(e){var t=this;t.isLoginInfo?e&&e(t.isLoginInfo):t.getInfoFromInterface(function(n){n||""===n?e&&e(t.isLoginInfo):e&&e({})})},getAllAccountsInfo:function(e){var t=this;t.accounts?e&&e(t.accounts):t.getInfoFromInterface(function(){e(t.accounts)})},setVipInfo:function(e){var t=e.qiyi_vip_info||{},n=parseFloat(t.type,10);if(this.isAwardVip=e.award_vip?!0:!1,this.vip=n?!0:!1,t.level&&(this.level=t.level+""),n){var a=0;t.deadline&&(a=t.deadline.t,this.deadline_t=a,this.deadline_date=t.deadline.date+"",this.deadline_day=t.surplus),this.vipType=t.vipType+"",this.payType=t.payType+"",this.remind=void 0,this.status=t.status+"",this.type=t.type+"",this.mobile=t.mobile+"",this.lockedVip="1"==t.type&&"2"==t.status,this.expireVip="1"==t.type&&"3"==t.status,this.expectPayVip="1"==t.type&&"1"==t.status&&"0"==t.payType,this.mobilePayVip="1"==t.type&&"1"==t.status&&"1"==t.payType,this.surplus=t.surplus+"",this.hasVipInfo=!0,this.isValidVip="1"==t.status,this.autoRenew=t.autoRenew}},setShareProfitUserInfo:function(e){var t=e.verify_info,n=t.verifyState,a=t.verifyClass;isNaN(n)||isNaN(a)||(this.shareProfitUser=(4==n||5==n)&&3==a)},setMediaBigVUser:function(e){if(e){var t=e.verify_info,n=t.verifyState,a=t.copyright;isNaN(n)||isNaN(a)||(this.mediaBigVUser=4==n&&1==a)}},clearUserInfo:function(){this.uid="",this.name="",this.icon="",this.email="",this.phone="",this.clearVipInfo(),this.shareProfitUser=void 0,this.mediaBigVUser=!1,this.bindedSNS=null,this.isLoginInfo=null,this.accounts=null,this.tokens=null,this.subaccount=null,this.thirdPartyFrom="",this.isHitUser="",this.isAbLogin=""},clearVipInfo:function(){this.deadline_date="",this.deadline_day="",this.deadline_t="",this.level="",this.vipType="",this.payType="",this.remind="",this.status="",this.type="",this.mobile="",this.vip=!1,this.lockedVip=!1,this.expireVip=!1,this.expectPayVip=!1,this.mobilePayVip=!1,this.hasVipInfo=!1,this.surplus="",this.isValidVip=!1,this.autoRenew=!1},isLogin:function(){return""!==Q.cookie.get("P00002")&&null!==Q.cookie.get("P00002")&&"deleted"!==Q.cookie.get("P00002")&&""!==Q.cookie.get("P00003")&&null!==Q.cookie.get("P00003")&&"deleted"!==Q.cookie.get("P00003")},isVip:function(e){return this.checkVipInfo(e,"vip"),this.vip},isShareProfitUser:function(e){return void 0===this.shareProfitUser?this.getInfoFromInterface(e,"shareProfitUser"):e&&e(this.shareProfitUser),this.shareProfitUser},isMediaBigVUser:function(e){return this.getInfoFromInterface(e,"mediaBigVUser"),this.mediaBigVUser},isPPS:function(){return 10001<=parseInt(this.getUid(),10)&&parseInt(this.getUid(),10)<=564375554&&(this.pps=!0),this.pps},isAutoRenew:function(e){return this.checkVipInfo(e,"autoRenew"),this.autoRenew},getUserHit:function(e){var t=this;this.isHitUser?e&&e(this.isHitUser):this.getInfoFromInterface(function(){e&&e(t.isHitUser)})},getUserAbLogin:function(e){var t=this;this.isAbLogin?e&&e(this.isAbLogin):this.getInfoFromInterface(function(){e&&e(t.isAbLogin)})},isThirdPartyAccount:function(){if(!this.isLogin())return!1;var e=this.getUserInfo(),t=parseInt(e.type,10),n=parseInt(e.uid,10);return!!(t&&13!==t&&n>2e9&&3e9>n)},isLockedVip:function(e){return this.checkVipInfo(e,"lockedVip"),this.lockedVip},isExpireVip:function(e){return this.checkVipInfo(e,"expireVip"),this.expireVip},isExpectPayVip:function(e){return this.checkVipInfo(e,"expectPayVip"),this.expectPayVip},isMobilePayVip:function(e){return this.checkVipInfo(e,"mobilePayVip"),this.mobilePayVip},getUid:function(){return this.uid},getName:function(){return this.name},getIcon:function(e){return this.getIconInfo(e,"icon"),this.icon},getPhone:function(e){return this.getPhoneInfo(e,"phone"),this.phone},getThirdPartyFrom:function(e){return this.getThirdPartyFromInfo(e,"thirdPartyFrom"),this.thirdPartyFrom},getEmail:function(){return this.email},getDeadlineDate:function(e){return this.checkVipInfo(e,"deadline_date"),this.deadline_date},getDeadlineTime:function(e){return this.checkVipInfo(e,"deadline_t"),this.deadline_t},getDeadlineDay:function(e){return this.checkVipInfo(e,"deadline_day"),this.deadline_day},getLevel:function(e){return this.checkVipInfo(e,"level"),this.level},getVipType:function(e){return this.checkVipInfo(e,"vipType"),this.vipType},getPayType:function(e){return this.checkVipInfo(e,"payType"),this.payType},getRemind:function(e){return this.checkVipInfo(e,"remind"),this.remind},getStatus:function(e){return this.checkVipInfo(e,"status"),this.status},getType:function(e){return this.checkVipInfo(e,"type"),this.type},getMobile:function(e){return this.checkVipInfo(e,"mobile"),this.mobile},getSurplus:function(e){return this.checkVipInfo(e,"surplus"),this.surplus},getIsValidVip:function(e){return this.checkVipInfo(e,"isValidVip"),this.isValidVip},getAwardVip:function(e){return this.checkVipInfo(e,"isAwardVip"),this.isAwardVip},isSubaccount:function(){var e=this.getUid();return!!(e+"").match(/^4\d{9}$/)},getHitUser:function(e){return this.getUserHit(e,"isHitUser"),this.isHitUser},getAblogin:function(e){return this.getUserAbLogin(e,"isAblogin"),this.isAblogin}}}),userInfo=new UserInfo;userInfo.init(),module.exports={getSubAuthCookies:function(){return userInfo.getSubAuthCookies()},isLogin:function(){return userInfo.isLogin()},getUid:function(){return userInfo.getUid()},getName:function(){return userInfo.getName()},getIcon:function(e){return userInfo.getIcon(e)},getThirdPartyFrom:function(e){return userInfo.getThirdPartyFrom(e)},getPhone:function(e){return userInfo.getPhone(e)},getAuthCookies:function(){return userInfo.getAuthCookies()},getEmail:function(){return userInfo.getEmail()},getDeadlineDate:function(e){return userInfo.getDeadlineDate(e)},getDeadlineTime:function(e){return userInfo.getDeadlineTime(e)},getDeadlineDay:function(e){return userInfo.getDeadlineDay(e)},getLevel:function(e){return userInfo.getLevel(e)},getVipType:function(e){return userInfo.getVipType(e)},getPayType:function(e){return userInfo.getPayType(e)},getRemind:function(e){return userInfo.getRemind(e)},getStatus:function(e){return userInfo.getStatus(e)},getType:function(e){return userInfo.getType(e)},getMobile:function(e){return userInfo.getMobile(e)},isVip:function(e){return userInfo.isVip(e)},isShareProfitUser:function(e){return userInfo.isShareProfitUser(e)},isMediaBigVUser:function(e){return userInfo.isMediaBigVUser(e)},isLockedVip:function(e){return userInfo.isLockedVip(e)},isExpireVip:function(e){return userInfo.isExpireVip(e)},isExpectPayVip:function(e){return userInfo.isExpectPayVip(e)},isMobilePayVip:function(e){return userInfo.isMobilePayVip(e)},checkVipInfo:function(e){return userInfo.checkVipInfo(e)},checkUserInfo:function(){return userInfo.checkUserInfo()},getUserInfo:function(){return userInfo.getUserInfo()},getIsThirdParty:function(){return userInfo.getIsThirdParty()},getAwardVip:function(e){return userInfo.getAwardVip(e)},setIsThirdParty:function(e){return userInfo.setIsThirdParty(e)},getBindedSnsInfo:function(e){return userInfo.getBindedSnsInfo(e)},getIsLoginInfo:function(e){return userInfo.getIsLoginInfo(e)},getAllAccountsInfo:function(e){return userInfo.getAllAccountsInfo(e)},getSurplus:function(e){return userInfo.getSurplus(e)},clearUserInfo:function(){userInfo.clearUserInfo()},getIsValidVip:function(e){return userInfo.getIsValidVip(e)},isPPS:function(){return userInfo.isPPS()},isThirdPartyAccount:function(e){if(!userInfo.isLogin())return!1;if(0===arguments.length)return userInfo.isThirdPartyAccount();if(e&&userInfo.accounts&&userInfo.accounts.length)for(var t,n=0,a=userInfo.accounts.length;a>n;n++)if(t=userInfo.accounts[n].account,t&&-1!==t.indexOf("@"+e))return!0;return!1},isAccountBinded:function(){return userInfo.isLogin()?userInfo.accounts&&userInfo.accounts.length>1:!1},isAutoRenew:function(e){return userInfo.isAutoRenew(e)},isHitUser:function(e){return userInfo.getHitUser(e)},isAblogin:function(e){return userInfo.getAblogin(e)},isSubaccount:function(){return userInfo.isSubaccount()}}});
define("action/qipaLogin.js",["../config/siteDomain","../components/action/viewCenter","../components/action/floater","../components/view/floaterView","../config/siteDomain"],function(e,t,n){var a=e("../config/siteDomain"),i=e("../components/action/viewCenter"),r=e("../components/action/floater"),o=e("../components/view/floaterView"),l=e("../config/siteDomain"),s=l.getDomain(),m=null,d=Q.event.customEvent,h=!0,c={genbotrue:"轻松登录，最新预告抢先看",resetpwd:"密码已变更，请重新登录",overlimit:"登录后可以收藏更多哦",userhome:"登录爱奇艺，为您推荐更多精彩视频",msglogin:"登录之后就可以订阅他/她咯",msgreg:"注册爱奇艺帐号，马上订阅他/她",ipchange:"您登录的网络位置发生变化，请重新登录"},U=Q.Class("QipaLogin",{construct:function(){this.loginTempCallback=null},methods:{openLoginWindow:function(e,t){if(!this.show){if("function"==typeof window._js_app_service)return window._js_app_service("popup_logindlg"),void 0;var n=""!==Q.cookie.get("P00002")&&null!==Q.cookie.get("P00002")&&"deleted"!==Q.cookie.get("P00002")&&""!==Q.cookie.get("P00003")&&null!==Q.cookie.get("P00003")&&"deleted"!==Q.cookie.get("P00003");if(n)t&&t();else{if(e=Q.object.extend({resumePlayer:!0},e),h=e.resumePlayer,this.qipaLoginIfr)e.isReg?this.showRegWindow():this.showLoginWindow();else{e=Q.object.extend({showClose:!0},e);var i="";e.loginUrl?i=e.loginUrl:(i="http://passport."+a.getDomain()+"/user/loginiframe.php?showclose="+e.showClose.toString(),e.btnId&&(i+="&btnid="+e.btnId)),e.regUrl&&(i+=i.indexOf("?")>=0?"&url="+encodeURIComponent(e.regUrl):"?url="+encodeURIComponent(e.regUrl)),e.url=i,this.renderIfr(e)}this.loginTempCallback=t}}},closeLoginWindow:function(){if(d.fire({type:"qipaLoginIfrHide",data:{wrapper:this.qipaLoginIfr,resumePlayer:h}}),m){if(m.destroy(),m=null,d.fire({type:"qipaLoginIfrDestroy",data:{}}),Q.browser.IE6||Q.browser.IE7||Q.browser.IE8)for(var e="http://static.qiyi.com/css/common/v3-import/loginbox.css",t=document.getElementsByTagName("link"),n=0;n<t.length;n++)if(t[n].href==e){t[n].parentElement.removeChild(t[n]);break}}else try{var a=lib.component.login=lib.component.login||{};a.dialog.close()}catch(i){}this.qipaLoginIfr=null,this.show=!1,h=!0},hideLoginWindow:function(){d.fire({type:"qipaLoginIfrHide",data:{wrapper:this.qipaLoginIfr}}),this.qipaLoginIfr&&this.qipaLoginIfr.hide(),m&&m.hide(),this.show=!1},showLoginWindow:function(){this.show=!0,this.qipaLoginIfr&&this.qipaLoginIfr.show(),m&&m.show(),d.fire({type:"qipaLoginIfrShown",data:{wrapper:this.qipaLoginIfr}})},showRegWindow:function(){this.show=!0,this.qipaLoginIfr&&this.qipaLoginIfr.show(),m&&m.show(),d.fire({type:"qipaRegIfrShown",data:{wrapper:this.qipaLoginIfr}})},clearTempCallback:function(){this.loginTempCallback=null},renderIfr:function(e){var t=this;if(e=Q.object.extend({src:"about:blank",width:512,height:360},e),this.qipaLoginIfr=Q.$("#qipaLoginIfr"),!this.qipaLoginIfr){this.qipaLoginIfr=Q.element.Element.create({tagName:"div"});var n=function(n){var a=n({_domain:s});if(t.qipaLoginIfr.html(a),Q.browser.IE6||Q.browser.IE7||Q.browser.IE8){var i=/<link href=(['"])([^'"]*)\1/.exec(a);if(i&&i[2]){i=i[2];var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.href=i;var h=document.getElementsByTagName("head")[0];h&&h.appendChild(l)}}if(e.btnId&&c[e.btnId])try{window.setTimeout(function(){t.qipaLoginIfr.down("[data-loginbox-elem=errDom]").down("span").html(c[e.btnId])},1e3)}catch(U){}t.qipaLoginIfr.attr("id","qipaLoginIfr").css("width",e.width+"px").css("height",e.height+"px").css("zIndex",e.zIndex||4860).hide();try{e.from&&t.qipaLoginIfr.down('[data-widget-loginbox="loginbox"]').attr("data-from",e.from)}catch(V){}Q.$("body").append(t.qipaLoginIfr),m||(m=new r({view:new o({isResize:!0,zIndex:4850})})),m.show({elem:t.qipaLoginIfr}),d.fire({type:"qipaLoginIfrRendered",data:{wrapper:t.qipaLoginIfr,isReg:e.isReg}}),"favorite"==e.from?t._getPingParam("1411143_sczs"):"comment"==e.from?t._getPingParam("1411192_comshw"):"subscribe"==e.from&&t._getPingParam("1411191_subshw")};Q.cookie.get("QC005"),"favorite"==e.from?(e.height=475,e.width=520,Q.loadTemplate("pc/loginFloaterFavorite",function(e){n(e)},{jobFile:"jobs/pc/playDramaVideo",projectName:"qiyiV2",projectDebug:!1,templateVersion:"20161013162223"})):"comment"==e.from?(e.height=475,e.width=520,Q.loadTemplate("pc/loginFloaterComment",function(e){n(e)},{jobFile:"jobs/pc/playDramaVideo",projectName:"qiyiV2",projectDebug:!1,templateVersion:"20161013162223"})):"subscribe"==e.from?(e.height=475,e.width=520,Q.loadTemplate("pc/loginFloaterSubscribe",function(e){n(e)},{jobFile:"jobs/pc/playDramaVideo",projectName:"qiyiV2",projectDebug:!1,templateVersion:"20161013162223"})):"vipDetail"===e.from?(e.height=475,e.width=520,Q.loadTemplate("pc/loginFloaterVipDetail",function(e){n(e)},{jobFile:"jobs/pc/playDramaVideo",projectName:"qiyiV2",projectDebug:!1,templateVersion:"20161013162223"})):"regist"===e.from?(e.height=475,e.width=520,Q.loadTemplate("pc/loginFloater",function(t){e.isReg=!0,n(t)},{jobFile:"jobs/pc/playDramaVideo",projectName:"qiyiV2",projectDebug:!1,templateVersion:"20161013162223"})):(e.width=512,e.height=500,Q.loadTemplate("pc/loginFloater",function(e){n(e)},{jobFile:"jobs/pc/playDramaVideo",projectName:"qiyiV2",projectDebug:!1,templateVersion:"20161013162223"}))}this.show=!0},setCenter:function(){i(this.qipaLoginIfr)},runTempCallback:function(){this.loginTempCallback&&(this.loginTempCallback(),this.loginTempCallback=null)},reset:function(e){if(this.qipaLoginIfr)for(var t in e)this.qipaLoginIfr.attr(t,e[t])},_getPingParam:function(e){var t={platform:10,p1:101,t:21,rn:Math.random(),p:10,pf:1,u:Q.cookie.get("QC005"),block:e};Q.log.server(t,"http://msg.71.am/b")}}}),V=new U;Q.$(document).delegate("hideloginiframe",function(){h=!0,V.closeLoginWindow()}),d.on("loginIframeReset",function(e){V.reset(e.data.opt)}),n.exports=V});
define("kit/qiyiUnifiedPlayer.js",["../kit/eventPlugin","../kit/jsCallPlayer","../kit/videoInfo"],function(e,t,n){var a,i,r=e("../kit/eventPlugin"),o=e("../kit/jsCallPlayer"),l=e("../kit/videoInfo");new Q.ic.InfoCenter({moduleName:"qiyiUnifiedPlayer"});var s=Q.Class("QiyiPlayer",{plugins:[new r],construct:function(e){this.playerid=e.playerid||"flashbox";var t=Q.$("*[data-widget-player]"),n=Q.url.queryToJson(window.location.search);this._tvid=n.tvid||t&&t.attr("data-player-tvid")||"",this._videoid=n.videoid||t&&t.attr("data-player-videoid")||"",this._bindEvent(e)},methods:{load:function(e){o({id:this.playerid,name:"load",param:e})},play:function(){o({id:this.playerid,name:"play"})},resume:function(){o({id:this.playerid,name:"resume"})},replay:function(){o({id:this.playerid,name:"replay"})},pause:function(){o({id:this.playerid,name:"pause"})},seek:function(e){o({id:this.playerid,name:"seek",param:e})},stop:function(){o({id:this.playerid,name:"stop"})},getPlayInfo:function(e){o({id:this.playerid,name:"getPlayInfo",fn:e})},getVideoInfo:function(e){var t=this;l.get({tvid:t._tvid,vid:t._videoid,usage:"pc"},function(t){e&&e(t)})},getIsInMainVideo:function(e){o({id:this.playerid,name:"getIsInMainVideo",fn:e})},getInitVideoInfo:function(e){e({vid:this._videoid,tvid:this._tvid})},setCyclePlay:function(){o({id:this.playerid,name:"setCyclePlay"})},switchVideo:function(e){o({id:this.playerid,name:"switchVideo",param:e})},switchNextVideo:function(){o({id:this.playerid,name:"switchNextVideo"})},switchPreVideo:function(){o({id:this.playerid,name:"switchPreVideo"})},getSwitchVideoType:function(e){o({id:this.playerid,name:"getSwitchVideoType",fn:e})},addVideoList:function(e){o({id:this.playerid,name:"addVideoList",param:e})},removeVideoList:function(e){o({id:this.playerid,name:"removeVideoList",param:e})},getQiyiPlayerInfo:function(e){o({id:this.playerid,name:"getQiyiPlayerInfo",fn:e})},getQiyiVideoInfo:function(e){o({id:this.playerid,name:"getQiyiVideoInfo",fn:e})},setUserLogin:function(e){o({id:this.playerid,name:"setQiyiUserLogin",param:e})},setVisits:function(e){o({id:this.playerid,name:"setQiyiVisits",param:e})},setSubscribe:function(e){o({id:this.playerid,name:"setQiyiSubscribe",param:e})},setLight:function(e){o({id:this.playerid,name:"setLight",param:e})},forceToSaveCurVideoInfo:function(e){o({id:this.playerid,name:"forceToSaveCurVideoInfo",param:e})},expand:function(e){o({id:this.playerid,name:"expand",param:e})},setBarrageStatus:function(e){o({id:this.playerid,name:"setBarrageStatus",param:e})},setSelfSendBarrageInfo:function(e){o({id:this.playerid,name:"setSelfSendBarrageInfo",param:e})},setPlayerChangeToSmall:function(e){o({id:this.playerid,name:"setSmallWindowMode",param:e})},setBarrageSetting:function(e){o({id:this.playerid,name:"setBarrageSetting",param:e})},setActivityNoticeInfo:function(e){o({id:this.playerid,name:"setActivityNoticeInfo",param:e})},zoomQiyiVideo:function(e){o({id:this.playerid,name:"zoomQiyiVideo",param:e})},setTimeListener:function(e){o({id:this.playerid,name:"setTimeListener",param:e})},getHasBarrageConfigInfo:function(){o({id:this.playerid,name:"getHasBarrageConfigInfo"})},setFollowInfo:function(e){o({id:this.playerid,name:"setSubscribeInfo",param:e})},setSubscribeStateChange:function(e){o({id:this.playerid,name:"setSubscribeStateChange",param:e})},setContinuePlayState:function(e){o({id:this.playerid,name:"setContinuePlayState",param:e})},getCommentConfigInfo:function(){o({id:this.playerid,name:"getCommentConfigInfo"})},initQiyiVideo:function(){o({id:this.playerid,name:"initQiyiVideo"})},jsNotifyAdManager:function(e){o({id:this.playerid,name:"jsNotifyAdManager",param:e})},_bindEvent:function(){var e=this;window.QiyiPlayerLoader.ready(function(t){i=t,a=i.constantType,e.player=i.getPlayerById(e.playerid)||i.getPlayerById("flashbox"),e.player&&(e._fire(),Q.event.customEvent.on("jobdone",function(){for(var t in e.player.eventsRecorder)for(var n={},a=e.player.eventsRecorder[t].length,i=0;a>i;i++)n=e.player.eventsRecorder[t][i],e.player.fire({type:n.type,data:n.data});o({id:this.playerid,name:"stopRecordEvents"})}))})},_fire:function(){var e=this,t=e.player;Q.event.customEvent,t.on(a.QYPLAYER_STATE_CHANGE,function(t){var n=t.data.state||"";Q.log.log(n+"--player state--"+(new Date).getTime()),e.fire({type:n.toLocaleLowerCase(),data:t.data})}),t.on(a.QYPLAYER_VIDEO_CHANGE,function(t){t=t.data.vi,t.ve=Q.getVideoEventID()||"",e.fire({type:"videoChanged",data:t})}),t.on(a.QYPLAYER_VID_CHANGE,function(t){e.fire({type:"vidChanged",data:t.data})}),t.on(a.QYPLAYER_NEXT_VIDEO,function(){e.fire({type:"playnext"})}),t.on(a.QYPLAYER_LOAD_COMPLETE,function(t){e.fire({type:"loadComplete",data:t.data})}),t.on(a.QYPLAYER_SET_LIGHT,function(t){e.fire({type:"setLight",data:t.data})}),t.on(a.QYPLAYER_MOVETO_QITAN,function(){var n=Q.$("[data-widget-qitancomment='comment']");if(n){e.fire({type:"setLight",data:!1}),t.setLight("true");var a=Q.page.getScrollTop(),i=n.getPosition(),r=Q.anim.create(n);r.onCompute=function(){window.scrollTo(0,this.info.scrollTo.animArray[this.counter]),this.counter++},r.duration(200).from("scrollTo",a).to("scrollTo",i.top-100).go()}}),t.on(a.QYPLAYER_LOAD_SUCCESS,function(t){e.fire({type:"loadSuccess",data:t.data})}),t.on(a.QYPLAYER_SHOW_LOGIN_PANEL,function(t){e.fire({type:"showLoginPanel",data:t.data})}),t.on(a.QYPLAYER_EXPAND,function(t){e.fire({type:"expand",data:t.data})}),t.on(a.QYPLAYER_AUTHENTICATION_RESULE,function(t){e.fire({type:"authenticationResult",data:{isTryWatch:t.data.isTryWatch,tvid:t.data.tvid}})}),t.on(a.QYPLAYER_RECHARGE,function(t){t=t.data||{},e.fire({type:"recharge",data:{code:t.code,from:t.from,tvid:t.tvid}})}),t.on(a.QYPLAYER_SUBSCRIBE,function(){e.fire({type:"subscribe"})}),t.on(a.QYPLAYER_REFRESH_PAGE,function(){e.fire({type:"refreshPage"})}),t.on(a.QYPLAYER_DOWNLOAD,function(t){e.fire({type:"downloadVideo",data:t.data})}),t.on(a.QYPLAYER_REQUEST_VIDEOLIST,function(t){e.fire({type:"flashRequireList",data:t})}),t.on(a.QYPLAYER_SWITCH_FULL_SCREEN,function(t){e.fire({type:"switchFullScreen",data:t.data})}),t.on(a.QYPLAYER_ADD_TO_TABLE,function(){e.fire({type:"addToTable"})}),t.on(a.QYPLAYER_FOCUS_TIPS,function(t){e.fire({type:"focusTips",data:t.data})}),t.on(a.QYPLAYER_FOCUS_UPLOADER,function(t){e.fire({type:"focusUploader",data:t.data})}),t.on(a.QYPLAYER_FIND_GOODS,function(t){e.fire({type:"findGoods",data:t.data})}),t.on(a.QYPLAYER_BARRAGE_REPLAY,function(t){e.fire({type:"barrageReply",data:t.data})}),t.on(a.QYPLAYER_BARRAGE_RECEIVE_DATA,function(t){e.fire({type:"barrageReceiveData",data:t.data})}),t.on(a.QYPLAYER_SET_BARRAGE_INTERACT_INFO,function(t){e.fire({type:"setBarrageInteractInfo",data:t.data})}),t.on(a.QYPLAYER_SET_BARRAGE_CONFIG_INFO,function(t){e.fire({type:"setHasBarrageConfigInfo",data:t.data})}),t.on(a.QYPLAYER_PGC_FOLLOW,function(t){e.fire({type:"pgcFollow",data:t.data})}),t.on(a.QYPLAYER_USER_CLICK_SCORE,function(t){e.fire({type:"userClickScore",data:t.data})}),t.on(a.QYPLAYER_BARRAGE_STATE_CHANGE,function(t){e.fire({type:"barrageState",data:t.data})}),t.on(a.QYPLAYER_REQUEST_REWARD,function(t){e.fire({type:"requestReward",data:t.data})}),t.on(a.QYPLAYER_DOSOMETHING,function(t){e.fire({type:"setJsDoSomething",data:t.data})}),t.on(a.QYPLAYER_COMMENT_ALLOWED,function(t){e.fire({type:"commentAllowed",data:t.data})})}}});n.exports=s});
define("units/loginFloater.js",["../components/units/pageJob","../kit/loginFloater"],function(e){new Q.ic.InfoCenter({moduleName:"units/creditRecord"}),e("../components/units/pageJob");var t=e("../kit/loginFloater");Q.$("body").delegate("loginfloater",function(){t()})});
define("kit/loginFloater.js",["./userInfo","../components/action/floater"],function(e,t,n){var a=e("./userInfo"),i=e("../components/action/floater"),r=new i;Q.event.customEvent.on("loginIframeClosed",function(){r.hide()}),n.exports=function(e){if(e=e||function(){},a.isLogin())e();else{var t=function(){Q.event.customEvent.un("login",t),r.hide(),e()};Q.event.customEvent.on("login",t),r.show({html:'<iframe width="580" scrolling="no" height="460" frameborder="0" style="z-index: 9999;" src="http://passport.iqiyi.com/user/loginiframe.php?showclose=true" id="j-dialog" allowtransparency="true"></iframe>'})}}});
define("patches/swfInterfacePatch.js",["../kit/userInfo","../kit/yingyinPluginV2"],function(e){var t=e("../kit/userInfo"),n=e("../kit/yingyinPluginV2");window.lib=window.lib||{},window.lib.swf=window.lib.swf||{},window.lib.swf.getPageInfo=window.lib.swf.getPageInfo||function(){var e=Q.$("[data-widget-qitancomment='comment']");return JSON.stringify({login:t.isLogin().toString(),passportId:t.getUid(),comment:e?"true":"false",P00001:t.getAuthCookies()})},window.lib.swf.checkClientInstall=n.check});
define("units/navAppdownResponse.js",["../components/units/pageJob","../components/action/checkDoms","../kit/responsive","../interfaces/locationInterface","../interfaces/getDownloadUrlInterface"],function(e){var t=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../kit/responsive");new(e("../interfaces/locationInterface"));var a,i=e("../interfaces/getDownloadUrlInterface"),r=Q.PageInfo&&Q.PageInfo.respInfo,o=0,l="navAppdownResponse";Q.browser.getOS();var s=Q.url.parse(window.location.href),m="www.iqiyi.com"===s.host&&"/"===s.path;t.create(l,{getDependentDoms:function(){var e=Q.$("#wnav-appdown");return a={wrap:e,alink:e.down('*[data-widget-appdown="playpage"]')}},check:function(){return!(!a.wrap||!r)},init:function(){var e=this;e.appLink(),e.bindevent(),e.newNavAppLink()},appLink:function(){var e,t=a.alink,n={pubarea:t.attr("pubarea"),srcchannel:document.referrer};e=i.getDownloadUrl(n),e&&t.attr("href",e)},newNavAppLink:function(){var e,t=Q.$('*[data-widget-geturl="newNavLayerDownloadUrl"]');if(t){var n={pubarea:t.attr("pubarea"),srcchannel:document.referrer};e=i.getDownloadUrl(n),e&&t.attr("href",e)}},bindevent:function(){var e=this,t=a.wrap.attr("data-resp-min")||"1380";t=parseInt(t,10),e.responseEvent(),n.on("bodyClassChange",function(t){t=t||{},e.responseEvent(t.data)})},responseEvent:function(e){e=e||r;var t=e.curLayout,n=e.cnf,i=n[t],l=i&&i.range&&i.range.min&&i.range.min>o,s=Q.$('*[data-widget-navclose-ele="close"]');s&&!l&&(l=!l),m?(a.wrap.css("display",""),l?a.alink.html("下载客户端"):a.alink.html("下载")):l?(a.alink.html("下载客户端"),a.wrap.css("display","")):a.wrap.hide()}}),t.add(l)});
define("units/navHackForIpad.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo"],function(e){var t=e("../components/units/pageJob"),n=e("../components/action/checkDoms");e("../kit/userInfo");var a,i="removeUpload";t.create(i,{getDependentDoms:function(){var e=Q.$("#data-widget-upload");return a={upload:e}},check:function(e){return n(e),!0},init:function(){if(a.splitline=Q.$("#data-upload-splitline"),Q.browser.iPad){a.upload[0].style.display="none",a.splitline&&(a.splitline[0].style.display="none");var e=Q.$("*[data-ipadhack-elem=nav]");e&&e.addClass("forpad")}}}),t.add(i)});
define("units/uploadVideoLink.js",["../components/units/pageJob","../components/action/checkDoms","../kit/ppsSyncAuthUrl","../kit/userInfo"],function(e){var t=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),a=e("../kit/ppsSyncAuthUrl");e("../kit/userInfo");var i="uploadVideoLink",r=null;t.create(i,{getDependentDoms:function(){var e=Q.$("#data-widget-upload");if(e){var t=e.down("a");r||(r=[]),r.push(t)}var n=Q.$("[data-widget-uploadvideo=uploadvideo]");return n&&(r||(r=[]),n.forEach(function(e){r.push(Q.$(e))})),r},check:function(e){return n(e),!0},init:function(){r&&r.forEach(function(e){e.on("click",function(e){e=Q.event.get(e),e.preventDefault();var t=Q.$(e.target),n=a.getUrl(t.attr("href"));"_blank"==t.attr("target")?window.open(n):window.location.href=n})})}}),t.add(i)});
define("kit/ppsSyncAuthUrl.js",["./userInfo"],function(e,t,n){var a=e("./userInfo"),i=function(e){var t="",n=encodeURIComponent(a.getAuthCookies()||"");return t=n?"http://passport.pps.tv/apis/user/authlogin.action?authcookie="+n+"&redirect_url="+encodeURIComponent(e):"http://passport.pps.tv/pages/user/login.action?url="+encodeURIComponent(e)};n.exports={getUrl:i}});
define("units/pcplayHistoryV2Loader.js",["../components/units/pageJob","../components/action/checkDoms"],function(e){new Q.ic.InfoCenter({moduleName:"units/pcPlayHistoryLoader"});var t=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),a="PcplayHistoryV2Loader";t.create(a,{getDependentDoms:function(){return this._widget=Q.$("#widget-playhistory"),this._widget||(this.version=2.4,this._widget=Q.$("#widget-playhistory-new")),{widget:this._widget}},check:function(e){return n(e),!0},init:function(){var e=this;e._widget.on("click",function(){t.async("pcplayHistoryV2Async",function(e){e.show()})})}}),t.add(a)});
define("units/profileGuide.js",["../components/units/pageJob","../components/action/checkDoms","../action/qipaLogin","../kit/userInfo","../kit/findParent","../interfaces/profileNav","../config/siteDomain"],function(e){var t=e("../components/units/pageJob"),n=e("../components/action/checkDoms");e("../action/qipaLogin");var a=e("../kit/userInfo"),i=e("../kit/findParent"),r=e("../interfaces/profileNav"),o=new r,l=e("../config/siteDomain"),s=null,m=null,d="profileGuide";t.create(d,{getDependentDoms:function(){return s={profileGuideBox:Q.$("#nav-profile-guide"),wrapper:Q.$("#userboxparent")}},check:function(e){return n(e),!0},init:function(){var e=this;if(a.isLogin()){var t=!1;a.checkVipInfo(function(){a.getIsValidVip(function(){if(a.getIsValidVip()){var n=a.getUid(),i=Q.cookie.get("P00PRU")||"";if(n==i){var r=JSON.parse(Q.cookie.get("QC134"));r||(r={},r[n]=[]);var s=r[n];if(s&&!s.created){var m=s.length;if(5!==m){var d=(new Date).getTime();if(0===m)t=!0,r[n].push(d);else{var h=s[m-1];d-h>864e5&&(t=!0,r[n].push(d))}t&&o.getProfile({fields:"prus",authcookie:Q.cookie.get("P00007")},function(t){if("A00000"===t.code&&!t.data.purs){e._showProfileGuideFloater();var n=JSON.stringify(r);Q.cookie.set("QC134",n,{path:"/",expires:31536e6,domain:l.SITE_DOMAIN})}})}}}}})}),s.profileGuideBox.delegate("hideProfileGuide",function(){s.profileGuideBox.hide()}),s.profileGuideBox.delegate("createProfile",function(){for(var e=JSON.parse(Q.cookie.get("QC134")),t=a.getUid(),n=(new Date).getTime(),i=e[t],r=0,o=5-i.length;o>r;r++)e[t].push(n);var m=JSON.stringify(e);Q.cookie.set("QC134",m,{path:"/",expires:31536e6,domain:l.SITE_DOMAIN}),s.profileGuideBox.hide();var d=Q.$('[j-delegate="createProfile"]'),h=d.attr("data-profile-entry"),c="http://www.iqiyi.com/u/profile?entry="+h;window.open(c,"newwindow")}),s.profileGuideBox.on("mouseenter",function(){clearTimeout(m)}),s.profileGuideBox.on("mouseleave",function(){m&&clearTimeout(m),m=setTimeout(function(){s.profileGuideBox.hide()},1e4)});var n=Q.$("body");n.on("click",function(e){var t=i(Q.$(Q.event.get(e).target),"#nav-profile-guide");t||(s.profileGuideBox.hide(),m&&clearTimeout(m))}),Q.$(window).on("scroll",function(){s.profileGuideBox.hide()})}},_showProfileGuideFloater:function(){var e=Q.$('[data-widget-userbox="userbox"');e&&e[0]?s.wrapper.insertBefore(s.profileGuideBox,e):s.wrapper.append(s.profileGuideBox),s.profileGuideBox.show(),m=setTimeout(function(){s.profileGuideBox.hide()},1e4)}}),t.add(d)});
define("interfaces/profileNav.js",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface");n.exports=Q.Class("profileNav",{construct:function(){this._remoteInterface=new a({getProfile:{url:"http://passport.iqiyi.com/apis/user/info.action"},changeProfile:{url:"https://passport.iqiyi.com/apis/profile/change_profile.action"},recommendSubscription:{url:"http://qiyu.iqiyi.com/portal/user"},getHomeInfoForPC:{url:"http://passport.iqiyi.com/apis/user/info.action"},getHomeInfo:{url:"http://passport.iqiyi.com/apis/profile/change_profile.action"},getFollows:{url:"http://subscription.iqiyi.com/services/subscribe/list.htm"}})},methods:{getProfile:function(e,t){this._remoteInterface.send({ifname:"getProfile",dataType:"jsonp",method:"POST",param:e||{}},function(e){t&&t(e)})},changeProfile:function(e,t){this._remoteInterface.send({ifname:"changeProfile",dataType:"jsonp",method:"POST",param:e||{}},function(e){t&&t(e)})},getFollows:function(e,t){this._remoteInterface.send({ifname:"getFollows",dataType:"jsonp",method:"GET",param:e||{}},function(e){t&&t(e)})},recommendSubscription:function(e,t){this._remoteInterface.send({ifname:"recommendSubscription",dataType:"jsonp",method:"POST",param:e||{}},function(e){t&&t(e)})},getHomeInfoForPC:function(e,t){this._remoteInterface.send({ifname:"getHomeInfoForPC",dataType:"jsonp",method:"POST",param:e||{}},function(e){t&&t(e)})},getHomeInfo:function(e,t){this._remoteInterface.send({ifname:"getHomeInfo",dataType:"jsonp",method:"POST",param:e||{}},function(e){t&&t(e)})}}})});
define("units/navMessageFloater.js",["../components/units/pageJob","../components/action/checkDoms","../action/navMessageFloater"],function(e){var t=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),a=e("../action/navMessageFloater"),i="navMessageFloater",r=null,o=!(Q.browser.IE6||Q.browser.IE7||Q.browser.IE8);t.create(i,{getDependentDoms:function(){var e=Q.$("#data-widget-navmessagefloater");return r={widget:e,target:e,title:e.down("[data-navmessagefloater-elem=title]"),body:e.down("[data-navmessagefloater-elem=body]"),titles:e.down("[data-navmessagefloater-elem=tabtitle]"),bodies:e.down("[data-navmessagefloater-elem=tabbody]"),markReadBtn:e.down("[data-navmessagefloater-elem=markreadbtn]"),moreBtn:e.down("[data-navmessagefloater-elem=morebtn]"),nums:e.down("[data-navmessagefloater-elem=num]"),numTip:e.down("[data-navmessagefloater-elem=numtip]")}},check:function(e){return n(e),!0},init:function(){var e=r.widget;e.attr("data-navmessagefloater-showdelay")||500,e.attr("data-navmessagefloater-hidedelay")||100;var t=e.attr("data-navmessagefloater-showcls")||"",n={doms:r,targetHoverCls:t,showDelay:0,hideDelay:0,showEvt:"click",hideEvt:"click"};"click"!=e.attr("data-navmessagefloater-tabchangeevt")&&(r.body.attr("data-widget-hover","true"),n.tabChangeDelay=e.attr("data-navmessagefloater-tabchangedelay")||300);var i=new a(n);i.init();var l,s=function(e){e=e>=0?e:1e3,l&&clearTimeout(l),l=setTimeout(function(){i.syncSet({visible:!1})},e)},m=function(){l&&clearTimeout(l)};r.body.on("mouseleave",s),r.body.on("mouseenter",m),r.title.on("mouseleave",s),r.title.on("mouseenter",m),Q.browser.iPad&&Q.$("body").on("touchstart",function(e){e=Q.event.get(e);var t=e.target;r.title.contains(t)||r.body.contains(t)||s(0)});var d=Q.event.customEvent;i.on("stateChange",function(e){var t;e.data.visible?(d.fire({type:"updateRecordsShow",data:{}}),t=r.title.down("a")||r.title,t&&t.addClass("arrow-selected"),o?r.body.css("opacity","1"):r.body.css("filter","alpha(opacity=100)"),m()):(d.fire({type:"updateRecordsHide",data:{}}),t=r.title.down("a")||r.title,t&&t.removeClass("arrow-selected"))}),i.on("beforeShow",function(){o?r.body.css("opacity","0"):r.body.css("filter","alpha(opacity=0)")}),i.on("beforeHide",function(){o?r.body.css("opacity","0"):r.body.css("filter","alpha(opacity=0)")});var h=["navOneShow","suggestShow","hideHeaderBoxFromVipHeader","playHistoryShow","showUserCenterBox","pcLoginBoxShow"];h.forEach(function(e){d.on(e,function(){i.syncSet({visible:!1})})})}}),t.add(i)});
define("action/navMessageFloater.js",["./hoverShow","./messageRouter","../view/navMessageFloaterView","../model/navMessageFloaterModel","../kit/userInfo","./tab","./navMessageFloaterList","../view/tabView"],function(e,t,n){var a=e("./hoverShow"),i=e("./messageRouter"),r=e("../view/navMessageFloaterView"),o=e("../model/navMessageFloaterModel"),l=e("../kit/userInfo"),s=e("./tab"),m=e("./navMessageFloaterList"),d=e("../view/tabView"),h=Q.Class("NavMessageFloaterTabView",{extend:d,construct:function(e){this.callsuper(e),this._option=e},methods:{_bindHoverEvent:function(){var e=this._doms.titles,t=this._option.delay;this._timer=null;var n=this;e.on("mouseenter",function(e){n._timer&&(clearTimeout(n._timer),n._timer=null);var a=Q.$(Q.event.get(e).target);n._timer=setTimeout(function(){n._timer=null;var e=a;n._changeTab(e)},t)}),e.on("mouseleave",function(){n._timer&&(clearTimeout(n._timer),n._timer=null)}),e.on("click",function(e){n._changeTab(Q.$(Q.event.get(e).target))})}}});n.exports=Q.Class("NavMessageFloater",{extend:a,construct:function(e){this.opt=e;var t=e.doms,n=t.bodies;e.view=new r(e),e.model=new o(e);var a={doms:{widget:t.body,titles:t.titles,bodies:n},delay:e.tabChangeDelay};Q.object.extend(a,{view:new h(a)}),this.tab=new s(a);var l=[];n.forEach(function(e){e=Q.$(e),e.css("position","relative");var t=new m({doms:{list:e}});t.init(),l.push(t)}),this.lists=l,this.bodies=n,this.messageRouter=i.getMessageRouter(),this.callsuper(e);var d=this;Q.event.customEvent.on("leftnavmsgstatechange",function(e){d.syncSet({leftNavMsgVisible:e.data.visible}),e.data.visible&&d._model.getMessage(!0)})},methods:{init:function(){this.callsuper("init")},fini:function(){this.callsuper("fini"),this.lists.forEach(function(e){e.fini()})},bindEvents:function(){this._messageItemsStatusChangeHandler||(this._messageItemsStatusChangeHandler=this.onMessageItemsStatusChange.bind(this)),this.messageRouter.on("msg",this._messageItemsStatusChangeHandler);var e=this;this.tab.on("itemclick",function(){var t=e.tab._model.get(),n=t.focus-1,a=e._model.get();if(n!=a.seq){if(e.syncSet({seq:n}),2===n){var i=a.data,r=i.page3.messages||[];r.legth>=1&&e._sysSendShowPingback(e.getParam(r))}else e._sendShowPingback();Q.event.customEvent.fire({type:"navMessageFloaterTabChange",data:{}})}}),this._itemClickHandler||(this._itemClickHandler=this.onMessageItemClick.bind(this)),this.lists.forEach(function(t){t.on("itemclick",e._itemClickHandler)})},unbindEvents:function(){if(this._messageItemsStatusChangeHandler&&this.messageRouter.un("msg",this._messageItemsStatusChangeHandler),this._itemClickHandler){var e=this;this.lists.forEach(function(t){t.un("itemclick",e._itemClickHandler)})}},getParam:function(e){var t={},n=e.length;t.groupIds="",t.msgids="",t.sub_types="";for(var a=0;n-1>a;a++)t.msgids+=e[a].notice_id+":",t.msgids+=e[a].groupId+":",t.msgids+="6:",t.msgids+=e[a].sub_type+":",t.msgids+=e[a].source+",";return t.msgids+=e[n-1].notice_id+":",t.msgids+=e[n-1].groupId+":",t.msgids+="6:",t.msgids+=e[n-1].sub_type+":",t.msgids+=e[a].source,t},syncGet:function(e){return Q.object.extend({tabSeq:this.tab._model.get().focus},this._model.get(e))},syncSet:function(e){var t=this._model.set(e);this.render(t)},onMessageItemClick:function(e){function t(){var e=o.sendList[0];o.messageRouter.notice(e.param,function(){e.successCb&&e.successCb(),e.href&&(window.location.href=e.href),o.sendList.splice(0,1),o.sendList.length&&t()},function(){e.failCb&&e.failCb(),o.sendList.splice(0,1),o.sendList.length&&t()})}var n=e.data.syncGet().data,a=n.page,i=n.notice_id,r={type:"msg",data:{action:1,type:a,actype:n.type,msgids:[i],target:this,jump:!!e.data.href}};1==n.type?r.data.chat_uid=n.uid:7==n.type?r.data.content=n.content:4==n.type&&(r.data.content=n.ext_data),this.sendList||(this.sendList=[]),this.sendList.push({param:r,successCb:e.data.successCb,failCb:e.data.failCb,href:e.data.href});var o=this;1==this.sendList.length&&t()},onMessageItemsStatusChange:function(e){if("msg"==e.type&&!e.data.jump){var t=e.data,n=t.type,a=t.actype,i=t.msgids,r=this._model.get(),o=r.data,s=l.isLogin();if(0===n)r.data={};else if(0===a){if(s){var m=o["page"+n]||{},d=m.messages||[];d.forEach(function(e){e.status=1}),m.unread=0,m.messages=d,o["page"+n]=m}else o["page"+n]={};r.data=o}else{for(var h=o["page"+n]||{},c=h.messages||[],u=h.total||0,U=h.unread||0,p=0;p<c.length;p++)if(a==c[p].type)if(0===i.length)s?c[p].status=1:(c.splice(p,1),p--,u--),U--;else for(var V=0;V<i.length;V++)if(i[V]==c[p].notice_id){if(!s){c.splice(p,1),p--,u--,U--;break}c[p].status=1,U--}h.total=u,h.unread=U,h.messages=c,o["page"+n]=h,r.data=o}this._model.updateMessage(r),this.render(r)}},_renderList:function(e){for(var t=l.isLogin(),n=0;3>n;n++){var a=n+1,i=e.data["page"+a]||{},r=[];if(i.messages&&i.messages.length&&(r=i.messages,r.forEach(function(t,n){void 0===t.page&&(t.page=a,t.systime=e.data.timestamp,t.time=isNaN(t.time)?0:t.time),void 0===t.sn&&(t.sn=n),void 0===t.isLogin&&(t.isLogin=l.isLogin())})),0===r.length&&r.push({page:a,type:0,isLogin:t}),l.isLogin()?this.lists[n].syncSet({itemsData:[{page:a,type:-1,isLogin:t}].concat(r)}):(Q.$(this.opt.doms.bodies[n]).css("marginTop","0px"),this.lists[n].syncSet({itemsData:r.slice(0,e.pageCount)})),2==n){var o=this;o.bodies.forEach(function(e){if(e=Q.$(e),e&&"3"==e.attr("data-seq")){var t=e.down("[data-notice_id]");t&&t.forEach(function(e){e=Q.$(e),e.on("click",function(){var t={};t.url=e.attr("data-url"),t.groupid=e.attr("data-groupId"),t.sub_type=e.attr("data-sub_type"),t.msgid=e.attr("data-notice_id"),t.source=e.attr("data-source"),o._sysSendClickPingback(t),t.url?window.open(t.url):window.open("http://www.iqiyi.com/u/news/note")})})}})}}},render:function(e){this.tab.select(e.seq+1),this._renderList(e),this._view.update(e)},_sendShowPingback:function(){var e=this._model.get();if(e.visible){var t=e.data,n=e.seq,a="",r=((t["page"+(n+1)]||{}).messages||[]).length||0;0===n?a="updatealertshow131212":1==n?a="mydynamicshow131212":2==n&&(a="systemalertshow131212"),i.sendShowPingback(a,r)}},_sysSendShowPingback:function(e){var t=this._model.get();if(t.visible){var n=t.data,a=t.seq,r=((n["page"+(a+1)]||{}).messages||[]).length||0;e.type=21,e.msgNum=r,i.sysSendShowPingback(e)}},_sysSendClickPingback:function(e){var t=this._model.get();t.visible&&(t.data,t.seq,e.type=20,i.sysSendClickPingback(e))}},properties:{events:{beforeStateChange:function(e){var t=e.data.from,n=e.data.to;!t.visible&&n.visible?this.fire({type:"beforeShow",data:e.data}):t.visible&&!n.visible&&this.fire({type:"beforeHide",data:e.data})},onStateChange:function(e){var t,n=e.data.visible;if(n){var a=this._model.get(),i=a.data;t=a.seq,i.page1&&i.page1.unread?t=0:i.page2&&i.page2.unread?t=1:i.page3&&i.page3.unread&&(t=2),this.syncSet(Q.object.extend({seq:t},e.data)),this._model.getMessage(!0)}else this.syncSet(e.data);this.fire({type:"stateChange",data:{visible:n}}),2!==t&&this._sendShowPingback()},onMarkReadBtnClick:function(e){this.messageRouter.notice({type:"msg",data:{action:1,type:this._model.get().seq+1,actype:0,msgids:[],target:this}},e.data.successCb,e.data.failCb)},onDataChange:function(e){this.render(e.data);var t=e.data.data,n=e.data.seq;if(2===n){var a=t.page3.messages||[];if(a.length>=1){var i=this.getParam(t.page3.messages);this._sysSendShowPingback(i)}}}}}})});
define("action/hoverShow.js",["../components/action/widget","../view/hoverShowView","../model/hoverShowModel","../kit/eventPlugin"],function(e,t,n){var a=e("../components/action/widget"),i=e("../view/hoverShowView"),r=e("../model/hoverShowModel"),o=e("../kit/eventPlugin");n.exports=Q.Class("HoverShow",{extend:a,plugins:[new o],construct:function(e){e=e||{},e.model=e.model||new r(e),e.view=e.view||new i(e),this.callsuper(e)},methods:{init:function(){this.bindEvents()},fini:function(){this._view.fini(),this.unbindEvents()},bindEvents:function(){},unbindEvents:function(){},syncGet:function(e){return this._model.get(e)},syncSet:function(e){this._view.update(this._model.set(e))}},properties:{events:{onStateChange:function(e){this.syncSet(e.data),this.fire({type:"stateChange",data:e.data})}}}})});
define("view/hoverShowView.js",["../components/view/widgetView"],function(e,t,n){var a=e("../components/view/widgetView");n.exports=Q.Class("HoverShowView",{extend:a,construct:function(e){this.callsuper(e)},methods:{init:function(e){this._ctrl=e;var t=e._model.get();this._visible=t.visible,this._showEvt=t.showEvt,this._hideEvt=t.hideEvt,this.update(t),this.bindEvents()},fini:function(){this.unbindEvents()},bindEvents:function(){var e=this;this._hoverOverHandler||(this._hoverOverHandler=this.onHoverOver.bind(this)),this._hoverOutHandler||(this._hoverOutHandler=this.onHoverOut.bind(this)),this._touchBodyHandler||(this._touchBodyHandler=this.onTouchBody.bind(this)),this._pageShowHandler||(this._pageShowHandler=this.onPageShow.bind(this));var t=this._doms.target,n=this._doms.title,a=this._showEvt||"mouseenter",i=this._hideEvt||"mouseleave",r=a===i;Q.browser.iPad?(a="click",Q.$("body").on("touchstart",this._touchBodyHandler),Q.$(window).on("pageshow",this._pageShowHandler)):r||t.on(i,this._hoverOutHandler),r?(n.on(a,function(){e._visible?e._hoverOutHandler():e._hoverOverHandler()}),Q.$(document).on(a,function(n){n=Q.event.get(n);var a=n.target;t.contains(a)||e._hoverOutHandler()}),Q.$("body").un("touchstart",this._touchBodyHandler)):t.on(a,this._hoverOverHandler)},unbindEvents:function(){var e=this._doms.target,t="mouseenter";Q.browser.iPad?(t="click",this._touchBodyHandler&&Q.$("body").un("touchstart",this._touchBodyHandler),this._pageShowHandler&&Q.$(window).un("pageshow",this._pageShowHandler)):this._hoverOutHandler&&e.un("mouseleave",this._hoverOutHandler),this._hoverOverHandler&&e.un(t,this._hoverOverHandler)},onHoverOver:function(){this.show(this._ctrl.syncGet().showDelay)},onHoverOut:function(){this.hide(this._ctrl.syncGet().hideDelay)},onTouchBody:function(e){var t=Q.$(Q.event.get(e).target),n=this._doms.target;n.contains(t)||this.hide(this._ctrl.syncGet().hideDelay)},onPageShow:function(e){e&&e.persisted&&this._visible&&window.location.reload()},update:function(e){this._setVisible(e.visible)},_setVisible:function(e){void 0!==e&&this._visible!==e&&(e?this.show(0):this.hide(0))},show:function(e){function t(){var e=n._doms,t=e.target,i=a.targetHoverCls,r=a.titleHoverCls,o=a.bodyHoverCls;n._ctrl.notice({type:"beforeStateChange",data:{from:{visible:!1},to:{visible:!0}}}),i?t.addClass(i):t.show(),r&&e.title.addClass(r),o&&e.body.addClass(o),n._visible=!0,n._ctrl.notice({type:"onStateChange",data:{visible:!0}})}var n=this,a=this._ctrl.syncGet();void 0===e&&(e=a.showDelay),this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=null),this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null),this._visible||(e>=0?this._showTimer=setTimeout(function(){n._showTimer=null,t()},e):t())},hide:function(e){function t(){var e=n._doms,t=e.target,i=a.targetHoverCls,r=a.titleHoverCls,o=a.bodyHoverCls;n._ctrl.notice({type:"beforeStateChange",data:{from:{visible:!0},to:{visible:!1}}}),i?t.removeClass(i):t.hide(),r&&e.title.removeClass(r),o&&e.body.removeClass(o),n._visible=!1,n._ctrl.notice({type:"onStateChange",data:{visible:!1}})}var n=this,a=this._ctrl.syncGet();void 0===e&&(e=a.hideDelay),this._showTimer&&(clearTimeout(this._showTimer),this._showTimer=null),this._hideTimer&&(clearTimeout(this._hideTimer),this._hideTimer=null),this._visible&&(e>=0?this._hideTimer=setTimeout(function(){n._hideTimer=null,t()},e):t())}}})});
define("model/hoverShowModel.js",["../components/model/widgetModel"],function(e,t,n){var a=e("../components/model/widgetModel");n.exports=Q.Class("HoverShowModel",{extend:a,construct:function(e){this.callsuper(e),this._data=Q.object.extend({showDelay:0,hideDelay:0,targetHoverCls:"",titleHoverCls:"",bodyHoverCls:"",visible:!1,showEvt:"mouseenter",hideEvt:"mouseleave"},e)},methods:{init:function(e){this.callsuper("init",e)}}})});
define("action/messageRouter.js",["../components/action/adapter","../model/messageRouterModel","../kit/eventPlugin","../model/noticeTemplateModel","../kit/artTemplate","../kit/userInfo","../kit/generateRandomString","../config/siteDomain","../kit/getPicUrl"],function(e,t,n){var a=e("../components/action/adapter"),i=e("../model/messageRouterModel"),r=e("../kit/eventPlugin"),o=e("../model/noticeTemplateModel"),l=e("../kit/artTemplate"),s=e("../kit/userInfo"),m=e("../kit/generateRandomString"),d=e("../config/siteDomain"),h=e("../kit/getPicUrl"),c=null,u=Q.Class("MessageRouter",{extend:a,plugins:[new r],construct:function(e){e=e||{},e.model=e.model||new i(e),this.callsuper(e)},statics:{threeMin:180,oneHour:3600,getMessageRouter:function(){return c||(c=new u),c},_parseTime:function(e,t){var n=t-e.time,a="",i=(new Date).getTimezoneOffset(),r=t-60*i,o=parseFloat(e.time)-60*i;a=n<this.threeMin?"刚刚":n<this.oneHour?Math.floor(n/60)+"分钟前":Math.floor(r/3600/24)==Math.floor(o/3600/24)?Math.floor((r-o)/3600)+"小时前":1==Math.floor(r/3600/24)-Math.floor(o/3600/24)?"昨天":Q.date.format(new Date(1e3*e.time),"M月d日"),e.parsedTime=a},url:{myspaceUrl:"http://www.iqiyi.com/u/",noteUrl:"http://www.iqiyi.com/u/news/note",updateUrl:"http://www.iqiyi.com/u/news/update",fansUrl:"http://www.iqiyi.com/u/fans",privateMail:"http://www.iqiyi.com/u/news/message",likeUrl:"http://www.iqiyi.com/u/news/like",commentUrl:"http://www.iqiyi.com/u/news/comment",recommendUrl:"http://www.iqiyi.com/u/news/recommendation"},_parseUrl:function(e){e=Q.object.extend(e,this.url);var t={2:this.url.updateUrl,1:this.url.privateMail,3:this.url.commentUrl,4:this.url.likeUrl,5:this.url.fansUrl,7:this.url.myspaceUrl,8:this.url.commentUrl,9:this.url.recommendUrl,6:this.url.noteUrl};return e.dataUrl=t[e.type],e},_addParam:function(e,t,n){var a=e&&Q.url.parse(e),i=a.protocol,r=a.host,o=a.path,l=e.lastIndexOf("#"),s=e.lastIndexOf("?");return t&&-1!=s&&(-1!=l?Q.object.extend(Q.url.queryToJson(e.substring(s+1,l)),t):Q.object.extend(Q.url.queryToJson(e.substring(s+1)),t)),n&&-1!=l&&Q.object.extend(Q.url.queryToJson(e.substring(l+1)),n),i+"://"+r+o+"?"+Q.url.jsonToQuery(t)+"#"+Q.url.jsonToQuery(n)},_parseUpdate:function(e,t){e.videoName=t.tvName;var n="",a=e.identifier;if(a)if(t.order&&0===a.indexOf("1-"))n=t.watchOrder?"看到"+t.watchOrder+"集/更新至"+t.order+"集":"更新至"+t.order+"集";else if(t.tvYear&&0===a.indexOf("2-")){var i=t.tvYear;n=8==i.length?"更新至"+i.substring(0,4)+"-"+i.substring(4,6)+"-"+i.substring(6,8)+"期":"更新至"+i+"期"}return e.videoNameTip=n,e.tvFocus=t.tvFocus,e.dataUrl=this._addParam(t.videoUrl,{src:"frmmssgshow131212"},{vfrm:"14-6-2-1"}),e.videoUrl=e.dataUrl,e},getPingbackType:function(e){var t={2:"bubbleupdate131212",1:"bubbleprtletter131212",3:"bubblecomment131212",4:"bubblepraise131212",5:"bubblenewfans131212",7:"bubbleupld131212",8:"bubblenewvote131212",9:"bubbleuserrec131212",6:"bubblesysmsg131212"};return t[e]},_parseClickMap:function(e){return"single"==e.msgtype&&(e.clickmap_r=this.getPingbackType(e.type)),e},parseData:function(e,t){this._parseTime(e,t),this._parseUrl(e),this._parseClickMap(e);var n=e.type;if(1==n)e.dataUrl="http://www.iqiyi.com/u/news/dialog?sui="+e.uid;else if(2==n)this._parseUpdate(e,e.related_video);else if(6==n&&s.isLogin()){var a=/http:\/\/[\w-]*(\.[\w-/]*)+/gi,i=e.content;e.content=i.replace(a,function(e){return e}),e.truncateContent=Q.string.truncate(i,127,"...").replace(a,function(e){return'<a target="_blank" href="'+e+'" class="link_add">'+e+"</a>"})}else if(3==n||8==n)try{var r=JSON.parse(e.ext_data)||{};if(3==n){e.videoName=r.videoName,e.videoUrl=this._addParam(r.videoUrl,{src:"frmmssgshow131212"},{vfrm:"14-6-2-1",scrollTo:"qitancommonarea"}),e.dataUrl=e.videoUrl,e.isReply=9==r.mainContentType;var o=e.related_users||[];o&&o.length>=2&&o[1].uid!=s.getUid()&&(e.isReply=!1)}else e.nickname="投票："+r.voteTitle,e.img_url="http://www.qiyipic.com/common/fix/pc-site/head-tp.png",e.dataUrl=this._addParam(r.videoUrl,{src:"frmmssgshow131212",contentid:r.voteId},{vfrm:"14-6-2-1",scrollTo:"qitancommonarea"})}catch(l){}else 4==n?(e.img_url="http://www.qiyipic.com/common/fix/pc-site/head-good.jpg",e.dataUrl="http://www.iqiyi.com/u/news/like",e.nickname="收到"+e.content+"条新的赞",e.formatNickname='<span><em class="desc">收到</em></span><span class="link green w-auto">'+e.content+'</span><span><em class="desc">条新的赞</em></span>'):7==n?(e.dataUrl=e.dataUrl+e.uid+"/v",e.count=e.ext_data,e.videoUrl=this._addParam(e.related_video.videoUrl,{src:"frmmssgshow131212"},{vfrm:"14-6-2-1"}),e.related_video.videoPic=h(e.related_video.videoPic,"_160_90")):9==n&&(e.dataUrl=e.myspaceUrl+e.uid);if(e.isLogin=s.isLogin(),1==n||3==n||4==n||5==n||7==n||8==n){var m={1:"查看详情",3:"查看完整评论",4:"查看详情",5:"查看详情",7:"查看更多该用户的视频>>",8:"查看投票详情"};e.openTip=m[n]}return e.hasParsed=!0,e},getParsedHtml:function(e,t){var n=e.type,a=n;a>0&&(n=u.getMessageRouter().getType(a)),2==a?n=1:7==a&&(n=2);var i=o.getTplByType(n),r=Q.crypto.md5(i);l.compile(r,i),e.hasParsed||(e=this.parseData(e,t));var s=l.render(r,e);return s},sendShowPingback:function(e,t,n){n&&(e=this.getPingbackType(e));var a=1;d.isPPS()&&(a=2011),Q.log.server({type:e,pf:a,p:10,block:"A",mssgnumb:t,pu:s.getUid(),pru:Q.cookie.get("P00PRU")||"",u:Q.cookie.get("QC006"),rn:m.generate(10)},"http://msg.71.am/tmpstats.gif")},sysSendShowPingback:function(e,t){t&&(e.type=this.getPingbackType(e.type));var n=1;d.isPPS()&&(n=2011),Q.log.server({t:e.type,bstp:"31_msg",pf:n,p:10,p1:101,block:"508282_01",mssgnumb:e.msgNum,pu:s.getUid(),u:Q.cookie.get("QC006"),rn:m.generate(10),msgid:e.msgids,pos:1},"http://msg.71.am/b")},sysSendClickPingback:function(e,t){t&&(e.type=this.getPingbackType(e.type));var n=1;d.isPPS()&&(n=2011),Q.log.server({t:e.type,pf:n,p:10,p1:101,rseat:"508282_01",pu:s.getUid(),u:Q.cookie.get("QC006"),rn:m.generate(10),msgid:e.msgid+":"+e.groupid+":6:"+e.sub_type+":"+e.source},"http://msg.71.am/b")}},methods:{notice:function(e,t,n){var a=this;this._model.asyncSend(e,function(){t&&t(),a.fire(e)},n)},getType:function(e){var t={2:2,1:2,3:2,4:2,5:2,7:1,8:2,6:3,9:2};return t[e]},getAcType:function(e){var t={1:"7",2:"1,2,3,4,5,8,9",3:"6"};return t[e]}}});n.exports=u});
define("model/messageRouterModel.js",["../components/model/model","../interfaces/ugcMessageChangeStatus","../kit/userInfo"],function(e,t,n){var a=e("../components/model/model"),i=e("../interfaces/ugcMessageChangeStatus");e("../kit/userInfo"),n.exports=Q.Class("MessageRouterModel",{extend:a,construct:function(){this.callsuper()},methods:{init:function(e){this.callsuper("init",e),this._ctrl=e},_getTypes:function(e,t){var n=this._ctrl;return e?t?t:n.getAcType(e):n.getAcType(1)+n.getAcType(2)+n.getAcType(3)},asyncSend:function(e,t,n){var a=e.data,r=a.type,o=null;a.msgids&&(o=a.msgids.join(",")),a.content&&(o=a.content);var l={},s=this._getTypes(r,a.actype);a.chat_uid&&(l.chat_uid=a.chat_uid,o=null);var m,d=a.action;1==d?(l.status=1,m="ugcReadAll",o?(l.msgids=o,m="ugcReadOne"):l.types=s):2==d&&(m="ugcDelAll",o?(l.msgids=o,m="ugcDelOne"):l.types=s),(new i)[m](l,function(e){"A00000"==e.code&&(t?t():n())})}}})});
define("interfaces/ugcMessageChangeStatus.js",["../kit/remoteInterface","./config","../kit/userInfo"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("./config"),r=e("../kit/userInfo");n.exports=Q.Class("ugcMessageChangeStatus",{construct:function(){this._remoteInterface=new a({ugcLoginDelOne:{url:i.interfaces.ugcLoginDelOne},ugcLogoutDelOne:{url:i.interfaces.ugcLogoutDelOne},ugcLoginReadOne:{url:i.interfaces.ugcLoginReadOne},ugcLogoutReadOne:{url:i.interfaces.ugcLogoutReadOne},ugcLoginDelAll:{url:i.interfaces.ugcLoginDelAll},ugcLogoutDelAll:{url:i.interfaces.ugcLogoutDelAll},ugcLoginReadAll:{url:i.interfaces.ugcLoginReadAll},ugcLogoutReadAll:{url:i.interfaces.ugcLogoutReadAll}})},methods:{request:function(e,t){e=e||{};var n={dataType:"jsonp",ifname:e.ifname,param:e};delete e.ifname,e.agent_type=1,this._remoteInterface.send(n,t)},ugcDelOne:function(e,t){var n="ugcLoginDelOne";r.isLogin()||(n="ugcLogoutDelOne"),this.request(Q.object.extend(e,{ifname:n}),t)},ugcReadOne:function(e,t){var n="ugcLoginReadOne";r.isLogin()||(n="ugcLogoutReadOne"),this.request(Q.object.extend(e,{ifname:n}),t)},ugcDelAll:function(e,t){var n="ugcLoginDelAll";r.isLogin()||(n="ugcLogoutDelAll"),this.request(Q.object.extend(e,{ifname:n}),t)},ugcReadAll:function(e,t){var n="ugcLoginReadAll";r.isLogin()||(n="ugcLogoutReadAll"),this.request(Q.object.extend(e,{ifname:n}),t)}}})});
define("model/noticeTemplateModel.js",["../config/siteDomain"],function(e,t,n){var a=e("../config/siteDomain");n.exports={sysNotice:function(){var e="http://www.qiyipic.com/common/fix/site/icon-nav_msg.png";return a.isPPS()&&(e="http://www.qiyipic.com/common/fix/site/icon-nav_msg-pps.png"),'<div class="nav_pop_item{{ if (isLogin) }}{{ if (status==0) }} nav_pop_item-readed{{ else }} nav_pop_item-unread{{ /if }}{{ else }} nav_pop_item_old{{ /if }}"{{ if (msgtype=="single") }}data-navmsgtips-actype="{{type}}" data-navmsgtips-item="item" r="{{clickmap_r}}" rseat="bubblealert"{{ /if }}data-notice_id="{{notice_id}}" data-href="{{dataUrl}}" data-groupid="{{groupId}}" data-url="{{url}}"data-sub_type="{{sub_type}}" data-source="{{source}}" "data-msgid={{notice_id}}" style="cursor:pointer"><div class="pop_item_inner clearfix" j-delegate="content"><div class="mod-bd clearfix"><div class="mod-bd_opt mod-bd_opt-notice"><span class="opt_title"><a class="link link-long" href="{{noteUrl}}" target="_blank" title="{{title}}">{{title}}</a></span>{{if (msgtype==="single") }}<span class="opt_close"><a data-navmsgtips-close="close" href="javascript:void(0);"  class="btn-close-popup">×</a></span>{{/if}}{{ if (isLogin) }}<span class="opt_desc"><em class="c999" title="{{parsedTime}}">{{parsedTime}}</em></span>{{ else }}<span class="opt_desc"><em class="c999" {{if (msgtype!="single") }}j-delegate="markread" hoverovertext="标记已读" hovertext="已读" hoverouttext="{{parsedTime}}" rseat="systemalert_read"{{/if}}>{{parsedTime}}</em></span>{{ /if }}</div>{{ if (isLogin) }}<div class="mod-bd_info"><em class="desc" title="{{content}}">{{=truncateContent}}</em></div><div class="mod-bd_more"><a target="_blank" href="{{dataUrl}}" class="link_more">查看完整内容</a></div>{{ else }}<div class="mod-bd_desc"><div class="trend_lt"><a href="{{dataUrl}}" target="_blank"><em class="desc textOverflow" title="{{content}}">{{content}}</em></a></div><div class="trend_look"><a href="{{dataUrl}}" target="_blank">立即查看</a></div></div>{{ /if }}</div></div>{{if (msgtype=="single") }}<div data-noticetip-elem="underframe" style="display: block;"><iframe src="about:blank" frameborder="0" style="position: absolute; z-index: 4; top: 25px; left: -156px;width: 300px; height: 62px; background-color: rgb(255, 255, 255);display: none; background-position: initial initial;background-repeat: initial initial;" data-private-display=""></iframe></div>{{ /if }}</div>'},updateNotice:function(){var e="http://www.qiyipic.com/common/fix/site/icon-nav_play.png";return a.isPPS()&&(e="http://www.qiyipic.com/common/fix/site/icon-nav_play-pps.png"),'<div class="nav_pop_item nav_pop_update{{ if (isLogin) }}{{ if (status==0) }} nav_pop_item-readed{{ else }} nav_pop_item-unread{{ /if }}{{ /if }}"{{ if (msgtype=="single") }}data-navmsgtips-actype="{{type}}"  data-navmsgtips-item="item" r="{{clickmap_r}}" rseat="bubblealert"{{ /if }}data-notice_id="{{notice_id}}" data-href="{{dataUrl}}"><div class="pop_item_inner clearfix" j-delegate="content"><div class="mod-bd clearfix"><div class="mod-bd_opt"><span class="opt_title"><a class="link link-long" href="{{videoUrl}}" target="_blank" title="{{videoName}}">{{videoName}}</a></span>{{ if (msgtype=="single") }}<span class="opt_close"><a data-navmsgtips-close="close"  href="javascript:void(0);" class="btn-close-popup">×</a></span>{{ /if }}{{ if (isLogin) }}<span class="opt_desc"><em class="c999" title="{{videoNameTip}}">{{videoNameTip}}</em></span>{{ else }}<span class="opt_desc"><em class="c999" {{if (msgtype!="single") }}j-delegate="markread" rseat="updatealert_read" hoverovertext="标记已读" hovertext="已读" hoverouttext="{{videoNameTip}}"{{/if}}>{{videoNameTip}}</em></span>{{ /if }}</div><div class="mod-bd_desc"><div class="trend_lt"><a href="{{dataUrl}}" target="_blank"><em class="desc" title="{{tvFocus}}">看点：{{tvFocus}}</em></a></div><div class="trend_look"><a href="{{dataUrl}}" target="_blank"><i class="site-icons msg-playBtn"></i>立即观看</a></div></div></div></div>{{ if (msgtype=="single") }}<div data-noticetip-elem="underframe" style="display: block;"><iframe src="about:blank" frameborder="0" style="position: absolute; z-index: 4; top: 25px; left: -156px;width: 300px; height: 62px; background-color: rgb(255, 255, 255);display: none; background-position: initial initial;background-repeat: initial initial;" data-private-display=""></iframe></div>{{ /if }}</div>'},myNotice:function(){return'<div class="nav_pop_item{{ if (isLogin) }}{{ if (status==0) }} nav_pop_item-readed{{ else }} nav_pop_item-unread{{ /if }}{{ /if }}"{{ if (msgtype=="single") }}data-navmsgtips-actype="{{type}}" data-navmsgtips-item="item" r="{{clickmap_r}}" rseat="bubblealert"{{ /if }} data-notice_id="{{notice_id}}" data-href="{{dataUrl}}"><div class="pop_item_inner clearfix" j-delegate="content">{{ if (type!=7) }}<div class="mod-hd"><a target="_blank"{{ if (type==8||type==4) }} href="{{dataUrl}}"{{ else }} href="{{myspaceUrl}}{{uid}}"{{ /if }} title="{{nickname}}"><img width="40" height="40" src="{{img_url}}" title={{nickname}} alt="{{nickname}}"></a></div>{{ /if }}<div class="mod-bd clearfix"><div class="mod-bd_opt"><span class="opt_title{{ if (type==7) }} fl{{ /if }}"><a target="_blank" class="link{{ if (type!=3) }} link-long{{ /if }}"{{ if (type==8||type==4) }} href="{{dataUrl}}"{{ else }} href="{{myspaceUrl}}{{uid}}"{{ /if }} title="{{nickname}}">{{ if (type!=4) }}{{nickname}}{{ else }}{{=formatNickname}}{{ /if }}</a>\n{{ if (type==3) }}{{ if (!isReply) }}<a class="desc" href="{{dataUrl}}" target="_blank">评论了</a>\n<a class="link" title="{{videoName}}" href="{{videoUrl}}" target="_blank">{{videoName}}</a>{{ else }}<a class="desc" href="{{dataUrl}}" target="_blank">回复了你的评论</a>{{ /if }}{{ /if }}</span>{{ if (msgtype=="single") }}<span class="opt_close"><a data-navmsgtips-close="close"href="javascript:void(0);" class="btn-close-popup">×</a></span>{{ /if }}{{ if (type==7) }}<a class="opt_title" target="_blank" href={{dataUrl}}>上传了<span class="link_num">{{ext_data}}</span>个视频</a>{{ else if (type==9) }}<span class="opt_desc"><em class="c999" j-delegate="addfollow" uid="{{uid}}" subscribe="true" nickname="{{nickname}}">+订阅</em></span>{{ else }}<span class="opt_desc"><em class="c999" title="{{parsedTime}}">{{parsedTime}}</em></span>{{ /if }}</div>{{ if (type!=7) }}<div class="mod-bd_desc"><div class="trend_lt">{{ if (type==1) }}<a target="_blank" href="{{dataUrl}}"><em class="desc">私信了你</em></a>{{ else if (type==3) }}<a href="{{dataUrl}}" target="_blank"><em class="desc textOverflow" title="{{content}}">{{content}}</em></a>{{ else if (type==5) }}<a target="_blank" href="{{dataUrl}}"><em class="desc">订阅了你</em></a>{{ else if (type==8) }}<a target="_blank" href="{{dataUrl}}"><span><em class="desc">收到</em></span><span><em class="link green w-auto">{{content}}</em></span><span><em class="desc">条新投票</em></span></a>{{ else if (type==9) }}<a href="{{dataUrl}}" target="_blank"><em class="desc">看过他的视频</em></a>{{ /if }}</div>{{ if (type==5) }}<div class="trend_look"><a target="_blank" href="{{myspaceUrl}}fans">{{openTip}}</a></div>{{ else if (type==9) }}<div class="trend_look"><em class="green" {{if (msgtype!="single") }}j-delegate="markread" hovertext="下次再说" hoverovertext="下次再说" hoverouttext="下次再说" rseat="mydynamic_read"{{/if}}>下次再说</em></div>{{ else if (type==4||type==8) }}<div class="trend_look"><a target="_blank" href="{{dataUrl}}">{{openTip}}</a></div>{{ else }}<div class="trend_look"><a target="_blank" href="{{dataUrl}}">{{openTip}}</a></div>{{ /if }}</div>{{ else }}<div class="mod-bd_piclist"><a target="_blank" href="{{videoUrl}}" class="piclist_img"><img alt="{{=related_video.videoName}}" title="{{=related_video.videoName}}" src="{{=related_video.videoPic}}"></a><div class="piclist_cont"><div class="cont_title"><a target="_blank" href="{{videoUrl}}" title="{{=related_video.videoName}}">{{=related_video.videoName}}</a></div><div class="cont_desc-bt"><div class="cont_desc_right"><a target="_blank" class="cont_desc_link" title="去空间查看更多" href="{{dataUrl}}">去空间查看更多</a></div><div class="cont_desc_content">{{parsedTime}}</div></div></div></div>{{ /if }}</div></div>{{ if (msgtype=="single") }}<div data-noticetip-elem="underframe" style="display: block;"><iframe src="about:blank" frameborder="0" style="position: absolute; z-index: 4; top: 25px; left: -156px;width: 300px; height: 62px; background-color: rgb(255, 255, 255);display: none; background-position: initial initial;background-repeat: initial initial;" data-private-display=""></iframe></div>{{ /if }}</div>'},getTplByType:function(e){return 1==e?this.updateNotice():2==e?this.myNotice():3==e?this.sysNotice():0===e?this.getNoneNotice():-1==e?this.getScrollBarTpl():void 0},getNoneNotice:function(){return'<div class="nav_pop_noItem"><div class="pop_noItem_inner"><div><em>{{if (page==1)}}您还没有收到新的更新消息{{/if}}{{if (isLogin&&page==2)}}您还没有收到新的动态{{/if}}{{if (!isLogin)&&page==2}}暂时还没有新的推荐{{/if}}{{if (isLogin&&page==3)}}您还没有收到新的系统消息{{/if}}{{if (!isLogin&&page==3)}}您还没有登录{{/if}}</em></div><div class="mt5">{{if (!isLogin&&page==3)}}您<a class="noItem_link" href="javascript:void(0);" j-pingback="act:accloginclk" j-delegate="login">登录</a>后可以查看完整的通知列表{{/if}}</div></div><span class="vl-fix"></span></div>'},getScrollBarTpl:function(){return'<div class="scrollbar_track" style="display:none;" wrapperheight="305" data-navmessagefloater-elem="scrollbar"><a data-navmessagefloater-elem="scrollbarhandle" href="javascript:void(0);" class="scrollbar_handle" style="height: 100px; top: 0;"></a></div>'}}});
define("view/navMessageFloaterView.js",["./hoverShowView","../kit/userInfo","../kit/iframeLocation","../kit/followInfo","../components/action/floater","../components/view/floaterView","../kit/artTemplate","../action/qipaLogin","../config/siteDomain"],function(e,t,n){var a=e("./hoverShowView"),i=e("../kit/userInfo"),r=e("../kit/iframeLocation"),o=e("../kit/followInfo"),l=e("../components/action/floater"),s=e("../components/view/floaterView"),m=e("../kit/artTemplate"),d=e("../action/qipaLogin"),h=e("../config/siteDomain"),c="http://www.iqiyi.com/u/sub",u="http://www.iqiyi.com/u/news/comment",U="http://www.iqiyi.com/u/news/note",p="http://www.iqiyi.com/u/news/message",V="http://www.iqiyi.com/u/news/like",f="http://www.iqiyi.com/u/news/recommendation";n.exports=Q.Class("NavMessageFloaterView",{extend:a,construct:function(e){this.callsuper(e);var t=this._doms;Q.$(t.bodies[0]).addClass("pop_main_inner_remind"),Q.$(t.bodies[1]).addClass("pop_main_inner_trend"),Q.$(t.bodies[2]).addClass("pop_main_inner_notify");var n=t.moreBtn.parent(),a=n.parent();a.html("BEFOREEND",'<div class="nav_pop_ft_recorder clearfix" style="display:none;"><a title="查看更多" data-navmessagefloater-elem="morebtn" unlogin="true">查看更多</a></div>'),t.moreBtn=a.down("[data-navmessagefloater-elem=morebtn]"),t.loginMoreBtnCon=n,t.markReadBtnCon=t.markReadBtn.parent(),t.unloginMoreBtnCon=a.down("[data-navmessagefloater-elem=morebtn][unlogin=true]").parent(),t.footer=a},properties:{addFlowSucTpl:['<div class="nav_pop_single-rss">','<div class="nav_pop_item">','<div class="pop_item_inner clearfix">','<div class="mod-hd"><i class="icon-rss-success"></i></div>','<div class="mod-bd clearfix">','<div class="mod-bd_desc">','<em class="desc">恭喜您已成功订阅用户“{{nickname}}”</em>',"</div>","</div>","</div>","</div>","</div>"].join("")},methods:{init:function(e){this.callsuper("init",e);var t=this,n=Q.event.customEvent;n.on("qipaLoginIfrRendered",function(){t._setLoginRegistBoxCaption()}),n.on("qipaLoginIfrShown",function(){t._setLoginRegistBoxCaption()}),n.on("qipaLoginIfrHide",function(){t._rlt=!1,t._setLoginRegistBoxCaption()})},update:function(e){this.callsuper("update",e),this._setFooter(),this._setTab(e.seq),this._setData(e.data),this._setBtnStatus(),this._setPingbackParam()},_setLoginRegistBoxCaption:function(){var e=d.qipaLoginIfr.down("[data-loginbox-elem=caption]"),t=d.qipaLoginIfr.down("[data-registbox-elem=caption]"),n=e.attr("data-loginbox-defaultcaption"),a=t.attr("data-registbox-defaultcaption"),i="登录之后就可以订阅他/她咯",r="注册爱奇艺账号，马上订阅他/她";this._rlt?(n||(e.attr("data-loginbox-defaultcaption",e.html()),e.html(i)),a||(t.attr("data-registbox-defaultcaption",t.html()),t.html(r))):(n&&(e.html(n),e.removeAttr("data-loginbox-defaultcaption")),a&&(t.html(a),t.removeAttr("data-registbox-defaultcaption")))},_setPingbackParam:function(){var e=this._doms,t=e.body,n=e.moreBtn,a=e.markReadBtn,i=[t],r=t.down("a")||[],o=t.down("img")||[];r.forEach(function(e){e=Q.$(e),"tabtitle"!=e.parent().attr("data-navmessagefloater-elem")&&i.push(e)}),o.forEach(function(e){i.push(Q.$(e))});var l=this._seq;0===l?(i.forEach(function(e){e.attr("rseat","updatealert")}),n.attr("rseat","updatealert_more"),a.attr("rseat","updatealert_rdall")):1==l?(i.forEach(function(e){e.attr("rseat","mydynamic")}),n.attr("rseat","mydynamic_more"),a.attr("rseat","mydynamic_rdall")):(i.forEach(function(e){e.attr("rseat","systemalert")}),n.attr("rseat","systemalert_more"),a.attr("rseat","systemalert_rdall"))},_setFooter:function(){var e=this._doms;i.isLogin()?(e.unloginMoreBtnCon.hide(),e.markReadBtnCon.show(),e.loginMoreBtnCon.show()):(e.loginMoreBtnCon.hide(),e.markReadBtnCon.hide(),e.unloginMoreBtnCon.show())},_setTab:function(e){void 0!==e&&this._seq!==e&&(this._seq=e)},_setBtnStatus:function(){var e=this._doms,t=e.moreBtn,n=e.markReadBtn,a=this._ctrl._model.get(),r=a.data,o=this._seq,l="disabled";a.pageCount;var s=r["page"+(o+1)]||{},m=s.unread||0;m?n.removeClass(l):n.addClass(l);var d=Q.$(e.nums[1]).parent(),h=Q.$(e.nums[0]).parent();i.isLogin()?(d.html("与我相关"+d.html().substr(4)),h.html("我的订阅"+h.html().substr(4))):(d.html("用户推荐"+d.html().substr(4)),h.html("更新提醒"+h.html().substr(4))),e.nums=e.body.down("[data-navmessagefloater-elem=num]");var g="";if(0===o)g=c,i.isLogin()||(g="http://www.iqiyi.com/u/news/update");else if(1==o){g=u;var y=s.messages;if(y)for(var b=0;b<y.length;b++){var v=y[b].type;if(3==v)break;if(1==v){g=p;break}if(4==v){g=V;break}}i.isLogin()||(g=f)}else g=U;t.attr("href",g)},_setData:function(e){var t=this._doms,n=t.nums,a=t.numTip;i.isLogin();for(var r=0;r<n.length;r++){var o=Q.$(n[r]),l=e["page"+(r+1)]||{},s=l.unread||0;s>0?(o.html(s>99?"99+":s),o.show()):o.hide()}var m=!1;e.unshow&&(a.show(),m=!0),this._ctrl._model.get().visible&&a.hide(),Q.event.customEvent.fire({type:"navmsgnumchange",data:Q.object.extend(e,{dotVisible:m})})},onMarkReadBtnClick:function(e){var t=this._ctrl._model.get(),n=t.data,a=this._seq,i=n["page"+(a+1)];i&&i.messages&&i.messages.length&&this._ctrl.notice({type:"onMarkReadBtnClick",data:{evt:Q.event.get(e)}})},onMoreBtnClick:function(e){e=Q.event.get(e),e.preventDefault();var t=this._seq;0===t&&Q.cookie.set("FEEDTYPESN",30,{expires:6e6,path:"/",domain:h.SITE_DOMAIN});var n=this._ctrl._model.get(),a=n.data,i=a["page"+(t+1)],o=Q.$(e.target).attr("href");i&&i.messages&&i.messages.length?this._ctrl.notice({type:"onMarkReadBtnClick",data:{evt:Q.event.get(e),successCb:function(){r.href(o)},failCb:function(){r.href(o)}}}):r.href(o)},onTitleClick:function(e){if(Q.event.get(e).preventDefault(),Q.browser.iPad){var t=this._ctrl.syncGet().visible;t?this.hide(0):this.show(0)}},onHoverOver:function(e){Q.browser.iPad||this.callsuper("onHoverOver",e)},addFollow:function(e){e=Q.event.get(e),e.preventDefault(),this._rlt=!0;var t=Q.$(e.target),n=this,a=t.attr("uid"),i=t.attr("nickname");d.openLoginWindow({from:"subscribe"},function(){var e={uids:a};o.addFollow(e,function(e){if("A00000"==e.code){o.fire({type:"memberStateChange",data:{uid:a,stateTo:2}});var t=n.addFlowSucTpl,r=Q.crypto.md5(t);m.compile(r,t);var d=m.render(r,{nickname:i});n._floater||(n._floater=new l({view:new s({isResize:!0})})),n._floater.show({html:d}),setTimeout(function(){n._floater.hide()},1500)}})})},bindEvents:function(){this.callsuper("bindEvents"),this._markReadBtnClickHandler||(this._markReadBtnClickHandler=this.onMarkReadBtnClick.bind(this)),this._moreBtnClickHandler||(this._moreBtnClickHandler=this.onMoreBtnClick.bind(this)),this._titleClickHandler||(this._titleClickHandler=this.onTitleClick.bind(this)),this._addFollowHandler||(this._addFollowHandler=this.addFollow.bind(this)),this._doms.markReadBtn.on("click",this._markReadBtnClickHandler),this._doms.moreBtn.on("click",this._moreBtnClickHandler);var e="click";Q.browser.iPad&&(e="touchstart"),this._doms.title.on(e,this._titleClickHandler),this._doms.body.delegate("addfollow",this._addFollowHandler,"click")},unbindEvents:function(){if(this._markReadBtnClickHandler&&this._doms.markReadBtn.un("click",this._markReadBtnClickHandler),this._moreBtnClickHandler&&this._doms.moreBtn.un("click",this._moreBtnClickHandler),this._titleClickHandler){var e="click";Q.browser.iPad&&(e="touchstart"),this._doms.title.un(e,this._titleClickHandler)}this._addFollowHandler&&this._doms.body.undelegate("addfollow",this._addFollowHandler,"click")}}})});
define("kit/followInfo.js",["../interfaces/ugcFollowsInterface","../kit/eventPlugin","../kit/userInfo","./generateRandomString"],function(e,t,n){new Q.ic.InfoCenter({moduleName:"kit/followInfo"});var a=e("../interfaces/ugcFollowsInterface"),i=e("../kit/eventPlugin"),r=e("../kit/userInfo"),o=e("./generateRandomString"),l={},s="http://msg.71.am/b",m=Q.Class("FollowInfo",{plugins:[new i],construct:function(){this.init()},methods:{init:function(){},insert:function(e){e=e||{},e.name&&e.action&&(l[e.name]||(l[e.name]=e.action))},getFollow:function(e){return l[e]},getAllFollow:function(){return l},deleteFollow:function(e){l[e]&&delete l[e]},clearAllFollow:function(){l={}},setEnableState:function(e){for(var t in l)l[t].view.setEnable(e)},addFollow:function(e,t){e=e||{},(new a).addFollow(e,t)},removeFollow:function(e,t){e=e||{},(new a).removeFollow(e,t)},removeFans:function(e,t){e=e||{},(new a).removeFans(e,t)},pushFollow:function(e){(new a).pushFollow(null,e)},getFollows:function(e,t){e=e||{},new a({url:e.url}).getFollows(e.params,t)},getFollower:function(e,t){e=e||{},new a({url:e.url}).getFollower(e.params,t)},getFans:function(e,t){e=e||{},new a({url:e.url}).getFans(e.params,t)},getTimeline:function(e,t){e=e||{},new a({url:e.url}).getTimeline(e.params,t)},getRel:function(e,t){e=e||{},e.auth=r.getAuthCookies(),(new a).getRel(e,t)},getSubTimeline:function(e,t){e=e||{},new a({url:e.url}).getSubTimeline(e.params,t)},sendPingback:function(e){e=e||{};var t={t:20,pf:1,p:Q.browser.iPad?20:10,p1:101,bstp:"0",pu:r.getUid(),u:Q.cookie.get("QC005"),rn:o.generate(10)};Q.object.extend(t,e),Q.log.server(t,s)}}}),d=new m;n.exports=d});
define("interfaces/ugcFollowsInterface.js",["../kit/remoteInterface","./config"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("./config");n.exports=Q.Class("ugcFollowsInterface",{construct:function(e){e=e||{},e.url&&(this.url=e.url),this._remoteInterface=new a({addFollow:{url:i.interfaces.ugcAddFollow},removeFollow:{url:i.interfaces.ugcRemoveFollow},removeFans:{url:i.interfaces.ugcRemoveFans},pushFollow:{url:i.interfaces.ugcPushFollow},getFans:{url:this.url?this.url:i.interfaces.ugcGetFans},getFollows:{url:this.url?this.url:i.interfaces.ugcGetFollows},getFollower:{url:this.url?this.url:i.interfaces.ugcGetFollower},getTimeline:{url:this.url?this.url:i.interfaces.ugcGetTimeline},getRel:{url:i.interfaces.ugcGetRel},getSubTimeline:{url:this.url?this.url:i.interfaces.ugcGetSubTimeline}})},methods:{addFollow:function(e,t){e=e||{},this._remoteInterface.send({param:e,ifname:"addFollow",dataType:"jsonp",antiCsrf:!0},function(e){t&&t(e)})},removeFollow:function(e,t){e=e||{},e.antiCsrf=Q.crypto.md5(Q.cookie.get("P00001")),this._remoteInterface.send({param:e,ifname:"removeFollow",dataType:"jsonp",antiCsrf:!0},function(e){t&&t(e)})},removeFans:function(e,t){e=e||{},e.antiCsrf=Q.crypto.md5(Q.cookie.get("P00001")),this._remoteInterface.send({param:e,ifname:"removeFans",dataType:"jsonp",antiCsrf:!0},function(e){t&&t(e)})},pushFollow:function(e,t){e=e||{},this._remoteInterface.send({param:e,ifname:"pushFollow",dataType:"jsonp"},function(e){t&&t(e)})},getFollows:function(e,t){e=e||{},this._remoteInterface.send({param:e,ifname:"getFollows",dataType:"jsonp"},function(e){t&&t(e)})},getFollower:function(e,t){e=e||{},this._remoteInterface.send({param:e,ifname:"getFollower",dataType:"jsonp"},function(e){t&&t(e)})},getFans:function(e,t){e=e||{},this._remoteInterface.send({param:e,ifname:"getFans",dataType:"jsonp"},function(e){t&&t(e)})},getTimeline:function(e,t){e=e||{},this._remoteInterface.send({param:e,ifname:"getTimeline",dataType:"jsonp"},function(e){t&&t(e)})},getRel:function(e,t){e=e||{},this._remoteInterface.send({param:e,ifname:"getRel",dataType:"jsonp"},function(e){t&&t(e)})},getSubTimeline:function(e,t){e=e||{},this._remoteInterface.send({param:e,ifname:"getSubTimeline",dataType:"jsonp"},function(e){t&&t(e)})}}})});
define("model/navMessageFloaterModel.js",["./hoverShowModel","../interfaces/messageInterface","../kit/userInfo"],function(e,t,n){var a=e("./hoverShowModel"),i=e("../interfaces/messageInterface"),r=e("../kit/userInfo");n.exports=Q.Class("NavMessageFloaterModel",{extend:a,construct:function(e){e=Q.object.extend({seq:0,interval:18e5,pageCount:5,leftNavMsgVisible:!1,data:{total:0,unread:0,unshow:!1}},e),this.callsuper(e)},methods:{init:function(e){this.callsuper("init",e),this._ctrl=e,this.getMessage();var t=this,n=Q.event.customEvent;n.on("login",function(){t.getMessage()}),n.on("logout",function(){t.getMessage()})},_fetchMessage:function(e,t){this.get().visible||this.get().leftNavMsgVisible?i.getNavMessage(e,function(e){e=e.data||{},e.total=0,e.unread=0;for(var n=1;3>=n;n++)e.total+=e["page"+n]?e["page"+n].total:0,!r.isLogin()&&e["page"+n]&&(e["page"+n].unread=e["page"+n].total),e.unread+=e["page"+n]?e["page"+n].unread:0;e.unshow=0,t({data:e})}):i.getNavMessageCount(e,function(e){e=e.data,t({data:{unread:e?e.unread:0,unshow:e?e.unshow:0}})})},getMessage:function(e,t){var n=this;this._getMessageTimer&&(clearTimeout(this._getMessageTimer),this._getMessageTimer=null);var a=this.get(),i=a.interval,o=r.isLogin();this._fetchMessage({count:a.pageCount},function(a){if(o==r.isLogin()){var l=n.get(),s=l.seq;!e||l.data.page1&&l.data.page2&&l.data.page3||(a.data.page1&&a.data.page1.total?s=0:a.data.page2&&a.data.page2.total?s=1:a.data.page3&&a.data.page3.total&&(s=2)),n.set({data:a.data,seq:s}),n._ctrl.notice({type:"onDataChange",data:n.get()}),n._isValid(t)||(n._getMessageTimer=setTimeout(function(){n.getMessage(r.isLogin())},i))}})},_isValid:function(e){var t=this.get(),n=t.pageCount,a=!0;if(e)a=!1;else for(var i=1;3>=i;i++){var r=t.data["page"+i];if(!r||!r.messages||r.messages.length<n){a=!1;break}}return a},updateMessage:function(e){this.set(e),r.isLogin()||this._isValid()||this.getMessage()}}})});
define("interfaces/messageInterface.js",["./config","../kit/remoteInterface","../kit/userInfo"],function(e,t,n){var a=e("./config"),i=e("../kit/remoteInterface"),r=e("../kit/userInfo"),o=Q.Class("MessageInterface",{construct:function(){this._remoteInterface=new i({getLoginNavMsg:{url:a.interfaces.getLoginNavMsg},getLogoutNavMsg:{url:a.interfaces.getLogoutNavMsg},getLoginNavMsgCnt:{url:a.interfaces.getLoginNavMsgCnt},getLogoutNavMsgCnt:{url:a.interfaces.getLogoutNavMsgCnt}})},methods:{request:function(e,t){e=e||{};var n={dataType:"jsonp",ifname:e.ifname,param:e};delete e.ifname,e.agent_type=1,this._remoteInterface.send(n,t)},getNavMessage:function(e,t){var n="getLoginNavMsg";r.isLogin()||(n="getLogoutNavMsg"),this.request(Q.object.extend(e,{ifname:n}),t)},getNavMessageCount:function(e,t){var n="getLoginNavMsgCnt";r.isLogin()||(n="getLogoutNavMsgCnt"),this.request(Q.object.extend(e,{ifname:n}),t)}}});n.exports=new o});
define("action/navMessageFloaterList.js",["./list","./navMessageFloaterItem","../view/navMessageFloaterItemView"],function(e,t,n){var a=e("./list"),i=e("./navMessageFloaterItem"),r=e("../view/navMessageFloaterItemView");n.exports=Q.Class("NavMessageFloaterList",{extend:a,construct:function(e){this.callsuper(e)},methods:{buildItems:function(e){var t=[];return e.itemsData.forEach(function(e){var n={data:e},a=new r(n),o=new i(Q.object.extend(n,{view:a}));o.init(),t.push(o)}),t},bindItemsEvents:function(){var e=this.items;if(e){this._clickItemHandler||(this._clickItemHandler=this.onClickItem.bind(this));var t=this;e.forEach(function(e){e.on("click",t._clickItemHandler)})}},unbindItemsEvents:function(){var e=this.items;if(e){var t=this;e.forEach(function(e){t._clickItemHandler&&e.un("click",t._clickItemHandler)})}},onClickItem:function(e){this.fire({type:"itemclick",data:e.data})}}})});
define("action/navMessageFloaterItem.js",["./item","./messageRouter"],function(e,t,n){var a=e("./item"),i=e("./messageRouter");n.exports=Q.Class("NavMessageFloaterItem",{extend:a,construct:function(e){this.callsuper(e)},methods:{syncGet:function(e){var t=this._model.get(e),n=this._view.formatData(t.data);return Q.object.extend({html:i.getParsedHtml(n,t.data.systime||0),formatData:n},t)}},properties:{events:{onClick:function(e){this.fire({type:"click",data:Q.object.extend(this,e.data)})}}}})});
define("view/navMessageFloaterItemView.js",["./itemView","../action/pcCheckbox","../kit/mousePosListener","../action/messageRouter","../kit/parentByProp","../kit/userInfo"],function(e,t,n){var a=e("./itemView");e("../action/pcCheckbox");var i=e("../kit/mousePosListener");e("../action/messageRouter");var r=e("../kit/parentByProp"),o=e("../kit/userInfo");n.exports=Q.Class("NavMessageFloaterItemView",{extend:a,construct:function(e){this.callsuper(e),this._doms=e.doms},methods:{update:function(e){if(void 0!==e.doms&&(this._doms&&this.unbindEvents(),this._doms=e.doms,e.doms&&this.bindEvents()),this._setSelect(e.select),void 0!==e.doms){var t=e.doms.con;if(!Q.browser.IE){var n=t.top(),a=t.height(),o=t.left(),l=t.width(),s=i.pos;s.x>=o&&s.x<=o+l&&s.y>=n&&s.y<=n+a&&this.onConHoverOver()}var d=this._ctrl._model.get().data.status,m=this;if(0===d){var h=null,c=function(){if(0===d&&!m._ctrl._model.get().data.changingState){var e=r(t,"data-navmessagefloater-elem","tabbody").parent(),n=e.top(),a=n+e.height()+3,i=t.top(),o=i+t.height(),l=t.parent();l.parent().isInScreen()&&i>=n&&a>=o?h||(h=setTimeout(function(){h=null,m._ctrl._model.get().data.changingState=!0,m._ctrl.notice({type:"onClick",data:{successCb:function(){m._ctrl._model.get().data.changingState=!1},failCb:function(){m._ctrl._model.get().data.changingState=!1}}})},500)):h&&(clearTimeout(h),h=null)}},u=["navMessageFloaterTabChange","updateRecordsShow","navMessageFloaterScroll"];u.forEach(function(e){Q.event.customEvent.on(e,function(){c()})}),c()}}},bindEvents:function(){if(this.callsuper("bindEvents"),this._conClickHandler||(this._conClickHandler=this.onConClick.bind(this)),this._conHoverOverHandler||(this._conHoverOverHandler=this.onConHoverOver.bind(this)),this._conHoverOutHandler||(this._conHoverOutHandler=this.onConHoverOut.bind(this)),this._touchBodyHandler||(this._touchBodyHandler=this._onTouchBody.bind(this)),this._doms){var e=this,t=this._doms.con,n=t.parent();if(this._initScrollBar=function(){var e=0,a=!1,i=n.height()-1,o=t.attr("wrapperheight");if(i>o){t.css("display","block");var l=t.down("[data-navmessagefloater-elem=scrollbarhandle]"),s=Q.$(document);l.css("height",o/i*o+"px");var d=parseInt(n.css("marginTop"),10);l.css("top",-1*d-o/i*d+"px"),parseInt(l.css("height"),10);var m="mousedown",h="mousemove",c="mouseup";Q.browser.iPad&&(m="touchstart",h="touchmove",c="touchend");var u=function(t){t=Q.event.get(t),t.preventDefault(),s.un(h),s.on(h,p),a=!0,e=t.clientY,Q.browser.iPad&&(e=t.changedTouches[0].clientY)},U=function(e){var t=e*i/o,a=(parseInt(n.css("marginTop"),10)||0)-t;a>0&&(a=0),-1*a>i-o&&(a=o-i),n.css("marginTop",a+"px"),l.css("top",-1*a-o/i*a+"px"),Q.event.customEvent.fire({type:"navMessageFloaterScroll",data:{}})},p=function(t){if(a){t=Q.event.get(t);var n=t.clientY;Q.browser.iPad&&(n=t.changedTouches[0].clientY),U(n-e),e=n}},V=function(){s.un(h),a=!1},f=function(e){U(e*o/i)};l.on(m,u),s.on(c,V);var g=r(n,"data-navmessagefloater-elem","body");g.un("mousewheel"),g.on("mousewheel",function(e){e=Q.event.get(e),e.preventDefault();var t=e.wheelDelta?e.wheelDelta/120:0-e.detail/3,a=Math.abs(parseInt(n.css("marginTop"),10)),i=n.children(),r=0,l=0;if(0>t)for(var s=0;s<i.length;s++){var d=Q.$(i[s]);if(!d.attr("data-navmessagefloater-elem")&&(l=d.height(),r+=l,r>a))break}else for(var m=i.length-1;m>=0;m--){var h=Q.$(i[m]);if(!h.attr("data-navmessagefloater-elem")&&(l=h.height(),r+=l,r+a+o>n.height()))break}t>0?f(-1*l):0>t&&f(l)})}},"scrollbar"!=t.attr("data-navmessagefloater-elem")){var a="mouseenter";Q.browser.iPad?(a="touchstart",Q.$("body").on("touchstart",e._touchBodyHandler)):t.on("mouseleave",e._conHoverOutHandler),t.on("click",e._conClickHandler),t.on(a,e._conHoverOverHandler)}else{n.parent().isInScreen()&&(this._initScrollBar(),this._hasInit=!0);var i=["navMessageFloaterTabChange","updateRecordsShow"];i.forEach(function(t){Q.event.customEvent.on(t,function(){n.parent().isInScreen()&&!e._hasInit&&(e._initScrollBar(),e._hasInit=!0)})})}}},unbindEvents:function(){if(this.callsuper("unbindEvents"),this._doms){var e=this._doms.con,t="mouseenter";Q.browser.iPad?(t="touchstart",Q.$("body").un("touchstart",this._touchBodyHandler)):this._conHoverOutHandler&&e.un("mouseleave",this._conHoverOutHandler),this._conClickHandler&&e.un("click",this._conClickHandler),this._conHoverOverHandler&&e.un(t,this._conHoverOverHandler)}},onConClick:function(e){if(!o.isLogin()){var t=this._ctrl._model.get().data,n=t.type,a=this._doms.con;e=Q.event.get(e);var i=Q.$(e.target);if(i.attr("subscribe"))return;if(n&&"true"!=a.attr("marked")){a.attr("marked","true");var r=t.dataUrl;o.isLogin()&&(r="");var l=null;if("A"==(i[0].tagName||"").toUpperCase())l=i;else{var s=Q.$(i.parent("a"));s&&(l=s)}l&&l.attr("href")?(r=l.attr("href"),"_blank"==l.attr("target")?r="":e.preventDefault()):e.preventDefault();var d=Q.fn.emptyMethod;"markread"==i.attr("j-delegate")&&(i.html(i.attr("hovertext")),r="",d=function(){a.removeAttr("marked"),i.html(i.attr("hoverouttext"))}),this._ctrl.notice({type:"onClick",data:Q.object.extend({href:r,failCb:d},e)})}}},onConHoverOver:function(){if(this._ctrl._model.get().data.type){var e=this._doms.con,t=e.down("[j-delegate=content]");e.addClass("nav_pop_item-hover"),t&&t.addClass("hover");var n=e.down("[j-delegate=markread]");n&&n.html(n.attr("hoverovertext"))}},onConHoverOut:function(){if(this._ctrl._model.get().data.type){var e=this._doms.con,t=e.down("[j-delegate=content]");e.removeClass("nav_pop_item-hover"),t&&t.removeClass("hover"),this._ctrl._model.get().data;var n=e.down("[j-delegate=markread]");n&&n.html(n.attr("hoverouttext"))}},_onTouchBody:function(e){var t=Q.$(Q.event.get(e).target),n=this._doms.con;n.contains(t)||this.onConHoverOut(e)}}})});
define("action/pcCheckbox.js",["../kit/easyEventPlugin","../components/action/adapter","../model/pcCheckboxModel","../view/pcCheckboxView"],function(e,t,n){var a=e("../kit/easyEventPlugin"),i=e("../components/action/adapter"),r=e("../model/pcCheckboxModel"),o=e("../view/pcCheckboxView"),l="pcCheckbox";Q.event.customEvent,new Q.ic.InfoCenter({moduleName:l}),n.exports=Q.Class(l,{extend:i,plugins:[new a],construct:function(e){return this.widgetId=l+(Math.random()+"").slice(2),e=e||{},e.constructor===Q.element.Element&&(e={doms:{box:e}}),this.box=e.doms.box,this.binder=e.doms.binder,this.box?(e.data=Q.object.extend({name:this.box.attr("data-pccheckbox-name"),value:this.box.attr("data-pccheckbox-value")},e.data),e.opts=Q.object.extend({selectedClass:this.box.attr("data-pccheckbox-selectedclass"),disabledClass:this.box.attr("data-pccheckbox-disabledclass")},e.opts),e.model=e.model||new r(e),e.view=e.view||new o(e),this.callsuper(e),this.init(),void 0):null},properties:{events:{click:function(){this.value(!this.value())}},isActive:!1},methods:{init:function(){this.render(),this.bindEvent(),this.bind()},bindEvent:function(){},name:function(e){return this._model.name(e)},value:function(e){var t=this._model.value();return this._model.value(e)===e&&t!==e&&(this._view.update(e),this.fire("change",{origin:t,curr:e})),this._model.value()},check:function(e){return this.value(e)},render:function(){return this._view.update(this._model.value()),this},disable:function(){return this._view.able(!1),this},enable:function(){return this._view.able(!0),this},bind:function(e){if(e=e||this.binder){this.binder=Q.$(e);var t=this;this.binder.on("change",function(){t.value(t.binder[0].checked)}),this.on("change",function(e){t.binder[0].checked=e.curr}),this.value(this.binder[0].checked)}return this}}})});
define("model/pcCheckboxModel.js",["../components/model/model"],function(e,t,n){var a=e("../components/model/model");new Q.ic.InfoCenter({moduleName:"pcCheckboxModel"}),n.exports=Q.Class("pcCheckboxModel",{extend:a,construct:function(e){this._data=e.data||{},this._data.value=this._data.value||!1,this._data.name=this._data.name||""},methods:{checkName:function(e){return"[object String]"===Object.prototype.toString.call(e)},name:function(e){return this.checkName(e)&&(this._data.name=e),this._data.name},value:function(e){return void 0!==e&&(this._data.value=!!e),this._data.value}}})});
define("view/pcCheckboxView.js",["../components/view/view"],function(e,t,n){var a=e("../components/view/view");new Q.ic.InfoCenter({moduleName:"pcCheckboxView"}),n.exports=Q.Class("pcCheckboxView",{extend:a,construct:function(e){this._doms=e.doms,this._opts=e.opts||{},this._opts.selectedClass=this._opts.selectedClass||"selected",this._opts.disabledClass=this._opts.disabledClass||"disabled"},methods:{init:function(e){this._ctrl=e,this.bindEvent()},update:function(e){e?this._doms.box.addClass(this._opts.selectedClass):this._doms.box.removeClass(this._opts.selectedClass)},able:function(e){if(void 0===e){var t=this._doms.box.attr("data-pccheckbox-disabled");return!(t&&"false"!==t)}e?(this._doms.box.removeClass(this._opts.disabledClass),this._doms.box.removeAttr("data-pccheckbox-disabled")):(this._doms.box.addClass(this._opts.disabledClass),this._doms.box.attr("data-pccheckbox-disabled","disabled"))},bindEvent:function(){var e=this,t=this._ctrl,n=Q.browser.iPad?"touchstart":"click";this._doms.box.on(n,function(){e.able()&&t.notice({type:"click"})})}}})});
define("kit/mousePosListener.js",["../components/action/adapter","./eventPlugin"],function(e,t,n){var a=e("../components/action/adapter"),i=e("./eventPlugin");Q.$(document.body);var r=null,o=Q.Class("MousePosListener",{extend:a,plugins:[new i],construct:function(e){this.callsuper(e)},statics:{getInstance:function(){return r||(r=new o,r.init()),r}},methods:{init:function(){this.pos={x:void 0,y:void 0};var e=this;Q.$(document).on("mousemove",function(t){t=Q.event.get(t),(t.clientX!==e.pos.x||t.clientY!==e.pos.y)&&(e.pos={x:t.clientX,y:t.clientY},e.fire({type:"posChange",data:e.pos}))})}}});n.exports=o.getInstance()});
define("units/pcNavUpload.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/ugcBonusInterface","../kit/userInfo","../kit/findParent","../kit/ppsSyncAuthUrl"],function(e){var t=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),a=e("../interfaces/ugcBonusInterface"),i=e("../kit/userInfo"),r=e("../kit/findParent");e("../kit/ppsSyncAuthUrl");var o,s="pcNavUpload";!(Q.browser.IE6||Q.browser.IE7||Q.browser.IE8);var l;t.create(s,{getDependentDoms:function(){return o={parent:Q.$("#data-widget-parent"),body:Q.$("#data-widget-navuploadfloater"),uploadEntry:Q.$("[data-elem=uploadEntry]")}},check:function(e){return n(e),!0},_updateCheckShareAttrs:function(){var e=i.isLogin(),t=Q.$("#data-widget-parent"),n=t.attr("data-class")||"";e&&(i.isShareProfitUser(function(e){e&&t.removeClass(n)}),i.isMediaBigVUser(function(e){var t=o.body.down("[data-elem=navprofile]")||"";t&&(e?(t.hasClass("dn")&&t.removeClass("dn"),o.body.hasClass("userPic")||o.body.addClass("userPic")):(o.body.hasClass("userPic")&&o.body.removeClass("userPic"),t.hasClass("dn")||t.addClass("dn")))}));var a=o.body.down("[data-navuploadfloater-elem=zone]");a&&(e?a.attr("href","http://www.iqiyi.com/u/"+i.getUid()):a.attr("href","http://www.iqiyi.com/u/channel")),t.addClass(n)},_showPanel:function(){setTimeout(function(){var e=o.uploadEntry.attr("data-class")||"";o.uploadEntry.addClass(e);var t=o.body;t.css("display","block"),t.css("opacity","1"),Q.browser.IE6&&t.css("filter","")},0)},_hidePanel:function(){var e=o.body;e.css("display","none"),e.css("opacity","0"),Q.browser.IE6&&e.css("filter","");var t=o.uploadEntry.attr("data-class")||"";o.uploadEntry.removeClass(t)},_isPanelHide:function(){return"none"==o.body.css("display")},init:function(){var e=this,t=Q.event.customEvent;this._updateCheckShareAttrs(),t.on("login",e._updateCheckShareAttrs),t.on("logout",e._updateCheckShareAttrs);var n=Q.$(document);n.delegate("uploadVideo",function(e){var t="http://up.ipd.pps.tv/upload?type=0";if(!i.isLogin())return window.location.href=t,void 0;Q.$(e.target);var n=i.getAuthCookies(),r={authcookie:n};a.rebaseUserAuthInfo(r,function(e){"A00000"==e.code&&(window.location.href=t)})},"click"),o.parent.on("mouseleave",function(){l=setTimeout(function(){e._hidePanel()},1e3)}),o.body.on("mouseenter",function(){l&&clearTimeout(l),e._showPanel()}),n.on("click",function(t){var n=Q.$(t.target||t.currentTarget||t.srcElement);return r(n,"#data-widget-parent")&&e._isPanelHide()?(e._showPanel(),void 0):(e._hidePanel(),l&&clearTimeout(l),void 0)}),Q.browser.iPad&&Q.$("body").on("touchstart",function(t){t=Q.event.get(t);var n=t.target;o.parent.contains(n)||(e._hidePanel(),l&&clearTimeout(l))});var s=["navOneShow","suggestShow","playHistoryShow","showUserCenterBox","pcLoginBoxShow"];s.forEach(function(n){t.on(n,function(){e._hidePanel()})})}}),t.add(s)});
define("interfaces/ugcBonusInterface.js",["./config","../kit/remoteInterface"],function(e,t,n){var a=e("./config"),i=e("../kit/remoteInterface"),r=Q.Class("UgcBonusInterface",{construct:function(){this._remoteInterface=new i({ugcBonusStatistics:{url:a.interfaces.ugcBonusStatistics},ugcBonusHistory:{url:a.interfaces.ugcBonusHistory},ugcGetPayMent:{url:a.interfaces.getPayment},ugcRequestPayment:{url:a.interfaces.requestPayment},rebaseUserInfo:{url:a.interfaces.rebaseUserInfo}})},methods:{getChart:function(e,t){e=e||{};var n={dataType:"jsonp",ifname:"ugcBonusStatistics",param:e};this._remoteInterface.send(n,t)},request:function(e,t){e=e||{};var n={dataType:"jsonp",ifname:"ugcBonusHistory",param:e};this._remoteInterface.send(n,t)},getPayment:function(e,t){e=e||{};var n={dataType:"jsonp",ifname:"ugcGetPayMent",param:e};this._remoteInterface.send(n,t)},requestPayment:function(e,t){e=e||{};var n={dataType:"jsonp",ifname:"ugcRequestPayment",param:e};this._remoteInterface.send(n,t)},rebaseUserAuthInfo:function(e,t){e=e||{};var n={dataType:"jsonp",ifname:"rebaseUserInfo",param:e};this._remoteInterface.send(n,t)}}});n.exports=new r});
define("units/creditRecordV2.js",["../config/siteDomain","../kit/getWebEventID","../components/units/pageJob","../kit/userInfo","../action/creditInfo","../kit/anim","../components/action/floater","../components/view/floaterCustomView","../interfaces/userEventInterface","../kit/iframeLocation"],function(e){new Q.ic.InfoCenter({moduleName:"units/creditRecordV2"});var t,n,a,i,r,o=e("../config/siteDomain"),s=e("../kit/getWebEventID"),l=e("../components/units/pageJob"),d=e("../kit/userInfo"),m=e("../action/creditInfo"),h=e("../kit/anim"),c=e("../components/action/floater"),u=e("../components/view/floaterCustomView"),p=e("../interfaces/userEventInterface"),U=e("../kit/iframeLocation"),f=Q.plugins.clearSwf,V=[{key:"creditBirthday",info:"今天是您的生日。爱奇艺祝您生日快乐"},{key:"creditRegisterday",info:"今天是您注册爱奇艺周年纪念日"},{key:"creditRegister",info:"成功注册爱奇艺"},{key:"creditLogin",info:"登录爱奇艺"},{key:"creditVideo",info:"观看视频"},{key:"creditAdd",info:"签到"},{key:"creditAd",info:"观看广告"}],g=['<div class="no-login1114"><div class="no-login1114pop">','<span class="no-loginarrow"></span>','<a href="javascript:void(0)" class="shut-btn" data-credit-tip="closebtn"></a>','<p data-credit-tip="info"></p>',"</div></div>"].join(""),y=1e3,b=['<div class="point_add1121">','<div class="point_add1121_cont">','<span class="p_aleft"></span>','<em class="p_aright" data-credit-flytip="info">积分+1</em>',"</div>","</div>"].join("");l.create("creditRecordV2",{check:function(){return!0},init:function(){t=Q.$("#widget-credit")||Q.$("body"),n=t.down("*[data-credit=tip]"),a=t.down("*[data-credit=flytip]"),i=t.down("*[data-widget-score=name]"),r=t.down("*[data-widget-score=score]");var e=this;e.displayNameFirst=i.css("display"),e.displayScoreFirst=r.css("display"),r.hide(),Q.event.customEvent.on("swf_uploadJiFenResult",function(t){(1==t||"1"==t)&&e.setCreditNum()}),Q.event.customEvent.on("login",function(){e.numCon&&e.numCon.html("加载中..."),f&&f.on("ready",function(){Q.player.loadSuccess||f.get().uploadJiFen()}),window.setTimeout(function(){e.setCreditNum()},1e3),e.changeCreditUrl()}),Q.event.customEvent.on("logout",function(){e.setCreditNum(),e.changeCreditUrl()}),Q.event.customEvent.on("creditNumChanged",function(){m.clearInfo(),e.setCreditNum()}),window.setTimeout(function(){e.getTipInfo({from:"js_login"})},1e3),Q.event.customEvent.on("qianDaoEnd",function(t){t.data.d.data.creditAdd&&e.getTipInfoCallBack({creditSum:t.data.d.data.creditAdd})}),Q.event.customEvent.on("showUserCenterBox",function(){e.floater&&e.floater.hide()}),Q.event.customEvent.on("pcUserRegistLoginShow",function(){m.clearInfo(),e.setCreditNum(),e.changeCreditUrl()}),Q.event.customEvent.on("pcUserBoxDomReady",function(){e.numCon=t.down("*[data-credit=topcreditnumber]"),e.linkCon=t.down("*[data-credit=topcreditlink]"),e.setCreditNum(),e.changeCreditUrl(),e.pingbackCon=t.down("*[data-credit-num=pingback]"),e.bindPingBack()})},exec:function(){var e=this;if(d.isLogin()){var t=d.getUid(),n=Q.cookie.get("QC025");if(n){var a=n.split("-");if(t==a[0]){var i=Q.date.format(new Date,"yyyyMMdd");parseInt(i,10)>parseInt(a[1],10)&&(e.doOftenLoginToSetCookie({uid:t}),e.doOftenLoginAccess(),e.doFromJsLogin())}else e.doOftenLoginToSetCookie({uid:t}),e.doOftenLoginAccess(),e.doFromJsLogin()}else e.doOftenLoginToSetCookie({uid:t}),e.doOftenLoginAccess(),e.doFromJsLogin()}},_getCredit:function(e){var t=this,n=9999999,a=Q.string.divideNumber(n)+"+";d.isLogin()?m.getBrief(function(i){if(i){var r=i.creditRest>n?a:Q.string.divideNumber(i.creditRest);e&&(t.numCon.attr("title",Q.string.divideNumber(i.creditRest)),t.numCon.html(r)),Q.event.customEvent.fire({type:"apiCreditBriefInterfaceEnd",data:{num:i.creditRest,creditedNum:i.creditExpire,creditSoonNum:i.creditExpireSoon}})}}):Q.browser.iPad&&e?t.numCon&&t.numCon.html("0"):f.on("ready",function(){var e=f.get().getJiFen();if(t.numCon)if(e){var i=e>n?a:Q.string.divideNumber(e);t.numCon.attr("title",Q.string.divideNumber(e)),t.numCon.html(i)}else t.numCon.attr("title","0"),t.numCon.html("0")})},setCreditNum:function(){this.numCon?this._getCredit(!0):this._getCredit(!1)},changeCreditUrl:function(){var e=this.linkCon;e&&(d.isLogin()?e.attr("href","http://www.iqiyi.com/u/jifen?lefttitlesign=credit#type=phtr2divstat20121204&act=pointclk&jsuid="+Q.cookie.get("QC006")+"&flshuid="+Q.cookie.get("QC005")+"&ppuid="+d.getUid()):e.attr("href","http://www.iqiyi.com/common/wdjfwzz.html?lefttitlesign=credit#type=phtr2divstat20121204&act=pointclk&jsuid="+Q.cookie.get("QC006")+"&flshuid="+Q.cookie.get("QC005")+"&ppuid="+d.getUid()))},bindPingBack:function(){var e=this.pingbackCon;e&&e.on("click",function(t){t=Q.event.get(t),t.stop(),s(function(t){var n=e.attr("href")+"&weid="+t;U.href(n)})})},getTipInfo:function(){if(d.isLogin())m.getTip(this.getTipInfoCallBack.bind(this));else{var e=this;f&&f.on&&f.on("ready",function(){var t=f.get().getJiFen();t>0&&e.getTipInfoCallBack({code:"A00000",data:{creditVideo:t}})})}},getTipInfoCallBack:function(e){if(e){for(var t=null,o=null,s=0,l=V.length;l>s;s++)if(o=V[s].key,t=e[o]){n&&a&&this.showTipTemp({key:o,num:t,info:V[s].info}),a&&this.showFlyTip({key:o,num:e,info:V[s].info}),i&&r&&this.showNameAndAcoreTip({key:o,num:e,info:V[s].info});break}this.setCreditNum()}},showTipTemp:function(e){if("creditBirthday"==e.key||"creditRegisterday"==e.key)this.showTip(e);else{var t=d.isLogin()?d.getUid():"",n=Q.cookie.get("showCreditTip"+t),a=Q.cookie.get("showCreditTipTimes"+t)||0;a=parseInt(a,10),!n&&5>a&&(Q.cookie.set("showCreditTipTimes"+t,a+1,{expires:31536e6,path:"/",domain:o.SITE_DOMAIN}),Q.cookie.set("showCreditTip"+t,"true",{expires:864e5*(5*Math.random()+1),path:"/",domain:o.SITE_DOMAIN}),this.showTip(e))}},showTip:function(e){d.isLogin()?(this.showFloater(e),e.key==V[0].key||e.key==V[1].key?this.tipInfo.html(d.getName()+"，您好，"+e.info+"，并赠送您"+e.num+"个积分，可以用来抽奖、兑换奖品，快去看看吧"):this.tipInfo.html("恭喜您，"+e.info+"获取"+e.num+"个积分，积分可以抽奖、兑换奖品，快去试试运气吧")):Q.browser.CHROME||(this.showFloater(e),this.tipInfo.html("恭喜您，"+e.info+"获取"+e.num+"个积分，我们帮您暂时保存。登录后可以用积分抽奖、兑换奖品，快去看看吧&nbsp;&nbsp;"+'<a j-delegate="loginscroll" href="javascript:void(0)">请登录</a>'))},showFloater:function(){if(this.floater)this.floater.reShow();else{var e=new c({view:new u({pos:function(){return{top:a.top()+a.height()-2,left:a.left()-32}},isResize:!0})});e.show({html:g});var t=e.getFloater().down("*[data-credit-tip=closebtn]");t&&t.on("click",this.hideTip.bind(this)),this.floater=e,this.tipInfo=e.getFloater().down("*[data-credit-tip=info]")}Q.event.customEvent.fire({type:"showCreditTip",data:{}})},hideTip:function(e){Q.event.get(e).stop(),this.floater.hide(),Q.event.customEvent.fire({type:"hideCreditTip",data:{}})},showFlyTip:function(e){if("creditRegister"==e.key||"creditLogin"==e.key||"creditAdd"==e.key){if(this.fFloater)this.fFloater.reShow();else{var t=this.fTop=10,n=this.fLeft=-60,i=new c({view:new u({pos:function(){return{top:a.top()+a.height()+t,left:a.left()+n}},noOverflowHidden:!0})});i.show({html:b}),this.fFloater=i,this.flyTipInfo=i.getFloater().down("*[data-credit-flytip=info]")}var r=0;for(var o in e.num)r+=e.num[o];this.flyTipInfo.html("积分+"+r),this.anim()}},showNameAndAcoreTip:function(e){var t=this;("creditRegister"==e.key||"creditLogin"==e.key||"creditAdd"==e.key)&&e.num.creditSum&&t.showNameAnim({num:e.num.creditSum})},showNameAnim:function(e){var t=this,n=e.num;h({elem:i,style:"opacity",from:1,to:0,ease:"Linear",duration:500,done:function(){i.hide(),r.html("积分+"+n).css("display",t.displayNameFirst),h({elem:r,style:"opacity",from:0,to:1,ease:"Linear",duration:500,done:function(){setTimeout(function(){h({elem:r,style:"opacity",from:1,to:0,ease:"Linear",duration:500,done:function(){r.hide(),i.css("display",t.displayNameFirst),h({elem:i,style:"opacity",from:0,to:1,ease:"Linear",duration:500})}})},4e3)}})}})},anim:function(){var e=this;h({style:"top",elem:this.fFloater.getFloater(),from:a.top()+a.height()+this.fTop,to:a.top(),ease:"Linear",duration:y,done:function(){h({style:"left",elem:e.fFloater.getFloater(),from:a.left()+e.fLeft,to:a.left(),ease:"Linear",duration:y,done:function(){e.fFloater.hide()}}),h({style:"opacity",elem:e.fFloater.getFloater(),from:1,to:0,ease:"Linear",duration:y})}}),h({style:"opacity",elem:e.fFloater.getFloater(),from:0,to:1,ease:"Linear",duration:y})},doFromJsLogin:function(){var e=this;window.setTimeout(function(){e.getTipInfo({from:"js_login"})},2e3)},doOftenLoginAccess:function(){var e=new p;e.request({eventid:"first_logon"})},doOftenLoginToSetCookie:function(e){var t=e.uid+"-"+Q.date.format(new Date,"yyyyMMdd");Q.cookie.set("QC025",t,{expires:31536e6,path:"/",domain:o.SITE_DOMAIN})}}),l.add("creditRecordV2")});
define("action/creditInfo.js",["../interfaces/apiCreditInfoInterface","../kit/userInfo"],function(e,t,n){var a=new Q.ic.InfoCenter({moduleName:"action/creditInfo"}),i=Q.event.customEvent,r=e("../interfaces/apiCreditInfoInterface"),o=[];e("../kit/userInfo");var s=Q.Class("CreditInfoModel",{properties:{},construct:function(){this.creditInfo=null},methods:{init:function(){o.length=0,this.bindEvent()},bindEvent:function(){i.on("logout",this.doLogout.bind(this))},doLogout:function(){this.clearCreditInfo()},checkCreditInfo:function(e,t){this.creditInfo?e&&t&&this[t]&&this[t](e):this.getInfoFromInterface(e,t)},clearCreditInfo:function(){this.creditInfo=null},setCreditInfo:function(e){this.creditInfo=e},getInfoFromInterface:function(e,t){var n=this;if(n.creditInfo)e&&e(t?n[t]:"");else if(o&&o.length)o.push({cb:e,param:t});else{o.push({cb:e,param:t});var i=new r;i.request({},function(e){"A00000"==e.code&&e.data?n.setCreditInfo(e.data):(a.warn("调用接口（http://api.credit.iqiyi/services/credit/navstatus）失败。"),n.clearCreditInfo());for(var t;o&&o.length>0;)try{var i=o.shift();t="A00000"==e.code?i.param?n[i.param]:"":!1,i.cb&&t&&t.call(n,i.cb)}catch(r){a.log(r)}})}},getSignInStatus:function(e){e(this.creditInfo.signStatus)},getBrief:function(e){e(this.creditInfo.userCredit)},getTip:function(e){e(this.creditInfo.creditTip)}}}),l=new s;l.init(),n.exports={getSignInStatus:function(e){return l.checkCreditInfo(e,"getSignInStatus")},getTip:function(e){return l.checkCreditInfo(e,"getTip")},getBrief:function(e){return l.checkCreditInfo(e,"getBrief")},clearInfo:function(){return l.clearCreditInfo()}}});
define("interfaces/apiCreditInfoInterface.js",["../kit/remoteInterface","../kit/userInfo"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../kit/userInfo");n.exports=Q.Class("CreditInfoInterFace",{construct:function(){this._remoteInterface=new a({apiCreditInfo:{url:"http://api.credit.iqiyi.com/services/credit/navstatus"}})},methods:{request:function(e,t){e=e||{},e.auth=i.getAuthCookies(),e.cb="apiCreditInto_"+(new Date).getTime(),this._remoteInterface.send({ifname:"apiCreditInfo",param:e},function(n){t&&t(n,e)})}}})});
define("components/view/floaterCustomView.js",["./floaterNoCoverView"],function(e,t,n){var a=e("./floaterNoCoverView");n.exports=Q.Class("FloaterCustomView",{ns:Q.view,extend:a,construct:function(e){this.callsuper(e),this._opt=e||{}},methods:{adjustPosition:function(){if(this._opt.pos){var e=this._opt.pos();this._elem.css("top",e.top+"px"),this._elem.css("left",e.left+"px")}if(this._opt.boxSize){var t=this._opt.boxSize();this._elem.css("width",t.width+"px"),this._elem.css("height",t.height+"px")}this._opt.isFlag&&(this._elem.css("width","100%"),this._elem.css("height","100%"))},pos:function(e){this._opt.pos=e}}})});
define("components/view/floaterNoCoverView.js",["./floaterView"],function(e,t,n){var a=e("./floaterView");n.exports=Q.Class("FloaterNoCoverView",{ns:Q.view,extend:a,construct:function(e){e=e||{},this.callsuper(e)},methods:{showCover:function(){},hideCover:function(){},hidePlayer:function(){},showPlayer:function(){}}})});
define("interfaces/userEventInterface.js",["../kit/remoteInterface","../config/siteDomain"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/siteDomain");n.exports=Q.Class("UserEventInterFace",{construct:function(){this._remoteInterface=new a({userEventData:{url:"http://api.credit."+i.SITE_DOMAIN+"/services/user/event"}})},methods:{request:function(e,t){e=e||{},e.eventid=e.eventid||"sign_up",e.pid=e.pid||"0",e.cid=e.cid||"0",e.cb="varName_userEventData",this._remoteInterface.send({ifname:"userEventData",param:e},function(e){t&&t(e)})}}})});
define("interfaces/thirdPartRegistInterface.js",["../kit/remoteInterface","../config/siteDomain","../kit/rsa","../kit/fdlKit"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/siteDomain"),r=e("../kit/rsa"),o=i.getDomain(),s=e("../kit/fdlKit");n.exports=Q.Class("thirdPartRegisterInterface",{construct:function(){this._remoteInterface=new a({mobileRegister:{url:"http://apollo."+o+"/validate"},emailRegister:{url:"https://passport.iqiyi.com/apis/thirdparty/bind_account.action"},setLogin:{url:"https://passport.iqiyi.com/apis/thirdparty/login_by_token.action"}})},methods:{mobileRegister:function(e,t){var n=this;e=e||{},e.passwd=r.rsaFun(e.passwd),e.server="BEA3AA1908656AABCCFF76582C4C6660",e.url_src="/apis/thirdparty/bind_account.action?",e.bird_src="bfc434ba2fa1457f8c42f824ff26aa7d",s.getToken(e,function(e){"A00000"===e.code?n._remoteInterface.send({dataType:"jsonp",param:e.param,ifname:"mobileRegister",cors:!0,withCredentials:!0,domain:o},function(e){t&&t(e)}):t&&t(e)})},emailRegister:function(e,t){e=e||{},e.passwd=r.rsaFun(e.passwd),this._remoteInterface.send({dataType:"jsonp",ifname:"emailRegister",param:e,cors:!0,method:"GET",withCredentials:!0},function(n){t&&t(n,e)})},login:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"setLogin",param:e,cors:!0,method:"GET",withCredentials:!0},function(n){t&&t(n,e)})}}})});
define("kit/fdlKit.js",["../interfaces/fdlGetToken","../config/siteDomain"],function(require,exports,module){var fdlGetTokenIf=require("../interfaces/fdlGetToken"),siteDomain=require("../config/siteDomain"),protocol=window.location.protocol,ic=new Q.ic.InfoCenter({moduleName:"fdlKit"});module.exports={getToken:function(params,cb){var _this=this,ri=new fdlGetTokenIf;ri.request({},function(data){if("A00000"===data.code){var ip=data.ip,target;if(params.param)target=params.url_src+Q.url.jsonToQuery(params.param);else{var url_src=params.url_src;params.url_src=null,target=url_src+Q.url.jsonToQuery(params)}var input=target,timeStamp=Math.floor((new Date).getTime()/1e3),sign=eval(data.sdk),options={param:{target:target,server:params.server,token:data.token,bird_src:params.bird_src,sign:sign,bird_t:timeStamp},requestUrl:protocol+"//apollo."+siteDomain.getDomain()+"/validate",code:"A00000"};cb&&cb(options)}else cb&&cb(data)})}}});
define("kit/thirdPartLogin.js",["../kit/snsWindowKit","../kit/userInfo","../kit/iframeLocation"],function(e,t,n){function a(e){r.setIsThirdParty(!0),Q.event.customEvent.fire({type:"login",data:e}),i.close(),e&&Q.url.isUrl(e)&&setTimeout(function(){o.href(e)},1e3)}var i=e("../kit/snsWindowKit"),r=e("../kit/userInfo"),o=e("../kit/iframeLocation");window.lib=window.lib||{},window.lib.__callbacks__=window.lib.__callbacks__||{};var s={_oAuthSuccess:lib.__callbacks__._oAuthSuccess||function(){},_oAuthError:lib.__callbacks__._oAuthError||function(){}};lib.__callbacks__._oAuthSuccess=function(e){if(e&&e.code&&"A00055"==e.code){var t="http://passport.iqiyi.com/apis/secure/verify_account.action";r.setIsThirdParty(!0),window.location.href=t,i.close()}else e&&"1"==e.newUser?(Q.event.customEvent.fire({type:"thirdTypeBind",data:{newUser:e.newUser,type:e.type,icon:e.icon,name:e.nickname}}),i.close()):(a(e),s._oAuthSuccess(e))},lib.__callbacks__._oAuthError=function(e){s._oAuthError(e)},lib.__callbacks__._bindSnsSuccess=function(e){i.close(),Q.event.customEvent.fire({type:"thirdPartSnsBinded",data:d["_"+e]})};var l={_1:"baidu",_2:"sina",_3:"renren",_4:"qweibo",_5:"zhifubao",_6:"kaixin",_30:"xiaomi",_31:"jingdong",_29:"weixin",_28:"facebook",_32:"google"},d={_1:"sina",_2:"qzone",_3:"qweibo",_4:"renren",_5:"baidu",_6:"kaixin",_7:"zhifubao",_28:"facebook",_32:"google"};n.exports={show:function(e,t){var n=l["_"+e];n?i.open(n,t):i.open(e,t)}}});
define("units/loginNoticeToFlash.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../action/qipaLogin","../kit/userInfo"],function(e){function t(e){var t=r.isLogin(),n=Q.$("#flash");e=e||{};var a=function(){Q.kit.QiyiPlayer.getPlayer("video").setUserLogin({P00001:r.getAuthCookies(),profileID:Q.cookie.get("P00PRU"),profileCookie:Q.cookie.get("P00PRU"),source:e.source,login:t.toString(),passportId:r.getUid(),nickname:r.getName()})};n?n[0].userLogined?n[0].userLogined(t,r.getUid()):a():a()}var n=e("../components/units/pageJob");e("../components/action/checkDoms");var a=e("../kit/qiyiPlayer"),i=e("../action/qipaLogin"),r=e("../kit/userInfo"),o=Q.event.customEvent;n.create("loginNoticeToFlash",{check:function(){return!0},exec:function(){this.bindEvent()},bindEvent:function(){var e=!1;a.getPlayer("video").on("showLoginPanel",function(n){i.openLoginWindow({},function(){e=!0,t({source:n.data.source})})}),o.on("login",function(){return e?(e=!1,void 0):(t(),void 0)}),o.on("logout",function(){t()})}}),n.add("loginNoticeToFlash")});
define("units/navControlsLoader.js",["../components/units/pageJob","../components/action/checkDoms"],function(e){var t=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),a=Q.$("[data-widget-navctrl-elem=first]"),i=Q.$("[data-widget-navctrl-elem=padfirst]");Q.browser.iPad&&i&&(a=i);var r={navWidget:Q.$("[data-widget-navctrl=player]")||Q.$("[data-widget-navctrl=channel]"),guide:Q.$("[data-widget-navctrl-elem=guide]"),firstnav:a},o="navControlsLoader";t.create(o,{check:function(){return n(r),!0},init:function(){var e=function(n){t.async("navControls",function(e){e.onMouseClick(n)}),r.guide.un("click",e)};r.guide.on("click",e)}}),t.add(o)});
define("widgets/searchsuggest/searchSuggestListModel.js",["../../model/listModel","../../interfaces/suggestV3Interface","../../interfaces/zhidahaoInterface","../../interfaces/hotWordInterface","../../kit/userInfo","../../kit/checkI18nType"],function(e,t,n){var a=e("../../model/listModel"),i=e("../../interfaces/suggestV3Interface"),r=e("../../interfaces/zhidahaoInterface"),o=e("../../interfaces/hotWordInterface"),s=e("../../kit/userInfo"),l=e("../../kit/checkI18nType"),d=Q.Class("SearchSuggestListModel",{extend:a,construct:function(e){e=Q.object.extend({tpl:"",maxSearchHistoryCount:5,maxCount:10,key:"",searchTarget:"_blank",suggestTarget:"_self",layout:0,vvfrom:"",responsive:!1,cachedSuggestData:{},selItemCls:"keyBg",searchType:0,from:"",simple:!1},e),this.callsuper(e)},statics:{isZhidahaoSuggest:function(e){var t=/^@/gi;return t.test(e)}},methods:{init:function(e){this.callsuper("init",e)},asyncGet:function(e,t){var n=this,a=e.key;this.set({key:a,isZhidahaoSuggest:d.isZhidahaoSuggest(a)}),this.checkTpl(function(){var e=null;a?n.getSuggest(a,function(i){e=Q.object.extend({},n.get()),e.key===a&&t(Q.object.extend(e,{itemsData:i.map(function(e){return e.searchKey=a,e}),curSn:-1}))}):n._getSearchHistory(a,function(a){e=Q.object.extend({},n.get()),e.key||t(Q.object.extend(e,{itemsData:a,curSn:-1}))})})},getSuggest:function(e,t){var n,a=this,o=new i,d=new r;n=/ipad/.test(navigator.userAgent.toLowerCase())?21:Q.browser.android||Q.browser.iPhone||Q.browser.WP?31:11;var m=11==n?Q.cookie.get("QC005"):Q.cookie.get("QC006"),h=a.get();a.data=h;var c={key:e,platform:n,rltnum:h.maxCount,uid:m||"",ppuid:s.getUid()||""};if(l.type||(c.language=1),h.pps&&(c["if"]="pps"),h.cachedSuggestData[e])t(h.cachedSuggestData[e]);else{var u=this;"@"===e?d.request({page:1,rows:h.maxCount},function(n){var a=[];if("A00000"==n.code){try{a=n.data.list,a.forEach(function(e){e.isZhidahaoSuggest=!0,e.titleHref=e.link,e.titleTarget="_blank",e.name=e.accountName,e.logo=e.logo})}catch(i){}u.get().cachedSuggestData[e]=a,t(a)}else t(a)}):o.request(c,function(n){var i=[];if("A00000"==n.code){i=n.data;try{i.forEach(function(e){e.event_id=n.attributes.event_id,a.data.isZhidahaoSuggest&&(e.isZhidahaoSuggest=!0,e.titleHref=e.link,e.titleTarget="_blank",e.name=e.accountName,e.logo=e.logo)})}catch(r){}u.get().cachedSuggestData[e]=i,t(i)}else t(i)})}},_getSearchHistory:function(e,t){var n=JSON.parse(Q.cookie.get("QC021"))||[];n.forEach(function(e){e.search=!0});var a=this.get(),i=a.maxSearchHistoryCount;n.length>i&&(n=n.slice(0,i));var r=a.maxCount,s=n.length;if(r>s)if(l.type)(new o).fetch({cb:"cb_"+Math.floor(2147483648*Math.random()).toString(36)},function(a){if("A00000"==a.code){for(var i=0;i<a.data.length;i++){for(var o=a.data[i].query,s=!1,l=0;l<n.length;l++)if(n[l].searchKey=e,n[l].key==o){s=!0;break}if(!s&&(n.push({key:o,search:!0,searchKey:e}),n.length>=r))break}t(n)}});else{for(var d=0;s>d;d++)n[d].searchKey=e;t(n)}else t(n)},checkTpl:function(e){this.get().tpl||this.set({tpl:{varietyTpl:['<li class="soItem soItem_on clearfix">',"<!--带向下箭头追加class名soItem_on 详细信息显示追加soItem_detail-->",'<a href="{{titleHref}}" target="{{titleTarget}}" class="soRow" rebuildUrl="true">','<div class="simple clearfix"> <span class="so_txt" ptype="1-2">{{=showName}}<span class="so_channel">（{{cname}}）</span></span> <span class="so_arrow"></span> </div>',"</a>",'<div class="so_detail so_detail-zy" data-suggest-elem="itemcontent">',"<!--综艺显示追加class名so_detail-zy-->",'<p class="mediumNone"><a href="{{titleHref}}" target="{{titleTarget}}" rebuildUrl="true"><img src="{{picture_url}}" style="display:{{imgDisplay}};" height="62" width="100"></a></p>','<ul class="ulR ulR_pd10">','<li><a href="{{serie0.href}}" title="{{serie0.title}}" target="{{serie0.target}}" style="display:{{serie0.display}};">{{serie0.name}}</a></li>','<li><a href="{{serie1.href}}" title="{{serie1.title}}" target="{{serie1.target}}" style="display:{{serie1.display}};">{{serie1.name}}</a></li>','<li><a href="{{serie2.href}}" title="{{serie2.title}}" target="{{serie2.target}}" style="display:{{serie2.display}};">{{serie2.name}}</a></li>',"</ul>","</div>","</li>"].join(""),movieTpl:['<li class="soItem soItem_on clearfix"> <a href="{{titleHref}}" target="{{titleTarget}}" class="soRow" rebuildUrl="true">','<div class="simple clearfix"> <span class="so_txt" ptype="1-2">{{=showName}}<span class="so_channel">（电影）</span></span> <span class="so_arrow"></span> </div>',"</a>",'<div class="so_detail so_detail-movie" data-suggest-elem="itemcontent">',"<!--电影显示追加class名so_detail-movie-->",'<p><a href="{{titleHref}}" target="{{titleTarget}}" rebuildUrl="true"><img src="{{picture_url}}" height="62" width="100"></a></p>','<ul class="ulR ulR_pd10">','<li class="l-dy"><span notjump="true">导演：</span>{{=director}}</li><span notjump="true" class="movieYear" style="display:{{yearDisplay}};">{{year}}</span>','<li><span notjump="true">主演：</span>{{=main_actor}}</li>','<li class="watchBtn"><a class="btn_new btn_green_s" target="{{playTarget}}" href="{{playHref}}"><span class="left_pd">立即观看</span></a></li>',"</ul>","</div>","</li>"].join(""),tvTpl:['<li class="soItem soItem_on clearfix"> <a href="{{titleHref}}" target="{{titleTarget}}" class="soRow" rebuildUrl="true">','<div class="simple clearfix"> <span class="so_txt" ptype="1-2">{{=showName}}<span class="so_channel">（{{cname}}）</span></span> <span class="so_arrow"></span> </div>',"</a>",'<div class="so_detail so_detail-dsj" data-suggest-elem="itemcontent">',"<!--电影显示追加class名so_detail-dsj-->",'<p><a href="{{titleHref}}" target="{{titleTarget}}" rebuildUrl="true"><img src="{{picture_url}}" height="62" width="100"></a></p>','<ul class="ulR ulR_pd10">','<li><span notjump="true">导演：</span>{{=director}}</li>','<li><span notjump="true">主演：</span>{{=main_actor}}</li>','<li class="watchBtn">','<ul class="jujiArea">',"<li>{{=seriesHtml}}</li>","</ul>","</li>","</ul>","</div>","</li>"].join(""),cartoonTpl:['<li class="soItem soItem_on clearfix"> <a href="{{titleHref}}" target="{{titleTarget}}" class="soRow" rebuildUrl="true">','<div class="simple clearfix"> <span class="so_txt" ptype="1-2">{{=showName}}<span class="so_channel">（{{cname}}）</span></span> <span class="so_arrow"></span> </div>',"</a>",'<div class="so_detail so_detail-dsj" data-suggest-elem="itemcontent">',"<!--电影显示追加class名so_detail-dsj-->",'<p><a href="{{titleHref}}" target="{{titleTarget}}" rebuildUrl="true"><img src="{{picture_url}}" height="62" width="100"></a></p>','<ul class="ulR ulR_pd10">','<li><span notjump="true">地区：{{region}}</span></li>','<li><span notjump="true">类型：{{video_type}}</span></li>','<li class="watchBtn">','<ul class="jujiArea" style="display:{{seriesDisplay}};">',"<li>{{=seriesHtml}}</li>","</ul>",'<a class="btn_new btn_green_s" target="{{playTarget}}" href="{{playHref}}" style="display:{{watchBtnDisplay}};"><span class="left_pd">立即观看</span></a>',"</li>","</ul>","</div>","</li>"].join(""),suggestTpl:['<li class="soItem clearfix"> <a href="{{titleHref}}" target="{{titleTarget}}" class="soRow" rebuildUrl="true">','<div class="simple clearfix"> <span class="so_txt" ptype="1-2">{{=showName}}<span class="so_channel"></span></span> <span class="so_arrow"></span> </div>',"</a>",'<div class="so_detail"></div>',"</li>"].join(""),suggestZhidahaoTpl:['<li class="soItem clearfix">','<a href="{{titleHref}}" target="{{titleTarget}}" class="soRow">','<div class="user clearfix">','<div class="userAvatar">','<img src="{{logo}}" width="20" height="20" />',"</div>",'<em class="so_to">@</em>','<p class="so_uname">{{=showName}}</p>',"</div>","</a>",'<div class="so_detail"></div>',"</li>"].join(""),searchTpl:['<li class="soItem clearfix"> <a href="{{titleHref}}" target="{{titleTarget}}" class="soRow" rebuildUrl="true">','<div class="simple clearfix"><span class="so_txt">{{=showName}}</span></div>',"</a>",'<div class="so_detail"></div>',"</li>"].join("")}}),e()}}});n.exports=d});
define("kit/getSearchUrl.js",["./checkI18nType"],function(e,t,n){var a="http://index.iqiyi.com/q/?",i=e("./checkI18nType"),r=i.type?"http://so.iqiyi.com/so/q_":"http://so.tw.iqiyi.com/so/q_";n.exports=function(e,t,n,i,o){t=t||0;var s="",l=!1;if(0===t)s=Q.browser.IE6?r+e:r+encodeURIComponent(e),n&&(s+="?source="+n,l=!0);else if(1==t)s="http://so.iqiyi.com/pps/?k="+encodeURIComponent(e),n&&(s+="&source="+n),l=!0;else if(2==t)s="http://client.so.pps.tv/search/client_index.php?q="+encodeURIComponent(e),n&&(s+="&source="+n),l=!0;else{if(3==t){for(var d,m={"电影":1,"电视剧":2,"纪录片":3,"动漫":4,"音乐":5,"综艺":6,"娱乐":7,"旅游":9,"片花":10,"教育":12,"体育":17,"资讯":25,"微电影":16,"生活":21,"少儿":15,"母婴":29,"游戏":8,"搞笑":22,"时尚":13,"原创":27,"财经":24,"军事":28,"科技":30,"广告":20,"汽车":26},h=e.split(/;|；/g),c=[],u=[],p=0,U=h.length;U>p;p++)0!==h[p].trim().length&&(d=/(.*)（(综艺|电视剧|电影|纪录片|动漫|娱乐|体育|资讯|片花|微电影|脱口秀|生活|少儿|母婴|游戏|教育|音乐|搞笑|时尚|原创|旅游|拍客|财经|军事|科技|广告|汽车|特色频道|爱奇艺出品)）$/gi.exec(h[p]),d&&3==d.length?(c.push(encodeURIComponent(d[1])),u.push(m[d[2]]||"")):(c.push(encodeURIComponent(h[p])),u.push("")));var f=["name="+c.join(";")];return u.join("").length>0&&f.push("cid="+u.join(";")),o&&f.push("aid="+o),a+f.join("&")}5==t&&(s="http://so.iqiyi.com/mall?keyword="+encodeURIComponent(e),l=!0,n&&(s+="&source="+n))}if(i&&(l?s+="&"+i:(s+="?"+i,l=!0)),0===t){var V=Math.floor((new Date).getTime()*Math.random());s+=l?"&sr="+V:"?sr="+V}return s}});
define("units/vipAdPop.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/adPopInterface","../kit/userInfo","../kit/generateRandomString","../kit/artTemplate","../kit/anim"],function(e){var t=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../interfaces/adPopInterface"),a=e("../kit/userInfo"),i=e("../kit/generateRandomString");e("../kit/artTemplate");var r=e("../kit/anim"),o="vipadPop",s="http://msg.71.am/tmpstats.gif",l=0,d=0,m=null,h=null,c={};t.create(o,{check:function(){return!0},init:function(){var e=this,t=Q.cookie.get("QILINPUSH"),n=Q.$("#data-vip-remindbox"),i=a.isLogin();if(!t&&n){var r={};i?r.authcookie=Q.cookie.get("P00001"):r.device_id=Q.cookie.get("QC005"),r.agent_type=1,setTimeout(function(){Q.$(".J_pop-window")||e.getData(i,r)},500)}},createPopup:function(e){var t=this;t.createFloat(e);var n={act:0},a=Q.$("[data-vipadpop-click]"),i=Q.$("#data-vip-remindbox").attr("data-Boss-categoryid"),r=Q.$(m).down("[data-vipadpop-qpid]"),o=r&&r.attr("data-vipadpop-qpid"),s=o&&o.join(",");i&&(n.c1=i),s&&(n.mqpid=s),t.sendPingback(n),t.sendGroupPingback({t:21,block:"508282_01"}),a.on("click",function(){var e=Q.$(this).attr("data-vipadpop-fr"),n=Q.$(this).attr("data-vipadpop-qpid"),a={act:1,fr:e};n>0&&(a.qpid=n),t.sendPingback(a),t.sendGroupPingback({t:20,rseat:"508282_01"})})},getData:function(e,t){var a=this,i=new n;i.getData(e,t,function(e){if("A00000"==e.code){if(!e.data)return Q.event.customEvent.fire({type:"oldpopup",data:{}}),void 0;if(c.data=e.data,e=e.data.content,!e)return;e=JSON.parse(e),c.msgname=e.popupTitle,c.originCode=e.originCode,c.mid=e.pushId,Q.loadTemplate("pc/vipopup",function(t){var n=e.templateId;6==n?(e.firstTitle=e.metadataList[0]&&e.metadataList[0].longTitle,e.firstImageLinkUrl=e.metadataList[0]&&e.metadataList[0].imageLinkUrl,e.firstImageUrl=e.metadataList[0]&&e.metadataList[0].imageUrl,e.metadataList.splice(0,1)):e.metadataList=e.metadataList[0];var i=t(e);return Q.$(".J_pop-window")?!1:(a.createPopup(i),void 0)},{jobFile:"jobs/pc/playDramaVideo",projectName:"qiyiV2",projectDebug:!1,templateVersion:"20161013162223"})}})},resize:function(){var e=this;Q.$(window).on("resize",function(){e.showPop(Q.$(m),"div"),e.showPop(Q.$(h),"iframe")})},createFloat:function(e){var t=this,n=!0;m=document.createElement("div"),Q(m).attr("id","J_vip-ad-pop"),h=document.createElement("iframe"),Q.$(m).html(e),document.body.appendChild(m),document.body.appendChild(h),l=m.children[0].offsetWidth,d=m.children[0].offsetHeight,t.showPop(Q.$(m),"div"),t.showPop(Q.$(h),"iframe"),t.resize();var a=Q.$(m).down("*[data-Close=close]");a&&a.on("click",function(){n=!1,Q.$(m).hide(),Q.$(h).hide(),t.sendPingback({act:2})}),setTimeout(function(){n&&(Q.$(m).hide(),Q.$(h).hide(),t.sendPingback({act:2}))},18e5)},scrollActive:function(e,t){Q.$(window).on("scroll",function(){Q.page.getScrollTop()>0?Q.browser.IE6?(e.css("position","absolute"),setTimeout(function(){e.css("top",Q.page.getScrollTop()+t+"px")},100)):(e.css("position","fixed"),e.css("top",t+"px")):e.css("top",t+"px")})},showPop:function(e,t){var n=this;switch(t){case"div":e.css("zIndex","4200");break;case"iframe":e.css("zIndex","4199"),e.css("backgroundColor","#fff"),e.css("width",l+"px"),e.css("height",d+"px")}e.css("position","absolute");var a=document.documentElement.clientWidth-l,i=document.documentElement.clientHeight-d,o=document.documentElement.clientHeight;n.scrollActive(e,i),e.css("left",a+"px");var s=Q.page.getScrollTop();new r({elem:e,style:"top",from:o+s,to:i+s,ease:"Linear",duration:200})},sendGroupPingback:function(e){var t=c.data,n=[t.id,t.group_id,t.type,t.sub_type,t.source].join(":"),r={t:e.type,bstp:"31_msg",pf:1,p:10,p1:101,msgid:n,pu:a.getUid(),u:Q.cookie.get("QC006"),rn:i.generate(10)};Q.object.extend(r,e),Q.log.server(r,"http://msg.71.am/b")},sendPingback:function(e){var t={};t.type="141204yxx",t.svtype=c.originCode,t.mid=c.mid,t.msgname=c.msgname,t.subtype="1",t.flshuid=Q.cookie.get("QC005"),t.qtcurl=window.location.href,t.p1="1_10_101",t.act=e.act,t.rn=(new Date).getTime(),t.u=Q.cookie.get("QC006"),t.pu=a.getUid(),t.fr=e.fr,Q.object.extend(t,e),Q.log.server(t,s)},clearDoblue:function(e){for(var t=[],n={},a=0,i=e.length;i>a;a++)n[e[a]]||(t.push(e[a]),n[e[a]]=1);return t.join(",")}}),t.add(o)});
define("interfaces/adPopInterface.js",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface");n.exports=Q.Class("adPop",{construct:function(){this._remoteInterface=new a({oldadPop:{url:"http://info.vip.iqiyi.com/promotion/push.action"},adPopLogin:{url:"http://notice.iqiyi.com/apis/msg/lego/get_msg.action"},adPopUnLogin:{url:"http://nl.notice.iqiyi.com/apis/msg/lego/get_msg.action"}})},methods:{getData:function(e,t,n){var a="adPopUnLogin";e&&(a="adPopLogin"),t=t||{},t.cb=t.cb||"getAdPop",t.t=(new Date).getTime(),this._remoteInterface.send({param:t,ifname:a},function(e){n&&n(e)})},getOldData:function(e,t){e=e||{},e.cb=e.cb||"getOldAdPop",e.t=(new Date).getTime(),this._remoteInterface.send({param:e,ifname:"oldadPop"},function(e){t&&t(e)})}}})});
define("units/vipNewHeader.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../kit/iframeLocation"],function(e){var t,n,a=e("../components/units/pageJob"),i=e("../components/action/checkDoms"),r=e("../kit/userInfo"),o=e("../kit/iframeLocation"),s="vipNewHeader",l=Q.event.customEvent;a.create(s,{getDependentDoms:function(){var e=Q.$("#widget-vipheader");return e&&(n={doms:e,menu:e.down("*[data-vipheader-elem=menucontainer]")}),{doms:e}},check:function(e){return i(e),!0},init:function(){var e=this;e._menuDom=n.menu,e._wrapperDom=n.doms,e._wrapperDomCls=e._wrapperDom.attr("data-vipheader-cls")||"",l.on("login",e._loginAfter.bind(this)),l.on("logout",e._updateDom.bind(this)),e._initData()},_initData:function(){t=0;var e=this;r.isLogin()?e._loginAfter():e._updateDom()},_loginAfter:function(){var e=this;r.getIsValidVip(function(n){n?r.isAutoRenew(function(n){(parseInt(n,10)||parseInt(r.getPayType(),10))&&(t=1),r.checkVipInfo(e._updateDom)}):e._updateDom()})},_updateDom:function(){var e,a,i,s=n.doms.down("*[data-vipheader-elem=menu]"),l=n.doms.down("*[data-vipheader-elem=header]");if(l&&!(l.length<1)){var d=Q.cookie.get("HZ00011"),m=Q.$("a[j-data-elem=zjuser]");m&&!r.isLogin()&&d&&"11"==d&&m.on("click",function(e){e=Q.event.get(e),e.stop();var t=Q.url.parse(window.location.href),n=t.protocol+"://"+t.host+t.path,a="http://v.139site.com/pretrade.do?spid=13&preurl="+n+"&ucode=HZ00011&keystr=bf49359a5e0ef6eb0d75b0906c3c4f36";o.href(a)}),r.isLogin()?2==parseInt(r.getStatus(),10)?e=3:r.getIsValidVip()?(a=r.getVipType(),3==a&&(e=1),1==t&&1==a&&(e=3),t||4!=a||(e=4),(1==t&&(4==a||1==a)||2==a)&&(e=3),t||1!=a||(e=2)):e=0:e=0,s&&s.hide(),l.hide(),i=Q.$(l[e]),i&&i.css("display","block")}}}),a.add(s)});
define("units/topLineFloaterV2.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../kit/getWebEventID","../config/siteDomain","../kit/checkI18nType"],function(e){var t,n,a,i,r,o=new Q.ic.InfoCenter({moduleName:"units/topLineFloaterV2"}),s=e("../components/units/pageJob"),l=e("../components/action/checkDoms"),d=e("../kit/userInfo"),m=e("../kit/getWebEventID"),c=e("../config/siteDomain"),h=e("../kit/checkI18nType"),u="default",p="topLineFloaterV2";s.create(p,{getDependentDoms:function(){return t=Q.$("*[data-widget-toplinefloater=blackFloater]"),{con:t}},check:function(e){return l(e),!0},init:function(){var e=this;this.hasFixedStyleInited=t.hasClass("topNav-fixed"),this.isSendLoginSucPingBack=!1,this.shownFloater=!1,Q.browser.IE6||Q.browser.iPad?t.css("position","relative"):Q.$(window).on("onresize",function(){e.doFloatTop()});var o=Q.url.getQueryValue(location.href,"source");if(o)u=o.split(".").slice(-2,-1);else{var s=Q.url.parse(document.referrer);s&&(u=s.host.split(".").slice(-2,-1))}n&&(i=n.down("*[data-topnavloginbar-tpl='"+u+"']"),i&&a&&(a.html(i.value()),d.isLogin()||(e.showFloater(),r=setTimeout(function(){e.hideFloater()},6e4)))),this.scrollmarker=Q.$("[data-toplinefloater-elem=scrollmarker]"),this.bindEvent(),this.doWindowScroll()},exec:function(){},destroy:function(){},bindEvent:function(){if(Q.$(window).on("scroll",this.doWindowScroll.bind(this)),Q.event.customEvent.on("login",this.doLogin.bind(this)),Q.event.customEvent.on("loginIframeClosed",this.doLoginIframeClosed.bind(this)),a){var e=a.down("*[data-topnavloginbar-loginbtn]");e&&e.on("click",this.doClickLoginBtn.bind(this));var t=a.down("*[data-topnavloginbar-sinabtn]");t&&t.on("click",this.doClickSinaLoginBtn.bind(this));var n=a.down("*[data-topnavloginbar-qqbtn]");n&&n.on("click",this.doClickQQLoginBtn.bind(this));var i=a.down("*[data-topnavloginbar-renrenbtn]");i&&i.on("click",this.doClickRenrenLoginBtn.bind(this))}},doFloatTop:function(){var e=!0;if(!this.hasFixedStyleInited){var n=Q.page.getScrollTop(),a=502;t.attr("data-toplinefloater-scrolltop")&&(a=t.attr("data-toplinefloater-scrolltop")),this.scrollmarker&&(a=this.scrollmarker.top()+this.scrollmarker.height()),a>=n&&(e=!1)}var i=Q.page.getViewWidth();Q.page.getViewWidth()>Q.page.getWidth()&&(i=Q.page.getWidth()),980>i&&(e=!1),e?(t.addClass("topNav-fixed"),t.css("position","fixed")):(t.removeClass("topNav-fixed"),t.css("position","relative")),t.attr("data-toplinefloater-needchangeavatar")&&Q.event.customEvent.fire({type:"indexNavClassChange",data:{top:e}})},doWindowScroll:function(){Q.browser.IE6||Q.browser.iPad||this.doFloatTop();var e=Q.page.getScrollTop();"absolute"===t.css("position")&&(o.log("css position is absolute"),t.css("top",e+"px"),o.log("reset css position ..")),d.isLogin()||(i?(r&&clearTimeout(r),this.hideFloater()):e>150?this.showFloater():this.hideFloater())},doWindowResize:function(){},doLogin:function(){var e=this;this.hideFloater(),m(function(t){var n=Q.cookie.get("QILINPUSH");null!==n&&Q.cookie.remove("QILINPUSH",{path:"/",domain:c.getDomain()}),e.isSendLoginSucPingBack&&Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"loginsuc",weid:t,mod:h.mod,pru:Q.cookie.get("P00PRU")||"",ppuid:d.getUid()},"http://msg.71.am/tmpstats.gif")})},doLogout:function(){},doLoginIframeClosed:function(){var e=this;this.isSendLoginSucPingBack=!1,window.setTimeout(function(){e.showFloater()},200)},doClickLoginBtn:function(e){e=Q.event.get(e),e.preventDefault(),m(function(e){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"cllogin",weid:e,mod:h.mod,pru:Q.cookie.get("P00PRU")||"",ppuid:d.getUid()},"http://msg.71.am/tmpstats.gif")}),this.isSendLoginSucPingBack=!0},doClickTopRegisterBtn:function(e){e=Q.event.get(e),e.preventDefault(),m(function(e){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"clreg",weid:e,mod:h.mod,pru:Q.cookie.get("P00PRU")||"",ppuid:d.getUid()},"http://msg.71.am/tmpstats.gif")})},doClickTopLoginBtn:function(e){e=Q.event.get(e),e.preventDefault(),m(function(e){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"cllogin",weid:e,mod:h.mod,pru:Q.cookie.get("P00PRU")||"",ppuid:d.getUid()},"http://msg.71.am/tmpstats.gif")})},doClickSinaLoginBtn:function(e){e=Q.event.get(e),e.preventDefault(),i?this.thirdLoginPingBack():m(function(e){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"weiboclcooplog",weid:e,mod:h.mod,pru:Q.cookie.get("P00PRU")||"",ppuid:d.getUid()},"http://msg.71.am/tmpstats.gif")})},doClickRenrenLoginBtn:function(e){e=Q.event.get(e),e.preventDefault(),i&&this.thirdLoginPingBack()},doClickQQLoginBtn:function(e){e=Q.event.get(e),e.preventDefault(),i?this.thirdLoginPingBack():m(function(e){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,usract:"qqclcooplog",weid:e,mod:h.mod,pru:Q.cookie.get("P00PRU")||"",ppuid:d.getUid()},"http://msg.71.am/tmpstats.gif")})},showFloater:function(){this.shownFloater||(a&&a.show(),this.shownFloater=!0,i?m(function(e){Q.log.server({type:"snsusrlog20121112",jsuid:Q.cookie.get("QC006"),sns:u,flashuid:Q.cookie.get("QC005"),act:"showdiv",weid:e,mod:h.mod,pru:Q.cookie.get("P00PRU")||"",ppuid:d.getUid()},"http://msg.71.am/tmpstats.gif")}):m(function(e){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,jsact:"show",weid:e,mod:h.mod,pru:Q.cookie.get("P00PRU")||"",ppuid:d.getUid()},"http://msg.71.am/tmpstats.gif")}))},hideFloater:function(){this.shownFloater&&(this.shownFloater=!1,a&&a.hide(),i||m(function(e){Q.log.server({type:"baidupopdiv",jsuid:Q.cookie.get("QC006"),qtcurl:location.href,jsact:"hide",weid:e,mod:h.mod,pru:Q.cookie.get("P00PRU")||"",ppuid:d.getUid()},"http://msg.71.am/tmpstats.gif")}))},thirdLoginPingBack:function(){m(function(e){Q.log.server({type:"snsusrlog20121112",jsuid:Q.cookie.get("QC006"),sns:u,flashuid:Q.cookie.get("QC005"),act:"clklogin",weid:e,mod:h.mod,pru:Q.cookie.get("P00PRU")||"",ppuid:d.getUid()},"http://msg.71.am/tmpstats.gif")})}}),s.add(p)});
define("units/userUpgrade/upgrade.js",["../../components/action/checkDoms","../../components/units/pageJob","../../components/action/floater","../../components/view/floaterView","../../kit/juicer","../../units/userUpgrade/upgradeViewTpl","../../units/userUpgrade/upgradeMobileReg","../../interfaces/profileNav","../../kit/userInfo"],function(e,t,n){var a=e("../../components/action/checkDoms"),i=e("../../components/units/pageJob"),r=e("../../components/action/floater"),o=e("../../components/view/floaterView");e("../../kit/juicer"),e("../../units/userUpgrade/upgradeViewTpl");var s=e("../../units/userUpgrade/upgradeMobileReg"),l=e("../../interfaces/profileNav"),d=e("../../kit/userInfo"),m=new l;Q.event.customEvent;var c=null,h={},u="upgrade";i.create(u,{getDependentDoms:function(){h.check=Q('[data-widget-topnavloginbar="loginbar"]')},check:function(){return a(h),!0},init:function(){var e=this;e.setDom(),e.bindEvent(),d.isLogin()?e._getUserInfo():(h.$tipPop1.addClass("dn"),h.$tipPop2.addClass("dn"),h.$tipPop3.removeClass("dn")),Q.event.customEvent.on("upgradeInit",function(t){e._callback(t.data)})},bindEvent:function(){var e=this;e._scrollEvent(),e._loginBtnEvent()},_getUserInfo:function(){var e=this;m.getProfile({fields:"prus,userinfo,qiyi_vip",authcookie:Q.cookie.get("P00007")},function(t){"A00000"===t.code&&e._callback(t)})},_callback:function(e){var t=this,n=Q.cookie.get("upgradeTime"),a=null;if(!e.data.qiyi_vip_info)return h.$box.hide(),h.$underFrame.css("display","none"),!1;if(a=parseInt(e.data.qiyi_vip_info.vipType,10),!e.data.qiyi_vip_info||!n||3!==a)return h.$box.hide(),h.$underFrame.css("display","none"),!1;var i=e.data.qiyi_vip_info.deadline.t-new Date,r=i/1e3/60/60/24;t._setNavTipStyle(Math.ceil(r))},_setNavTipStyle:function(e){return 7==e?(h.$tipPop1.removeClass("dn"),h.$tipPop2.addClass("dn"),h.$tipPop3.addClass("dn"),h.$box.show(),h.$underFrame.css("display","block"),!1):e>=0&&3>=e?(h.$tipPop1.addClass("dn"),h.$tipPop2.removeClass("dn"),h.$tipPop3.addClass("dn"),h.$tipPop2.find(".c-day-hy").html(e+"天"),h.$box.show(),h.$underFrame.css("display","block"),!1):(h.$box.hide(),h.$underFrame.css("display","none"),!1)},_scrollEvent:function(){var e=this,t=null,n=!0;h.$vido.length>0&&Q(window).scroll(function(){var a=h.$vido.position().top,i=Q(window).scrollTop(),r=h.$vido.height();clearInterval(t),t=setInterval(function(){var t=a+r/2;if(i>=t){h.$tipBox.css("display"),h.$tipBox.css("display","block"),"none"!==h.$box.css("display")&&h.$underFrame.css("display","block");var o=h.$tipPop3.hasClass("dn");n&&!o&&e._sendPingBack("1504011_1"),n=!1}else h.$tipBox.css("display","none"),h.$underFrame.css("display","none"),n=!0},30)})},_createfloater:function(e){if(!c){c=new r({view:new o({isResize:!0,zIndex:4850})}),c.show({html:e}),h.$gradeBox=Q("#J_upgrade-box"),h.$timerBox=Q("#J_grade-timer"),h.$num=Q("#J_grade-timerNum"),h.$inputs=Q(".J_phone-inp"),h.$warnInfos=Q(".J_phone-inp-warn");var t={dom:h,floater:c};new s(t).bindEvent(),Q.event.customEvent.on("upgradeHide",function(){c.hide()})}},_loginBtnEvent:function(){},_sendPingBack:function(e){var t={t:21,rn:Math.random(),p:10,pf:1,p1:101,bstp:0,jsuid:Q.cookie.get("QC006")||"",ve:Q.getVideoEventID()||"",ce:"",u:Q.cookie.get("QC005")||"",block:e};Q.log.server(t,"http://msg.71.am/b")},setDom:function(){h={$box:Q('[data-widget-topnavloginbar="loginbar"]'),$con:Q('[data-topnavloginbar-elem="container"]'),$underFrame:Q('[data-topnavloginbar-elem="underframe"]'),$vido:Q('[data-widget-videoarea="videoarea"]'),$tipBox:Q("#J_grade-tip-box"),$tipPop1:Q("#J_grade-tip-pop1"),$tipPop2:Q("#J_grade-tip-pop2"),$tipPop3:Q("#J_grade-tip-pop3"),$tipRegbtn:Q("#J_grade-tip-regBtn")}}}),n.exports=u});
define("kit/juicer.js",[],function(e,t,n){!function(){var e=function(){var t=[].slice.call(arguments);return t.push(e.options),t[0].match(/^\s*#([\w:\-\.]+)\s*$/gim)&&t[0].replace(/^\s*#([\w:\-\.]+)\s*$/gim,function(e,n){var a=document,i=a&&a.getElementById(n);t[0]=i?i.value||i.innerHTML:e}),1==arguments.length?e.compile.apply(e,t):arguments.length>=2?e.to_html.apply(e,t):void 0},t={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(e){return t.escapehash[e]},escaping:function(e){return"string"!=typeof e?e:e.replace(/[&<>"]/gim,this.escapereplace)},detection:function(e){return"undefined"==typeof e?"":e}},a=function(e){var t=window.console;if("undefined"!=typeof t){if(t.warn)return t.warn(e),void 0;if(t.log)return t.log(e),void 0}throw e},i=function(e,t){if(e=e!==Object(e)?{}:e,e.__proto__)return e.__proto__=t,e;var n=function(){},a=Object.create?Object.create(t):new Object(n.prototype=t,n);for(var i in e)e.hasOwnProperty(i)&&(a[i]=e[i]);return a};e.__cache={},e.version="0.6.5-stable",e.settings={},e.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},e.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:i({__escapehtml:t,__throw:a,__juicer:e},{})},e.tagInit=function(){var t=e.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+e.tags.operationClose,n=e.tags.operationOpen+"\\/each"+e.tags.operationClose,a=e.tags.operationOpen+"if\\s*([^}]*?)"+e.tags.operationClose,i=e.tags.operationOpen+"\\/if"+e.tags.operationClose,r=e.tags.operationOpen+"else"+e.tags.operationClose,o=e.tags.operationOpen+"else if\\s*([^}]*?)"+e.tags.operationClose,s=e.tags.interpolateOpen+"([\\s\\S]+?)"+e.tags.interpolateClose,l=e.tags.noneencodeOpen+"([\\s\\S]+?)"+e.tags.noneencodeClose,d=e.tags.commentOpen+"[^}]*?"+e.tags.commentClose,m=e.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+e.tags.operationClose,c=e.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+e.tags.operationClose;e.settings.forstart=new RegExp(t,"igm"),e.settings.forend=new RegExp(n,"igm"),e.settings.ifstart=new RegExp(a,"igm"),e.settings.ifend=new RegExp(i,"igm"),e.settings.elsestart=new RegExp(r,"igm"),e.settings.elseifstart=new RegExp(o,"igm"),e.settings.interpolate=new RegExp(s,"igm"),e.settings.noneencode=new RegExp(l,"igm"),e.settings.inlinecomment=new RegExp(d,"igm"),e.settings.rangestart=new RegExp(m,"igm"),e.settings.include=new RegExp(c,"igm")},e.tagInit(),e.set=function(e,t){var n=this,a=function(e){return e.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/gim,function(e){return"\\"+e})},i=function(e,t){var i=e.match(/^tag::(.*)$/i);return i?(n.tags[i[1]]=a(t),n.tagInit(),void 0):(n.options[e]=t,void 0)};if(2===arguments.length)return i(e,t),void 0;if(e===Object(e))for(var r in e)e.hasOwnProperty(r)&&i(r,e[r])},e.register=function(e,t){var n=this.options._method;return n.hasOwnProperty(e)?!1:(n[e]=t,n[e])},e.unregister=function(e){var t=this.options._method;return t.hasOwnProperty(e)?delete t[e]:void 0},e.template=function(t){var n=this;this.options=t,this.__interpolate=function(e,t,n){var a,i=e.split("|"),r=i[0]||"";return i.length>1&&(e=i.shift(),a=i.shift().split(","),r="_method."+a.shift()+".call({}, "+[e].concat(a)+")"),"<%= "+(t?"_method.__escapehtml.escaping":"")+"("+(n&&n.detection===!1?"":"_method.__escapehtml.detection")+"("+r+")"+")"+" %>"},this.__removeShell=function(t,a){var i=0;return t=t.replace(e.settings.forstart,function(e,t,n,a){var r=n||"value",o=a&&a.substr(1),s="i"+i++;return"<% ~function() {for(var "+s+" in "+t+") {"+"if("+t+".hasOwnProperty("+s+")) {"+"var "+r+"="+t+"["+s+"];"+(o?"var "+o+"="+s+";":"")+" %>"}).replace(e.settings.forend,"<% }}}(); %>").replace(e.settings.ifstart,function(e,t){return"<% if("+t+") { %>"}).replace(e.settings.ifend,"<% } %>").replace(e.settings.elsestart,function(){return"<% } else { %>"}).replace(e.settings.elseifstart,function(e,t){return"<% } else if("+t+") { %>"}).replace(e.settings.noneencode,function(e,t){return n.__interpolate(t,!1,a)}).replace(e.settings.interpolate,function(e,t){return n.__interpolate(t,!0,a)}).replace(e.settings.inlinecomment,"").replace(e.settings.rangestart,function(e,t,n,a){var r="j"+i++;return"<% ~function() {for(var "+r+"="+n+";"+r+"<"+a+";"+r+"++) {{"+"var "+t+"="+r+";"+" %>"}).replace(e.settings.include,function(e,t,n){if(t.match(/^file\:\/\//gim))return e;var a="<%= _method.__juicer("+t+", "+n+"); %>";return a}),a&&a.errorhandling===!1||(t="<% try { %>"+t,t+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),t},this.__toNative=function(e,t){return this.__convert(e,!t||t.strip)},this.__lexicalAnalyze=function(t){var n=[],a=[],i="",r=["if","each","_","_method","console","break","case","catch","continue","debugger","default","delete","do","finally","for","function","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","null","typeof","class","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield","const","arguments","true","false","undefined","NaN"],o=function(e,t){if(Array.prototype.indexOf&&e.indexOf===Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},s=function(t,i){if(i=i.match(/\w+/gim)[0],-1===o(n,i)&&-1===o(r,i)&&-1===o(a,i)){if("undefined"!=typeof window&&"function"==typeof window[i]&&window[i].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return t;var s={};if("undefined"!=typeof s&&"function"==typeof s[i]&&s[i].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return t;if("function"==typeof e.options._method[i]||e.options._method.hasOwnProperty(i))return a.push(i),t;n.push(i)}return t};t.replace(e.settings.forstart,s).replace(e.settings.interpolate,s).replace(e.settings.ifstart,s).replace(e.settings.elseifstart,s).replace(e.settings.include,s).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_]+)/gim,s);for(var l=0;l<n.length;l++)i+="var "+n[l]+"=_."+n[l]+";";for(var d=0;d<a.length;d++)i+="var "+a[d]+"=_method."+a[d]+";";return"<% "+i+" %>"},this.__convert=function(e,t){var n=[].join("");return n+="'use strict';",n+="var _=_||{};",n+="var _out='';_out+='",n+=t!==!1?e.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":e.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(e,t){var a=this;return t&&t.loose===!1||(e=this.__lexicalAnalyze(e)+e),e=this.__removeShell(e,t),e=this.__toNative(e,t),this._render=new Function("_, _method",e),this.render=function(e,t){return t&&t===n.options._method||(t=i(t,n.options._method)),a._render.call(this,e,t)},this}},e.compile=function(e,t){t&&t===this.options||(t=i(t,this.options));try{var n=this.__cache[e]?this.__cache[e]:new this.template(this.options).parse(e,t);return t&&t.cache===!1||(this.__cache[e]=n),n}catch(r){return a("Juicer Compile Exception: "+r.message),{render:function(){}}}},e.to_html=function(e,t,n){return n&&n===this.options||(n=i(n,this.options)),this.compile(e,n).render(t,n._method)},"undefined"!=typeof n&&n.exports?n.exports=e:this.juicer=e}()});
define("units/userUpgrade/upgradeViewTpl.js",[],function(e,t,n){var a={tpl01:['<div class="phone-pop-hy" data-widget-registbox="upgrade-registbox">','<div class="hd">','<a href="#" class="pop-closeBtn J_upgrade-pop-closeBtn">×</a>',"</div>",'<div class="bd " id="J_upgrade-box">','<div class="prompt_hd">已有账号？<a href="javascript:void(0)" class="green" id="upgrade-loginscroll" rseat="1504011_5">立即登录&gt;</a></div>','<div class="phone-list J_grade-phone-list">','<label class="set-item">手机号：</label>','<input type="text" class="inputComm J_phone-inp" placeholder="请输入手机号码" data-flag="false" id="J_grade-reg-phone" tabindex="1">','<span class="registered J_phone-inp-warn"></span>',"</div>",'<div class="phone-list J_grade-phone-list">','<label class="set-item">密&nbsp;&nbsp;&nbsp;码：</label>','<input type="password" class="inputComm J_phone-inp" placeholder="8~20位字母、数字或字符，至少包含两种" data-flag="false" id="J_grade-reg-pwd" tabindex="2">','<div class="mod-passwordStrength dn" id="J_pw-strength">','<div class="passwordStrength_results">','<span style="vertical-align:top;" class="dn" id="J_strength-t1">弱</span>','<span style="vertical-align:top;" class="dn" id="J_strength-t2">中</span>','<span style="vertical-align:top;" class="dn" id="J_strength-t3">强</span>',"</div>",'<div class="passwordStrength passwordStrength_level2">','<div class="passwordStrength_blocks" id="J_grade-strength">','<span class="strengthBlock_1 dn" id="J_strength-1"></span>','<span class="strengthBlock_2 dn" id="J_strength-2"></span>','<span class="strengthBlock_3 dn" id="J_strength-3"></span>',"</div>","</div>","</div>",'<span class="registered J_phone-inp-warn"></span>',"</div>",'<div class="phone-list phone-list-yzm J_grade-phone-list">','<label class="set-item">验证码：</label>','<div class="phone-list-yzmCon phone-list-yzmCon-img">','<input type="text" class="inputComm1 J_phone-inp" placeholder="请输入验证码" data-flag="false" id="J_grade-reg-code" tabindex="3">','<span class="free-msg-img free-yzm-get" data-registbox-elem="sms">','<a href="javascript:void(0)" class="J_grade-get-code">获取验证码</a>','<span style="" id="J_grade-timer" class="getSms_already dn">','<span id="J_grade-timerNum">29</span>秒后重新获得',"</span>","</span>","</div>",'<span class="registered J_phone-inp-warn"></span>',"</div>",'<div class="logAuto">','<span class="selected J_grade-pro-btn" data-flag="true">我同意<a href="http://passport.iqiyi.com/register/protocol.php" class="green">《用户服务协议》</a></span>',"</div>",'<div class="bindBlock"><a class="site-btn site-btn-green J_grade-phone-submit" rseat="1504011_4" href="javascript:void(0)">注册</a></div>','<div class="divide-line-ico">使用合作帐号一键登录</div>','<div class="otherBind-big clearfix">','<a href="http://passport.iqiyi.com/apis/thirdparty/nlogin.action?type=2&isiframe=1&_pos=1&agenttype=1" data-sourceid="2" class="weibo" j-delegate="authLoginBtn"','rseat="1504011_6"></a>','<a href="http://passport.iqiyi.com/apis/thirdparty/nlogin.action?type=4&isiframe=1&_pos=1&agenttype=1" data-sourceid="4" class="qq" j-delegate="authLoginBtn"','rseat="1504011_6"></a>','<a href="http://passport.iqiyi.com/apis/thirdparty/nlogin.action?type=29&isiframe=1&_pos=1&agenttype=1" data-sourceid="29" class="weixin"','j-delegate="authLoginBtn" rseat="1504011_6"></a>','<a href="http://passport.iqiyi.com/apis/thirdparty/nlogin.action?type=1&isiframe=1&_pos=1&agenttype=1" data-sourceid="1" class="baidu" j-delegate="authLoginBtn"','rseat="1504011_6"></a>','<a href="http://passport.iqiyi.com/apis/thirdparty/nlogin.action?type=5&isiframe=1&_pos=1&agenttype=1" data-sourceid="5" class="zhifubao"','j-delegate="authLoginBtn" rseat="1504011_6"></a>','<a href="http://passport.iqiyi.com/apis/thirdparty/nlogin.action?type=3&isiframe=1&_pos=1&agenttype=1" data-sourceid="3" class="renren"','j-delegate="authLoginBtn" rseat="1504011_6"></a>','<a href="http://passport.iqiyi.com/apis/thirdparty/nlogin.action?type=30&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" class="xiaomi" data-sourceid="30"',' j-delegate="authLoginBtn" rseat="1504011_6"> </a>','<a href="http://passport.iqiyi.com/apis/thirdparty/nlogin.action?type=31&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" class="jd" data-sourceid="31"',' j-delegate="authLoginBtn" rseat="1504011_6"> </a>',"</div>","</div>","</div>"].join("")};n.exports=a});
define("units/userUpgrade/upgradeMobileReg.js",["../../kit/pcUserRegistKit","../../kit/validate","../../kit/validate","../../interfaces/verifyMobileInterface","../../interfaces/mobileRegistInterface","../../kit/setPwStrong","../../kit/juicer","../../units/userUpgrade/upgradeViewTpl"],function(e,t,n){e("../../kit/pcUserRegistKit"),e("../../kit/validate");var a=e("../../kit/validate"),i=e("../../interfaces/verifyMobileInterface"),r=e("../../interfaces/mobileRegistInterface"),o=e("../../kit/setPwStrong"),s=e("../../kit/juicer"),l=e("../../units/userUpgrade/upgradeViewTpl"),d=Q.event.customEvent,m={},c={};n.exports=Q.Class("upgradeMobileReg",{construct:function(e){this.wrapper=e.wrapper,this.opt=e.dom||{},this.floater=e.floater,this.init()},methods:{init:function(){if(this.wrapper){var e=s(l.tpl02,null);this.wrapper.html(e),this.bindEvent()}else m=this.opt,c=this.floater},bindEvent:function(){var e=this;e._closeEvent(),e._tabKeyDownEvent(),e._inpBlurEvent(),e._proEvent(),e._getCodeEvent(),e._submitEvent(),e._loginBox()},_submitEvent:function(){var e=this;Q(document).delegate(".J_grade-phone-submit","click",function(){var t=Q(this).hasClass("site-btn-gray");t||e._submitCallback()})},_submitCallback:function(){for(var e=this,t=Q(".J_phone-inp"),n=Q(".J_phone-inp-warn"),a=0,i=t.length;i>a;a++){var o=Q(n[a]),s=Q(t[a]).val(),l=Q(t[a]).attr("id");"J_grade-reg-phone"===l?e._validatePhone(Q(t[a]),o,s):"J_grade-reg-pwd"===l?e._validatePwd(Q(t[a]),o,s):"J_grade-reg-code"===l&&e._validateCode(Q(t[a]),o,s)}var c=!0;if(t.each(function(e,t){var n=Q(t).attr("data-flag");"true"!=n&&(c=!1)}),c){var h=e.passwordRSA(Q(t[1]).val()),u={authCode:Q(t[2]).val(),agenttype:1,cellphoneNumber:Q(t[0]).val(),password:h,_pos:1,serviceId:2};(new r).register(u,function(e){if("A00000"===e.code){if(e.data._loginName=u.cellphoneNumber,d.fire({type:"registed",data:e.data}),m.$tipPop1){m.$tipPop1.removeClass("dn"),m.$tipPop2.addClass("dn"),m.$tipPop3.addClass("dn");var t=(new Date).getTime()+6048e5;Q.cookie.set("upgradeTime",t)}}else Q(n[0]).html(e.msg)})}},passwordRSA:function(e){var t="ab86b6371b5318aaa1d3c9e612a9f1264f372323c8c0f19875b5fc3b3fd3afcc1e5bec527aa94bfa85bffc157e4245aebda05389a5357b75115ac94f074aefcd",n="10001",a=Q.crypto.rsa.RSAUtils.getKeyPair(n,"",t),i=Q.crypto.rsa.RSAUtils.encryptedString(a,encodeURIComponent(e)).replace(/\s/g,"-");return i},_getCodeEvent:function(){var e=this;Q(document).delegate(".J_grade-get-code","click",function(t){var n=t.target,a=Q(Q(".J_phone-inp")[0]),r=a.val(),o=Q(Q(".J_phone-inp-warn")[0]);e._validatePhone(a,o,r);var s=a.attr("data-flag");if("true"!=s)return!1;var l={requestType:1,cellphoneNumber:r,serviceId:2};(new i).getCaptchaNum(l,function(t){"A00000"===t.code?e._timer(n):o.html(t.msg)})})},_closeEvent:function(){Q(document).delegate(".J_upgrade-pop-closeBtn","click",function(){c.hide()})},_tabKeyDownEvent:function(){var e=this;Q(window).keydown(function(t){var n=t.which,a=t.target,i=Q(".J_phone-inp");Q(".J_phone-inp-warn");var r=Q(a).attr("tabindex");if(r&&(r=parseInt(r,10),9===n&&(t.preventDefault(),3===r&&(r=0),i[r].focus()),13===n)){Q(i[r-1]).val();var o=Q(i[r-1]).attr("data-flag");if("true"!=o)3===r&&(r=0),i[r].focus(),t.preventDefault();else{var s=!0;i.each(function(e,t){var n=Q(t).attr("data-flag");"true"!=n&&(s=!1)}),s?e._submitCallback():i[r].focus()}}})},_inpBlurEvent:function(){var e=this;Q(document).delegate(".J_phone-inp","blur",function(t){e._callback(t)}),Q(document).delegate(".J_phone-inp","keyup",function(t){var n=t.which;9!=n&&13!=n&&e._callback(t)})},_callback:function(e){var t=this,n=e.target,a=Q(n).attr("id"),i=Q(n).val(),r=Q(n).parents(".J_grade-phone-list"),o=r.find(".J_phone-inp-warn");"J_grade-reg-phone"===a?t._validatePhone(n,o,i):"J_grade-reg-pwd"===a?t._validatePwd(n,o,i):"J_grade-reg-code"===a&&t._validateCode(n,o,i)},_validatePhone:function(e,t,n){if(!a.mobile(n))return a.empty(n)?t.html("手机号格式错误"):t.html("手机号不能为空"),Q(e).attr("data-flag","false"),!1;var r={account:n,agenttype:1};(new i).verifyNum(r,function(n){return n.data!==!1?(t.html("该手机号已被注册"),Q(e).attr("data-flag","false"),!1):(t.html(""),Q(e).attr("data-flag","true"),void 0)})},_validatePwd:function(e,t,n){a.empty(n)?a.pwd(n)?a.getIsTooSimple(n)?(Q("#J_pw-strength").addClass("dn"),t.html("密码过于简单"),Q(e).attr("data-flag","false")):(t.html(""),Q(e).attr("data-flag","true"),o.getStrongGrade(a.getScore(n))):(Q("#J_pw-strength").addClass("dn"),t.html("密码为8~20位"),Q(e).attr("data-flag","false")):(Q("#J_pw-strength").addClass("dn"),t.html("密码不能为空"),Q(e).attr("data-flag","false"))},_validateCode:function(e,t,n){a.empty(n)?(t.html(""),Q(e).attr("data-flag","true")):(t.html("验证码不能为空"),Q(e).attr("data-flag","false"))},_proEvent:function(){Q(document).delegate(".J_grade-pro-btn","click",function(){Q(this).toggleClass("selected"),Q(this).hasClass("selected")?(Q(this).attr("data-flag","true"),Q(".J_grade-phone-submit").removeClass("site-btn-gray").addClass("site-btn-green")):(Q(this).attr("data-flag","false"),Q(".J_grade-phone-submit").removeClass("site-btn-green").addClass("site-btn-gray"))})},_timer:function(e){var t=null;clearInterval(t),Q(e).addClass("dn");var n=29,a=Q("#J_grade-timer");a.removeClass("dn"),t=setInterval(function(){n>0?(n--,m.$num.html(""+n)):(clearInterval(t),a.addClass("dn"),Q(e).removeClass("dn"),m.$num.html("29"))},1e3)},_loginBox:function(){Q(document).delegate("#upgrade-loginscroll","click",function(e){e.preventDefault(),c.hide(),Q.external.openLoginBox()})}}})});
define("interfaces/mobileRegistInterface.js",["../kit/remoteInterface","../config/siteDomain","../kit/rsa","../kit/fdlKit"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/siteDomain"),r=i.getDomain(),o=e("../kit/rsa"),s=e("../kit/fdlKit"),l=window.location.protocol;n.exports=Q.Class("RIMobileReg",{construct:function(){this._remoteInterface=new a({register:{url:"http://apollo."+r+"/validate"},sendCode:{url:"http://passport."+r+"/apis/phone/send_cellphone_authcode.action"},sendCodeNew:{url:l+"//passport."+r+"/apis/phone/send_cellphone_authcode_vcode.action"},bindPhone:{url:"http://apollo."+r+"/validate"},newBindPhone:{url:"http://apollo."+r+"/validate"},replacePhone:{url:"http://passport."+r+"/apis/phone/replace_phone.action"},vertifyPwd:{url:"http://passport."+r+"/apis/user/verify_pwd.action?t="+ +new Date},validate:{url:l+"//passport."+r+"/apis/phone/verify_cellphone_authcode.action"},resetPasswd:{url:"https://passport."+r+"/apis/user/reset_passwd.action"},savePwd:{url:"https://passport."+r+"/pages/secure/password/save_pwd.action"},resetNewPwd:{url:"https://passport."+r+"/pages/secure/password/reset_passwd.action"},checkPasswdRepeat:{url:"https://passport."+r+"/apis/user/check_passwd_repeat.action"},tokenlogin:{url:"http://passport."+r+"/apis/phone/token_login.action"},nResetPasswd:{url:"https://passport."+r+"/pages/secure/password/nreset_passwd.action"}})},methods:{register:function(e,t){var n=this;e=e||{},e.password=o.rsaFun(e.password),e.server="BEA3AA1908656AABCCFF76582C4C6660",e.url_src="/apis/reglogin/cellphone_reg.action?",e.bird_src=e.lang&&"zh_TW"==e.lang?"f8d91d57af224da7893dd397d52d811a":"bfc434ba2fa1457f8c42f824ff26aa7d",s.getToken(e,function(e){"A00000"===e.code?n._remoteInterface.send({dataType:"jsonp",ifname:"register",param:e.param,domain:r},function(e){t&&t(e)}):t&&t(e)})},sendCode:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"sendCode",param:e},function(e){t&&t(e)})},sendCodeNew:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"sendCodeNew",param:e},function(e){t&&t(e)})},bindPhone:function(e,t){var n=this;e=e||{},e.passwd&&(e.passwd=o.rsaFun(e.passwd)),e.server="BEA3AA1908656AABCCFF76582C4C6660",e.url_src="/apis/phone/bind_phone.action?",e.bird_src="eb8d221bc0c04c5ab4ba735b6b1560a1",s.getToken(e,function(e){"A00000"===e.code?n._remoteInterface.send({dataType:"jsonp",ifname:"bindPhone",param:e.param,domain:r},function(e){t&&t(e)}):t&&t(e)})},newBindPhone:function(e,t){var n=this;e=e||{},e.passwd&&(e.passwd=o.rsaFun(e.passwd)),e.server="BEA3AA1908656AABCCFF76582C4C6660",e.url_src="/apis/secure/bind_account.action?",e.bird_src="eb8d221bc0c04c5ab4ba735b6b1560a1",s.getToken(e,function(e){"A00000"===e.code?n._remoteInterface.send({dataType:"jsonp",ifname:"newBindPhone",param:e.param,domain:r},function(e){t&&t(e)}):t&&t(e)})},replacePhone:function(e,t){e=e||{},e.authcookie=Q.cookie.get("P00001"),this._remoteInterface.send({dataType:"jsonp",ifname:"replacePhone",antiCsrf:!0,param:e},function(e){t&&t(e)})},vertifyPwd:function(e,t){e=e||{},e.passwd=o.rsaFun(e.passwd),this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"vertifyPwd",param:e},function(e){t&&t(e)})},validate:function(e,t){e=e||{},e.passwd&&(e.passwd=o.rsaFun(e.passwd)),this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"validate",param:e},function(e){t&&t(e)})},resetPasswd:function(e,t){e=e||{},e.newpass&&(e.newpass=o.rsaFun(e.newpass)),e.oldpass&&(e.oldpass=o.rsaFun(e.oldpass)),this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"resetPasswd",param:e},function(e){t&&t(e)})},nResetPasswd:function(e,t){e=e||{},e.newpass&&(e.newpass=o.rsaFun(e.newpass)),e.oldpass&&(e.oldpass=o.rsaFun(e.oldpass)),this._remoteInterface.send({dataType:"jsonp",ifname:"nResetPasswd",param:e},function(e){t&&t(e)})},savePwd:function(e,t){e=e||{},e.newpass=o.rsaFun(e.newpass),this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"savePwd",param:e},function(e){t&&t(e)})},resetNewPwd:function(e,t){e=e||{},e.newpass=o.rsaFun(e.newpass),this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"resetNewPwd",param:e},function(e){t&&t(e)})},checkPasswdRepeat:function(e,t){e=e||{},e.passwd=o.rsaFun(e.passwd),this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"checkPasswdRepeat",param:e},function(e){t&&t(e)})},tokenlogin:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"tokenlogin",param:e},function(e){t&&t(e)})}}})});
define("interfaces/verifyMobileInterface.js",["../kit/remoteInterface","../config/siteDomain","../kit/rsa","../kit/fdlKit"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/siteDomain"),r=e("../kit/rsa"),o=i.getDomain(),s=e("../kit/fdlKit");n.exports=Q.Class("getAsideData",{construct:function(){this._remoteInterface=new a({verifyMobile:{url:"http://passport.iqiyi.com/apis/user/check_account.action"},getCaptchaNum:{url:"http://passport.iqiyi.com/apis/phone/send_cellphone_authcode.action"},checkMobileAndCaptcha:{url:"http://apollo."+o+"/validate"},checkPwAndCaptcha:{url:"http://passport.iqiyi.com/apis/phone/verify_cellphone_authcode.action"},checkSwitchAccount:{url:"https://passport.iqiyi.com/apis/phone/check_switch_account.action"},getSwitchInfo:{url:"https://passport.iqiyi.com/apis/phone/get_switch_info.action"},switchAcount:{url:"https://passport.iqiyi.com/apis/phone/switch_account.action"}})},methods:{verifyNum:function(e,t){e=e||{},e.callback=e.callback||"verifyMobile",e.t=(new Date).getTime(),this._remoteInterface.send({param:e,ifname:"verifyMobile",dataType:"jsonp"},function(e){t&&t(e)})},getCaptchaNum:function(e,t){e=e||{},e.callback=e.callback||"getCaptchaNum",e.t=(new Date).getTime(),this._remoteInterface.send({param:e,ifname:"getCaptchaNum",dataType:"jsonp"},function(e){t&&t(e)})},checkMobileAndCaptcha:function(e,t){var n=this;e=e||{},e.passwd&&(e.passwd=r.rsaFun(e.passwd)),e.agenttype=1,e.t=(new Date).getTime(),e.server="BEA3AA1908656AABCCFF76582C4C6660",e.url_src="/apis/phone/bind_phone.action?",e.bird_src="eb8d221bc0c04c5ab4ba735b6b1560a1",s.getToken(e,function(e){"A00000"===e.code?n._remoteInterface.send({dataType:"jsonp",ifname:"checkMobileAndCaptcha",param:e.param,domain:o},function(e){t&&t(e)}):t&&t(e)})},checkPwAndCaptcha:function(e,t){e=e||{},e.passwd&&(e.passwd=r.rsaFun(e.passwd)),e.callback=e.callback||"checkPwAndCaptcha",e.t=(new Date).getTime(),this._remoteInterface.send({param:e,ifname:"checkPwAndCaptcha",dataType:"jsonp"},function(e){t&&t(e)})},checkSwitchAccount:function(e,t){e=e||{},e.callback=e.callback||"checkSwitchAccount",e.t=(new Date).getTime(),this._remoteInterface.send({param:e,ifname:"checkSwitchAccount",dataType:"jsonp"},function(e){t&&t(e)})},getSwitchInfo:function(e,t){e=e||{},e.callback=e.callback||"getSwitchInfo",e.t=(new Date).getTime(),this._remoteInterface.send({param:e,ifname:"getSwitchInfo",dataType:"jsonp"},function(e){t&&t(e)})},switchAcount:function(e,t){e=e||{},e.callback=e.callback||"switchAcount",e.t=(new Date).getTime(),this._remoteInterface.send({param:e,ifname:"switchAcount",dataType:"jsonp"},function(e){t&&t(e)})}}})});
define("kit/setPwStrong.js",[],function(e,t,n){var a={getStrong:function(e){Q.$("#J_strength-1").removeClass("pw_low"),Q.$("#J_strength-2").removeClass("pw_mid"),Q.$("#J_strength-3").removeClass("pw_high"),0===e?(Q.$("#J_strength-1").removeClass("pw_low"),Q.$("#J_strength-2").removeClass("pw_mid"),Q.$("#J_strength-3").removeClass("pw_high"),Q.$("#J_strength-t1").addClass("dn"),Q.$("#J_strength-t2").addClass("dn"),Q.$("#J_strength-t3").addClass("dn")):40>=e?(Q.$("#J_strength-1").addClass("pw_low"),Q.$("#J_strength-t1").removeClass("dn"),Q.$("#J_strength-t2").addClass("dn"),Q.$("#J_strength-t3").addClass("dn")):e>40&&70>e?(Q.$("#J_strength-1").addClass("pw_low"),Q.$("#J_strength-2").addClass("pw_mid"),Q.$("#J_strength-1").addClass("pw_low"),Q.$("#J_strength-t1").addClass("dn"),Q.$("#J_strength-t2").removeClass("dn"),Q.$("#J_strength-t3").addClass("dn")):e>=70&&(Q.$("#J_strength-1").addClass("pw_low"),Q.$("#J_strength-2").addClass("pw_mid"),Q.$("#J_strength-3").addClass("pw_high"),Q.$("#J_strength-t1").addClass("dn"),Q.$("#J_strength-t2").addClass("dn"),Q.$("#J_strength-t3").removeClass("dn"))},getStrongGrade:function(e){Q("#J_pw-strength").removeClass("dn"),Q("#J_pw-strength").parents(".J_grade-phone-list"),0===e||(40>=e?(Q("#J_strength-1").removeClass("dn"),Q("#J_strength-2").addClass("dn"),Q("#J_strength-3").addClass("dn"),Q("#J_strength-t1").removeClass("dn"),Q("#J_strength-t2").addClass("dn"),Q("#J_strength-t3").addClass("dn")):e>40&&70>e?(Q("#J_strength-1").removeClass("dn"),Q("#J_strength-2").removeClass("dn"),Q("#J_strength-3").addClass("dn"),Q("#J_strength-t1").addClass("dn"),Q("#J_strength-t2").removeClass("dn"),Q("#J_strength-t3").addClass("dn")):e>=70&&(Q("#J_strength-1").removeClass("dn"),Q("#J_strength-2").removeClass("dn"),Q("#J_strength-3").removeClass("dn"),Q("#J_strength-t1").addClass("dn"),Q("#J_strength-t2").addClass("dn"),Q("#J_strength-t3").removeClass("dn")))}};n.exports=a});
define("kit/flashSnsAuth.js",["../kit/qiyiPlayer","../kit/snsWindowKit","./flashCall"],function(e){var t=e("../kit/qiyiPlayer");t.getPlayer("video");var n=e("../kit/snsWindowKit"),a=e("./flashCall");Q.event.customEvent.on("thirdPartSnsBinded",function(e){a({flashID:"flash",callback:function(){},functionName:"noticeBindInfo",parameter:e})}),Q.event.customEvent.on("swf_flashSnsAuth",function(e){var t=e.data.type,a=e.data.url;n.open(t,a)})});
define("kit/flashCall.js",[],function(e,t,n){n.exports=function(e){e=e||{};var t,n,a=Q.$("#"+(e.flashID||"")),i=e.functionName,r=e.parameter,o=e.tryTimes||0,s=e.perTimes||500,l=0,d=e.callback||Q.fn.emptyMethod;a&&i&&(t=function(){try{return void 0===r?d(a[0][i]()):"[object Object]"==Object.prototype.toString.apply(r)||"[object Array]"==Object.prototype.toString.apply(r)?d(a[0][i](JSON.stringify(r))):d(a[0][i](r)),!0}catch(e){return!1}},function(){return clearTimeout(n),t()?void 0:((!o||o>l)&&(n=setTimeout(arguments.callee,s),l++),void 0)}())}});
define("units/iframeOpenWin.js",["../components/units/pageJob","../kit/iframeLocation"],function(e){var t=e("../components/units/pageJob"),n=e("../kit/iframeLocation"),a="iframeOpenWin";t.create(a,{check:function(){return!0},init:function(){if(window.top!==window.self&&n.test(document.referrer)){var e=document.createElement("base");e.target="_blank",document.getElementsByTagName("head")[0].appendChild(e)}}}),t.add(a)});
define("units/pcYingYinDownload.js",["../components/units/pageJob","../components/action/checkDoms","../kit/pcYingYinDownloadKit","../interfaces/getDownloadUrlInterface"],function(e,t,n){var a,i=e("../components/units/pageJob"),r=e("../components/action/checkDoms"),o=e("../kit/pcYingYinDownloadKit"),s="pcYingYinDownload",l=e("../interfaces/getDownloadUrlInterface");i.create(s,{getDependentDoms:function(){return a=Q.$("*[data-widget-pcyingyingdownload]"),{pcdown:a}},check:function(e){return r(e),!0},init:function(){a.forEach(function(e){e=Q.$(e);var t=new o({doms:e});t.init();var n={pubarea:e.attr("pubarea"),srcchannel:document.referrer};e.attr("href",l.getDownloadUrl(n))})}}),n.exports=s,i.add(s)});
define("kit/pcYingYinDownloadKit.js",["../kit/userInfo","../kit/iframeLocation"],function(e,t,n){var a=e("../kit/userInfo"),i=e("../kit/iframeLocation"),r=Q.Class("VideoDownload",{construct:function(e){this._doms=e.doms},methods:{init:function(){this.bindEvent()},bindEvent:function(){var e=this._doms,t=this;e.on("click",function(e){Q.event.get(e).preventDefault();var n=Q.$(this),a=n.attr("data-pcyingyingdownload-type"),r=n.attr("data-pcyingyingdownload-ptype"),o=n.attr("data-pcyingyingdownload-etype"),s=n.attr("data-pcyingyingdownload-pack");t.sendPingback({type:a,ptype:r,etype:o,packageType:s}),i.href(n.attr("href"),{time:500})})},sendPingback:function(e){e=e||{},Q.log.server({type:e.type||"yingyinentrencem20130813",ppuid:a.getUid(),pru:Q.cookie.get("P00PRU")||"",flshuid:Q.cookie.get("QC005"),jsuid:Q.cookie.get("QC006"),qtcurl:i.url()||"",pagetype:e.ptype||"",packgtype:e.packageType||"",enttype:e.etype||"",tn:(new Date).getTime()+Math.random()},"http://msg.71.am/tmpstats.gif")}}});n.exports=r});
define("view/pcLoginBoxView.js",["../components/view/view","../units/history20_pingback","../kit/pcLogin","../kit/validate","../kit/thirdPartLogin","../kit/thirdPartyBtn","../kit/pcVCodeKit","../kit/accountHistory","../kit/placeholder","../view/pcBoxViewTpl"],function(e,t,n){var a=e("../components/view/view"),i=e("../units/history20_pingback"),r=e("../kit/pcLogin"),o=e("../kit/validate");e("../kit/thirdPartLogin"),e("../kit/thirdPartyBtn");var s,l=e("../kit/pcVCodeKit"),d=e("../kit/accountHistory"),m=e("../kit/placeholder").simulate,c=e("../view/pcBoxViewTpl"),h=Q.event.customEvent,u=function(e,t,n){e&&e.on&&e.on(t,n)},p="<span></span>",f=window.location.href;(f.indexOf("7daystrial1cent.html")>=0||f.indexOf("landingpage.html")>=0||f.indexOf("pages/secure")>=0)&&(p="<span></span>"),n.exports=Q.Class("PcLoginBoxView",{ns:Q.view,extend:a,construct:function(e,t){this._doms=e||{},this._opt=Q.object.extend({defaultTxt:p,initStatus:"hide",alreadyRendered:!1,inputFocusClass:"acountIn",autoLoginBtnSelectedClass:"selected",switchToQrCodeLoginRseat:"140711_tdenter_navlgin",returnFromQrCodeLoginRseat:"140711_bknavlgin"},t),this.piccodeVisible=!1,this.visible=!0,this.domReady=!1},methods:{init:function(){"hide"===this._opt.initStatus?this.hide():this._opt.alreadyRendered&&(this.initLoginPanel(),this.resetTips())},show:function(){this.visible||(this.domReady||this.initLoginPanel(),this.resetInput(!1),this.resetTips("all"),h.fire({type:"beforePcLoginBoxShow",data:{wrapper:this._doms.wrapper}}),this._doms.wrapper.show(),this._doms.table.show(),this._doms.qrcodeLoginDoms&&this._doms.qrcodeLoginDoms.widget&&this._doms.qrcodeLoginDoms.widget.hide(),this.visible=!0,this._doms.bg&&this._doms.main&&this._doms.bg.css("height",this._doms.main.height()-2+"px"),i.send("logindivshow"),h.fire({type:"pcLoginBoxShow",data:{wrapper:this._doms.wrapper}}))},hide:function(){this.visible&&(this.domReady&&(this.resetInput(!1),this.resetTips()),h.fire({type:"beforePcLoginBoxHide",data:{wrapper:this._doms.wrapper}}),this._doms.wrapper.hide(),this.visible=!1,h.fire({type:"pcLoginBoxHide",data:{wrapper:this._doms.wrapper}}))},toggle:function(){this.visible?this.hide():this.show()},initLoginPanel:function(){this._rendererPanel(),this.initLastAccount(),this._bindEvent(),this.domReady=!0},_rendererPanel:function(){var e=c.getLoginTpl(this._opt),t=this._doms,n=t.wrapper;if(n){this._opt.alreadyRendered||n.html(e),(n.down("[data-loginbox-elem]")||[]).forEach(function(e){e=Q.$(e),t[e.attr("data-loginbox-elem")]=e}),t.inputs={},t.wraps={};var a=1;["email","passwd","piccode"].forEach(function(e){t[e+"Input"].attr("tabindex",a),a++,t.inputs[e]=m(t[e+"Input"],{tipColor:"#333"}),t.wraps[e]=t[e+"Wrap"]}),this.domReady=!0,h.fire({type:"pcUserLoginDomReady",data:{wrapper:t.loginMailSuggest,html:e,input:this._doms.inputs.email}});var i={widget:n.down("[data-widget-qrcodelogin]")};i.widget&&((i.widget.down("[data-qrcodelogin-elem]")||[]).forEach(function(e){e=Q.$(e),i[e.attr("data-qrcodelogin-elem")]=e}),t.qrcodeLoginDoms=i,h.fire({type:"qrcodeLoginDomReady",data:{widget:i.widget,qrcodeLoginDoms:i}}))}},_bindEvent:function(){var e=this,t=this._doms;Q.object.forEach(t.inputs,function(n,a){if(n){var i=t.wraps[a];n.on("focus",function(){(i||n).addClass(e._opt.inputFocusClass),h.fire({type:"loginInputBegin",data:{input:n}})}),n.on("blur",function(){(i||n).removeClass(e._opt.inputFocusClass),e._doms.wrapper.down("input:focus")||h.fire({type:"loginInputEnd",data:{lastInput:n}})}),"email"!==a&&n.on("keydown",function(t){13==t.keyCode&&(Q.event.get(t).preventDefault(),e.doLogin())})}}),h.on("mailSuggestHide",function(e){e.data.input[0]===t.inputs.email[0]&&t.inputs.passwd[0].focus()});var n=t.autoLogin;if(u(n,"click",function(){n.hasClass(e._opt.autoLoginBtnSelectedClass)?n.removeClass(e._opt.autoLoginBtnSelectedClass):n.addClass(e._opt.autoLoginBtnSelectedClass)}),u(t.refreshPiccode,"click",function(t){Q.event.get(t).preventDefault(),e.refreshPiccode()}),u(t.piccode,"click",function(t){Q.event.get(t).preventDefault(),e.refreshPiccode()}),u(t.loginBtn,"click",function(t){Q.event.get(t).preventDefault(),e.doLogin()}),t.piccodeInput.on("focus",function(){s!=t.piccode.down("img").attr("src")&&e.refreshPiccode()}),t.wrapper.delegate("authLoginBtn",function(e){Q.event.get(e.event).preventDefault();var t=Q.$(e.target),n=t.attr("data-sourceId");"29"==n?i.send("weixinclk"):"2"==n?i.send("weiboclk"):"4"==n?i.send("qqclk"):i.send("extendclk")}),t.switchToQrCodeLogin){var a="showFormLoginFloater";t.switchToQrCodeLogin.attr("rseat",e._opt.switchToQrCodeLoginRseat),Q.browser.IE6&&(t.switchToQrCodeLogin[0].setAttribute("tabindex",-1),t.switchToQrCodeLogin[0].setAttribute("tabIndex",-1));var r=function(n){!t.formLoginWrapper&&!t.table||t.qrCodeLogin1||(t.formLoginWrapper||t.table).hide(),n=Q.object.extend({qrcodeLoginDoms:t.qrcodeLoginDoms,returnBtnRseat:e._opt.returnFromQrCodeLoginRseat},n),h.fire({type:"showQrCodeLoginFloater",data:n})};t.switchToQrCodeLogin.on("click",function(){var e=Q.$("[data-loginbox-elem=qrCodeLogin1]"),t=Q.$("[data-loginbox-elem=qrCodeLogin2]");e&&t&&e.hasClass("dn")&&(t.addClass("dn"),e.removeClass("dn")),r({returnEventName:a})}),h.on("qrCodeImgEffective",function(){t.qrCodeLogin1&&r({returnEventName:"showFormLoginFloater"})}),h.on("showFormLoginFloaterFromRegist",function(e){r(e.data)}),h.on(a,function(){(t.formLoginWrapper||t.table)&&(t.formLoginWrapper||t.table).show()})}},doEdit:function(e){e=this._doms.inputs[e],e&&(e=e[0],setTimeout(function(){e.focus(),e.select()},0))},doLogin:function(){var e=this.getLoginData();e._pos=this._opt._pos||1,this.validate(null,e)&&r.login({param:e,method:"POST"}),i.send("loginbtnclk")},getLoginData:function(){var e=this._doms,t=e.loginBtn.attr("href"),n={email:e.inputs.email&&e.inputs.email.value(),passwd:e.inputs.email&&e.inputs.passwd.value().trim(),agenttype:1,from:e.wrapper&&e.wrapper.attr("data-from"),keeplogin:e.autoLogin.hasClass("selected")?1:0,piccode:this.piccodeVisible?e.inputs.piccode.value().trim():"",fromurl:t||""};return n},initLastAccount:function(){var e=d.get()[0];e&&this._doms.inputs.email.value(e)},resetInput:function(e){var t=this._doms.inputs;e&&t.email.value(""),t.passwd.value(""),t.piccode.value("")},resetTips:function(){this.showErrorMsg()},_setPiccodeVisible:function(){var e=this._doms;e.piccodeTr.css("display",""),e.refreshPiccodeWrapper.css("display",""),this.piccodeVisible=!0;var t=e.wrapper.down("[data-loginbox-elem='table']");t&&t.addClass("box_v3AddCode")},addPiccode:function(){s=l.getVcode();var e=this._doms.piccode;e.html("<img src='"+s+"'/> ")},refreshPiccode:function(){s=l.getVcode();var e=this._doms.piccode,t=e.down("img");e&&t.attr("src",s)},initCode:function(){this.piccodeVisible?this.refreshPiccode():(this.addPiccode(),this._setPiccodeVisible())},hideCode:function(){var e=this._doms;e.piccodeTr.css("display","none"),e.refreshPiccodeWrapper.css("display","none"),this.piccodeVisible=!1;var t=e.wrapper.down("[data-loginbox-elem='table']");t&&t.removeClass("box_v3AddCode")},validate:function(e,t){return t=t||this.getLoginData(),e&&"email"!==e||o.empty(t.email)?e&&"passwd"!==e||o.empty(t.passwd)?e&&"piccode"!==e||!this.piccodeVisible||o.empty(t.piccode)?(this.showErrorMsg(),!0):(this.showErrorMsg("验证码错误"),e||this.doEdit("piccode"),!1):(this.showErrorMsg("密码错误"),e||this.doEdit("passwd"),!1):(this.showErrorMsg("手机/邮箱格式错误"),e||this.doEdit("email"),!1)},showErrorMsg:function(e){this._doms.errDom&&this._doms.errDom.html(e||this._opt.defaultTxt)}}})});
define("kit/pcLogin.js",["../interfaces/pcLogin2","../interfaces/logout","../interfaces/isLogin","../kit/userInfo","../kit/iframeRequest","../config/siteDomain","../config/loginMsg"],function(e,t,n){var a=e("../interfaces/pcLogin2"),i=e("../interfaces/logout"),r=e("../interfaces/isLogin"),o=e("../kit/userInfo"),l=e("../kit/iframeRequest"),s=e("../config/siteDomain"),m=Q.event.customEvent,d=e("../config/loginMsg"),h=new Q.ic.InfoCenter({moduleName:"pcLogin"});window.lib=window.lib||{},window.lib.__callbacks__=window.lib.__callbacks__||{};var c={login_success:lib.__callbacks__.login_success||function(){},login_error:lib.__callbacks__.login_error||function(){},logout_callback:lib.__callbacks__.logout_callback||function(){},login_iframe_closed:lib.__callbacks__.login_iframe_closed||function(){},logBox_close:lib.__callbacks__.logBox_close||function(){},logBox_reset:lib.__callbacks__.logBox_reset||function(){}};window.lib.__callbacks__.login_iframe_closed=function(){c.login_iframe_closed(),m.fire({type:"loginIframeClosed"})},window.lib.__callbacks__.login_success=function(e){c.login_success(e),m.fire({type:"login",data:e})},window.lib.__callbacks__.logout_callback=function(e){c.logout_callback(e),m.fire({type:"logout",data:e})},window.lib.__callbacks__.logBox_close=function(e){c.logBox_close(e),m.fire({type:"loginIframeClosed"})},window.lib.__callbacks__.logBox_reset=function(e){c.logBox_reset(e),m.fire({type:"loginIframeReset",data:{opt:e}})},window.lib.__callbacks__.logBox_close.isMainsite=!0,n.exports={login:function(e,t){e=e||{},t=t||"normal";var n=new a(t);n.request(e,function(t){if("A00000"==t.code){if(t.data=t.data||{},t.data._loginName=e.param.email,e.param.from&&(t.data.from=e.param.from),t.data.hasLogined){var n=new l;n.request(t.data.hasLogined,null)}window.lib.__callbacks__.login_success(t.data)}else if("A00055"==t.code){if(h.log(t.code+d[t.code]),t.data.redirect){var a="http://passport."+s.getDomain()+"/apis/secure/verify_account.action";t.data.redirect=a}if(t.data&&"0"==t.data.bindphone)window.location.href=t.data.redirect;else{var i=null;e.param.from&&(i=e.param.from),m.fire({type:"abnormal_verifyPhone",data:{code:t.code,redirect:t.data.redirect,bindphone:t.data.bindphone,_loginName:e.param.email,from:i}})}}else h.log(t.code+d[t.code]),c.login_error(t.data),e.param&&2==e.param._pos||e.param&&e.param.target&&e.param.target.indexOf("_pos=2")>0?m.fire({type:"scrollfloater_login-failed",data:{code:t.code,msg:t.msg,needCode:t.data.needcode}}):m.fire({type:"login-failed",data:{code:t.code,msg:t.msg,needCode:t.data.needcode}})})},logout:function(){m.fire({type:"beforeLogout",data:{}}),Q.browser.IE6?(this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(this._dologout,1e3)):this._dologout()},_dologout:function(){var e=this,t=function(){var e=new i;e.request("",function(e){"A00000"==e.code&&window.lib.__callbacks__.logout_callback(e)})},n=new r,a={authcookie:o.getAuthCookies(),fields:"all",agent_type:1};n.sendInfoAction(a,function(n){if("A00000"==n.code){if(n.data&&n.data.verify_info){var a=n.data.verify_info;a.level&&"2"==a.level&&a.is_verified&&a.is_verified===!0?(e.req=new l,e.req.getFrame()&&e.req.request("http://portal.lego.iqiyi.com/logout-json",{callback:function(){t()},remove:!0})):t()}}else t()})}}});
define("interfaces/pcLogin2.js",["../kit/remoteInterface","../kit/userInfo","../config/siteDomain","../kit/rsa","./config","../kit/fdlKit"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../kit/userInfo"),r=e("../config/siteDomain");r.getDomain();var o=e("../kit/rsa"),l=e("./config").interfaces,s=e("../kit/fdlKit");n.exports=Q.Class("RIPcLogin",{construct:function(e){this._remoteInterface="normal"==e?new a({url:l.login}):new a({url:l.authlogin})},methods:{request:function(e,t){var n=this;e=e||{},e.param&&(e.param.passwd=o.rsaFun(e.param.passwd)),e.auth=i.getAuthCookies(),Q.browser.iPad&&e.param&&(e.param.agenttype=10),e.dataType="jsonp",e.method="GET",this._remoteInterface._remoteInterfaces.url.indexOf("reglogin")>=0?(e.bird_src=e.param.lang&&"zh_TW"==e.param.lang?"f8d91d57af224da7893dd397d52d811a":"eb8d221bc0c04c5ab4ba735b6b1560a1",e.server="BEA3AA1908656AABCCFF76582C4C6660",e.url_src="/apis/reglogin/login.action?",s.getToken(e,function(a){"A00000"===a.code?(e.param=Q.extend(e.param,a.param),n._remoteInterface._remoteInterfaces.url=a.requestUrl,n._remoteInterface.send(e,t)):t&&t(a)})):this._remoteInterface.send(e,t)}}})});
define("view/pcRegistBoxView.js",["../components/view/view","../units/history20_pingback","../kit/pcLogin","../kit/validate","../kit/thirdPartLogin","../kit/thirdPartyBtn","../kit/pcVCodeKit","../kit/placeholder","../kit/pcUserRegistKit","../config/siteDomain","../view/pcBoxViewTpl"],function(e,t,n){var a=e("../components/view/view"),i=e("../units/history20_pingback");e("../kit/pcLogin");var r=e("../kit/validate");e("../kit/thirdPartLogin"),e("../kit/thirdPartyBtn");var o=e("../kit/pcVCodeKit"),s=e("../kit/placeholder").simulate,l=e("../kit/pcUserRegistKit");e("../config/siteDomain");var d=e("../view/pcBoxViewTpl"),m=Q.event.customEvent,c=0,h=!0,u="点击太频繁啦，客官您歇会儿……",p=!1,f=!1,U=function(e,t,n){e&&e.on&&e.on(t,n)};n.exports=Q.Class("PcRegistBoxView",{ns:Q.view,extend:a,construct:function(e,t){this._doms=e||{},this._opt=Q.object.extend({inputFocusClass:"acountIn",protocolSelectedClass:"selected",smsClass:"acount-getSms",smsWait:90,submitBtnDisabledClass:"submit-gray",defaultTxt:"",accountType:"mobile",alreadyRendered:!1,initStatus:"hide",switchToQrCodeLoginRseat:"140711_tdenter_navrgst",returnFromQrCodeLoginRseat:"140711_bknavrgst"},t),this.visible=!0,this.domReady=!1,this.defaultAccoutnType=this._opt.accountType,this.accountType=this._opt.accountType},methods:{init:function(){"hide"===this._opt.initStatus?this.hide():this._opt.alreadyRendered&&(this.initRegistPanel(),this.resetTips("all"))},show:function(){this._getPingBack("1411201_dhshw"),this.visible||(this.domReady||this.initRegistPanel(),this.resetInput(!1),this.resetTips("all"),m.fire({type:"beforePcRegistBoxShow",data:{wrapper:this._doms.wrapper}}),this._doms.wrapper.show(),this.visible=!0,this._doms.bg&&this._doms.main&&this._doms.bg.css("height",this._doms.main.height()-2+"px"),i.send("regdivshow"),m.fire({type:"pcRegistBoxShow",data:{wrapper:this._doms.wrapper}}))},hide:function(){this.visible&&(this.domReady&&(this.resetInput(!1),this.resetTips("all")),this.visible=!1,this._doms.wrapper&&"popup"==this._doms.wrapper.attr("data-from")&&this.showVertifyPanel(this._doms.wrapper),m.fire({type:"beforePcRegistBoxHide",data:{wrapper:this._doms.wrapper}}),this._doms.wrapper.hide(),m.fire({type:"pcRegistBoxHide",data:{wrapper:this._doms.wrapper}}))},toggle:function(){this.visible?this.hide():this.show()},initRegistPanel:function(){this._rendererPanel(),this._bindEvent(),this.domReady=!0},_rendererPanel:function(){var e=d.getRegistTpl(),t=this._doms,n=t.wrapper;if(n){this._opt.alreadyRendered||n.html(e),(n.down("[data-registbox-elem]")||[]).forEach(function(e){e=Q.$(e),t[e.attr("data-registbox-elem")]=e}),t.inputs={},t.wraps={};var a=1;["email","passwd","piccode","smscode"].forEach(function(e){t[e+"Input"].attr("tabindex",a),a++,t.inputs[e]=s(t[e+"Input"],{tipColor:"#333"}),t.wraps[e]=t[e+"Wrap"]}),this.domReady=!0,m.fire({type:"pcUserRegDomReady",data:{wrapper:t.registMailSuggest,html:e,input:this._doms.inputs.email}})}},_bindEvent:function(){var e=this,t=this._doms;e._inpsEvent(t),e._inpsFireEvent(t);var n=Q.$('[data-registbox-elem="pwdstrong"]'),a="passwordStrength_level1",o="passwordStrength_level2",s="passwordStrength_level3",d=function(e){e=r.getScore(e),n.removeClass("dn"),n.removeClass(a),n.removeClass(o),n.removeClass(s),e>=70?n.addClass(s):e>=40&&70>=e?n.addClass(o):40>=e&&(n.addClass(a),0===e&&n.addClass("dn"))};U(t.passwdInput,"blur",function(){var n=t.passwdInput.value().trim();""!==n&&e.validate("passwd",null)}),U(t.passwdInput,"keydown",function(e){var n=Q.event.get(e).keyCode;if(13!=n){var a=t.passwdInput.value().trim();d(a)}}),U(t.passwdInput,"keyup",function(e){var n=Q.event.get(e).keyCode;if(9!=n&&13!=n){var a=t.passwdInput.value().trim();d(a)}});var c=t.delemailinput;U(c,"click",function(e){Q.event.get(e).preventDefault(),t.emailInput.value("")});var f=t.protocol;U(f,"click",function(n){var a=Q.$(n.target||n.srcElement);"A"!=a.attr("tagName").toUpperCase()&&(f.hasClass(e._opt.protocolSelectedClass)?(f.removeClass(e._opt.protocolSelectedClass),t.registBtn.addClass(e._opt.submitBtnDisabledClass)):(f.addClass(e._opt.protocolSelectedClass),t.registBtn.removeClass(e._opt.submitBtnDisabledClass)))}),U(t.refreshPiccode,"click",function(t){Q.event.get(t).preventDefault(),e.refreshPiccode()}),U(t.piccode,"click",function(t){Q.event.get(t).preventDefault(),setTimeout(function(){e.refreshPiccode()},0)}),U(t.registBtn,"click",function(n){Q.event.get(n).preventDefault(),t.registBtn.hasClass(e._opt.submitBtnDisabledClass)||(p=!0,e.doReg(n))});var V=null;if(U(t.getSms,"click",function(n){return Q.event.get(n).preventDefault(),e.validate("email",null)?(h=!0,clearTimeout(V),V=setTimeout(function(){Q(t.getSms).is(":visible")&&h?e.showErrorMsg(u):clearTimeout(V)},3e3),l.sendCode({requestType:1,agenttype:1,cellphoneNumber:t.inputs.email.value().trim(),vcode:t.inputs.piccode.value().trim(),serviceId:2},function(n){if(h=!1,"A00000"===n.code){t.getSms.hide(),t.timer.css("display","");var a=e._opt.smsWait,i=setInterval(function(){t.timerNum.html(--a),0>=a&&(clearInterval(i),t.getSms.css("display",""),t.timer.hide())},1e3);t.timerNum.html(a)}else"E00000"===n.code?e.showErrorMsg(u):(e.refreshPiccode(),e.showErrorMsg(n.msg))}),void 0):(e.showErrorMsg("手机号格式错误"),void 0)}),t.wrapper.delegate("authLoginBtn",function(e){Q.event.get(e.event).preventDefault();var t=Q.$(e.target),n=t.attr("data-sourceId");"29"==n?i.send("weixinclk"):"2"==n?i.send("weiboclk"):"4"==n?i.send("qqclk"):i.send("extendclk")}),t.switchToQrCodeLogin){var g="hideQrCodeLoginFloater";t.switchToQrCodeLogin.attr("rseat",e._opt.switchToQrCodeLoginRseat),Q.browser.IE6&&(t.switchToQrCodeLogin[0].setAttribute("tabindex",-1),t.switchToQrCodeLogin[0].setAttribute("tabIndex",-1)),t.switchToQrCodeLogin.on("click",function(){var n={returnBtnRseat:e._opt.returnFromQrCodeLoginRseat},a="",i=0;t.formRegistWrapper?(t.formRegistWrapper.hide(),a="showQrCodeLoginFloater",n.returnEventName=g,m.fire({type:a,data:n})):(a="showFormLoginFloaterFromRegist",n.returnDelegate="registerscroll",i=100,setTimeout(function(){m.fire({type:a,data:n})},i))}),t.formRegistWrapper&&m.on(g,function(){t.formRegistWrapper.show()})}},_inpsEvent:function(e){var t=this;e.inputs.email.on("keydown",function(t){var n=Q.event.get(t).keyCode;13==n&&e.inputs.passwd[0].focus()}),Q.object.forEach(e.inputs,function(n,a){if(n){var i=e.wraps[a];n.on("focus",function(){(i||n).addClass(t._opt.inputFocusClass),m.fire({type:"registInputBegin",data:{input:n}}),"email"===a&&(f=!0)}),n.on("blur",function(e){var r=Q.event.get(e).target;Q.$(r).attr("tabindex"),(i||n).removeClass(t._opt.inputFocusClass),t._doms.wrapper.down("input:focus")||m.fire({type:"registInputEnd",data:{lastInput:n}}),"email"===a&&(f=!1)}),"email"!==a&&n.on("keydown",function(n){13==n.keyCode&&(Q.event.get(n).preventDefault(),t.doReg(n),e.inputs.piccode[0].focus(),"piccode"==a&&(1==c?e.inputs.email[0].focus():2==c?e.inputs.passwd[0].focus():3==c?e.inputs.piccode[0].focus():4==c&&e.inputs.smscode[0].focus()))}),"email"===a&&n.on("blur",function(){setTimeout(function(){t.validate("email",null)&&l.checkAccount({account:e.inputs.email&&e.inputs.email.value(),agenttype:1},function(e){"A00000"!=e.code?t.showErrorMsg(e.msg):t.showErrorMsg("")}),e.inputs.email.value()||p||f||t.showErrorMsg(" "),p=!1},300)})}})},_inpsFireEvent:function(e){var t=this;m.on("mailSuggestHide",function(t){t.data.input[0]===e.inputs.email[0]&&e.inputs.passwd[0].focus()}),m.on("rePcRegistBoxShow",function(){1!=t._opt.hackNoDisplay&&(t.hide(),t.show())}),m.on("showVertifyEmailPanel",function(e){t.showVertifyPanel(e.data.wrap)})},doEdit:function(e){e=this._doms.inputs[e],e&&(e=e[0],setTimeout(function(){e.focus(),e.select()},0))},doReg:function(){var e=this,t=e._doms;if(!this._doms.protocol.hasClass(this._opt.protocolSelectedClass))return this.showErrorMsg("协议未勾选"),void 0;var n=this.getRegisterData();n._pos=1,n.agenttype=1;var a=this.validate(null,n);a&&(n.piccode=t.inputs.smscode.value().trim(),l.regByMobile({authCode:n.piccode,agenttype:1,cellphoneNumber:n.email,password:n.passwd,_pos:1,serviceId:2}))},showVertifyPanel:function(e){if(e=e||this._doms.wrapper){var t=e.down('[data-registbox-elem="registpanel"]'),n=e.down('[data-registbox-elem="table"]'),a=e.down('[data-registbox-elem="vertifymail"]'),i=t||n,r=a;if(!Q.cookie.get("P00011"))return r&&r.hide(),i&&i.show(),0;try{return r.show(),i.hide(),m.fire({type:"showVertifyEmailInfo",data:{wrap:r}}),1}catch(o){r&&r.hide(),i&&i.show()}}},getRegisterData:function(){var e=this._doms,t=window.location.href,n="http://passport.iqiyi.com/pages/secure/reg.action",a="http://passport.iqiyi.com/pages/secure/index.action",i="http://passport.iqiyi.com/pages/register/index.action",r="http://www.iqiyi.com/u/";t.indexOf(n)>=0?t=a:t.indexOf(i)>=0&&(t=r);var o={email:e.inputs.email&&e.inputs.email.value(),passwd:e.inputs.passwd.value().trim(),piccode:e.inputs.piccode.value().trim(),smscode:e.inputs.smscode.value().trim(),source:"3",fromurl:encodeURIComponent(t)};return o},resetInput:function(e){var t=Q.$('[data-registbox-elem="pwdstrong"]'),n=this._doms.inputs;e&&n.email.value(""),n.passwd.value(""),n.piccode.value(""),t&&t.addClass("dn")},resetTips:function(){this.showErrorMsg()},initCode:function(){this.refreshPiccode()},refreshPiccode:function(){this._doms.piccode,this._doms.piccode.html("<img src='"+o.getVcode()+"'/> "),this._doms.inputs.piccode.value("")},validate:function(e,t){c=0;var n=t||this.getRegisterData();if(!(e&&"email"!==e||r.mobile(n.email)||/^09\d{8}$/.test(n.email)))return this.showErrorMsg("手机格式错误"),e||this.doEdit("email"),c=1,!1;if(!e||"passwd"===e){if(!r.specialPwd(n.passwd))return this.showErrorMsg("密码包含无效字符"),e||this.doEdit("passwd"),c=2,!1;if(!r.pwd(n.passwd))return this.showErrorMsg("8~20位字母、数字或字符，至少包含两种"),e||this.doEdit("passwd"),c=2,!1}return e&&"piccode"!==e||r.empty(n.piccode)?e&&"smscode"!==e||r.empty(n.smscode)?(this.showErrorMsg(),!0):(this.showErrorMsg("短信验证码错误"),e||this.doEdit("smscode"),c=4,!1):(this.showErrorMsg("图文验证码错误"),e||this.doEdit("piccode"),c=3,!1)},showErrorMsg:function(e){this._doms.errDom.show(),this._doms.pwdstrongwrap&&this._doms.pwdstrongwrap.hide(),this._doms.errDom.html(e||this._opt.defaultTxt)},_getPingBack:function(e){var t={t:21,rn:Math.random(),p:10,pf:1,p1:101,bstp:0,jsuid:Q.cookie.get("QC006")||"",ve:Q.getVideoEventID()||"",u:Q.cookie.get("QC005")||"",block:e};Q.log.server(t,"http://msg.71.am/b")}}})});
define("units/mobileActivityTip.js",["../components/units/pageJob","../config/siteDomain","../kit/userInfo"],function(e){var t=e("../components/units/pageJob"),n=e("../config/siteDomain"),a="mobileActivityTip",i=e("../kit/userInfo");t.create(a,{getDependentDoms:function(){return!0},check:function(){return!0},init:function(){var e='恭喜您注册成功！请查看 消息-系统消息 免费领取会员！<a data-mobileactivity-item="close" href="#" class="closeIco">×</a>',t=!1,a="",r="",o=function(){if(!t){var n=document.createElement("div");n.className="nav-mobile-tips",n.style.display="none",n.setAttribute("data-mobileactivity-item","successtip"),n.innerHTML=e;var i=Q.$(".topNavRt")||Q.$(".topNavRt_new");if(i){var o=i[0];o&&(o.appendChild(n),a=Q.$(n),r=a.down('[data-mobileactivity-item="close"]'),t=!0,r.on("click",function(e){Q.event.get(e).preventDefault(),a.hide()}))}}},s=function(){o(),a.show(),setTimeout(function(){Q.anim(a).duration(500).ease("Linear").from("top",31).to("top",-30).onDone(function(){}).go()},5e3)},l=Q.cookie.get("P_AWARD_VIP");1==l&&(i.isLogin()&&s(),Q.cookie.remove("P_AWARD_VIP",{path:"/",domain:n.SITE_DOMAIN})),Q.event.customEvent.on("awardviptip",function(){s()}),Q.event.customEvent.on("registed",function(e){1==e.data.award_vip&&s()})}}),t.add(a)});
define("units/dotNewIcon.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../config/siteDomain","../kit/anim"],function(e,t,n){var a=e("../components/units/pageJob");e("../components/action/checkDoms"),e("../kit/userInfo");var i=e("../config/siteDomain");e("../kit/anim");var r="dotNewIcon";a.create(r,{check:function(){return!0},init:function(){var e=this;e.getIconDoms()},getIconDoms:function(){var e=Q.$('*[data-widget="navdot"]');if(e&&e.length){var t=Q.cookie.get("QC911");t=t||"",e.forEach(function(e){var n=Q.$(e),a=n.attr("data-dot-cid");if(a&&-1===t.indexOf(","+a+",")){var r=n.down("[data-newicon="+a+"]")||n.down("[data-newicon]");r&&(r.css("display",""),function(e,t){e.on("click",function(){var e=Q.cookie.get("QC911")||"";if(-1===e.indexOf(","+t+",")){e+=","+t+",";var n=i.getDomain()||i.SITE_DOMAIN;Q.cookie.set("QC911",e,{path:"/",domain:n,expires:31536e6})}r.hide()})}(n,a))}})}}}),a.add(r),n.exports=r});
define("units/uc/rtSubUpUr.js",["../../components/units/pageJob","../../kit/parentByProp","../../interfaces/ucSubInterface"],function(e){var t=e("../../components/units/pageJob"),n=e("../../kit/parentByProp"),a=e("../../interfaces/ucSubInterface"),i="rtSubUpUr";t.create(i,{check:function(){return!0},init:function(){function e(e){Q.$("[data-sub-elem=num]").forEach(function(t){t=Q.$(t),i.forEach(function(a){var i=n(t,a)||t,r=i.attr(a);r==e&&(t.html("0"),t.removeAttr("data-sub-elem"),(n(t,"data-sub-elem","numwrap")||t).hide())})})}function t(t){(t||[]).forEach(function(t){t=Q.$(t),i.forEach(function(i){var r=n(t,i)||t,o=r.attr(i);o&&r.un("click").on("click",function(){a.rtUpUr({subType:1,subKeys:o},function(t){"A00000"==t.code&&e(o)})})})})}var i=["uid","data-id"],r=Q.event.customEvent;t(Q.$("[data-sub-elem=num]")),r.on("untitleSubscribe",function(){t(Q.$("[data-sub-elem=num]"))}).pcUserBoxDomReady.forEach(function(e){r.on(e,function(e){t(e.data.wrapper.down("[data-sub-elem=num]"))})}),r.on("subUpUrUpdate",function(t){e(t.data.uid)})}}),t.add(i)});
define("interfaces/ucSubInterface.js",["../kit/remoteInterface","./config"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("./config"),r=Q.Class("UcSubInterface",{construct:function(){this._remoteInterface=new a({unSub:{url:i.interfaces.ucUnSub},rtUpUr:{url:i.interfaces.ucRtUpUr},followCountUr:{url:i.interfaces.followCountUr}})},methods:{request:function(e,t){var n={ifname:e.ifname,method:e.method||"GET",param:e};e.jsonp?n.dataType="jsonp":n.encodeFn=function(e){return encodeURIComponent(e)},delete e.ifname,delete e.method,delete e.jsonp,this._remoteInterface.send(n,t)},unSub:function(e,t){Q.object.extend(e,{agentType:Q.browser.iPad?10:1,source:Q.browser.iPad?8:4}),this.request(Q.object.extend({ifname:"unSub",jsonp:!0},e),t)},rtUpUr:function(e,t){this.request(Q.object.extend({ifname:"rtUpUr",jsonp:!0},e),t)},getFollowCount:function(e,t){this.request(Q.object.extend({ifname:"followCountUr",jsonp:!0},e),t)}}});n.exports=new r});
define("units/bindMobile_vip.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../kit/vipAutoPay","../action/qipaLogin","../interfaces/bindMobile_vipInterface"],function(e,t,n){var a=e("../components/units/pageJob"),i=e("../components/action/checkDoms"),r=e("../kit/userInfo"),o=e("../kit/vipAutoPay");e("../action/qipaLogin");var s,l,d=e("../interfaces/bindMobile_vipInterface"),m="bindMobile_vip",c=23,h="会员通知-帐号安全",u="尊敬的会员用户，由于您尚未绑定手机号，帐号非常危险！为了保证您的会员权益，请尽快绑定手机号，我们会为您保障手机号的隐私及安全。",p="检测到您的密码非常不安全，被盗号的风险极高，为保护您的会员权益，请您立即",f="您的VIP会员还有<em data-widget-autoPay='dayNum'></em>天到期，开通自动续费，享 15元/月超值优惠。",U="http://passport.iqiyi.com/pages/secure/password/modify_pwd.action",V="QC136",g="QC135",y="QC138",b="QC137",v="QC148",k="QC152",x={bindPhoneMsg:"QC136",hitMsg:"QC138",autoPayMsg:"QC148",couponMsg:"QC152"},w='<div class="pcw-remindTicket-pop"><div class="closeBtn"><a href="javascript:;" class="icon-closeBtn" data-vip-bind="close" rseat="1503193_cls"></a></div><div class="explain-list" data-tips-ele="list"><dl class="vip-expire-tip" data-msg-type = "1"><dd class="icon-origin"></dd><dt><span data-vip-bind="tip"></span><a tipType="1" href="http://passport.iqiyi.com/pages/secure/account/bind_phone.action" target="_blank"rseat="1503192_bnd" data-vip-bind="updatePass">马上绑定&gt;</a></dt></dl></div><span class="top-arrow"><em class="top-arrow-outer"></em><i class=" top-arrow-inner"></i></span></div>';a.create(m,{getDependentDoms:function(){var e=Q.$("[data-vip-bind=mobile]");s={widget:e}},check:function(){return i(s),!0},init:function(){var e=this;l=new d,e.getUserType(),Q.event.customEvent.on("logout",function(){s.widget.html(" "),(Q.browser.IE6||Q.browser.IE7)&&s.widget.addClass("dn")}),Q.event.customEvent.on("login",function(){e.getUserType()})},getUserType:function(){var e=this;r.isLogin()&&window.setTimeout(function(){e.isVip()},1e3)},isVip:function(){var e=this;r.checkVipInfo(function(){var t=parseInt(r.getVipType(),10);3==t||1==t||4==t?e.showMessageBox():e.showCoupon()})},showMessageBox:function(){var e=this;r.isHitUser(function(t){"1"!=t||Q.cookie.get(y)?e.getVipBindPhone():(s.widget.html(w),(Q.browser.IE6||Q.browser.IE7)&&s.widget.removeClass("dn"),s.widget.down("[data-vip-bind=updatePass]").html("修改密码&gt;"),s.widget.down("[data-vip-bind=updatePass]").attr("href",U),s.widget.down("[data-msg-type = 1]").attr("data-msg-name","hitMsg"),e.setDocument(p),e.checkCookie(y,b),e.setEventOnTipClick(),e.showPingBack("508111_1"),e.showCoupon())})},getVipBindPhone:function(){var e=this;r.getPhone(function(t){" "!=t||Q.cookie.get(V)?e.getVipDeadLineAndAutoPay():(s.widget.html(w),(Q.browser.IE6||Q.browser.IE7)&&s.widget.removeClass("dn"),s.widget.down("[data-msg-type = 1]").attr("data-msg-name","bindPhoneMsg"),e.setDocument(u),e.checkCookie(V,g),e.setEventOnTipClick(),e.showPingBack("1503191_msg"),e.showCoupon())})},getVipDeadLineAndAutoPay:function(){var e=this,t=parseInt(r.getVipType(),10);1==t&&r.getDeadlineDay(function(t){var n=t;parseInt(t,10)<8&&!Q.cookie.get(v)?r.isAutoRenew(function(t){"0"==t&&o.getAutoPayInfo(function(t){e.showAutoPay(n,t)})}):e.showCoupon()})},showCoupon:function(){var e=this,t={platform:"0",P00001:Q.cookie.get("P00001")},n=Q.cookie.get(k);return"1"!=n?n?(e.innerCouponHtml(JSON.parse(n)),void 0):(l.getCoupon(t,function(t){if("A00000"==t.code&&"A00000"==t.data.code){var n=t.data.data;e.innerCouponHtml(n),e.setState(k,JSON.stringify(n))}}),void 0):void 0},innerCouponHtml:function(e){var t=this,n=/\d+/g,a=e.content,i=a.match(n)[0],r=a.indexOf(i),o=a.substring(0,r),l=a.slice(r+i.length),d="<dl data-msg-type = '2' data-msg-name='couponMsg'><dd class='icon-origin'></dd><dt>"+o+"<strong>"+i+"</strong>"+l+"。<a tipType='2' href='"+e.url+"' target='_blank' rseat='608083_clk_"+e.messageId+"' >"+e.buttonText+"&gt;</a></dt></dl>";s.widget.html()?(Q("[data-tips-ele=list]").append(d),t.setEventOnTipClick()):(s.widget.html(w),s.widget.down("[data-tips-ele=list]").html(d),t.checkCookie(k,null),t.setEventOnTipClick()),s.widget.down("[data-vip-bind=close]").attr("rseat","608083_clk_"+e.messageId),t.showPingBack("608083_shw_"+e.messageId),t.setEventOnTipClick()},showAutoPay:function(e,t){var n=this;s.widget.html(w);var a=Q("[data-vip-bind=updatePass]");a.html("立即开通&gt;"),a.attr("rseat","601205_1"),a.attr("data-widget-rseat","601205_4"),a.attr("data-widget-ele","openAutoPay"),a.attr("target","_blank"),s.widget.down("[data-msg-type = 1]").attr("data-msg-name","autoPayMsg"),n.setDocument(f),s.widget.down("[data-widget-autoPay=dayNum]").html(e),n.checkCookie(v,null),n.setEventOnTipClick(),t.bindUrl?(a.attr("href",t.bindUrl),a.attr("data-autoPay-open","true")):t.bindType&&a.attr("data-autoPay-type",t.bindType),n.showCoupon()},setDocument:function(e){var t=s.widget.down("[data-vip-bind=tip]");t&&t.html(e)},checkCookie:function(e,t){var n=this,a=s.widget.down("[data-vip-bind=close]");a&&(Q(a).off("click"),a.on("click",function(){var e=s.widget.down("[data-tips-ele=list]"),t=Q(e).find("dl");Q(t).each(function(e,t){var a=Q(t).attr("data-msg-name"),i=Q(x).attr(a);n.setState(i,"1",864e5)}),s.widget.html(" "),(Q.browser.IE6||Q.browser.IE7)&&s.widget.addClass("dn")})),t&&!Q.cookie.get(t)&&(n.setMessageInfo(),n.setState(t,"1",864e5))},setState:function(e,t,n){Q.cookie.set(e,t,{expires:n,path:"/",domain:"iqiyi.com"})},setMessageInfo:function(){var e={authcookie:r.getAuthCookies(),source:c,title:h,content:u,expire_time:"",agent_type:1};l.set(e,function(){})},showPingBack:function(e){var t={authcookie:r.getAuthCookies(),agent_type:1},n={t:"21",pf:1,p:10,p1:101,p2:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),Bstp:"56",pu:Q.cookie.get("P00003"),block:e};Q.object.extend(n,t),Q.log.server(n,"http://msg.71.am/b")},setEventOnTipClick:function(){var e=this,t=Q.$("[data-tips-ele=list]"),n=Q(t).find("a");n.off("click"),n.on("click",function(n){Q.event.get(n).preventDefault();var a,i,r,o=this,l=Q(o).attr("tipType");2===Q(t).find("dl").length?"1"===l?(a=Q(t).find("dl:first-child"),i=a.attr("data-msg-name"),r=Q(x).attr(i),e.setState(r,"1",864e5),a.remove()):(a=Q(t).find("dl:eq(1)"),i=a.attr("data-msg-name"),r=Q(x).attr(i),e.setState(r,"1",864e5),a.remove()):(a=Q(t).find("dl:first-child"),i=a.attr("data-msg-name"),r=Q(x).attr(i),e.setState(r,"1",864e5),s.widget.html(" "),Q.$("[data-vip-bind=mobile]").html(""),(Q.browser.IE6||Q.browser.IE7)&&s.widget.addClass("dn")),window.open(o.href)})}}),n.exports=m,a.add(m)});
define("interfaces/bindMobile_vipInterface.js",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface");n.exports=Q.Class("bindMobile_vipInterface",{construct:function(){this._remoteInterface=new a({setMobileMessage:{url:"http://notice.iqiyi.com/apis/msg/bind_phone_msg.action"},getCoupon:{url:"http://act.vip.iqiyi.com/marketing/coupon/getMessage.action"}})},methods:{set:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"setMobileMessage",param:e,cors:!0,method:"GET",withCredentials:!0},function(n){t&&t(n,e)})},getCoupon:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"getCoupon",param:e,method:"GET"},function(n){t&&t(n,e)})}}})});
define("units/safe/abnormalLogin.js",["../../components/action/checkDoms","../../components/units/pageJob","../../units/safe/abnormalLoginTpl","../../kit/juicer","../../kit/userInfo","../../interfaces/safeV2/appeal"],function(e){var t=e("../../components/action/checkDoms"),n=e("../../components/units/pageJob"),a=e("../../units/safe/abnormalLoginTpl"),i=e("../../kit/juicer"),r=e("../../kit/userInfo");new(e("../../interfaces/safeV2/appeal"));var o={},s="abnormalLogin";return window.location.href.indexOf("passport.iqiyi.com")>=0?!1:(n.create(s,{getDependentDoms:function(){o.check=Q(document)},check:function(){return t(o),!0},init:function(){var e=this;e.initPop(),e.bindEvent(),e.customEvent()},customEvent:function(){var e=this;Q.event.customEvent.on("abnormalLogin",function(){e.setCookie("c1",1),e.setCookie("c24",24),e.initPop()}),Q.event.customEvent.on("abnormalLogout",function(){e.removeCookie("c1"),e.removeCookie("c24"),Q(".J_pop-window").length>0&&Q(".J_pop-window").remove()})},bindEvent:function(){var e=this;Q(document).on("click",".J_pop-close",function(){var t=Q(this).parents(".J_pop-window");t.addClass("dn"),e.setCookie("c24",24),e.removeCookie("c1")})},initPop:function(){if(Q("#J_vip-ad-pop").length>0)return!1;var e=this;return r.isLogin()!==!0?!1:(r.isVip(function(t){if(t===!0){var n=Q.cookie.get("c24"+Q.cookie.get("P00003")),a=Q.cookie.get("c1"+Q.cookie.get("P00003"));if(n&&!a)return!1;a||n||(e.setCookie("c1",1),e.setCookie("c24",24)),a=Q.cookie.get("c1"+Q.cookie.get("P00003")),a&&e.renderPop()}}),void 0)},renderPop:function(){var e=this;r.isAblogin(function(t){if(0!==t){Q(".J_pop-window").length>0&&Q(".J_pop-window").remove();var n="";2===t?(n=i(a.tpl01,t),e.setPingBack("506092_0")):1===t&&(n=i(a.tpl02,t),e.setPingBack("506091_0")),Q("body").append(n)}})},setCookie:function(e,t){var n=e+""+Q.cookie.get("P00003");Q.cookie.set(n,(new Date).getTime(),{path:"/",expires:1e3*60*60*t,domain:"iqiyi.com"})},removeCookie:function(e){Q.cookie.remove(e+""+Q.cookie.get("P00003"),{path:"/",domain:"iqiyi.com"})},setPingBack:function(e){var t={t:21,rn:Math.random(),p:10,pf:1,p1:101,bstp:0,jsuid:Q.cookie.get("QC006")||"",ve:Q.getVideoEventID()||"",ce:"",u:Q.cookie.get("QC005")||"",block:e};Q.log.server(t,"http://msg.71.am/b")}}),n.add(s),void 0)});
define("units/safe/abnormalLoginTpl.js",[],function(e,t,n){var a={tpl01:['<div class="vip_rec_pop_wrapper J_pop-window" style="right:0px; bottom:0px; position:fixed; z-index:1000;">','<div class="vip_rec_pop">','<div class="vip_rec_b"></div>','<div class="vip_rec_main">','<div class="vip_rec_hd mb10">',"<h2>您的帐号登录异常</h2>","</div>",'<div class="vip_rec_main_inner_closeBtn" href="javascript:void(0);"><a href="javascript:void(0);" rseat="506092_1" class="vip_rec_close J_pop-close"></a></div>','<div class="vip_rec_bd">','<div class="f14 mt15">帐号登录地点异常，且在其他设备更改过信息。若非本人操作，请尽快修改密码。</div>','<div class="vip_pop_btn2 mt15 clearfix">','<a href="http://passport.iqiyi.com/pages/secure/password/modify_pwd.action" rseat="506092_2" target="_blank">立即修改密码</a></div>',"</div>","</div>","</div>","</div>"].join(""),tpl02:['<div class="vip_rec_pop_wrapper J_pop-window" style="right:0px; bottom:0px; position:fixed; z-index:1000;">','<div class="vip_rec_pop" >','<div class="vip_rec_b"></div>','<div class="vip_rec_main">','<div class="vip_rec_hd mb10">',"<h2>您的帐号登录异常</h2>","</div>",'<div class="vip_rec_main_inner_closeBtn" href="javascript:void(0);"><a href="javascript:void(0);" rseat="506091_1" class="vip_rec_close J_pop-close"></a></div>','<div class="vip_rec_bd">','<div class="f14 mt15">帐号登录地点异常，建议尽快修改密码或设置常用登录地点。','<a href="http://passport.iqiyi.com/pages/secure/login_history.action" rseat="506091_4" target="_blank">查看详情&gt;</a></div>','<div class="vip_pop_btn1 mt15 clearfix">','<a href="http://passport.iqiyi.com/pages/secure/logincheck/modify_addresses.action" rseat="506091_3" target="_blank">设置常用登录地点</a>','<a href="http://passport.iqiyi.com/pages/secure/password/modify_pwd.action" rseat="506091_2" target="_blank" class="ml30">修改密码</a></div>',"</div>","</div>","</div>","</div>"].join("")};n.exports=a});
define("interfaces/safeV2/appeal.js",["../../kit/remoteInterface","../../config/siteDomain","../../kit/rsa"],function(e,t,n){var a=e("../../kit/remoteInterface"),i=e("../../config/siteDomain");i.getDomain();var r=e("../../kit/rsa");n.exports=Q.Class("appeal",{construct:function(){this._remoteInterface=new a({submitAppeal:{url:"http://passport.iqiyi.com/pages/secure/appeal/submit_appeal.action"},submitDetailAppeal:{url:"http://passport.iqiyi.com/pages/secure/appeal/submit_appeal_detail.action"},modifyEm:{url:"http://passport.iqiyi.com/pages/secure/account/modify_em.action"},sendActivationEmail:{url:"http://passport.iqiyi.com/pages/secure/account/send_activation_email.action"},saveQa:{url:"http://passport.iqiyi.com/pages/secure/account/save_qa.action"},checkQa:{url:"http://passport.iqiyi.com/pages/secure/password//check_qa.action"},changeQa:{url:"http://passport.iqiyi.com/pages/secure/account/save_change_qa.action"},historyList:{url:"http://passport.iqiyi.com/pages/secure/login_history_list.action"},getQuestions:{url:"http://passport.iqiyi.com/pages/secure/account/getQuestions.action"},bindEmail:{url:"http://passport.iqiyi.com/apis/secure/bind_account.action"},getProvinces:{url:"https://passport.iqiyi.com/apis/user/get_province_list.action"},getCity:{url:"https://passport.iqiyi.com/apis/user/get_city_list.action"},setAddress:{url:"https://passport.iqiyi.com/pages/secure/logincheck/set_addresses.action"}})},methods:{submitAppeal:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"submitAppeal",param:e},function(e){t&&t(e)})},submitDetailAppeal:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"submitDetailAppeal",param:e},function(e){t&&t(e)})},modifyEm:function(e,t){e=e||{},this._remoteInterface.send({method:"get",dataType:"jsonp",ifname:"modifyEm",param:e},function(e){t&&t(e)})},sendActivationEmail:function(e,t){e=e||{},this._remoteInterface.send({method:"get",dataType:"jsonp",ifname:"sendActivationEmail",param:e},function(e){t&&t(e)})},saveQa:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"saveQa",param:e},function(e){t&&t(e)})},checkQa:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"checkQa",param:e},function(e){t&&t(e)})},changeQa:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"changeQa",param:e},function(e){t&&t(e)})},historyList:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"historyList",param:e},function(e){t&&t(e)})},getQuestions:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"getQuestions",param:e},function(e){t&&t(e)})},bindEmail:function(e,t){e=e||{},e.passwd&&(e.passwd=r.rsaFun(e.passwd)),this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"bindEmail",param:e},function(e){t&&t(e)})},getProvinces:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"getProvinces",param:e},function(e){t&&t(e)})},getCity:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"getCity",param:e},function(e){t&&t(e)})},setAddress:function(e,t){e=e||{},this._remoteInterface.send({method:"post",dataType:"jsonp",ifname:"setAddress",param:e},function(e){t&&t(e)})}}})});
define("units/abnormalVerifyPhone.js",["../components/units/pageJob","../components/action/checkDoms","../kit/placeholder","../kit/validate","../kit/userInfo","../interfaces/mobileRegistInterface","../kit/iframeRequest","../config/siteDomain"],function(e){var t=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../kit/placeholder"),a=e("../kit/validate"),i=e("../kit/userInfo"),r=e("../interfaces/mobileRegistInterface"),o=e("../kit/iframeRequest"),s=e("../config/siteDomain"),l=s.getDomain(),d="abnormalVerifyPhone",m={},c={mobile1:"手机号不能为空",mobile2:"手机号格式错误",mobile3:"手机号重复",imgcode:"图文验证码不能为空",imgcode1:"图文验证码错误",smscode:"短信验证码不能为空",tip:"您正在异地登录，请完成手机验证"},h=new r;t.create(d,{getDependentDoms:function(){return!0},check:function(){return!0},init:function(){var e=this;Q.event.customEvent.on("abnormal_verifyPhone",function(t){Q("[data-loginbox-elem=loginTable]")[0]?(e.showfloater(e.getVerifyList()),e.showPingBack("512251_1"),e._setDOM(t.data),m.warnErr.html(c.tip)):t.data&&t.data.redirect&&(window.location.href=t.data.redirect)})},showfloater:function(e){var t=this;Q("[data-loginbox-elem=loginTable]").html(e),t.bindEvent()},bindEvent:function(){var e=this;Q(document).delegate("[data-loginbind-elem]","focus",function(e){e.preventDefault();var t=e.currentTarget,n=Q(t).attr("data-loginbind-elem"),a="[data-loginbind-wrap="+n+"]";Q(a).addClass("acountIn")}),Q(document).delegate("[data-loginbind-elem]","blur",function(t){t.preventDefault();var n=t.currentTarget,a=Q(n).attr("data-loginbind-elem"),i="[data-loginbind-wrap="+a+"]";Q(i).removeClass("acountIn"),"mobile"==Q(n).attr("data-loginbind-elem")&&e.validatePhone(Q(n).val())}),Q(document).delegate("[data-loginbind-smscode=btn]","click",function(t){t.preventDefault();var n=m.mobileInp.val();if(e.validatePhone(n)){var a=m.imgInp;e.validateInput(a,"imgcode")&&e.sendPhoneCode(n)}}),Q(document).delegate("[data-loginbind-refresh]","click",function(t){t.preventDefault(),e.refreshPiccode()}),Q(document).delegate("[data-loginbind-submit=btn]","click",function(t){t.preventDefault();var n=!1;Q("[data-loginbind-elem]").each(function(t,a){return n=e.validateInput(a,null),n?void 0:!1}),n&&e.abVerifyPhone()}),e.placeSimulate()},validateInput:function(e,t){var n=this,i=t||Q(e).attr("data-loginbind-elem"),r=m.warnErr,o=Q(e).val(),s=!0;return"mobile"==i&&(s=n.validatePhone(o,r)),("imgcode"==i||"smscode"==i)&&(a.empty(o)?r.html(""):(r.html(c[i]),s=!1)),s},validatePhone:function(e,t){var n=t||m.warnErr;return a.mobile(e)?(n.html(""),!0):(a.empty(e)?n.html(c.mobile2):n.html(c.mobile1),!1)},sendPhoneCode:function(e){var t=this,n=m.warnErr,a={requestType:15,cellphoneNumber:e,authcookie:i.getAuthCookies(),serviceId:2,agenttype:1,vcode:m.imgInp.val().trim()};h.sendCodeNew(a,function(e){"A00000"==e.code?t.ecountDown():"P00107"==e.code?(n.html(c.imgcode1),t.refreshPiccode()):(n.html(e.msg),t.refreshPiccode())})},ecountDown:function(){var e=89,t=null;clearInterval(t),m.smsBtn.addClass("dn"),m.smsTimer.removeClass("dn");var n=m.smsTimer.find("em");t=setInterval(function(){0===e?(m.smsBtn.removeClass("dn"),m.smsTimer.addClass("dn"),n.html("89"),clearInterval(t)):(e--,n.html(e))},1e3)},getParamData:function(){var e={cellphoneNumber:m.mobileInp.val(),authCode:m.smsInp.val(),agenttype:1,serviceId:2};return e},abVerifyPhone:function(){var e=this,t=m.warnErr,n=e.getParamData();h.tokenlogin(n,function(e){if("A00000"===e.code){if(e.data.hasLogined){var n=new o;n.request(e.data.hasLogined,null)}m.from&&(e.data.from=m.from),e.data._loginName=m._loginName,window.lib.__callbacks__.login_success(e.data)}else t.html(e.msg),Q.event.customEvent.fire({type:"login-failed",data:{code:e.code,msg:e.msg,needCode:e.data.needcode}})})},refreshPiccode:function(){var e="http://passport."+l+"/register/vcode.php?r="+Math.random();m.imgCode.attr("src",e),m.imgInp.val("")},placeSimulate:function(){Q("[data-loginbind-elem]").each(function(e,t){n.simulate(t)})},showPingBack:function(e){var t={t:"21",bstp:0,pf:1,p:10,p1:101,p2:"1_10_101",u:Q.cookie.get("QC005"),jsuid:Q.cookie.get("QC006"),pu:Q.cookie.get("P00003"),block:e};Q.log.server(t,"http://msg.71.am/b")},_setDOM:function(e){m={mobileInp:Q("[data-loginbind-elem=mobile]"),imgInp:Q("[data-loginbind-elem=imgcode]"),smsInp:Q("[data-loginbind-elem=smscode]"),imgCode:Q("[data-loginbind-refresh=img]"),smsBtn:Q("[data-loginbind-smscode=btn]"),smsTimer:Q("[data-loginbind-smscode=timer]"),warnErr:Q("[data-loginbox-elem=errDom]"),_loginName:e._loginName,from:e.from}},getVerifyList:function(){var e='<tbody><tr><th>手&nbsp;&nbsp;&nbsp;机：</th><td><div class="acountBorder" data-loginbind-wrap="mobile"><input type="text" placeholder="请输入手机号码" class="in-txt txt230" data-loginbind-elem="mobile" tabindex="1"></div></td></tr><tr><th>验证码：</th><td><div class="acountCode acountBorder acountYzm" data-loginbind-wrap="imgcode"><input placeholder="请输入右侧字母" class="in-txt" data-loginbind-elem="imgcode" tabindex="3" type="text"><span class="in-xline"></span><span class="yzimg"><img src="http://passport.'+l+'/register/vcode.php?r=0.8545576247216254" data-loginbind-refresh="img"> </span>'+"</div>"+'<a class="refreshContent" href="javaScript:;" data-loginbind-refresh="icon">'+'<i class="loginIcon refreshIcon"></i>'+"</a>"+"</td>"+"</tr>"+"<tr>"+"<th></th>"+'<td><div class="acountCode acountBorder fl" data-loginbind-wrap="smscode">'+'<input type="text" placeholder="请输入验证码" data-loginbind-elem="smscode" class="in-txt" tabindex="3">'+'<span class="free-yzm-get">'+'<a href="javaScript:;" data-loginbind-smscode="btn">免费获取短信</a>'+'<a class="reget dn" href="javaScript:;" data-loginbind-smscode="timer"><em>89</em>s后重新获取</a>'+"</span>"+"</div>"+"</td>"+"</tr>"+"<tr>"+"<th></th>"+'<td><div class="login_submitV3">'+'<a data-loginbind-elem="loginBtn" class="submitV3Btn" href="javascript:;" data-loginbind-submit="btn">验&nbsp;&nbsp;证</a></div></td>'+"</tr>"+"</tbody>";return e}}),t.add(d)});
define("units/checkWebSel.js",["../components/units/pageJob","../components/action/checkDoms","../kit/checkI18nType","../kit/checkI18nVipUser","../kit/userInfo","../components/action/floater","../kit/artTemplate","../kit/qiyiPlayer"],function(e){var t=e("../components/units/pageJob");e("../components/action/checkDoms");var n,a,i,r,o="checkWebSel",s={path:"/",domain:"iqiyi.com",expires:31536e6},l=e("../kit/checkI18nType"),d=e("../kit/checkI18nVipUser").getVipUserTag,m=e("../kit/userInfo"),c=e("../components/action/floater"),h=e("../kit/artTemplate"),u=Q.$("#i18nWebSelTip"),p=e("../kit/qiyiPlayer").getPlayer("video"),f={tw:{dearUser:"尊敬的用戶：",ifChangeMsg:"您當前為台灣VIP用戶，切換至大陸模式將不享受會員特權，您可在中國（大陸）模式下購買開通中國大陸VIP會員。是否確認切換？",changeMode:"切換至中國（大陸）模式",cancelChange:"取消切換"},cn:{dearUser:"尊敬的用户：",ifChangeMsg:"您当前为中国（大陆）VIP用户，切换至台湾模式将不享受会员权益，您可以在台湾模式下购买开通台湾VIP会员。是否确认切换？",changeMode:"切换到台湾模式",cancelChange:"取消切换"}},U='<div class="areaChangeBox"><div class="vcp_title"><a href="javascript:void(0)" j-delegate="closeBtn" data-vipuser-ele="closeBtn" style="cursor:pointer;" class="close">×</a><h1></h1></div><div class="vcp_body"><h3 class="vcp_txt-title">{{dearUser}}</h3><p class="vcp_txt">{{ifChangeMsg}}</p><div class="vcp_btn clearfix"><a style="cursor:pointer;" class="site_btn" href="javascript:void(0)" j-delegate="sureChange">{{changeMode}}</a><em class="vcp_desc"><a href="javascript:void(0)" j-delegate="closeBtn">{{cancelChange}}</a></em></div></div></div>';t.create(o,{getDependentDoms:function(){n=Q.$("#footer-websel-menu"),a=Q.$("#i18n-selweb-wrap"),i=Q.$("#i18n-selweb-text"),r=Q.$("#i18n-selweb-footer")},check:function(){return n&&a&&i&&r?!0:!1},init:function(){var e,t,o,c=this;if(l.type){if(!Q.cookie.get("i18n"))return n.addClass("dn"),void 0;n.removeClass("dn")}else n.removeClass("dn");Q.$(document).on("click",function(){r.removeClass("region-opt-hover")}),n.delegate("i18n-change-btn",function(e){e=Q.event.get(e.event),e.preventDefault(),e.stopPropagation(),r.hasClass("region-opt-hover")?r.removeClass("region-opt-hover"):r.addClass("region-opt-hover")}),u&&(u.delegate("closeBtn",function(e){e=Q.event.get(e.event),e.preventDefault(),c.floatTip.destroy(),c.floatTip=null,p&&("1"===p.smallWindowMode?Q.event.customEvent.fire({type:"twSelWebDragPlay",data:{showTag:!0}}):Q.event.customEvent.fire({type:"twSelWebTipShow",data:{showTag:!1}}))}),u.delegate("sureChange",function(e){e=Q.event.get(e.event),e.preventDefault(),c.floatTip.destroy(),c.floatTip=null,o()})),o=function(){var n=e.html();e.parent().addClass("selected"),i.html(n),r.removeClass("region-opt-hover"),"cn"===t?(Q.cookie.set("i18n","cn_s",s),window.location.href="http://www.iqiyi.com"):"tw"===t&&(Q.cookie.set("i18n","tw_t",s),window.location.href="http://tw.iqiyi.com")},a.delegate("i18n-change-web",function(n){if(a.children().forEach(function(e){Q.$(e).removeClass("selected")}),n=Q.event.get(n.event),n.preventDefault(),e=Q.$(n.target),t=e.attr("i18n-web-type"),m.isLogin()){if("tw"===t){if(!l.type)return;d("cn",function(e){var t=e.qiyi_vip_info;if(t&&"1"===t.type)if(u){var n=h.compile(U),a=n(f.cn);u.html(a),c.showTip(u)}else o();else o()})}else if("cn"===t){if(l.type)return;d("tw",function(e){var t=e.qiyi_vip_info;if(t&&"1"===t.type)if(u){var n=h.compile(U),a=n(f.tw);u.html(a),c.showTip(u)}else o();else o()})}}else o(e,t)})},showTip:function(e){this.floatTip=new c({overflow:"visible",isResponsive:!0}),this.floatTip.show({elem:e});var t=this.floatTip.getFloater();t.css("overflow","visible"),p&&("1"===p.smallWindowMode?Q.event.customEvent.fire({type:"twSelWebDragPlay",data:{showTag:!1}}):Q.event.customEvent.fire({type:"twSelWebTipShow",data:{showTag:!0}}))}}),t.add(o)});
define("kit/checkI18nVipUser.js",["../interfaces/profileNav"],function(e,t,n){var a=e("../interfaces/profileNav"),i=new a;n.exports={getVipUserTag:function(e,t){var n={fields:"prus,userinfo,qiyi_vip",authcookie:Q.cookie.get("P00007")};"tw"===e&&(n.ptid="01010021010010000000"),i.getProfile(n,function(e){"A00000"===e.code&&t(e.data)})}}});
define("units/consoleHireInfo.js",["../components/units/pageJob"],function(e){var t=e("../components/units/pageJob"),a="consoleHireInfo";t.create(a,{check:function(){return!0},init:function(){var e=window.console;if(e&&e.log){var t="%c",a="color:#008B45;text-shadow:15px 15px 5px #fff, 15px 15px 10px #373E40, 15px 15px 15px #A2B4BA, 15px 15px 30px #82ABBA;font-weight:bolder;font-size:15px",n="color:#495A80;text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 1px 0 #bbb;font-size:20px";Q.browser.IE&&(t="",a="",n=""),e.info(t+" iiii        QQQQQQQQQ           iiii                               iiii\n"+"i::::i     QQ:::::::::QQ        i::::i                             i::::i\n"+" iiii     QQ:::::::::::::QQ      iiii                               iiii\n"+"         Q:::::::QQQ:::::::Q\n"+"iiiiiii  Q::::::O   Q::::::Q   iiiiiii  yyyyyyy           yyyyyyy iiiiiii\n"+"i:::::i  Q:::::O     Q:::::Q   i:::::i   y:::::y         y:::::y  i:::::i\n"+" i::::i  Q:::::O     Q:::::Q    i::::i    y:::::y       y:::::y    i::::i\n"+" i::::i  Q:::::O     Q:::::Q    i::::i     y:::::y     y:::::y     i::::i\n"+" i::::i  Q:::::O     Q:::::Q    i::::i      y:::::y   y:::::y      i::::i\n"+" i::::i  Q:::::O     Q:::::Q    i::::i       y:::::y y:::::y       i::::i\n"+" i::::i  Q:::::O  QQQQ:::::Q    i::::i        y:::::y:::::y        i::::i\n"+" i::::i  Q::::::O Q::::::::Q    i::::i         y:::::::::y         i::::i\n"+"i::::::i Q:::::::QQ::::::::Q   i::::::i         y:::::::y         i::::::i\n"+"i::::::i  QQ::::::::::::::Q    i::::::i          y:::::y          i::::::i\n"+"i::::::i    QQ:::::::::::Q     i::::::i         y:::::y           i::::::i\n"+"iiiiiiii      QQQQQQQQ::::QQ   iiiiiiii        y:::::y            iiiiiiii\n"+"                       Q:::::Q                y:::::y\n"+"                        QQQQQQ               y:::::y\n"+"                                            y:::::y\n"+"                                           y:::::y",a),e.info(t+"一不小心被你发现了:-)\r\n什么都不说了,这里需要喜欢探寻秘密的你!\r\n爱奇艺直聘网址:http://zhaopin.iqiyi.com/",n)}}}),t.add(a)});
define("units/vipPay/initPay_floater.js",["../../components/units/pageJob","../../components/action/checkDoms","../../kit/juicer","../../view/vipPay/vipPayViewTpl","../../kit/userInfo","../../action/qipaLogin","../../components/action/floater","../../components/view/floaterView","../../kit/vipPay/floatPointMath","../../kit/vipPay/pingbackToBoss","../../kit/thirdPartUserName","../../kit/vipPay/vipPayType","../../kit/vipPay/vipPayAutoRenew","../../action/vipPay/openVip_floater","../../kit/qiyiPlayer","../../action/tab","../../interfaces/vipPay/vipPayInterface_floater"],function(e){var t=e("../../components/units/pageJob"),n=e("../../components/action/checkDoms"),a=e("../../kit/juicer"),i=e("../../view/vipPay/vipPayViewTpl"),r=e("../../kit/userInfo");e("../../action/qipaLogin");var o=e("../../components/action/floater"),s=e("../../components/view/floaterView"),l=e("../../kit/vipPay/floatPointMath"),d=e("../../kit/vipPay/pingbackToBoss"),m=e("../../kit/thirdPartUserName");e("../../kit/vipPay/vipPayType");var c,h,u=e("../../kit/vipPay/vipPayAutoRenew"),p=e("../../action/vipPay/openVip_floater"),f=e("../../kit/qiyiPlayer"),U=e("../../action/tab"),V=e("../../interfaces/vipPay/vipPayInterface_floater"),g="http://serv.vip.iqiyi.com/order/pre.action?mainland=1&pid=adb3376b039b970b&platform=b6c13e26323c537d",y="initPay_floater",b=null,v={},k={},x=0;t.create(y,{getDependentDoms:function(){},check:function(){return n(v),!0},init:function(){var e=this;e.addCSS(),Q.external.initVipPay=function(){h||(h=new V,e.bindEvent()),e.checkData("init")}},addCSS:function(){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href="http://static.qiyi.com/css/common/v3-vipPay/vip_pay-gaibanpop.css",document.getElementsByTagName("head")[0].appendChild(e)},bindEvent:function(){var e=this;Q.event.customEvent.on("changePayType",function(t){e.autoPayShow(t.data.autoPay,t.data.payType),window.setTimeout(function(){e.resetScroll()},1)}),Q.event.customEvent.on("changePayPackages",function(t){e.autoPayShow(t.data.autoPay,t.data.payType),e.resetScroll()}),Q.event.customEvent.on("login",function(){Q("#vipPayCover").length>0&&(e.checkData("resetPackage"),e.getUserStatus())}),Q.event.customEvent.on("logout",function(){k.userInfo={name:""}}),Q.event.customEvent.on("reCountPrice",function(){e.checkData("check")}),Q.event.customEvent.on("reCountPriceForCoupon",function(){e.checkData("reCountPriceForCoupon")}),Q(document).delegate('[data-vippay-floater="closeFloater"]',"click",function(e){Q.event.get(e).preventDefault();var t=Q('[data-vipPay-widget="vipPay"]').attr("data-orderId");t?location.reload():(f&&f.getPlayer("video").jsNotifyAdManager({action:"vip_pay_layer_close"}),Q("#vipPayCover").detach(),Q("#vipPayCover").remove(),b.destroy(),b=null)}),Q(document).delegate('[data-vipPay-autoPay="iconEle"]',"mouseenter",function(e){Q.event.get(e).preventDefault(),v.payPackagesBox.find("[data-vipPay-autoPay=autoAgreement]").removeClass("dn")}),Q(document).delegate('[data-vipPay-autoPay="iconEle"]',"mouseleave",function(e){Q.event.get(e).preventDefault(),c=window.setTimeout(function(){v.payPackagesBox.find("[data-vipPay-autoPay=autoAgreement]").addClass("dn")},500)}),Q(document).delegate("[data-vipPay-autoPay=autoAgreement]","mouseenter",function(e){Q.event.get(e).preventDefault(),clearTimeout(c)}),Q(document).delegate("[data-vipPay-autoPay=autoAgreement]","mouseleave",function(e){Q.event.get(e).preventDefault(),Q(this).addClass("dn")}),Q(document).delegate('[data-vipPay-autoPay="closeAutoAgreement"]',"click",function(e){Q.event.get(e).preventDefault(),v.payPackagesBox.find("[data-vipPay-autoPay=autoAgreement]").addClass("dn")})},checkData:function(e){var t=this,n=t.getParams(e);h.getPayInfo(n,function(n){if("A00000"==n.code&&n.data&&"A00000"==n.data.code){if("check"==e||"reCountPriceForCoupon"==e)t.resetPayPrice(n);else if("init"==e||"resetPackage"==e){if(n.data.data=t.transformData(n.data.data),k.packageInfo=n.data.data,"init"==e)t.renderTpl(),t.initPayFloater();else if("resetPackage"==e){var o=a(i.tpl2,k.packageInfo);v.packageFloater.html(o),t._setDOM(),Q.event.customEvent.fire({type:"resetPackage"});var s=v.payPackagesBox.find("li.selected").attr("data-vipPay-autoPay"),l=v.payTypeBox.find("li.selected").attr("data-vippay-paytype");t.autoPayShow(s,l)}if(k.packageInfo.enableCustomCheckout){var m=k.packageInfo.peopleIds;v.packageFloater.attr("data-peopleId",m),r.getType(function(e){d.showACTPingBack(e,"a3aa77e4bb08fdd9",m)})}}}else{var c=a(i.tpl9,k);t.createfloater(c),d.showPingBack("608091_shr2"),d.showQYAPingback("a3aa77e4bb08fdd9","PAY_TC"," ")}})},resetPayPrice:function(e){var t=this,n=l.accDiv(e.data.data.needPayFee,100).toFixed(1),a=l.accDiv(e.data.data.privilege,100),i=v.payTypeBox.find("li.selected").attr("data-vippay-paytype");"mobilePay"==i&&(n="25",a=0),v.payTotleValue.html(n),a>0?v.paySale.removeClass("dn"):v.paySale.addClass("dn"),v.paySale.find('[data-vipPay-ele="saleTotleValue"]').html(a.toFixed(1)),t.resetQrcode()},getParams:function(e){var t={pid:"a0226bd958843452",platform:"b6c13e26323c537d",fs:Q.url.getQueryValue(location.href,"fs"),fsSign:Q.url.getQueryValue(location.href,"fsSign"),fc:"a3aa77e4bb08fdd9",fv:Q.url.getQueryValue(location.href,"fv")};if("check"==e||"reCountPriceForCoupon"==e){t.calculateFee="1",t.amount=parseInt(v.payPackagesBox.find("li.selected").attr("data-vippay-amountvalue"),10),t.payAutoRenew=u.getpayAutoRenew();var n=v.couponBox.find("[data-vippay-couponbox=selected]").attr("data-vippay-couponkey");v.couponBox.hasClass("dn")||"2"==t.payAutoRenew?t.useCoupon="0":"reCountPriceForCoupon"==e?""===n?t.useCoupon="0":(t.useCoupon="1",t.couponCode=n):t.useCoupon="1"}return r.isLogin()&&(t.P00001=Q.cookie.get("P00001")),t},transformData:function(e){for(var t=e.suits,n=0,a=t.length;a>n;n++){"2"==t[n].payAutoRenew&&(t[n].amount=0,t[n].payAutoRenew=parseInt(t[n].payAutoRenew,10)),1==t[n].recommend&&(e.needPayFee=l.accDiv(t[n].needPayFee,100).toFixed(1),e.privilege=l.accDiv(t[n].privilege,100).toFixed(1)),t[n].price=l.accDiv(t[n].price,100);var i=t[n].couponInfo.comboBoxUserful;if("0"==i){var r=t[n].supportCoupon;"1"==r?t[n].comboBoxUserful="0":"0"==r&&(t[n].comboBoxUserful="2")}else t[n].comboBoxUserful="2";switch(t[n].amount){case 0:t[n].unit="连续包月";break;case 12:t[n].unit="年";break;case 3:t[n].unit="季";break;case 1:t[n].unit="月"}}return e.suits=t,e},initPayFloater:function(){var e=this;r.isLogin()&&e.getUserStatus()},getUserStatus:function(){var e,t=this;r.isVip(function(n){return!n||"0"!=r.getStatus()&&"2"!=r.getStatus()?(t.getUserBuyType(),void 0):(k.userInfo={Status:"0"},e=a(i.tpl7,k),t.createfloater(e),void 0)})},getUserBuyType:function(){var e=this;r.checkVipInfo(function(){var t=parseInt(r.getVipType(),10);if("4"==t){var n=a(i.tpl8,k);return e.createfloater(n),window.setTimeout(function(){window.location.href=g},3e3),void 0}e.getUserInfo()})},getUserInfo:function(){var e=this;k.userInfo={name:r.getName()},r.getIcon(function(t){t&&(k.userInfo.icon=t),m.getUserFromName(function(t){k.userInfo.userFrom=t;var n="";r.getIsValidVip(function(t){r.getLevel(function(r){n=t?"qyvr"+r+" qyv-rank":"qyvr-gray"+r+" qyv-rank",k.userInfo.levelFlag=n;var o=a(i.tpl1,k.userInfo);v.userBox.html(o),e.resetScroll()})})})})},renderTpl:function(){var e=this,t=a(i.tpl,{tpl0:i.tpl0,tpl1:i.tpl1,tpl2:i.tpl2,tpl3:i.tpl3,tpl4:i.tpl4,tpl5:i.tpl5,tpl6:i.tpl6,data:k},k);e.createfloater(t),d.showPingBack("608091_shr2"),d.showQYAPingback("a3aa77e4bb08fdd9","PAY_TC",k.packageInfo.peopleIds),e.bindTpl()},bindTpl:function(){var e=this;"0"==x?(e.asyncLoad(),x+=1,new p({doms:v.vipPayBox})):e.asycFire(),e.initTabWidget(),e._setDOM(),Q.event.customEvent.fire({type:"initCoupon",data:""}),e.resetScroll(),e.openAutoPay()},asyncLoad:function(){t.async("vipPay/payType_floater",function(){}),t.async("vipPay/payPackages_floater",function(){}),t.async("vipPay/couponPay_floater",function(){}),t.async("vipPay/platformPay_floater",function(){}),t.async("vipPay/mobilePay",function(){}),t.async("vipPay/scroll_floater",function(){}),t.async("vipPay/succeedPay_floater",function(){})},asycFire:function(){Q.event.customEvent.fire({type:"floaterShow"})},initTabWidget:function(){var e=Q.$("#widget-tab-vipPay"),t=e.down("[data-tab-title=widget-tab-vipPay]"),n=e.down("[data-tab-body=widget-tab-vipPay]");new U({doms:{widget:e,titles:t,bodies:n}})},_setDOM:function(){v={vipPayBox:Q('[data-vipPay-widget="vipPay"]'),userBox:Q("[data-vipPay-floater=userBox]"),payTypeBox:Q('[data-vipPay-widget="payType"]'),packageBox:Q("[data-vippay-widget=tabBody]"),payPackagesBox:Q("[data-vippay-widget=payPackages]"),packageFloater:Q('[data-vippay-floater="packageBox"]'),couponBox:Q("[data-vippay-floater=couponBox]"),autoPayBox:Q("[data-vippay-floater=autoPayBox]"),autoPayBtn:Q("[data-vipPay-widget=autoPayBtn]"),sureOpen:Q("[data-vipPay-widget=sureOpen]"),autoPayAgreement:Q('[data-vipPay-widget="autoPayAgreement"]'),payTotleValue:Q("[data-vippay-ele=payTotleValue]"),paySale:Q("[data-vippay-widget=paySale]"),payBox:Q("[data-vipPay-floater=payBox]")}},createfloater:function(e){b||(b=new o({view:new s({isResize:!0,zIndex:4750})})),b.show({html:e});var t="<div id='vipPayCover' class='vipPayCover'></div>";Q("body").append(Q(t))},resetScroll:function(){Q.event.customEvent.fire({type:"resetScroll_floater"})},autoPayShow:function(e,t){"true"==e||"jihuomaPay"==t?v.autoPayBox.addClass("dn"):v.autoPayBox.removeClass("dn"),"true"==e?(v.packageBox.removeClass("vip_con-show"),"jihuomaPay"==t?v.autoPayAgreement.addClass("dn"):v.autoPayAgreement.removeClass("dn")):(v.autoPayBtn.find("p").hasClass("selected")&&"jihuomaPay"!=t?v.autoPayAgreement.removeClass("dn"):v.autoPayAgreement.addClass("dn"),v.packageBox.addClass("vip_con-show"))},openAutoPay:function(){var e=this;v.autoPayBtn.find("a").on("click",function(t){Q.event.get(t).preventDefault(),Q(this).parent().toggleClass("selected"),e.checkData("reCountPriceForCoupon"),Q(this).parent().hasClass("selected")?v.autoPayAgreement.removeClass("dn"):v.autoPayAgreement.addClass("dn")})},resetQrcode:function(){var e=v.payPackagesBox.find("li.selected").attr("data-vipPay-autoPay"),t=v.payTypeBox.find("li.selected").attr("data-vippay-paytype");Q.event.customEvent.fire({type:"resetQrCode",data:{payType:t,autoPay:e}})}}),t.add(y)});
define("view/vipPay/vipPayViewTpl.js",[],function(e,t,a){var n={tpl:['<div class="site_native" data-vippay-widget="vipPay">',"<!-- 头部信息 开始 -->",'<div class="site_head">','<h2 class="site_head-txt" data-vipPay-floater="payTitle">购买黄金VIP会员</h2>','<a href="javascript:void(0);" class="site_head-close" data-vipPay-floater="closeFloater"></a>',"</div>","<!-- 头部信息 结束 -->","<!-- 主体内容 开始 -->",'<div class="site_main" data-vipPay-floater="mainBox">',"<!-- VIP活动通知栏 开始 -->","{@include tpl0,data.packageInfo}","<!-- VIP活动通知栏 结束 -->",'<div class="site_main-inner" {@if data.packageInfo.activityInfo.control==0}style="height:465px;"{@/if} ','id="scrollwrap" data-scrollname="vipPay_floater" data-scrollwrap="vipPay_floater">','<div data-scrollcontent="vipPay_floater" class="site_inner-con">',"<!-- 账号信息及登录来源 开始 -->",'<div class="vip_pay-nativeuser" data-vipPay-floater="userBox">',"{@include tpl1,data.userInfo}","</div>","<!-- 账号信息及登录来源 结束 --> ","<!-- 套餐类型选择 开始 -->",'<div class="vip_pay-nativeway clearfix" data-vipPay-floater="packageBox">',"{@include tpl2,data.packageInfo}","</div>","<!-- 套餐类型选择 结束 -->","<!-- 代金券 开始 -->","{@include tpl3,data.packageInfo}","<!-- 代金券 结束 -->","<!-- 开通连续包月 开始 -->","{@include tpl4,data.packageInfo}","<!-- 开通连续包月 结束 -->","<!-- 支付详情版块 开始 -->","{@include tpl5,data.packageInfo}","<!-- 支付详情版块 结束 -->","</div>","<!-- 滚动条 开始 -->",'<div class="vip_scrollbar" data-scrollbar="vipPay_floater"></div>',"<!-- 滚动条 结束 -->","</div>","<!--兑换代金券toast-->",'<div class="vip_success-yes dn" data-vipPay-widget="couponTips">',"<h3>兑换成功！</h3>",'<p class="dn">但当前选择套餐不满足使用条件，可更换套餐载使用</p>',"</div>","<!--兑换代金券toast end-->","</div>","<!-- 主体内容 结束 -->","<!-- 底部订单金额 开始 -->","{@include tpl6,data.packageInfo}","<!-- 底部订单金额 结束 -->","</div>"].join(""),tpl0:["{@if activityInfo.control==0}",'<div class="vip_pay-notice">','<span><img src="${activityInfo.icon}" width="18" height="14"></span>','<a {@if activityInfo.url} href="${activityInfo.url}" target="_blank" {@/if}>${activityInfo.text}</a>',"</div>","{@/if}"].join(""),tpl1:["{@if name}","<!-- 用户已登录 -->",'<div data-floater-userBox="login">','<img src="${icon}" class="vip_userImg" data-floater-login="icon" />','<div class="vip_uTxt">',"<p>",'<span class="myName" data-floater-login="name">${name}</span>',"<!-- 非会员添加qyvr-gray, qyvr-gray1, qyvr-gray2以此类推 -->","<!-- 会员添加qyvr1, qyvr2, qyvr3以此类推 -->",'<i class="${levelFlag}"></i>','<span class="login_method">（<em data-floater-login="source">${userFrom}</em>登录）</span>',"</p>","</div>","</div>","<!-- 用户已登录 end -->","{@else}","<!-- 用户未登录 -->",'<div data-floater-userBox="noLogin">','<div class="vip_no-icon"></div>','<p class="vip_no-txt">您还没有登录哦！</p>','<div class="vip_no-btn"><a href="javascript:;" j-delegate="login">立即登录</a></div>',"</div>","<!-- 用户未登录 end -->","{@/if}"].join(""),tpl2:['<ul data-vipPay-widget="payPackages">',"{@each suits as item}","{@if item.payAutoRenew===2}",'<li data-vipPay-autopay="true" data-vipPay-amountValue="1" data-vipPay-payPackage="0" ','data-coupon-useful="${item.comboBoxUserful}" class="{@if item.recommend == 1}selected{@/if}" ','{@if item.recommend == 1}data-recommend="true"{@/if}>','<a href="javascript:void(0);">','<em class="vip_tip-native {@if item.promotion===null||item.promotion==""}dn{@/if}">','<i class="vip_tip-left"></i><i class="vip_tip-right"></i>',"${item.promotion}","</em>",'<p class="vip_way-txtLine1">¥<strong data-vipPay-widget="payValue">${item.price}</strong><em class="dn" data-vippay-widget="amountValue">1</em>','<em class="dn" data-autopayval-mobilepay="true">25</em><em class="dn" data-autopayval-mobilepay="false">${item.price}</em>',"</p>",'<span class="vip_way-cycle1">${item.unit}<span data-vipPay-autoPay="iconEle"></span></span>','<div class="vip_month dn" data-vipPay-autoPay="autoAgreement">','<dl class="vip_month-statement">',"<dt>连续包月声明：</dt> ","<dd>1.到期前1天为您自动续费，自动延长1个月；</dd>","<dd>2.扣费前短信通知，完全透明；</dd>",'<dd>3.尊享超低价 <span class="vip_org"><strong>15</strong>元/月</span>（原价<span>19.8</span>元/月）；</dd>',"<dd>4.可随时取消连续包月服务，取消后不再自动续费。</dd>","<dt>VIP会员权益说明：</dt>","<dd>1.VIP会员仅支持在电脑端、移动端登录使用，不支持在电视端使用</dd>","</dl>",'<span class="arrow1">','<em class="arrow2"></em>',"</span>",'<span class="vip_statement-close" data-vipPay-autoPay="closeAutoAgreement"></span>',"</div>","</a>","</li>","{@else}",'<li data-vipPay-autopay="false" data-vipPay-amountValue="${item.amount}" ','data-coupon-useful="${item.comboBoxUserful}" {@if item.recommend == 1}data-recommend="true"{@/if}','data-vipPay-payPackage="${item.amount}" class="{@if item.recommend == 1}selected{@/if}">','<a href="javascript:void(0);">','<em class="vip_tip-native {@if item.promotion===null||item.promotion==""}dn{@/if}">','<i class="vip_tip-left"></i><i class="vip_tip-right"></i>',"${item.promotion}","</em>",'<p class="vip_way-txtLine3">¥<strong data-vipPay-widget="payValue">${item.price}</strong>','<em class="dn" data-vippay-widget="amountValue">${item.amount}</em></p>','<span class="vip_way-cycle2">${item.unit}</span>',"</a>","</li>","{@/if}","{@/each}","</ul>"].join(""),tpl2_1:['<div class="vip_month dn">','<dl class="vip_month-statement">',"<dt>连续包月声明：</dt> ","<dd>1.到期前1天为您自动续费，自动延长1个月；</dd>","<dd>2.扣费前短信通知，完全透明；</dd>","<dd>3.尊享超低价 <strong>15</strong>元/月（原价<span>19.8</span>元/月）；</dd>","<dd>4.可随时取消连续包月服务，取消后不再自动续费。</dd>","<dt>VIP会员权益说明：</dt>","<dd>1.VIP会员仅支持在电脑端、移动端登录使用，不支持在电视端使用</dd>","</dl>",'<span class="arrow1">','<em class="arrow2"></em>',"</span>",'<span class="vip_statement-close"></span>',"</div>"].join(""),tpl3:["<!-- 连续包月被选中时vip_chit后需添加disabled -->",'<div class="vip_chit dn" data-vipPay-floater="couponBox">','<div class="vip_chit-wrap">',"<!--左侧代金券-->",'<div class="vip_chit-con">','<div class="vip_chit-txt">代金券:</div>',"<!-- 点击后出现下拉需加 vip_select-open -->",'<div class="vip_selectBox">',"<!--展示选中的文案-->",'<div class="vip_select">','<span class="dn" data-vipPay-couponBox="noLogin">登录才能看到优惠哦</span>','<span class="dn" data-vipPay-couponBox="noCoupon">还没有代金券哦</span>','<span class="dn" data-vipPay-couponBox="saleCoupon">优惠套餐不能叠加使用代金券</span>',"<!--登录用户有可用代金券-->",'<div data-vipPay-couponBox="couponStatus">',"<!--当前使用代金券-->",'<span data-vipPay-couponBox="selected" class="vip_list-first">','<em class="vip_select-name"></em>','<em class="vip_select-time"></em>',"</span>","<!--当前使用代金券-->","<!--无可用代金券-->",'<span class="vip_name-ts dn" data-vipPay-couponBox="noSelected">切换其他套餐试试，有惊喜</span>',"<!--无可用代金券 end-->",'<span class="tip_t">',"<!-- 下拉列表时的箭头 -->",'<i class="tip_inner"></i>',"</span>","</div>","</div>","<!--展示选中的文案 end-->","<!--代金券列表-->",'<ul class="vip_select-con dn" data-vipPay-couponBox="couponList">',"<!-- 点击后加selected，获取焦点加hover -->","</ul>","<!--代金券列表 end-->","</div>","</div>","<!--左侧代金券 end-->",'<div class="vip_con-right" data-vipPay-couponBox="exchangeCoupon"><a href="javascript:;" rseat="vip_chit_add">兑换代金券</a></div>','<div class="vip_con-right dn" data-vipPay-couponBox="cancelExchangeCoupon"><a href="javascript:;">取消兑换代金券</a></div>',"</div>          ",'<div class="vip_duihuan dn" data-vipPay-couponBox="exchangeCouponBox">','<div class="vip_input-quanma">','<input type="text" placeholder="请输入您的代金券码" data-vipPay-exchangeCouponBox="couponVal">',"<!-- 用户输入错误 -->",'<span class="dn" data-vipPay-exchangeCouponBox="couponError"></span>',"</div>",'<div class="vip_input-yzm">','<input type="text" placeholder="验证码" data-vipPay-exchangeCouponBox="picCodeVal">','<span class="dn" data-vipPay-exchangeCouponBox="picCodeError"></span>',"</div>",'<span data-vipPay-exchangeCouponBox="codeImg"></span>','<a href="javascript:void(0)" class="barterBtn" data-vipPay-exchangeCouponBox="refreshCodeImg"><span></span>换一换</a>','<a href="javascript:;" class="useBtn" data-vipPay-exchangeCouponBox="exchangeBtn">兑换</a>','<span class="arrow3">','<em class="arrow4"></em>',"</span>","</div>","</div>"].join(""),tpl3_1:["{@each couponInfo as item}",'<li data-vipPay-couponKey="${item.key}" data-couponAmount-usable="${item.usable}">','<em class="vip_select-name">${item.name} - ${item.fee}元</em>','<span class="vip_select-yes"></span>','<em class="vip_select-time">${item.deadline}到期</em>',"</li>","{@/each}",'<li class="vip_select-lastLi">','<em class="vip_select-name">不使用代金券<span class="c-999">(不推荐)</span></em>','<span class="vip_select-yes"></span>',"</li>"].join(""),tpl4:['<div class="vip_choice clearfix {@if showCoupon != 0}dn{@/if}" data-vipPay-floater="autoPayBox" data-vipPay-widget="autoPayBtn">',"<!-- 选中需添加 selected -->",'<p class="vip_choiceMold">','<a href="javascript:;" class="vip_choiceIcon"></a>','<span class="baoyue_text">开通连续包月服务，会员到期前一天将自动扣款续费，续费享<em class="orange">15元/月</em></span>',"</p>","</div>"].join(""),tpl5:['<div class="vip_pay-nativebody" data-vipPay-floater="payTypeBox" id="widget-tab-vipPay">',"<!-- 支付方式选择 开始 -->",'<div class="vip_tab clearfix">','<ul data-vipPay-widget="payType">','<li class="vip_tab-firstLi selected" data-tab-title="widget-tab-vipPay" data-seq="1" data-vipPay-payType="scanPay">','<a href="javascript:void(0);">扫码支付</a>',"</li>",'<li data-tab-title="widget-tab-vipPay" data-seq="2" data-vipPay-payType="bfbPay">','<a href="javascript:void(0);">百度钱包</a>',"</li>",'<li data-tab-title="widget-tab-vipPay" data-seq="3" data-vipPay-payType="mobilePay">','<a href="javascript:void(0);">手机话费</a>',"</li>",'<li class="vip_tab-lastLi" data-tab-title="widget-tab-vipPay" data-seq="4" data-vipPay-payType="jihuomaPay">','<a href="javascript:void(0);">激活码</a>',"</li>","</ul>","</div>","<!-- 支付方式选择 结束 -->",'<div class="vip_con" data-vippay-widget="tabBody">',"<!-- 扫码支付 开始 -->",'<div class="clearfix" data-tab-body="widget-tab-vipPay" data-seq="1">','<div class="vip_saoma-left">','<div class="vip_ewmBox">','<div class="vip_code-hover">','<div class="vip_code-hoverBg" data-vipPay-widget="codeCover"><i></i></div>',"</div>",'<img src="http://www.qiyipic.com/common/fix/vip_pay-native/erweima.png" data-vipPay-widget="codeImg" width="92" height="92">','<div class="vip_ewmBox-bg"></div>',"</div>",'<div class="icon-box clearfix">','<a title="支付宝" class="icon-bat icon-zhifubao"></a>','<a title="微信" class="icon-bat icon-weixin"></a>',"</div>","</div>",'<div class="vip_pay-money">','<p class="vip_money-txt">应付金额：</p>','<p class="vip_money-num">','<strong><strong data-vipPay-ele="payTotleValue">${needPayFee}</strong>元</strong> ','<span data-vippay-widget="paySale" class="{@if privilege == 0.0}dn{@/if}">已优惠<span data-vipPay-ele="saleTotleValue">${privilege}</span>元</span>',"</p>",'<p class="vip_deal">','<a href="http://vip.iqiyi.com/membershipagreement.html" target="_blank">《VIP会员服务协议》</a>','<a href="http://vip.iqiyi.com/autorenewagreement.html" target="_blank" data-vipPay-widget="autoPayAgreement">《连续包月服务协议》</a></p>',"</div>","</div>","<!-- 扫码支付 结束 -->","<!-- 百度钱包 开始 -->",'<div class="clearfix" data-tab-body="widget-tab-vipPay" data-seq="2" style="display:none;">',"<div>",'<div class="vip_bdwallet"></div>',"</div>","</div>","<!-- 百度钱包 结束 -->","<!-- 手机话费 开始 -->",'<div class="clearfix" data-tab-body="widget-tab-vipPay" data-seq="3" style="display:none;">','<div class="vip_phone-inner">',"<p>手机话费支付方式只支持购买连续包月套餐</p>",'<div class="vipPhone-item pb10">',"<label>手机号：</label>",'<div class="vipPhone_input-item vipPhone_input-error">','<p class="errorTip dn" data-vipPay-mobilePay="errorTips"></p>','<input type="text" class="txt" placeholder="请输入手机号" data-vippay-mobilepay="mobileNum">',"</div>","</div>",'<div class="vipPhone-item">',"<label>验证码：</label>",'<div class="vipPhone_input-item">','<input type="text" class="txt t-147" placeholder="请输入验证码" data-vippay-mobilepay="vCodeNum">',"</div>",'<div class="vipPhone_btn" data-vippay-mobilepay="vcodePar">','<a href="javascript:void(0);" data-vippay-mobilepay="vCodeBtn">点击获取验证码</a>','<a href="javascript:void(0);" data-vippay-mobilepay="vCodeTimer" class="dn"><em>59</em>秒后重新获取</a>',"</div>","</div>","</div>","</div>","<!-- 手机话费 结束 -->","<!-- 激活码 开始 -->",'<div class="clearfix" data-tab-body="widget-tab-vipPay" data-seq="4" style="display:none;">','<div class="vip_jihuoma">','<p class="vip_jTxt">您可在爱奇艺电商平台购买VIP会员礼品卡，自用或送礼皆为上选。</p>','<p class="vip_jTxt">如您已有礼品卡(激活码)，请立即激活，开启爱奇艺VIP会员之旅！</p>','<p class="vip_jDesc">激活会员不支持选择时长，会员开通时长请以会员卡相关说明为准。</p>',"</div>","</div>","<!-- 激活码 结束 -->","<!-- 协议 -->",'<p class="vip_deal dn" data-vipPay-payTypeBox="agreementBox">','<a href="http://vip.iqiyi.com/membershipagreement.html" target="_blank">《VIP会员服务协议》</a>','<a href="http://vip.iqiyi.com/autorenewagreement.html" rseat="vip_payment_act" target="_blank" data-vipPay-widget="autoPayAgreement">《连续包月服务协议》</a></p>',"</p>","<!-- 协议 end-->","</div>","</div>"].join(""),tpl6:['<div class="vip_order-prase dn" data-vipPay-floater="payBox">','<div class="vip_prase-lt" data-vipPay-payBox="moneyBox">','<span class="vip_lt1">应付金额: <strong><span data-vipPay-ele="payTotleValue">${needPayFee}</span>元</strong></span>','<span class="vip_lt2 {@if privilege == 0.0}dn{@/if}" data-vippay-widget="paySale">已优惠<em data-vipPay-ele="saleTotleValue">${privilege}</em>元</span>',"</div>",'<div class="vip_prase-rt" data-vipPay-payBox="payBtn"><a href="javascript:void(0);" data-vipPay-widget="sureOpen" ','data-mobilePay-orderCode=" " rseat="vip_payment_unswitch">确认支付</a></div>','<div class="vip_prase-rt dn" data-vipPay-payBox="jihuoBtn"><a href="http://vip.iqiyi.com/jihuoma.html?fc=a3aa77e4bb08fdd9" target="_blank">立即激活</a></div>',"</div>"].join(""),tpl7:['<div class="site_native" data-vippay-widget="vipPay">',"<!-- 头部信息 开始 -->",'<div class="site_head">','<h2 class="site_head-txt">购买黄金VIP会员</h2>','<a href="javascript:void(0);" class="site_head-close" data-vipPay-floater="closeFloater"></a>',"</div>","<!-- 头部信息 结束 -->","<!-- 主体内容 开始 -->",'<div class="site_main" data-vipPay-floater="mainBox">','<div class="site_main-inner">',"<!-- 账号封停 开始 -->",'<div class="vip_info">','<div class="vipgu_top vipgu_top-stop">',"<h2></h2>",'<div class="vipgu_txtBox mt10">',"<p>很抱歉，您的账号已经被封停，无法正常购买！</p>",'<p>请<a href="http://cserver.iqiyi.com/chat.html" target="_blank" class="green">联系客服</a>解除帐号封停~</p>',"</div>","</div>","</div>","<!-- 账号封停 结束 -->","</div>","</div>","</div>"].join(""),tpl8:['<div class="site_native" data-vippay-widget="vipPay">',"<!-- 头部信息 开始 -->",'<div class="site_head">','<h2 class="site_head-txt">购买黄金VIP会员</h2>','<a href="javascript:void(0);" class="site_head-close" data-vipPay-floater="closeFloater"></a>',"</div>","<!-- 头部信息 结束 -->","<!-- 主体内容 开始 -->",'<div class="site_main" data-vipPay-floater="mainBox">','<div class="site_main-inner">',"<!-- 跳转到白金会员 开始 -->",'<div class="vip_info">','<div class="vipgu_top vipgu_top-gold">',"<h2></h2>",'<div class="vipgu_txtBox mt10">',"<p>尊敬的爱奇艺白金会员</p>","<p>正在为您跳转至续费白金会员页面...</p>","</div>","</div>","</div>","<!-- 跳转到白金会员 结束 --> ","</div>","</div>","</div>"].join(""),tpl9:['<div class="site_native" data-vippay-widget="vipPay">',"<!-- 头部信息 开始 -->",'<div class="site_head">','<h2 class="site_head-txt">购买黄金VIP会员</h2>','<a href="javascript:void(0);" class="site_head-close" data-vipPay-floater="closeFloater"></a>',"</div>","<!-- 头部信息 结束 -->","<!-- 主体内容 开始 -->",'<div class="site_main" data-vipPay-floater="mainBox">','<div class="site_main-inner">',"<!-- 打开失败 开始 -->",'<div class="vip_info">','<div class="vipgu_top vipgu_top-open">',"<h2>打开失败!</h2>",'<div class="vipgu_txtBox mt10">',"<p>收银台页面在打开时发生了错误，请点击右上角“X”关闭弹窗后重新购买。</p>","</div>","</div>","</div>","<!-- 打开失败 结束 -->","</div>","</div>","</div>"].join(""),tpl10:['<div class="site_main-inner"><!-- 支付成功 开始 --><div class="vip_info"><div class="vipwin_top"><h2 data-vippay-widget="orderStat">VIP开通中……</h2><div class="vipwin_infor dn" data-vippay-widget="orderBox"><ul><li><span>用户名称：</span><em data-vipPay-widget="userName"></em></li><li><span>购买时长：</span><em data-vipPay-widget="duration"></em></li><li><span>到期时间：</span><em data-vipPay-widget="deadLine"></em></li><li><span>支付金额：</span><em data-vipPay-widget="payVal"></em></li></ul></div><div data-vipPay-widget="autoPayBox" class="dn"><p class="vipwin_txt dn" data-vippay-floater="openAutoBtn">马上<a href="javascript:void(0);" rseat="vip_cashier_payresult_zdxf" class="orange" data-vippay-widget="openAutoPay" data-widget-ele="openAutoPay" data-widget-rseat="601205_6">开通自动续费</a>，享15元/月省心优惠</p><p class="vipwin_txt dn" data-vippay-widget="openAutoIng">正在为您开通自动续费...</p><p class="vipwin_txt dn" data-vippay-widget="readyOpen">已为您开通自动续费</p> </div></div><div class="vipwin_btm"><div class="vipwin_rTxt"><h3>爱奇艺公众号</h3><p>大牌零接触！</p><p>电影资讯实时掌控！</p><p>大奖随时抽！</p></div><div class="vipwin_rImg"><em class="rImg-sao">扫我关注</em><img src="http://www.qiyipic.com/common/fix/vip-images/vip_quickmark.jpg" width="72" height="72"></div></div><div class="vipwin_txt"><a href="http://vip.iqiyi.com/" rseat="vip_cashier_payresult_mstyvip" target="_blank" class="orange">马上体验VIP &gt;</a></div></div><!-- 支付成功 结束 --></div>'].join(""),tpl11:['<div class="vip_pay-wait"><h2>支付提示<span class="vip_success-close" data-vippay-widget="closePopup"></span></h2><p class="vip_wait-txt">- 请您在新打开的页面中完成支付</p><p class="vip_wait-txt">- 完成支付前不要关闭此窗口</p><div class="vip_wait-btn"><a href="javascript:;" data-vipPay-widget="payDone" rseat="vip_cashier_tt_complete">支付完成</a><a href="javascript:;" class="vip_wait-btns" data-vippay-widget="closePopup" rseat="vip_cashier_tt_choose">重新选择支付方式</a></div><div class="vip_wait-btm"><p>付款中遇到问题？点击<a href="http://cserver.iqiyi.com/index?e=19" rseat="vip_cashier_tt_service" target="_blank" class="orange">在线客服</a>，迅速解决</p></div></div>'].join(""),tpl12:['<div class="vp_popBox vp_popBox-w400">','<div class="vp_pop">','<div class="vp_pop-title">','<a href="javascript:;" class="close" data-vippay-widget="closePopup">×</a>支付提示',"</div>",'<div class="vp_pop-con">','<div class="txtBox">','<p class="dotTxt fs14 pt5">已扣款成功，但没有成功提示</p>','<p class="pb30">由于网络传输延迟，订单信息可能尚未更新，我们会及时查询并更新订单状态，请勿重新支付~ <a href="http://account.iqiyi.com/order" class="green">查看订单</a></p>','<p class="dotTxt fs14">未扣款成功</p>','<p class="">您可以继续支付~ <a href="javascript:;" class="green" data-vippay-widget="closePopup">继续支付</a></p>',"</div>","</div>","</div>","</div>"].join("")};a.exports=n});
define("kit/vipPay/floatPointMath.js",[],function(e,t,a){new Q.ic.InfoCenter({moduleName:"floatPointMath"}),a.exports={accSub:function(e,t){var a,n,i,r;try{a=e.toString().split(".")[1].length}catch(o){a=0}try{n=t.toString().split(".")[1].length}catch(o){n=0}return i=Math.pow(10,Math.max(a,n)),r=a>=n?a:n,((e*i-t*i)/i).toFixed(r)},accMul:function(e,t){var a=0,n=e.toString(),i=t.toString();try{a+=n.split(".")[1].length}catch(r){}try{a+=i.split(".")[1].length}catch(r){}return Number(n.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,a)},accDiv:function(e,t){var a,n,i=0,r=0;try{i=e.toString().split(".")[1].length}catch(o){}try{r=t.toString().split(".")[1].length}catch(o){}return Math?(a=Number(e.toString().replace(".","")),n=Number(t.toString().replace(".","")),a/n*Math.pow(10,r-i)):void 0}}});
define("kit/vipPay/pingbackToBoss.js",[],function(require,exports,module){var pub_param={authcookie:Q.cookie.get("P00001"),agent_type:1},rand=function(e){try{var t=[];if(isNaN(e))t.push(Math.round(2147483647*Math.random()));else for(var a=0;e>a;a++)t.push(Math.round(2147483647*Math.random()).toString(36));return t.join("")}catch(n){return""}},getUserInfoUid=function(){try{var userInfo=Q.cookie.get("P00002");return userInfo&&(userInfo=userInfo==window.JSON?window.JSON.parse(userInfo):eval("("+userInfo+")")),userInfo&&userInfo.uid?userInfo.uid:""}catch(e){return""}};module.exports={showPingBack:function(e){var t={t:"21",pf:1,p:10,p1:101,p2:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),Bstp:"56",pu:Q.cookie.get("P00003"),block:e};Q.object.extend(t,pub_param),Q.log.server(t,"http://msg.71.am/b")},showACTPingBack:function(e,t,a){var n={t:"22",p1:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),hu:e,purl:window.location.href,bstp:"56",rpage:"Mobile_Casher",ext:{}};n.ext.fc=t,n.ext.platform="b6c13e26323c537d",n.ext.people_id=a,n.ext=Q.url.jsonToQuery(n.ext),Q.object.extend(n,pub_param),Q.log.server(n,"http://msg.71.am/v5/mbd/act")},showQYAPingback:function(e,t,a){var n="";Q.PageInfo&&Q.PageInfo.playPageInfo&&Q.PageInfo.playPageInfo.albumId&&(n=Q.PageInfo.playPageInfo.albumId);var i={qy_n:rand(),qy_url:window.location.href,qy_ref:window.document.referrer,qy_jsuid:Q.cookie.get("QC006"),qy_platform:"b6c13e26323c537d",qy_fcode:e,qy_type:"1",qy_uid:Q.cookie.get("P00003"),qy_ppuid:getUserInfoUid(),qy_pt:t,qy_fvcode:Q.cookie.get("QC142"),qy_pid:"a0226bd958843452",qy_aid:n,qy_flshuid:Q.cookie.get("QC005"),people_id:a};Q.log.server(i,"http://msg.vip.qiyi.com/qya.gif")}}});
define("kit/thirdPartUserName.js",["./userInfo"],function(e,t,a){var n=e("./userInfo"),i=Q.Class("UserFromName",{properties:{userFrom:""},construct:function(){},methods:{init:function(){},getUserFromName:function(e){var t=this;n.getThirdPartyFrom(function(a){e&&(t.userFrom=t.matchName(a),e(t.userFrom))})},getUserFromData:function(e){return this.getUserFromName(e,"userFrom"),this.userFrom},getLanguage:function(){if(!window.Q||!Q.PageInfo)return!1;var e=Q.PageInfo.qy_platform;return e&&"a31343b3762c80e7"==e?!0:void 0},matchName:function(e){var t,a,n=this;switch(a=n.getLanguage(),e){case 29:t="微信";break;case 2:t="微博";break;case 4:t="QQ";break;case 1:t="百度";break;case 30:t="小米";break;case 31:t=a===!0?"京東":"京东";break;case 5:t=a===!0?"支付寶":"支付宝";break;case 3:t="人人";break;default:t=a===!0?"愛奇藝":"爱奇艺"}return t}}}),r=new i;r.init(),a.exports={getUserFromName:function(e){return r.getUserFromData(e)}}});
define("kit/vipPay/vipPayType.js",[],function(e,t,a){a.exports={getPayType:function(e){var t;if("platFormPay"==e||"scanPay"==e||"bfbPay"==e){var a=Q("[data-vippay-widget=payPackages]").find("li.selected").attr("data-vippay-autopay");t=Q("[data-vippay-widget=autoPayBtn]").find("p").hasClass("selected")||"true"==a?"67":"2"}else"bankCardPay"==e?t="true"==Q("[data-vippay-widget=payPackages]").find("li.selected").attr("data-vippay-autopay")?"67":"onlineCard"==Q("[data-vippay-widget=cardList]").find("li.selected").attr("data-vippay-cardtype")?"CMB"==Q("[data-vippay-widget=bankList]").find("li.selected").attr("data-bankpay-value")?"63":"1":Q("[data-vippay-widget=autoPayBtn]").find("p").hasClass("selected")?"67":"2":"qidouPay"==e?t="32":"jihuomaPay"==e?t="6":"mobilePay"==e&&(t="70");return t}}});
define("kit/vipPay/vipPayAutoRenew.js",[],function(e,t,a){a.exports={getpayAutoRenew:function(){var e,t=Q("[data-vippay-widget=payPackages]").find("li.selected").attr("data-vippay-autopay"),a=Q("[data-vippay-widget=payType]").find("li.selected").attr("data-vippay-paytype");return e="true"==t?"2":Q("[data-vippay-widget=autoPayBtn]").find("p").hasClass("selected")&&"qidouPay"!=a?"1":"0"}}});
define("action/vipPay/openVip_floater.js",["../../components/action/adapter","../../model/vipPay/openVipModel_public","../../view/vipPay/openVipView_floater"],function(e,t,a){var n=e("../../components/action/adapter"),i=e("../../model/vipPay/openVipModel_public"),r=e("../../view/vipPay/openVipView_floater");a.exports=Q.Class("openVip",{extend:n,construct:function(e){e=e||{},e.ctrl=this,e.model=e.model||new i(e),e.view=e.view||new r(e),this.callsuper(e)},methods:{vipOpen:function(e){var t=this;this._model.openVip(e,function(e){"A00000"==e.code&&t._view.serverPayResult(e.data)})},check:function(e){var t=this;this._model.check(e,function(a){a.param=e,t._view.popsucc2(a)})},autocheck:function(e){var t=this;this._model.check(e,function(a){a.param=e,t._view.checkStatusResult(a)})}}})});
define("model/vipPay/openVipModel_public.js",["../../components/model/model","../../interfaces/vipPay/vipPayInterface_public"],function(e,t,a){var n=e("../../components/model/model"),i=e("../../interfaces/vipPay/vipPayInterface_public");a.exports=Q.Class("openVipModel_public",{extend:n,construct:function(e){this.callsuper(e),this.config=e.config,this.ctrl=e.ctrl},methods:{openVip:function(e,t){e=e||{},(new i).requestDoPay(e,function(e){t(e)})},check:function(e,t){e=e||{},(new i).check(e,function(e){t(e)})}}})});
define("interfaces/vipPay/vipPayInterface_public.js",["../../kit/remoteInterface"],function(e,t,a){var n=e("../../kit/remoteInterface");a.exports=Q.Class("vipPayInterface_public",{construct:function(){this._remoteInterface=new n({queryVipStat:{url:"http://serv.vip.iqiyi.com/pay/return/queryVipStat.action"},getMobileVcode:{url:"http://i.vip.iqiyi.com/pay/mobile-pay-vd.action"},check:{url:"http://i.vip.iqiyi.com/order/queryOrderStat.action"},requestDoPay:{url:"http://i.vip.iqiyi.com/pay/dopay.action"}})},methods:{queryVipStat:function(e,t){this.request(e,t,"queryVipStat")},getMobileVcode:function(e,t){this.request(e,t,"getMobileVcode")},check:function(e,t){this.request(e,t,"check")},requestDoPay:function(e,t){this.request(e,t,"requestDoPay")},request:function(e,t,a){e=e||{},e.t=(new Date).getTime(),this._remoteInterface.send({dataType:"jsonp",param:e,ifname:a},function(e){t&&t(e)})}}})});
define("view/vipPay/openVipView_floater.js",["../../components/view/view","../../kit/validate","../../kit/userInfo","../../kit/juicer","../../view/vipPay/vipPayViewTpl","../../action/qipaLogin","../../kit/vipPay/vipPayType","../../kit/vipPay/vipPayAutoRenew","../../components/action/floater","../../components/view/floaterView"],function(e,t,a){var n=e("../../components/view/view"),i=e("../../kit/validate"),r=e("../../kit/userInfo"),o=e("../../kit/juicer"),s=e("../../view/vipPay/vipPayViewTpl"),l=e("../../action/qipaLogin"),d=e("../../kit/vipPay/vipPayType"),c=e("../../kit/vipPay/vipPayAutoRenew"),m=e("../../components/action/floater"),h=e("../../components/view/floaterView"),u={};a.exports=Q.Class("openVipView_floater",{extend:n,construct:function(e){this.callsuper(e),this.ctrl=e.ctrl,this.wrapper=e.doms,this.invalidTime=e.invalidTime||900},methods:{init:function(){var e=this;e.setDom(),e.bindEvent(),Q.event.customEvent.on("floaterShow",function(){e.setDom()}),Q.event.customEvent.on("resetPackage",function(){e.setDom()})},setDom:function(){var e=Q('[data-vipPay-widget="vipPay"]');u.wrap=e,u.payPackagesBox=e.find("[data-vipPay-widget=payPackages]"),u.payTypeBox=e.find("[data-vipPay-widget=payType]"),u.autoPayBtn=e.find("[data-vipPay-widget=autoPayBtn]")},bindEvent:function(){var e=this;Q(document).delegate('[data-vippay-widget="sureOpen"]',"click",function(t){if(Q.event.get(t).preventDefault(),e.target=Q.event.get(t).target,!r.isLogin())return l.openLoginWindow(null,function(){}),!1;var a=Q("[data-vippay-ele=payTotleValue]").html();if("0.0"!=a){var n=u.payTypeBox.find("li.selected").attr("data-vippay-paytype");if("mobilePay"==n){if(e.checkMobilePay()===!1)return;Q(e.target).addClass("vp_siteBtn-disable"),Q(e.target).html("开通中……")}e.doPayByServer(e.target)}}),Q(document).delegate('[data-vippay-widget="closePopup"]',"click",function(t){Q.event.get(t).preventDefault(),Q.event.customEvent.fire({type:"closePopup",data:""}),e.lotteryfloat&&e.lotteryfloat.destroy(),e.timer&&clearInterval(e.timer)}),Q(document).delegate('[data-vipPay-widget="payDone"]',"click",function(t){Q.event.get(t).preventDefault();var a={orderSeq:Q("[data-vippay-widget=sureOpen]").attr("vipPay-orderSeq"),P00001:Q.cookie.get("P00001")};e.timer&&clearInterval(e.timer),e.ctrl.check(a)})},doPayByServer:function(e){var t=this,a=t.getParam(),n=Q.url.jsonToQuery(a),i="http://i.vip.iqiyi.com/pay/dopay.action?resultType=redirect&"+n;Q(e).attr("data-vipPay-targetUrl",i),Q("[data-vippay-widget=sureOpen]").attr("vipPay-orderSeq",a.orderSeq),"70"==a.payType?t.ctrl.vipOpen(a):(t.win&&t.win.close(),t.win=window.open(i,"newWindow"),t.redirectPayResult(a))},autoCheckStatus:function(e){var t=this;t.startTime=(new Date).getTime();var a=Q("[data-vippay-widget=sureOpen]"),n={P00001:Q.cookie.get("P00001")};"70"==e?n.orderCode=a.attr("vipPay-orderCode"):n.orderSeq=a.attr("vipPay-orderSeq"),t.timer=setInterval(function(){t.ctrl.autocheck(n)},3e3)},checkStatusResult:function(e){var t=this;return"A00000"==e.code&&e.data&&e.data.data&&"1"==e.data.data.status?(clearInterval(t.timer),t.lotteryfloat&&t.lotteryfloat.destroy(),Q.event.customEvent.fire({type:"successPay",data:e.data.data.orderCode}),void 0):(new Date).getTime()-t.startTime>=6e5?(clearInterval(t.timer),void 0):void 0},getParam:function(){var e="",t="",a="",n="",i=u.payPackagesBox.find("li.selected").attr("data-vippay-amountValue"),o=c.getpayAutoRenew(),s=u.payTypeBox.find("li.selected").attr("data-vippay-paytype"),l=d.getPayType(s);"mobilePay"==s&&(e=parseInt(u.wrap.find("[data-vippay-mobilepay=mobileNum]").val(),10),a=u.wrap.find("[data-vippay-mobilepay=vCodeNum]").val(),t=u.wrap.find("[data-vippay-widget=sureOpen]").attr("data-mobilePay-orderCode"));var m=Q('[data-vippay-couponbox="selected"]').attr("data-vippay-couponkey"),h=u.payPackagesBox.find("li.selected").attr("data-coupon-useful");m&&"0"!=h&&(n=m);var p=Q('[data-vippay-floater="packageBox"]').attr("data-peopleId"),f={};p&&(f.peopleId=p);var U="";Q.PageInfo&&Q.PageInfo.playPageInfo&&Q.PageInfo.playPageInfo.albumId&&(U=Q.PageInfo.playPageInfo.albumId);var V={pid:"a0226bd958843452",amount:i,payType:l,uid:r.getUid(),payAutoRenew:o,aid:U,fs:Q.url.getQueryValue(location.href,"fs"),fc:"a3aa77e4bb08fdd9",fsSign:Q.url.getQueryValue(location.href,"fsSign"),fr_version:Q.url.jsonToQuery(f),enableCustomCheckout:u.wrap.find("[data-vippay-widget=sureOpen]").attr("data-enableCustomCheckout")||"",platform:"b6c13e26323c537d",orderSeq:Q.cookie.get("QC005")+Math.floor(900*Math.random()+100),payParamCoupon:n,payParamMobile:e,payParamOrderNo:t,payParamMobileCode:a};return V},serverPayResult:function(e){var t=this,a=e.payType;if("70"==a)"A00000"==e.code||"Q00202"==e.code?(Q.$(t.target).attr("vipPay-orderCode",e.data.orderCode),t.autoCheckStatus(e.payType)):(u.wrap.find("[data-vipPay-mobilePay=errorTips]").removeClass("dn"),u.wrap.find("[data-vipPay-mobilePay=errorTips]").html(e.msg),u.wrap.find("[data-vippay-widget=sureOpen]").removeClass("vp_siteBtn-disable"),u.wrap.find("[data-vippay-widget=sureOpen]").html("确认开通"));else if("33"==a){if("A00000"==e.code)return Q.event.customEvent.fire({type:"successPay",data:e.data.orderCode}),void 0;t.popsucc2(e)}},redirectPayResult:function(e){var t=this,a=o(s.tpl11,{},null);t.showFloater(a),t.showPingBack("vip_cashier_tooltip"),Q("[data-vippay-widget=sureOpen]").attr("vipPay-orderSeq",e.orderSeq),t.autoCheckStatus()},popsucc2:function(e){var t=this;if(t.timer&&clearInterval(t.timer),t.lotteryfloat&&t.lotteryfloat.destroy(),"A00000"==e.code&&"A00000"==e.data.code&&"1"==e.data.data.status)return Q.event.customEvent.fire({type:"successPay",data:e.data.data.orderCode}),void 0;var a=o(s.tpl12,{},null);t.showFloater(a)},showFloater:function(e){var t=this;t.lotteryfloat&&(t.lotteryfloat=null),t.lotteryfloat=new m({view:new h({isResize:!0,noOverflowHidden:!0,zIndex:4850})}),t.lotteryfloat.show({html:e})},checkMobilePay:function(){var e=!0,t=u.wrap.find("[data-vippay-mobilepay=mobileNum]").val(),a=u.wrap.find("[data-vippay-mobilepay=vCodeNum]").val(),n=u.wrap.find("[data-vipPay-mobilePay=errorTips]"),r=u.wrap.find("[data-vippay-widget=sureOpen]").attr("data-mobilePay-orderCode");if(0===t.length)n.removeClass("dn"),n.html("请输入手机号"),e=!1;else if(0===a.length)n.removeClass("dn"),n.html("请输入验证码"),e=!1;else if(" "==r)n.removeClass("dn"),n.html("请重新获取验证码"),e=!1;else{var o=i.mobile(t);o||(n.removeClass("dn"),n.html("手机号格式错误"),e=!1)}return e},showPingBack:function(e){var t={authcookie:r.getAuthCookies(),agent_type:1},a={t:"21",pf:1,p:10,p1:101,p2:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),Bstp:"56",pu:Q.cookie.get("P00003"),block:e};Q.object.extend(a,t),Q.log.server(a,"http://msg.71.am/b")}}})});
define("interfaces/vipPay/vipPayInterface_floater.js",["../../kit/remoteInterface"],function(e,t,a){var n=e("../../kit/remoteInterface");a.exports=Q.Class("vipPayInterface",{construct:function(){this._remoteInterface=new n({getPayInfo:{url:"http://i.vip.iqiyi.com/pay/pc/checkSuitInfo.action"},checkRealFee:{url:"http://i.vip.iqiyi.com/order/checkRealFee.action"},getAllCoupon:{url:"http://i.vip.iqiyi.com/client/store/coupon/searchUserCoupons.action"},activeCoupon:{url:"http://i.vip.iqiyi.com/pay/readCoupon.action"},getUserStat:{url:"http://i.vip.iqiyi.com/pc/payconfirm/confirmOrderStat.action"}})},methods:{getPayInfo:function(e,t){this._remoteInterface.send({dataType:"jsonp",param:e,qoe:!0,ifname:"getPayInfo"},function(e){t&&t(e)})},checkRealFee:function(e,t){this.request(e,t,"checkRealFee")},getAllCoupon:function(e,t){this.request(e,t,"getAllCoupon")},activeCoupon:function(e,t){this.request(e,t,"activeCoupon")},getUserStat:function(e,t){this.request(e,t,"getUserStat")},request:function(e,t,a){e=e||{},this._remoteInterface.send({dataType:"jsonp",param:e,ifname:a},function(e){t&&t(e)})}}})});
define("units/playBase2.js",["../units/flashAndPageVideoListSync","../units/switchLight","../units/scroll","../units/playerViewScroll","../units/baiduDaoliu","../units/expandShare","../units/ThirdPartyTrigger","../units/shareCopy","../units/share","../units/shareToWeiXin","../units/watchByPhoneV2","../units/upAndDownV3","../units/videoDownload","../units/report","../units/playcountPieChart","../units/newsubscribe","../units/setTitle","../units/changeTitleOnVideoChange","../units/comment","../units/scrollbar_menu","../units/scrollToTop","../units/playcountLazyload","../units/barrage1_5","../units/playBangdanHover","../units/changeHash","../units/steamPlayerPopup","../units/videoSeries","../units/bigVipSubscribe","../units/playerPopupReward","../units/follow","../units/pgcPlayerFollow","../units/userinfopopup","../units/ugcFocusFloater","../units/dragPlay","../units/adOutParam","../units/topPingback","../units/ipadAdResource","../units/playAutoNextArrayList","../units/playPrevNextArrayList","../units/videoAuthPlay","../units/videoLayerShow","../units/videoPlayBtn","../units/videoControlBarLocate","../units/mobileBigPlayBtn","../units/fullScreen","../units/videoExpand","../units/videoProgress","../units/pingbackVV","../units/pingbackKadunRate","../units/padPlay","../units/videoDownTip"],function(e,t,a){var i=[e("../units/flashAndPageVideoListSync"),e("../units/switchLight"),e("../units/scroll"),e("../units/playerViewScroll"),e("../units/baiduDaoliu"),e("../units/expandShare"),e("../units/ThirdPartyTrigger"),e("../units/shareCopy"),e("../units/share"),e("../units/shareToWeiXin"),e("../units/watchByPhoneV2"),e("../units/upAndDownV3"),e("../units/videoDownload"),e("../units/report"),e("../units/playcountPieChart"),e("../units/newsubscribe"),e("../units/setTitle"),e("../units/changeTitleOnVideoChange"),e("../units/comment"),e("../units/scrollbar_menu"),e("../units/scrollToTop"),e("../units/playcountLazyload"),e("../units/barrage1_5"),e("../units/playBangdanHover"),e("../units/changeHash"),e("../units/steamPlayerPopup"),e("../units/videoSeries"),e("../units/bigVipSubscribe"),e("../units/playerPopupReward"),e("../units/follow"),e("../units/pgcPlayerFollow"),e("../units/userinfopopup"),e("../units/ugcFocusFloater"),e("../units/dragPlay"),e("../units/adOutParam"),e("../units/topPingback")];(Q.browser.iPad||Q.browser.iPhone||Q.browser.android)&&(i.push(e("../units/ipadAdResource")),i.push(e("../units/playAutoNextArrayList")),i.push(e("../units/playPrevNextArrayList")),i.push(e("../units/videoAuthPlay")),i.push(e("../units/videoLayerShow")),i.push(e("../units/videoPlayBtn")),i.push(e("../units/videoControlBarLocate")),i.push(e("../units/mobileBigPlayBtn")),i.push(e("../units/fullScreen")),i.push(e("../units/videoExpand")),i.push(e("../units/videoProgress")),i.push(e("../units/pingbackVV")),i.push(e("../units/pingbackKadunRate")),i.push(e("../units/padPlay")),i.push(e("../units/videoDownTip"))),a.exports=i});
define("action/slideWidgetV2.js",["../components/action/widget","../kit/eventPlugin","../model/slideWidgetModelV2","../view/slideWidgetViewV2"],function(e,t,n){var a=e("../components/action/widget"),i=e("../kit/eventPlugin"),r=e("../model/slideWidgetModelV2"),o=e("../view/slideWidgetViewV2"),s={},l=function(e){var t=Q.$(e),n="marginRight",a="marginLeft",i=t.width();"vertical"===this.dir&&(n="marginTop",a="marginBottom",i=t.height());var r=parseInt(t.css(n),10),o=parseInt(t.css(a),10);return isNaN(r)&&(r=0),isNaN(o)&&(o=0),i+r+o},d=function(e,t,n){if(!e)return 0;var a=l(e,t);return Math.floor(n.width()/a)};n.exports=Q.Class("SlideWidget",{extend:a,plugins:[new i],construct:function(e){e=e||{},e.disp=e.disp||d(e.doms.item[0],e.dir,e.doms.content)||0,e.model=e.model||new r(e),e.view=e.view||new o(e),this._interval=e.interval||6e3,this._autoPlay=e.autoPlay||!1;var t=e.name;this.status="stop",t&&(s[t]?s[t].push(this):s[t]=[this]),this.callsuper(e),this._autoPlay&&this.resume(),1!=e.first&&(this.focusTo(e.first),this.moveTo(e.first));var n=this;e.navDotWrap&&e.navDotWrap.attr("data-slide-dot")&&(this.on("listMouseEnter",function(){n.pause()}),this.on("listMouseLeave",function(){n.resume()})),this.on("itemMouseEnter",function(){n.pause()}),this.on("itemMouseLeave",function(){n.resume()})},statics:{getSlide:function(e){return s[e]},delSlide:function(e){delete s[e]}},properties:{events:{next:function(){this.next()},prev:function(){this.prev()},touchstart:function(e){this.pause(),this.fire({type:"touchstart",data:e.data})},touchend:function(e){this.resume(),this.fire({type:"touchend",data:e.data})},slideToEnd:function(){},itemclick:function(e){this.fire({type:"itemclick",data:e.data})},beforeitemclick:function(e){this.fire({type:"beforeitemclick",data:e.data})},mousescroll:function(e){this.fire({type:"mousescroll",data:e.data})},beforePreBtnClick:function(e){this.fire({type:"beforePreBtnClick",data:e.data})},afterPreBtnClick:function(e){this.fire({type:"afterPreBtnClick",data:e.data})},beforeNextBtnClick:function(e){this.fire({type:"beforeNextBtnClick",data:e.data})},afterNextBtnClick:function(e){this.fire({type:"afterNextBtnClick",data:e.data})}}},methods:{start:function(){this.play()},reinit:function(){for(var e=this._model._data.total,t=this._model._data.first,n=0;e-t>n;n++)this.next()},play:function(){if("play"==this.status){var e=this;this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){e.next(),this.status="stop"},this._interval)}},pause:function(){this.status="stop",this._timer&&clearTimeout(this._timer)},resume:function(){this.status="play",this.play()},next:function(){var e=this;if(this._model.get().canMoveNext){this.pause(),this._model.next();var t=e._model._data;this.fire({type:"beforePlayNext",data:t}),this.fire({type:"beforePlay",data:t}),this._view.update(this._model._data,function(){e.fire({type:"afterPlayNext",data:t}),e.fire({type:"afterPlay",data:t})}),this._autoPlay&&this.resume()}},prev:function(){var e=this;if(this._model.get().canMovePrev){this.pause(),this._model.prev();var t=e._model._data;this.fire({type:"beforePlayPrev",data:t}),this.fire({type:"beforePlay",data:t}),this._view.update(t,function(){e.fire({type:"afterPlayPrev",data:t}),e.fire({type:"afterPlay",data:t})}),this._autoPlay&&this.resume()}},focusTo:function(e,t){t&&(e+=this._model._data.prevCount),this._view.focus({focus:e})},moveTo:function(e,t,n){var a=this;this.pause(),t&&(this._model._data.trend=t);var i=this._model._data.first;n?(this._model._data.trend=i-(e+this._model._data.prevCount)>0?"prev":"next",this._model.setFirst(e+this._model._data.prevCount)):(this._model._data.trend=i-e>0?"prev":"next",this._model.setFirst(e));var r=a._model._data;this.fire({type:"beforePlay",data:r}),this._view.update(r,function(){a.fire({type:"afterPlayNext",data:r}),a.fire({type:"afterPlay",data:r})}),this._autoPlay&&this.resume()},goStep:function(){},reset:function(e){e=e||{};var t=this;t.pause(),e.disp||(e.disp=Math.floor(t._view._doms.content.width()/t._view._itemWidth)),t._model.reset(e),t._view.reset(e),t._view.addItems(),t._view.bindAddedItemEvent(),t._view._setBtnStatic(t._model.get()),t._autoPlay&&t.resume()},getFirst:function(){var e=this;return e._model._data.first||1},getTotal:function(){var e=this;return e._model._data.total||1}}})});
define("model/slideWidgetModelV2.js",["../components/model/model"],function(e,t,n){var a=e("../components/model/model");n.exports=Q.Class("SlideWidgetModel",{extend:a,construct:function(e){this.callsuper(),this._data={first:e.first||1,oriFirst:e.first||1,focus:e.focus||1,total:e.total||0,disp:e.disp||0,step:0,trend:"next",oriTotal:e.total||0,prevCount:0,nextCount:0,circelFirst:"none"},e.step&&(this._data.step=e.step<0?this._data.disp+e.step+1:e.step),this._circle=!!e.circle},methods:{init:function(){return 0===this._data.total||this._data.disp<this._data.step?!1:(this.setLimit(),this._circle?this.setFirst(this._data.prevCount+this._data.first):this.setFirst(1),void 0)},setPrevNextCount:function(){for(var e=this._data,t=e.first+e.disp-1;t-e.step>=1;)t-=e.step;e.prevCount=e.disp-t,0===e.prevCount&&(e.specialSlide=!0,e.prevCount=e.disp);for(var n=e.first;n+e.step<=e.total;)n+=e.step;e.nextCount=e.disp-(e.total-n+1),0===e.nextCount&&(e.specialSlide=!0,e.nextCount=e.disp)},setLimit:function(){var e=this._data;this._circle&&(this.setPrevNextCount(),e.total=e.oriTotal+e.prevCount+e.nextCount),e.maxFirst=e.total-e.disp+1,e.maxFirst<e.first&&(e.first=e.maxFirst),e.canMovePrev=this._circle||1!=e.first,e.canMoveNext=this._circle||e.first<e.total-e.step+1},setFirst:function(e){var t=this._data,n=this._data.maxFirst,a=1,i=t.first;t.oriFirst=t.first,t.first=e,this._circle?(t.circelFirst="none","next"==t.trend&&(t.specialSlide?e==n&&(t.first=t.prevCount+1,t.circelFirst=1):e>n&&(t.first=e-t.oriTotal,t.circelFirst=t.first-t.step)),"prev"==t.trend&&(t.specialSlide?e==a&&(t.first=t.total-t.nextCount+1-t.disp,t.circelFirst=t.first+t.disp):a>e&&(t.first=t.oriTotal+1-t.prevCount-(1-e)+t.prevCount,t.circelFirst=t.first+t.step)),t.realIndex=t.first<=t.prevCount?t.oriTotal-t.prevCount+t.first:t.first<=t.prevCount+t.oriTotal?t.first-t.prevCount:t.firstVideo-t.oriTotal-t.prevCount):(t.first=Math.max(Math.min(e,n),1),t.canMoveNext=t.first<n,t.canMovePrev=t.first>1,t.realIndex=t.first),t.moveStep=Math.abs(t.first-i)},setFocus:function(e){var t=this._data;t.focus=e},next:function(){this._check();var e=this._data;e.trend="next",this.setFirst(e.first+e.step)},prev:function(){this._check();var e=this._data;e.trend="prev",this.setFirst(e.first-e.step)},move:function(){this._check();var e=this._data;e.focus>0&&this.setFirst(e.focus-Math.floor(e.disp/2)),Q.log.log(e)},_check:function(){var e=this._data;if(0===e.total||0===e.disp)throw new Error("[SlideModelWidget]Invalid data.")},reset:function(e){e&&(this._data.oriTotal=e.total?e.total:this._data.oriTotal,this._data.total=e.total?e.total:this._data.oriTotal,this._data.first=e.first?e.first:this._data.first,this._data.focus=e.focus?e.focus:this._data.focus,this._data.disp=e.disp?e.disp:this._data.disp,this._data.step=e.step?e.step<0?this._data.disp+e.step+1:e.step:this._data.step||this._data.disp,this.init())}}})});
define("view/slideWidgetViewV2.js",["../components/view/widgetView","../kit/anim"],function(e,t,n){var a,i=e("../components/view/widgetView"),r=e("../kit/anim"),o=new Q.ic.InfoCenter({moduleName:"SlideView"});n.exports=Q.Class("SlideView",{extend:i,construct:function(e){this.callsuper(e),this._enableTouch=!!e.enableTouch,this._enableScroll=e.enableScroll===!0,this._useDefaultOffset=e.useDefaultOffset?!0:!1,this._circle=!!e.circle,this.lBtnClass=e.lBtnClass||"btn-ltno",this.rBtnClass=e.rBtnClass||"btn-rtno",this._offset=e.offset||0,this._head=[],this._tail=[],this._itemWidth=e.itemWidth,this._curr=1,this._navDotWrap=e.navDotWrap,this._navBarWrap=e.navBarWrap,this._navDotTpl=e.navDotTpl&&e.navDotTpl.value(),this._style=e.style||"left",this._css3=e.css3,this.dir=e.dir||"horizontal",this.itemfocusclass=e.itemfocusclass||"selected",this.disableWheel=e.disableWheel||!1,this.lazyLoadImage=e.lazyLoadImage,this.lazyMoreHalf=e.lazyMoreHalf,this._dura=isNaN(e.dura)?300:e.dura},methods:{init:function(e){this.callsuper("init",e),this.initView(),this._bindEvent()},initView:function(e){this._doms.oriItem=this._doms.oriItem||this._doms.item,this.setItemInfo(e),this.addItems(e),this._resetListWidth(),this.setNavDot(e),this._initPosition(),this._setBtnStatic()},_initOffset:function(){var e=this._doms,t=0;t="vertical"===this.dir?e.content.height():e.content.width()||parseInt(e.content[0].style.width,10);var n=this._itemWidth*this._ctrl._model._data.disp,a=t-n;this._offset=Math.ceil(a/2)},addItems:function(e){if(this._circle){var t=this._doms,n=e||this._ctrl._model.get();if(n.oriTotal>=n.disp){if(this._tail.length)for(var a=0;a<this._tail.length;a++){var i=this._tail[a];t.list.remove(i)}this._tail=[];for(var r=0;r<n.nextCount;r++)this._tail.push(Q.$(t.oriItem[r]).clone(!0));if(this._head.length)for(var o=0;o<this._head.length;o++){var s=this._head[o];t.list.remove(s)}this._head=[];for(var l=0;l<n.prevCount;l++)this._head.push(Q.$(t.oriItem[n.oriTotal-l-1]).clone(!0));this._head.forEach(function(e){t.list.insertBefore(e,t.list.first())}),this._tail.forEach(function(e){t.list.append(e)}),t.item=t.list.down("*[data-slide-item]")||t.list.down("li"),this._curr+=this._head.length}}},addNextItem:function(){var e=this._doms;e.item=e.list.down("li"),this.setItemInfo()},_initPosition:function(){if(this._enableScroll){o.debug("Old offset : "+this._offset),this._useDefaultOffset||this._initOffset(),o.debug("New offset : "+this._offset),this._anim&&this._anim.done();var e=this._offset-(this._curr-1)*this._itemWidth,t=this._doms;return isNaN(e)?!1:(t.list.css(this._style,e+"px"),void 0)}},setNavDot:function(){var e=this;if(this._navDotWrap){var t=this._ctrl._model._data.oriTotal,n=this._ctrl._model._data.step,a=this._navDotWrap.attr("data-slide-dot"),i="mouseenter";if(this._dotCount=Math.ceil(t/n),this._dotCount>1){if(!a){for(var r="",o=0;o<this._dotCount;o++)e._navDotTpl?r+=Q.plugins.Mustache.render(e._navDotTpl,{index:o+1,selected:0===o}):(r+='<a href="javascript:void(0);"',0===o&&(r+='class="selected" '),r+=' data-slidewidget-navdotitem="item" data-slidewidget-navdotindex="'+(o+1)+'"></a>');i="click",this._navDotWrap.html(r),this._navBarWrap.show(),this.navDotItems=null}this.navDotItems=this._navDotWrap.down('[data-slidewidget-navdotitem="item"]'),this._currentDot=Q.$(this.navDotItems[0]),this.navDotItems.on(i,function(t){for(var n=Q.$(Q.event.get(t).target),a=parseInt(n.attr("data-slidewidget-navdotindex")||n.parent("li").attr("data-slidewidget-navdotindex"),10),i=parseInt(e._currentDot.attr("data-slidewidget-navdotindex"),10),r=a-i,o=Math.abs(r),s=0;o>s;s++)r>0?e._ctrl.next():e._ctrl.prev()})}else this._navBarWrap.hide()}},setItemInfo:function(e){if(e=e||this._ctrl._model.get()){var t=this._doms,n=null;t.item.forEach(function(e,t){e=Q.$(e),e.attr("data-seq",t+1),e.attr("data-slide-elem","item"),0===t&&(n=e)}),this._itemWidth||this.setItemWidth(n)}},setItemWidth:function(e){var t=e||Q.$(this._doms.item[0]),n="marginRight",a="marginLeft",i=t.width()||parseInt(t.css("width"),10)+parseInt(t.css("padding-left"),10)+parseInt(t.css("padding-right"),10);"vertical"===this.dir&&(n="marginTop",a="marginBottom",i=t.height());var r=parseInt(t.css(n),10),o=parseInt(t.css(a),10);isNaN(r)&&(r=0),isNaN(o)&&(o=0),this._itemWidth=i+r+o},getItemRightWidth:function(){},reSetItemInfo:function(e){this._doms.item=e,this.setItemInfo(e)},update:function(e,t){"none"!==e.circelFirst&&this._move(e,!0),this._curr=e.first,this._move(e,!1,t),this._setBtnStatic(e)},focus:function(e){var t=this,n=e.focus,a=t._doms;a.item.removeClass(this.itemfocusclass);var i=a.item;i.forEach(function(e){var a=Q.$(e),i=parseInt(a.attr("data-seq"),10);i===n&&a.addClass(t.itemfocusclass)})},getItem:function(e){var t=this._doms;return Q.$(t.item[e-1])},_resetListWidth:function(){var e=this._doms;if(this._enableScroll){var t="width";"vertical"===this.dir&&(t="height"),e.list.css(t,this._itemWidth*e.item.length+"px")}},_move:function(e,t,n){var i=this,o=this._doms,s=o.list.left(o.content);if("vertical"===this.dir&&(s=o.list.top(o.content)),!isNaN(e.first)){var l=0;if(t){var d=parseInt(o.list.css(this._style),10);l=(1-e.oriFirst)*this._itemWidth+this._offset;var m=d-l;l=(1-e.circelFirst)*this._itemWidth+this._offset+m}else l=(1-e.first)*this._itemWidth+this._offset;if(i.lazyLoadImage&&(clearTimeout(a),a=setTimeout(function(){for(var t=e.first,n=e.disp,a=function(e){var n=Q.$(o.item[t-1+e]);if(n){var a=n.down("[data-slide-lazyimg]");a&&(a.attr("src",a.attr("data-slide-lazyimg")),a.removeAttr("data-slide-lazyimg"))}},r=0;n>r;r++)a(r);i.lazyMoreHalf&&a(r)},300)),this._listPos=this._listPos||0,t)this._anim&&this._anim.stop(),o.list.css(i._style,l+"px");else{if(this._navDotWrap&&this._currentDot){var c=this._currentDot;c.removeClass("selected");var h,u=parseInt(c.attr("data-slidewidget-navdotindex"),10);"next"==e.trend?h=u==this._dotCount?1:u+1:"prev"==e.trend&&(h=1==u?this._dotCount:u-1),this._currentDot=Q.$(this._doms.widget.down('[data-slidewidget-navdotitem="item"]')[h-1])||Q.$(Q.$('[data-slidewidget-navdotitem="item"]')[h-1]),this._currentDot.addClass("selected")}if(!i._css3&&this._dura){var p={elem:o.list,from:s,to:l,duration:this._dura,style:i._style};n&&(p.done=n),this._anim=r(p)}else o.list.css(i._style,l+"px"),n()}this._listPos=0}},_setBtnStatic:function(e){var t=this._doms;t.pbtn&&(e=e||this._ctrl._model.get(),e.canMovePrev?t.pbtn.removeClass(this.lBtnClass):t.pbtn.addClass(this.lBtnClass)),t.nbtn&&(e.canMoveNext?t.nbtn.removeClass(this.rBtnClass):t.nbtn.addClass(this.rBtnClass))},_moveWithFinger:function(e){this._anim&&this._anim.stop();var t=this._doms,n=t.list.left(t.content),a=n+e.x;t.list.css(this._style,a+"px"),this._lastDir=e.x},_touchend:function(){var e=this._doms,t=this,n=e.list.left(e.content),a=Math.ceil((0-n)/this._itemWidth)+(this._lastDir<0?1:0);this._listPos=Math.abs((e.list.left(e.content)-this._offset)%this._itemWidth),setTimeout(function(){t._ctrl.notice({type:"touchend",data:{first:a,dir:t._lastDir>0?"prev":"next"}})},100),n>=this._offset;var i=Math.max(e.list.width()-e.content.width(),0)+this._offset;Math.abs(n)>=i},_bindEvent:function(){var e=this._doms,t=this;if(e.pbtn){var n=e.pbtn.attr("j-delegate");n?e.pbtn.delegate("pbtn",function(){t.pbtnEvent()}):e.pbtn.on("click",function(e){e=Q.event.get(e),t.pbtnEvent()})}if(e.nbtn){var a=e.nbtn.attr("j-delegate");a?e.nbtn.delegate("nbtn",function(){t.nbtnEvent()}):e.nbtn.on("click",function(e){e=Q.event.get(e),t.nbtnEvent()})}e.oriItem.on("click",function(n){n=Q.event.get(n);var a=Q.$(n.target),i=a;for(t._ctrl.notice({type:"beforeitemclick",data:{item:i}});i&&"item"!=i.attr("data-slide-elem");)i=i.parent();var r=i.attr("data-item-isclick");"false"!==r&&(e.item.removeClass(t.itemfocusclass),i.addClass(t.itemfocusclass),t._ctrl.notice({type:"itemclick",data:{item:i}}))}),e.list.on("DOMMouseScroll",function(e){t.disableWheel||t._wheel(e)}),e.list.on("mousewheel",function(e){t.disableWheel||t._wheel(e)}),e.list.on("mouseenter",function(){t._ctrl.fire({type:"listMouseEnter",data:{}})}),e.list.on("mouseleave",function(){t._ctrl.fire({type:"listMouseLeave",data:{}})}),Q.$(window).on("onorientationchange",function(){o.debug("Resized."),setTimeout(function(){t._initPosition()},500)}),this._enableScroll&&this._bindTouchEvent(),e.item&&(e.oriItem.forEach(function(e){e=Q.$(e),e.on("mouseenter",function(e){e=Q.event.get(e);var n=Q.$(e.currentTarget||e.target);t._ctrl.fire({type:"itemMouseEnter",data:{item:n,index:parseInt(n.attr("data-seq"),10)-1}})})}),e.oriItem.forEach(function(e){e=Q.$(e),e.on("mouseleave",function(e){e=Q.event.get(e);var n=Q.$(e.currentTarget||e.target);t._ctrl.fire({type:"itemMouseLeave",data:{item:n,index:parseInt(n.attr("data-seq"),10)-1}})})})),t.bindAddedItemEvent()},pbtnEvent:function(){var e=this,t=e._ctrl;t.notice({type:"beforePreBtnClick",data:t._model._data}),t._model._data.canMovePrev&&t.prev(),t.notice({type:"afterPreBtnClick",data:t._model._data})},nbtnEvent:function(){var e=this,t=e._ctrl;t.notice({type:"beforeNextBtnClick",data:t._model._data}),t._model._data.canMoveNext&&(t.next(),t.getTotal()>9&&Q.event.customEvent.fire({type:"getSlidesData",data:{widget:e._doms.widget,list:e._doms.list,index:t.getFirst()}})),t.notice({type:"afterNextBtnClick",data:t._model._data})},bindAddedItemEvent:function(){for(var e=this,t=this._doms,n=this._head.concat(this._tail),a=0;a<n.length;a++){var i=n[a];i=Q.$(i),i.on("mouseenter",function(t){t=Q.event.get(t);var n=Q.$(t.currentTarget||t.target);e._ctrl.fire({type:"itemMouseEnter",data:{item:n,index:parseInt(n.attr("data-seq"),10)-1}})}),i.on("mouseleave",function(t){t=Q.event.get(t);var n=Q.$(t.currentTarget||t.target);e._ctrl.fire({type:"itemMouseLeave",data:{item:n,index:parseInt(n.attr("data-seq"),10)-1}})}),i.on("click",function(n){n=Q.event.get(n);var a=Q.$(n.target),i=a;for(e._ctrl.notice({type:"beforeitemclick",data:{item:i}}),t.item.removeClass(e.itemfocusclass);i&&"item"!=i.attr("data-slide-elem");)i=i.parent();i.addClass(e.itemfocusclass),e._ctrl.notice({type:"itemclick",data:{item:i}})})}},_bindTouchEvent:function(){var e=this._doms,t=this,n=0;e.list.on("touchstart",function(e){Q.event.get(e).stopPropagation(),t._ctrl.notice({type:"touchstart",data:{event:e}}),this._enableTouch}),e.list.on("fingermove",function(){}),e.list.on("touchend",function(e){t._ctrl.notice({type:"touchend",data:{event:e}}),this._enableTouch,n=0})},reset:function(e){e&&(this._doms.item=this._doms.list.down("li")||this._doms.item,this.setItemInfo(),this.setItemWidth(),this._resetListWidth())},_wheel:function(e){Q.event.get(e).preventDefault();var t=e||window.event,n=0;n="Mac"==Q.browser.getOS()?t.wheelDelta?t.wheelDelta/3:0-t.detail/3:t.wheelDelta?t.wheelDelta/120:0-t.detail/3;var a=0;n&&(n>0?a="up":-0>n&&(a="down"),this._ctrl.notice({type:"mousescroll",data:{act:a,event:e,delta:n}}))}}})});
define("view/shortPromotionAdView.js",["../components/view/widgetView"],function(e,t,a){var n=e("../components/view/widgetView");a.exports=Q.Class("shortPromotionAdView",{extend:n,construct:function(e){e=e||{},this.doms=e.doms,this._tpl=e.tpl},methods:{init:function(){},update:function(e){this._renderDataToHtml(e),this.doms.show()},_renderDataToHtml:function(e){var t=this,a=t.doms.attr("data-title-len")||58;a=parseInt(a,10),e.title_v2=e.title,e.title&&(e.title_v2=Q.string.truncate(e.title,a,"..."));var n=t.doms.attr("data-img-param");e.adImgUrl=e.imageURL,n&&(e.adImgUrl=e[n]);var i=Q.plugins.Mustache.render(t._tpl,e);t.doms.html(i)}}})});
define("action/shortPromotionAd.js",["../components/action/widget","../kit/qiyiPlayer","../kit/iframeLocation"],function(e,t,a){e("../components/action/widget");var n=new Q.ic.InfoCenter({moduleName:"ShortPromotionAd"}),i=e("../kit/qiyiPlayer"),o=e("../kit/iframeLocation");a.exports=Q.Class("ShortPromotionAd",{construct:function(){},methods:{init:function(e){var t=this;this._view=e.view,this.flashid=e.flashid,this.hasVideoList=e.hasVideoList,this.currentPlayType="video",t.bindEvent(),n.log("shortPromotionAd action inited . flash is "+e.flashid+"; and hasVideoList is "+this.hasVideoList)},getCurrentPlayType:function(){return this.currentPlayType},unselectedList:function(e){var t=e.classname,a=Q.$('[j-delegate="videoPlayList"]');a&&a.removeClass(t)},bindEvent:function(){var e=this,t=Q.$("#widget-promotionad-con")||Q.$("*[data-promotionad-elem='content']");t&&t.on("click",function(){document.getElementById(e.flashid).notifyAdClick()});var a=Q.$("*[data-widget-videoslidead=ad]");a&&a.on("click",function(t){Q.event.get(t).preventDefault(),e.adClickHandler(this)}),i.getPlayer("video").on("videochanged",function(t){var a=Q.$("*[data-promotionad-link='promotionAdLink']");if(a&&a.length>0){var n,i;a.forEach(function(e){var a=Q.$(e);i=a.attr("data-promotionad-selectedclass"),i&&t.data.tvid+""==a.attr("data-promotionad-tvid")?(n=1,a.addClass(i)):(n=0,a.hasClass(i)&&a.removeClass(i))}),n?e.unselectedList({classname:i}):e.currentPlayType="video"}})},adClickHandler:function(e){var t=this,a="";Q.$(e).down("[data-promotionad-href]")&&(a=Q.$(e).down("[data-promotionad-href]").attr("data-promotionad-href"));try{document.getElementById(t.flashid).notifyAdClick(),!t.hasVideoList&&a&&(n.log("success 1500MS后 跳转"),o.href(a,{time:1e3}))}catch(r){!t.hasVideoList&&a&&(n.log("failed 1500MS后 跳转"),o.href(a,{time:1e3}))}if(t.hasVideoList){t.currentPlayType="ad";var s=Q.$(e).down("[data-promotionad-link='promotionAdLink']"),l=s.attr("data-promotionad-tvid"),d=s.attr("data-promotionad-vid"),c={tvid:l,vid:d,tvId:l};i.getPlayer("video").switchVideo(c),Q.event.customEvent.fire({type:"promotionAd_is_playing"})}n.warn("[ ShortPromotionAd ] 推广广告被点击！ ")}}})});
define("units/switchLight.js",["../components/units/pageJob","../components/action/checkDoms","../action/switchLight","../kit/qiyiPlayer"],function(e,t,a){var i,n=e("../components/units/pageJob"),o=e("../components/action/checkDoms"),r=e("../action/switchLight"),s=e("../kit/qiyiPlayer"),l=s.getPlayer("video");n.create("switchLight",{getDependentDoms:function(){return i={lightAreas:Q.$("[data-widget-switchlight='light']"),player:Q.$("#flashArea")}},check:function(e){return o(e),!0},init:function(){var e=i.lightAreas.attr("data-switchlight-disablescroll")||"";r.init({isDisableScroll:e}),l.on("setLight",function(e){e=e||{},r.doSwitch(e.data)}),Q.event.customEvent.on("js_switchLight",function(e){r.jsSwitch(!e.data)}),Q.event.customEvent.on("hasScrollToQitan",function(){r.setBoxSize()})}}),a.exports="switchLight"});
define("action/switchLight.js",["../kit/anim","../kit/qiyiPlayer"],function(e,t,a){var i,n=e("../kit/anim"),o=5450,r=e("../kit/qiyiPlayer").getPlayer("video"),s=Q.Class("SwitchLight",{construct:function(){this.isLight=!0,this.darkArea=Q.element.Element.create({tagName:"div"}),this.darkArea.addClass("newDot").attr("id","j-widget-switchLightWrap").attr("data-widget-switchlight","darkArea").css("zIndex","5400"),this.btn=Q.element.Element.create({tagName:"a"}),this.btn.addClass("newDotLink").css("zIndex",o).hide()},methods:{init:function(e){Q.$("body").append(this.darkArea.append(this.btn)),this.bindEvent(),this.isDisableScroll=e.isDisableScroll},setBoxSize:function(){var e=this;"none"!=e.darkArea.css("display")&&e.darkArea.css("width",Q.page.getWidth()+"px").css("height",Q.page.getHeight()+"px")},bindEvent:function(){var e=this;e.btn.on("click",e.openBtnClick.bind(e)),e.darkArea.on("mousemove",e._mouseMove.bind(e)),e.btn.on("mousemove",e._btnMousemove.bind(e)),Q.event.on(window,"resize",e.setBoxSize.bind(e)),Q.event.on(window,"load",e.setBoxSize.bind(e)),Q.event.customEvent.on("videoExpand",e.setBoxSize.bind(e))},openBtnClick:function(){var e=this;e.doSwitch(!1),e.btn.hide(),e.btnShown=!1,r.setLight("true"),Q.event.customEvent.fire({type:"jsOpenLight"})},jsSwitch:function(e){var t=this;e?(t.doSwitch(!0),r.setLight("false")):this.openBtnClick()},_mouseMove:function(){var e=this;e.btnShown?clearTimeout(i):(e.btnShown=!0,e.btn.show()),i=setTimeout(function(){e.btnShown=!1,e.btn.hide()},3e3)},_btnMousemove:function(e){clearTimeout(i),Q.event.get(e).stop()},doSwitch:function(e){var t,a,r,s=this,l={lightAreas:Q.$("[data-widget-switchlight='light']"),player:Q.$("#flashArea")};if(e==s.isLight){var d=Q.$("*[data-widget-switchlight-elem=bg]");if(e){if(t=o,a=0,r=1,s.isLight=!1,this.isDisableScroll){var c=Q.$("[data-widget-switchlight='light']");if("ugc"==c.attr("data-widget-switchlightugc")){var u=(Q.page.getViewHeight()-Q.$("#flashArea").height())/2;Q.$("#flashArea").css("top",u+"px").css("position","absolute"),Q.$("#flashArea").css("left",(Q.page.getViewWidth()-Q.$("#flashArea").width())/2+"px")}window.scroll(0,0),(Q.browser.IE||Q.browser.SAFARI)&&Q("body").css("overflow","hidden"),Q.$(window).on("scroll",s.scrollHandler)}s.darkArea.css("width",Q.page.getWidth()+"px").css("height",Q.page.getHeight()+"px").show(),l.lightAreas.css("zIndex",t),clearTimeout(i),s.btnShown=!1,s.btn.hide();var m=Q.$("[data-switchlight-elem='mustbedark']");m&&m.hide(),d&&d.css("display","none")}else{t="",a=1,r=0,s.isLight=!0;var p=Q.$("[data-switchlight-elem='mustbedark']");p&&p.show(),this.isDisableScroll&&((Q.browser.IE||Q.browser.SAFARI)&&Q("body").css("overflow","auto"),Q.$(window).un("scroll",s.scrollHandler)),"ugc"==l.lightAreas.attr("data-widget-switchlightugc")&&Q.$("#flashArea").css("position","")}n({elem:s.darkArea,from:a,to:r,style:"opacity",done:function(){e||(s.darkArea.hide(),l.lightAreas.css("zIndex",t),d&&d.css("display",""))}})}},scrollHandler:function(){window.scroll(0,0)},setLightArea:function(e){e.attr("data-widget-switchlight","light"),this.isLight||e.css("zIndex",o)},removeLightArea:function(e){e.attr("data-widget-switchlight",""),this.isLight||e.css("zIndex","")}}});a.exports=new s});
define("units/scroll.js",["../components/units/pageJob","../action/scrollV2"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../action/scrollV2"),o="scrollWidgetForId",r=5,s="widget-scroll-";n.create(o,{check:function(){return!0},init:function(){for(var e=this,t=0;r>t;t++){var a=Q.$("#"+s+t);e.initScroll(a)}Q.event.customEvent.on("lazyInitScroll",function(t){var a=t.data.widget;e.initScroll(a)})},initScroll:function(e){if(e){var t=e.attr("data-scrollname"),a=Q.$("#scrollbar-"+t)||e.down("[data-scroll-elem='"+t+"']");if(a){var n={doms:{widget:e,scrollBar:a,scrollWrap:Q.$("#scrollWrap-"+t)||e.down("[data-scrollwrap='"+t+"']"),scrollContent:Q.$("#scrollContent-"+t)||e.down("[data-scrollcontent='"+t+"']")},name:t},o=Q.$("#scrollWrap-"+t)||e.down("[data-scrollwrap='"+t+"']"),r=o&&o.attr("data-scrollheight");r&&(n.scrollWrapHeight=r);try{new i(n)}catch(s){}}}}}),a.exports=o});
define("units/playerViewScroll.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer"],function(e,t,a){var i,n=e("../components/units/pageJob"),o=e("../components/action/checkDoms"),r=e("../kit/qiyiPlayer").getPlayer("video"),s=!1,l="playerViewScroll";n.create(l,{getDependentDoms:function(){var e=Q("#widget-plyerViewMode");return e.length&&(i={wrap:e,modeIsView:"true"===e.attr("data-playermode-isview")}),i},check:function(e){return o(e),i&&i.modeIsView},init:function(){},exec:function(){var e=this;e.initPlayerEvent()},initPlayerEvent:function(){var e=function(e){if(!s&&e.target.nodeName.toLowerCase().match(/embed|object/)){e.preventDefault();var t,a=e.originalEvent||{},i=a.wheelDelta,n=a.detail;t=i?i/20+"":n+"",r.zoomQiyiVideo&&r.zoomQiyiVideo(t)}};Q("body").delegate("#flash","DOMMouseScroll",function(t){e(t)}),Q("body").delegate("#flash","mousewheel",function(t){e(t)}),r.on("switchFullScreen",function(e){e=e||{},s="true"===e.data})}}),a.exports=l});
define("units/baiduDaoliu.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/ipRegionInterface","../interfaces/getDownloadUrlInterface","../kit/yingyinPluginV2","../kit/userInfo"],function(e,t,a){var i,n,o,r,s,l,d,c,u=e("../components/units/pageJob"),m=e("../components/action/checkDoms"),p=e("../interfaces/ipRegionInterface"),h=e("../interfaces/getDownloadUrlInterface"),f=e("../kit/yingyinPluginV2"),g=e("../kit/userInfo"),v="docRefer",y="http://msg.71.am/b",b={},V="iqiyi.com,qiyi.com,pps.tv";u.create(v,{getDependentDoms:function(){return i=Q.$("#widget-refer")},check:function(e){return m(e),!!e},init:function(){var e=this;e.bind(),s=i.down('*[data-doms-elem="yingyin"]'),l=i.down('*[data-doms-elem="ysdq"]'),d=Q.$('*[data-widget-getUrl="baidudaoliu_url"]')},exec:function(){var e=this;e.regionFilter(),e.otaBindClick()},bind:function(){c=i.down('*[data-refer-close="x"]'),c&&c.on("click",function(e){Q.event.get(e).preventDefault(),i.hide()})},otaBindClick:function(){d&&d.on("click",function(e){var t=Q.event.get(e.event);t.preventDefault();var a={pubarea:d.attr("pubarea"),srcchannel:document.referrer};window.location.href=h.getDownloadUrl(a)})},regionFilter:function(){var e=this;if(!Q.browser.iPad){var t=e.isQiyiPPs();t||(n=new p,n.request({},function(t){if("A00000"===t.code&&(t=t.data,1!==t.province_id)){var a=f.check();if(a)l&&(l.show(),e.tosendPingback({block:"14082102_ysdq"}),c&&c.attr("rseat","vcha0822"));else if(s){if(s.show(),d){var n={pubarea:d.attr("pubarea"),srcchannel:document.referrer};d.attr("href",h.getDownloadUrl(n))}e.tosendPingback({block:"14080801_dlxz"}),c&&c.attr("rseat","cha0811")}i.show(),e.timeCountdown()}}))}},isQiyiPPs:function(){var e=document.referrer;if(!e)return!0;if(e=e.replace("http://",""),V=i.attr("data-from")||V,V=V.split(","),V&&V.length){e=e.split(".").splice(1).join(".");for(var t=0;t<V.length;){var a=V[t],n=e.indexOf(a);if(!n)return!0;t++}}return!1},timeCountdown:function(){var e=i.down('*[data-refer-elem="time"]');e&&(r=e.attr("data-maxtime")||30,r=parseInt(r,10),o=setInterval(function(){r--,e.html(r),r||(clearInterval(o),o=null,i.hide())},1e3))},tosendPingback:function(e){e=e||{};var t=Q.cookie.get("QC005"),a=g.getUid(),i=Q.cookie.get("QC006"),n=(new Date).getTime();b={t:21,bstp:"23_dlxzfc",pf:1,p:10,p1:101,block:e.block,u:t,pu:a,jsuid:i,rn:n},Q.log.server(b,y)}}),a.exports=v});
define("interfaces/ipRegionInterface.js",["../kit/remoteInterface"],function(e,t,a){var i=e("../kit/remoteInterface");a.exports=Q.Class("IpRegionInterface",{construct:function(){this._remoteInterface=new i({getZone:{url:"http://ip.geo.iqiyi.com/cityjson"}})},methods:{request:function(e,t){e=e||{},this._remoteInterface.send({ifname:"getZone",param:e,memory:!0,dataType:"jsonp"},function(a){t&&t(a,e)})}}})});
define("units/expandShare.js",["../components/units/pageJob","../components/action/checkDoms","../kit/conflictShow","../kit/userInfo"],function(e,t,a){var n,i,o=e("../components/units/pageJob"),r=e("../components/action/checkDoms"),s="expandShare",l=e("../kit/conflictShow"),d=e("../kit/userInfo"),c={},m=!1,h="disabled-btn",u=!1,p=0;try{p=Q.PageInfo.playPageInfo.userId}catch(f){}o.create(s,{getDependentDoms:function(){var e=Q.$("*[data-widget-expandshare=share]"),t=Q.$('*[data-funcareafloater-elem="share"]');return c={widget:e,panel:t,hoverDom:e.down("*[data-expandshare-ele]"),expandButton:e.down('[data-expandshare-expandbutton="button"]'),widgetPanel:t,funcs:Q.$("*[data-funcareafloater-elem]"),close:t.down('[data-expandshare-ele="close"]')}},check:function(e){return r(e),!0},init:function(){var e=!1,t=this;c.openClass=c.panel.attr("data-openclass")||"mod-share-pop-open";var a=Q.event.customEvent,o=function(){if(e=!1,c.hoverDom.removeClass("fsBg"),c.widgetPanel.hide(),c.panel.hasClass(c.openClass)){c.panel.removeClass(c.openClass);var t=c.widget.down('*[data-widget-sharecopy="sharecopy"]');t&&"none"!=t.css("display")&&t.hide()}},r=function(){e=!0,c.hoverDom.addClass("fsBg"),c.funcs.hide(),c.widgetPanel.show(),Q.event.customEvent.fire({type:"shareCopy-show"}),c.widgetPanel[0]&&l.reg("shareWatch",c.widgetPanel[0],o)};t.getCurrentUserStatus();var s=c.expandButton.attr("data-issetprivate");"true"===s&&(m=!1,Q.player.getVideoStatus&&t.getIsSupportUse(Q.player.getVideoStatus()),Q.event.customEvent.on("swf_playerStateChange",t.getIsSupportUse.bind(this)),a.on("login",function(){t.doPirvateHandel()}),a.on("logout",function(){t.doPirvateHandel()})),c.expandButton.on("click",function(){m||(e?o():r())}),Q.event.customEvent.on("hideShare",function(){o()}),c.close.on("click",function(){o()}),c.hover_dom=c.widget.down('[data-expandshare-ele="hover"]'),c.hover_dom&&(c.hover_dom.on("mouseenter",function(){clearTimeout(i),n=setTimeout(function(){r()},500),c.hover_dom.addClass("fsBg")}),c.hover_dom.on("mouseleave",function(){clearTimeout(n),e||c.hover_dom.removeClass("fsBg"),i=setTimeout(function(){o()},500)}),c.widgetPanel.on("mouseenter",function(){clearTimeout(i)}),c.widgetPanel.on("mouseleave",function(){i=setTimeout(function(){o()},500)}));var d=c.widget.down('*[data-sharecopy-elem="expand"]');d&&d.on("click",function(e){Q.event.get(e).preventDefault(),c.panel.addClass(c.openClass);var t=c.widget.down('*[data-widget-sharecopy="sharecopy"]');t&&"none"===t.css("display")&&t.css("display","")})},doPirvateHandel:function(){var e=this;e.getCurrentUserStatus(),e.changeUseStatus()},getIsSupportUse:function(e){var t=this;e=e||{},e=e.data||{};var a=e.state||"",n=e.privateVideo;("DataReady"==a||"Error"==a)&&("1"===n?m=!0:"0"===n&&(m=!1),t.doPirvateHandel())},changeUseStatus:function(){var e=c.expandButton;m?e.addClass(h):e.hasClass(h)&&e.removeClass(h)},getCurrentUserStatus:function(){var e=d.getUid();u=p==e?!0:!1}}),a.exports=s});
define("kit/conflictShow.js",[],function(e,t,a){var n=new Q.ic.InfoCenter({moduleName:"conflictShow"}),i={};a.exports={reg:function(e,t,a){if(e&&t){i.type=i.type||{},i.type.elements=i.type.elements||[];for(var o=!1,r=0,s=i.type.elements.length;s>r;r++){var l=i.type.elements[r];if(l.ele===t)o=!0;else try{Q.$(l.ele).hide(),l.hideHandler&&l.hideHandler()}catch(d){n.error("conflictShow type="+e+" runing an hideHanler error")}}o||i.type.elements.push({ele:t,hideHandler:a})}}}});
define("units/ThirdPartyTrigger.js",["../components/units/pageJob","../kit/userInfo","../kit/qiyiPlayer","../kit/parentByProp"],function(e,t,a){var n=e("../components/units/pageJob"),i="shareThirdPartyTrigger";e("../kit/userInfo");var o,r,s,l,d=e("../kit/qiyiPlayer").getPlayer("video"),c=e("../kit/parentByProp");o=Q.PageInfo&&Q.PageInfo.playPageInfo||{},r=o.tvId,s=o.albumId,l=o.cid,n.create(i,{check:function(){return!0},init:function(){var e=this;Q.event.customEvent.on("shareRenderDone",function(t){var a=t.data.wrap.down("[data-widget-shareplattrigger]");e.initWidget(a)}),Q.$(document).delegate("thirdshare",function(t){Q.event.get(t).preventDefault();var a=Q.$(t.target||t.srcElement),n=e.getProperty(a);n.type=1,e.trigger(n)});var t=Q.$("[data-widget-shareplattrigger]");return t?(this.initWidget(t),void 0):!1},getProperty:function(e){var t=e.attr("data-shareplattrigger-tvid")||r,a=e.attr("data-shareplattrigger-pic"),n=e.attr("data-shareplattrigger-videoname"),i=e.attr("data-shareplattrigger-href"),o=e.attr("data-shareplattrigger-source"),s=e.attr("data-shareplattrigger-resource")||"视频",l=e.attr("data-shareplattrigger-add"),d=e.attr("data-shareplattrigger-customtitle"),c=e.down("[data-share-type]")?e.down("[data-share-type]").attr("data-share-type")||"play":"play",m={};return m.title=d,{videotvid:t,videopic:a,custom:m,videoname:n,href:i,source:o,resource:s,add:l,shareType:c}},trigger:function(e){Q.event.customEvent.fire({type:"share_trigger",data:{href:e.href,type:e.type,shareType:e.shareType,source:e.source,resource:e.resource,add:e.add,tvid:e.videotvid,vu:e.videoname,vpic:e.videopic,custom:e.custom||"",sfrom:e.sfrom||"",target:e.target}})},initWidget:function(e){var t=this;e.forEach(function(e){var a=Q.$(e),n=t.getProperty(a),i={weixin:6,weixin_friends:8};a.delegate("thirdpartyitem",function(e){var a=Q.$(e.target),o=a.attr("data-share-trigger");if(o in i){var r=1;("weixin"==o||"weixin_friends"==o)&&(r=2);var s=Q.$("#data-shareplattrigger-info");if(s){var l=c(a,"data-widget-shareplattrigger","shareplat");n=t.getProperty(l)}"weixin"==o&&(n.sfrom="weixin"),"weixin_friends"==o&&(n.sfrom="weixin_friends"),n.type=r,n.target=a,Q.event.get(e.event).preventDefault(),t.trigger(n)}d.pause()})})}}),a.exports=i});
define("units/shareCopy.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../components/action/floater","../kit/userInfo"],function(e,t,a){var n=e("../components/units/pageJob"),i="shareCopy",o=e("../components/action/checkDoms"),r=e("../kit/qiyiPlayer").getPlayer("video"),s=e("../components/action/floater"),l=e("../kit/userInfo"),d={};n.create(i,{getDependentDoms:function(){var e=Q.$("[data-widget-sharecopy]"),t=Q.$("*[data-widget-expandshare=share]"),a=Q.$("[data-sharecopy-popup]");return d={widget:e,popup:a,panel:t,tip:e.down('[data-sharecopy-tips="tip"]'),popupConfirm:a.down("[data-sharecopy-popupconfirm]"),flashInput:e.down('[data-sharecopy-ele="flashurl"]'),htmlInput:e.down('[data-sharecopy-ele="htmlurl"]'),videoInput:e.down('[data-sharecopy-ele="videourl"]'),flashCopy:e.down('[data-sharecopy-ele="flashurlcopy"]'),htmlCopy:e.down('[data-sharecopy-ele="htmlurlcopy"]'),videoCopy:e.down('[data-sharecopy-ele="videourlcopy"]')}},check:function(){return o(),!0},getFlashHTML:function(e){var t="http://player.video.qiyi.com/";t+=e.vid,t+="/0/0/";var a=e.vu;if(!a)return"";var n=/com\/(.*)\./.exec(a)[1],i=n?n+".swf":"";t+=i;var o=e.bossStatus||0;return t+="-albumId="+e.aid+"-tvId="+e.tvid+"-isPurchase="+o+"-cnId="+e.c},isSupportClip:function(){return window.clipboardData&&window.clipboardData.clearData?!0:!1},sendPingback:function(e){Q.log.server({type:e,packgtype:"",ppuid:l.getUid()||"",pru:Q.cookie.get("P00PRU")||"",jsuid:Q.cookie.get("QC006")||"",flshuid:Q.cookie.get("QC005")||"",qtcurl:location.href||"",pagetype:"endpage",tn:Math.random()},"http://msg.71.am/tmpstats.gif")},copyUrl:function(){var e=this,t=e.clickTarget;if(this.isSupportClip()){window.clipboardData.clearData(),window.clipboardData.setData("Text",this.clickInput.value());var a=t.down("[data-sharecopy-copy]");if(a=null==a?t.down("span"):a,!a)return;a.html("成功"),setTimeout(function(){a.html("复制")},3e3)}else{this.floatShare=new s({overflow:"visible"}),this.floatShare.show({elem:this.doms.popup});var n=this.floatShare.getFloater();n.css("overflow","visible")}},refreshAddress:function(e){var t=e.vu||location.href,a=Q.url.getQueryValue(location.href,"list");a&&(t+="?list="+a),d.videoInput.value(t);var n=this.getFlashHTML(e);d.flashInput.value(n);var i;if(n){var o='<embed src="'+n+'" allowFullScreen="true" quality="high" width="480" '+'height="350" align="middle" allowScriptAccess="always" '+'type="application/x-shockwave-flash"></embed>';i=o}else i="";if(d.htmlInput.value(i),d.commonInput){var r="3955c3425820435e86d0f4cdfe56f5e7",s=1368,l="2.f22860a2479ad60d8da7697274de9346",c="&height=100%&width=100%",m='width="100%" height="100%"',h=e.tvid,u=e.vid,p='<iframe src="http://open.iqiyi.com/developer/player_js/coopPlayerIndex.html?';p+="vid="+u+"&tvId="+h+"&accessToken="+l+"&appKey="+r,p+="&appId="+s+c+'" frameborder="0" allowfullscreen="true" '+m+"></iframe>",d.commonInput.value(p)}},init:function(){var e=d.widget;d.commonCopy=e.down('[data-sharecopy-ele="commonurlcopy"]'),d.commonInput=e.down('[data-sharecopy-ele="commonurl"]');var t=d.panel.down("[data-sharecopy-elem=expand]");r.getVideoInfo(function(e){var a=e.plc[14].coa;"0"==a&&t.css("display","none")}),r.on("videoChanged",function(e){var a=e.plc[14].coa;"0"==a?t.css("display","none"):t.css("display","block")})},exec:function(){var e=this;this.doms=d,this.clickTarget="",this.clickInput="",this.isSupportClip()||d.tip.show(),d.videoInput.value(location.href),r.on("videoChanged",function(t){e.refreshAddress(t.data)}),r.on("liveChannelChanged",function(t){e.refreshAddress(t.data)});var t=!0;Q.event.customEvent.on("shareCopy-show",function(){t&&(r.getVideoInfo(function(t){e.refreshAddress(t)}),t=!1)}),d.popupConfirm.on("click",function(t){Q.event.get(t).preventDefault(),e.clickInput[0].focus(),e.clickInput[0].select(),e.floatShare.destroy(),e.floatShare=null}),d.videoCopy.on("click",function(t){Q.event.get(t).preventDefault(),e.clickTarget=d.videoCopy,e.clickInput=d.videoInput,e.copyUrl(),e.sendPingback("cpvdaddsclk")}),d.flashCopy.on("click",function(t){Q.event.get(t).preventDefault(),e.clickTarget=d.flashCopy,e.clickInput=d.flashInput,e.copyUrl(),e.sendPingback("cpflsaddsckl")}),d.htmlCopy.on("click",function(t){Q.event.get(t).preventDefault(),e.clickTarget=d.htmlCopy,e.clickInput=d.htmlInput,e.copyUrl(),e.sendPingback("cphtmlcdckl")}),d.commonCopy&&d.commonInput&&d.commonCopy.on("click",function(t){Q.event.get(t).preventDefault(),e.clickTarget=d.commonCopy,e.clickInput=d.commonInput,e.copyUrl(),e.sendPingback("cpcommoncdckl")})}}),a.exports=i});
define("units/share.js",["../components/units/pageJob","../action/share","../kit/shareTrigger","../kit/qiyiPlayer","../components/action/checkDoms"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../action/share"),o=e("../kit/shareTrigger");e("../kit/qiyiPlayer");var r,s=e("../components/action/checkDoms"),l=function(){var e=Q.$(this),t=new o({wrap:e});t.initPlay(e)},d="share";n.create(d,{getDependentDoms:function(){var e={shares:Q.$("*[data-widget-share]")};return e},check:function(){return!0},init:function(){var e=this;Q.event.customEvent.on("shareRenderDone",function(t){var a=t.data.wrap.down("*[data-widget-share]");e.initShare(a)});var t=this.getDependentDoms();s(t);var a=t.shares;this.initShare(a)},initShare:function(e){e.forEach(function(e){if(e=Q.$(e),!e.attr("isLoad")){var t,a=e.attr("data-share-sits"),n=e.attr("data-share-extend"),s=e.attr("data-widget-tpl");if(isNaN(parseInt(a,10))){n&&(t={name:"data-pb",value:n});var d=new i({doms:{wrap:e,autotpl:s},sits:a},t);d.init();var c=new o({wrap:e});c.init(e);var m=!1;"play"==e.attr("data-share-type")&&(r=l.bind(e),e.shareTrigger=r,this._player=Q.kit.QiyiPlayer.getPlayer("video"),this._player.on("dataready",function(){m||(r(),m=!0)}),this._player.getPlayInfo(function(e){!m&&e.tvid&&(r(),m=!0)}))}}})},destroy:function(){var e=this.getDependentDoms(),t=e.shares;t.forEach(function(e){e=Q.$(e),"play"==e.attr("data-share-type")&&Q.event.customEvent.un("loadComplete",e.shareTrigger)})}}),a.exports=d});
define("action/share.js",["../components/action/widget","../model/shareModel","../view/shareView"],function(e,t,a){var n=e("../components/action/widget"),i=e("../model/shareModel"),o=e("../view/shareView");new Q.ic.InfoCenter({moduleName:"Share"}),a.exports=Q.Class("Share",{extend:n,construct:function(e,t){e=e||{},e.model=e.model||new i(e,t),e.view=e.view||new o(e),this.callsuper(e)},methods:{init:function(){this.redraw()}}})});
define("model/shareModel.js",["../components/model/model","../kit/videoInfo"],function(e,t,a){var n=e("../components/model/model");e("../kit/videoInfo"),a.exports=Q.Class("ShareModel",{extend:n,construct:function(e,t){e=e||{},this.callsuper(),this.showSits=e.sits||"all",this.lineNum=e.lineNum||4,this._extend=t},methods:{init:function(){var e=this,t=/\{\{shrtgt}}/gi;if("all"==this.showSits){var a=e._getSits();this._extend&&a.forEach(function(a){var n=e._extend.value;t.test(n)&&(t.lastIndex=0,n=n.replace(t,a.shrtgt)),a.extendName=e._extend.name,a.extendValue=n}),e.set({sits:a})}else{var n=this.showSits.split(","),i=[];n.forEach(function(a){e._getSits().forEach(function(n){if(a==n.name){if(e._extend){var o=e._extend.value;t.test(o)&&(t.lastIndex=0,o=o.replace(t,n.shrtgt)),n.extendName=e._extend.name,n.extendValue=o}i.push(n)}})}),e.set({sits:i})}},_check:function(){},_getSits:function(){return this.sits?this.sits:(this.sits=[{name:"qqshare",title:"QQ好友",className:"ico_qq2013",shrtgt:"6",sharesrc:"503301_6",url:""},{name:"sina",title:"新浪微博",className:"ico_sina",shrtgt:"2",sharesrc:"503301_2",url:"http://v.t.sina.com.cn/share/share.php"},{name:"weixin",title:"微信好友",className:"ico_weixin",shrtgt:"8",sharesrc:"503301_8",url:"http://weixin.qq.com"},{name:"weixin_friends",title:"微信朋友圈",className:"ico_friends",shrtgt:"7",sharesrc:"503301_7",url:"http://weixin.qq.com"},{name:"qqweibo",title:"腾讯微博",className:"ico_qqweibo",shrtgt:"5",sharesrc:"503301_5",url:"http://v.t.qq.com/share/share.php"},{name:"qq",title:"QQ空间",className:"ico_qq",shrtgt:"4",sharesrc:"503301_4",url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey"},{name:"renren",title:"人人网",className:"ico_renren",shrtgt:"3",sharesrc:"503301_3",url:"http://widget.renren.com/dialog/share"},{name:"baidu",title:"百度贴吧",className:"ico_baidu",shrtgt:"11",sharesrc:"503301_11",url:"http://tieba.baidu.com/f/commit/share/openShareApi"}],this.sits)},reSet:function(){}}})});
define("view/shareView.js",["../components/view/widgetView"],function(e,t,a){var n=e("../components/view/widgetView");a.exports=Q.Class("ShareView",{extend:n,construct:function(e){this.callsuper(e)},properties:{_livetpl:["{{#sits}}",'<a href="{{url}}" title="{{title}}" {{#extendName}} {{extendName}}="{{extendValue}}" {{/extendName}} data-pb-shrtgt={{shrtgt}} rseat="clkshr_{{shrtgt}}" j-delegate="thirdpartyitem"class="share-icon share-icon-{{className}}" data-share-trigger="{{name}}"target="_blank" title="{{title}}"></a>',"{{/sits}}"].join(""),_tpl:["{{#sits}}",'<a href="{{url}}" title="{{title}}" {{#extendName}} {{extendName}}="{{extendValue}}" {{/extendName}} data-pb-shrtgt={{shrtgt}} rseat="clkshr_{{shrtgt}}" j-delegate="thirdpartyitem"class="j-share-trigger servIco {{className}}" data-share-trigger="{{name}}"target="_blank" title="{{title}}"></a>',"{{/sits}}"].join(""),_tpl2:["{{#sits}}",'<li><a href="{{url}}" title="{{title}}" {{#extendName}} {{extendName}}="{{extendValue}}" {{/extendName}} data-pb-shrtgt={{shrtgt}}  rseat="clkshr_{{shrtgt}}" j-delegate="thirdpartyitem" data-share-trigger="{{name}}"target="_blank" title="{{title}}"><i class="j-share-trigger servIco {{className}}"></i>{{title}}</a></li>',"{{/sits}}"].join(""),_tpl3:["{{#sits}}",'<li><a href="{{url}}" title="{{title}}" {{#extendName}} {{extendName}}="{{extendValue}}" {{/extendName}} data-pb-shrtgt={{shrtgt}} rseat="clkshr_{{shrtgt}}" j-delegate="thirdpartyitem" data-share-trigger="{{name}}"target="_blank" title="{{title}}"><i class="j-share-trigger btn-share share-{{className}}"></i><br />{{title}}</a></li>',"{{/sits}}"].join(""),_tpl4:["{{#sits}}",'<li><a href="{{url}}" title="{{title}}" data-shareplattrigger-videoname={{videoName}} data-shareplattrigger-href={{videoUrl}} {{#extendName}} {{extendName}}="{{extendValue}}" {{/extendName}} data-pb-shrtgt={{shrtgt}}  rseat="clkshr_{{shrtgt}}" j-delegate="thirdpartyitem" data-share-trigger="{{name}}"target="_blank" title="{{title}}"><i class="j-share-trigger servIco {{className}}" ></i>{{title}}</a></li>',"{{/sits}}"].join(""),_tpl5:["{{#sits}}",'<li><a href="{{url}}" {{#extendName}}{{extendName}}="{{extendValue}}"{{/extendName}} data-pb-shrtgt={{shrtgt}}  rseat="clkshr_{{shrtgt}}" j-delegate="thirdpartyitem" data-share-trigger="{{name}}" {{#sharesrc}}data-pb-sharesrc="{{sharesrc}}"{{/sharesrc}} target="_blank" title="{{title}}"><i class="j-share-trigger btn-share share-{{className}}"></i></a></li>',"{{/sits}}"].join(""),_tpl6:["分享到：{{#sits}}",'<a href="{{url}}" {{#extendName}}{{extendName}}="{{extendValue}}"{{/extendName}} data-pb-shrtgt={{shrtgt}}  rseat="clkshr_{{shrtgt}}" j-delegate="thirdpartyitem" data-share-trigger="{{name}}" {{#sharesrc}}data-pb-sharesrc="{{sharesrc}}"{{/sharesrc}} target="_blank" title="{{title}}"><span class="msmr-bg-img msmri-share-{{name}}">{{title}}</span></a>',"{{/sits}}"].join("")},methods:{init:function(e){this.callsuper("init",e),this.tpl=this._tpl,this._doms.autotpl&&"2"===this._doms.autotpl?this.tpl=this._tpl2:this._doms.autotpl&&"3"===this._doms.autotpl?this.tpl=this._tpl3:this._doms.autotpl&&"4"===this._doms.autotpl?this.tpl=this._tpl4:this._doms.autotpl&&"5"===this._doms.autotpl?this.tpl=this._tpl5:this._doms.autotpl&&"6"===this._doms.autotpl?this.tpl=this._livetpl:this._doms.autotpl&&"7"===this._doms.autotpl&&(this.tpl=this._tpl6)},update:function(e){var t=this;if(e.sits){var a=t._doms.wrap.attr("data-share-shorttitle")||'{"weixin_friends":"朋友圈"}';if(a){a=JSON.parse(a)||{};for(var n=0;n<e.sits.length;n++){var i=e.sits[n];for(var o in a)i.name===o&&(i.title=a[o])}}if(this._doms.autotpl&&"6"===this._doms.autotpl)for(var r=["sina","q-zone","q-weibo","renren","wx-friends","baidu-t"],s=0;s<e.sits.length;s++){var l=e.sits[s];l.className=r[s]}if(this._doms.autotpl&&"4"===this._doms.autotpl){var d=this._doms.wrap;e.videoName=d.attr("data-share-playurl"),e.videoUrl=d.attr("data-share-playurl")}var c=Q.plugins.Mustache.render(this.tpl,e),m=this._doms.wrap.attr("data-share-pos");m?this._doms.wrap.html(m,c):this._doms.wrap.html(c),this._doms.wrap.attr("isLoad","true")}}}})});
define("kit/shareTrigger.js",["../config/siteDomain","../kit/qiyiPlayer","../interfaces/shareVideoInterface","../kit/artTemplate"],function(e,t,a){var n=e("../config/siteDomain"),i=e("../kit/qiyiPlayer");new Q.ic.InfoCenter({moduleName:"ShareTrigger"});var o=i.getPlayer("video"),r=e("../interfaces/shareVideoInterface"),s=e("../kit/artTemplate"),l=location.pathname,d=location.href,c=d.indexOf("v_")>=0||l.indexOf("w_")>0,m=d.indexOf("a_")>=0,h=d.indexOf("www.iqiyi.com/u")>=0||d.indexOf("i.iqiyi.com")>=0,u={};u.SITE_DOMAIN="www.iqiyi.com";var p=Q.Class("ShareTrigger",{construct:function(e){this.wrap=e.wrap},properties:{excluesiveTpl:"【视频：{{videoName}}】（分享@爱奇艺）",normalTpl:"【视频：{{videoName}}】（分享@爱奇艺）",albumTpl:"【专辑：{{videoName}}】（分享@爱奇艺）",livePlayTpl:"我在爱奇艺看直播，《{{videoName}}》#爱直播，就在爱奇艺#"},methods:{getPosition:function(){var e="";return c?e="2_1":m?e="5_1":h&&(e="7_1"),e},init:function(){var e=this,t=e.getInfo();if("url"==t.type||"musicbang"==t.type||"album"==t.type||"qiji"==t.type||"ugcFans"==t.type){var a=e.getVideoInfo(t);e.wrap.down("a[data-share-trigger]").forEach(function(n){n=Q.$(n),n&&e.resetUrl(n,t,a)})}else"customlist"==t.type?Q.event.customEvent.on("custom-list-share",function(){e.share()}):"qidanlist"==t.type?Q.event.customEvent.on("qidan-list-share",function(){e.share()}):e.share()},share:function(){var e=this,t=e.getInfo();o.getVideoInfo(function(a){var n=e.getVideoInfo(t,a);e.wrap.down("a[data-share-trigger]").forEach(function(a){e.resetUrl(a,t,n)})}),e.wrap.attr("data-share-pagetype");var a="",i="",s="",l=1;o.getVideoInfo(function(e){a=e.c,s=e.aid,l=e.isUgc?1:4,i=e.tvid}),o.on("videoChanged",function(n){var o=n.data;a=o.c,s=o.aid,l=o.isUgc?1:4,i=n.data.tvid;var r=e.getVideoInfo(t,o);o.vu&&(r.url=o.vu),e.wrap.down("a[data-share-trigger]").forEach(function(a){e.resetUrl(a,t,r)})});var d=navigator.userAgent.toLowerCase();/ipad/.test(d)?21:Q.browser.android||Q.browser.iPhone||Q.browser.WP?31:11;var c=1,m=10,h=101;(Q.browser.android||Q.browser.iPhone||Q.browser.WP||Q.browser.iPad)&&(c=2,m=20,h=201),n.isPPS()&&(c="20"+c);var u=e.wrap.attr("data-pb-s2")||"",p=e.wrap.attr("data-pb-shrtp")||"";e.wrap.down("a[data-share-trigger]").forEach(function(e){var a=Q.$(e);a.on("click",function(){var e="http://msg.71.am/b",n=a.attr("data-share-trigger");if("play"==t.type){var o=new r;o.shareVideo({type:33,tvid:i,tvid_type:64,aid:s,aid_type:l,source:21,destination:n})}var d=Q.$(this),f=d.attr("rseat"),U="30_shr",V=d.attr("data-pb-shrtgt")||0,g=Q.cookie.get("QC005")||"",v=Q.cookie.get("P00003")||"",y={t:20,pf:c,p:m,p1:h,rseat:f,u:g,pu:v,bstp:U,s2:u,shrtgt:V,shrtp:p,tn:Math.random()};Q.log.server(y,e)})})},initPlay:function(){var e=this,t=e.getInfo();"play"==t.type&&e.getPlayerVideoInfo(t,function(a){e.wrap.videoInfo=a,e.wrap.down("a[data-share-trigger]").forEach(function(n){n=Q.$(n),e.resetUrl(n,t,a)})})},getInfo:function(){var e=this,t={};return e.wrap&&(t.weiboName=e.wrap.attr("data-share-weiboName")||"",t.qqWeiBoName=e.wrap.attr("data-share-qqWeiBoName")||"",t.titleL=e.wrap.attr("data-share-infoTitleL")||"",t.titleR=e.wrap.attr("data-share-infoTitleR")||"",t.title=e.wrap.attr("data-share-title")||"",t.subTitle=e.wrap.attr("data-share-subTitle")||"",t.duration=e.wrap.attr("data-share-duration")||"",t.type=e.wrap.attr("data-share-type")||"",t.playUrl=e.wrap.attr("data-share-playUrl")||"",t.img=e.wrap.attr("data-share-img")||"",t.plnamebefore=e.wrap.attr("data-share-plnameb")||"",t.plnameafter=e.wrap.attr("data-share-plnamea")||"",t.custom=e.wrap.attr("data-share-custom")||"",t.excluesive=e.wrap.attr("data-share-excluesive")||"",t.tpl=e.wrap.attr("data-share-tpl")||"",t.topicName=e.wrap.attr("data-share-topicName")||"",t.topicUrl=e.wrap.attr("data-share-topicUrl")||""),t},getShareQQ:function(e,t,a){var n=[];e=e||{};var i,r=a(t);i=e.url.indexOf("?")>-1?"&src=sharemodclk131212":"?src=sharemodclk131212";var s=(e.url||location.href)+i;o._tvid&&!Q.array.isArray(o._tvid)&&o.getVideoInfo(function(n){n.topicName=t.topicName,n.videoName=n.vn,r=a(n),s=n.vu+i,e.site="来自爱奇艺",e.desc=r,e.pics=n.apic}),s=this.getListUrl(s);var l={url:s,desc:r,title:e.title||"来自爱奇艺",summary:e.summary||" ",pics:e.pics||"",flash:e.flash||"",site:e.site||"",style:e.style||"201",width:e.width||32,height:e.height||32};for(var d in l)n.push(d+"="+encodeURIComponent(l[d]||""));var c="http://connect.qq.com/widget/shareqq/index.html?";return c+=n.join("&")},resetUrl:function(e,t,a){if(e=Q.$(e),e.attr("data-share-trigger")&&a){var i=this;t.plname=i.wrap.attr("data-share-plname")||"";var o,r,l,d,m=t.titleL||"",h=t.titleR||"",u=function(){var e;e="function"==typeof a.url?a.url():a.url;var t;t=e.indexOf("&")>-1||e.indexOf("?")>-1?"&":"?";var n;return n=a.duration?t+"share_sTime=0-share_eTime="+a.duration:"",e+n}(),p=t.topicName,f=t.topicUrl;d="function"==typeof a.title?a.title():a.title,l="customlist"===t.type?m+t.plname+t.plnamebefore+t.plnameafter+d+h:m+d+h,window.flashUrl||"";var U=encodeURIComponent("http://"+n.SITE_DOMAIN);window.info&&t.data&&t.data.videoDesc||"",encodeURIComponent(l),o=e.attr("data-share-trigger"),r=e.attr("href"),r.indexOf("?")>-1&&(r=r.substring(0,r.indexOf("?"))),a.subTitle&&(l+="，"+a.subTitle),l=encodeURIComponent(l);var V="",g=this.normalTpl;(1==a.exclusive||t.excluesive)&&(g=this.excluesiveTpl);var v;v=u.indexOf("?")>-1?"&src=sharemodclk131212":"?src=sharemodclk131212",("play"==t.type||"musicbang"==t.type)&&(u+=v),t.tpl&&(g=t.tpl),"album"==t.type&&(g=this.albumTpl),"live_play"==t.type&&(g=this.livePlayTpl);var y=s.compile(g);d=t.title?t.title:d;var b={videoName:d,topicName:p,topicUrl:f},k=y(b);if(V=encodeURIComponent(k),u=encodeURIComponent(this.getListUrl(u)),t.playUrl&&(u=encodeURIComponent(t.playUrl),a.url=t.playUrl),"qiji"==t.type){var w=e.attr("data-pb-sharesrc");w&&(u+=encodeURIComponent("&src="+w))}switch(o){case"sina":r+="?appkey=1925825497&url=",r+=u,r+="&title="+V,c&&(r+="&searchPic=false"),r+="&content=utf-8",r+="&pic="+t.img;break;case"baidu":r+="?title="+V+"&url=",r+=u,r+="&pic="+t.img;break;case"renren":r+="?link="+u+"&title="+V,r+="&pic="+t.img;break;case"qqshare":a.pics=t.img,r=this.getShareQQ(a,b,y),e.attr("title","分享给好友");break;case"qq":r+="?desc="+V+"&url="+u.split("=").join("%3D"),r+="&pics="+t.img;break;case"qqweibo":r=r+"?url="+u+"&appkey=7e286cd449a84362adc6f010f63efdd7&site="+U+"&title="+V,r+="&pic="+t.img}e.attr("href",r)}},getListUrl:function(e){var t=Q.url.getQueryValue(location.href,"list");if(t){var a;-1===e.indexOf("list")&&(e.indexOf("?")>-1?(a=e.split("?"),e=a[0]+"?list="+t+"&"+a[1]):e.indexOf("&")>-1?(a=e.split("&"),e=a[0]+"?list="+t+"&"+a[1]):e=e+"?list="+t)}return e},getVideoInfo:function(e,t){return t=t||{},u.ipad?{url:e.url||location.href.split(".html")[0]+".html",duration:this.getVideoDuration(),exclusive:t.exclusive,title:e.title||t.vn||document.title,subTitle:e.subTitle||""}:"musicbang"==e.type||"ugcFans"==e.type?{url:e.playUrl,duration:"",exclusive:t.exclusive,title:e.title||t.vn||document.title,subTitle:e.subTitle||""}:e.type?{url:location.toString(),duration:"",exclusive:t.exclusive,title:e.title||t.vn||document.title,subTitle:e.subTitle||""}:{url:location.href.split(".html")[0]+".html",duration:"",exclusive:t.exclusive,title:e.title||t.vn||document.title}},getPlayerVideoInfo:function(e,t){if(t){var a=i.getPlayer("video");a?a.getVideoInfo(function(a){a.vu?t({url:a.vu,duration:"",exclusive:a.exclusive,title:a.vn}):t({url:location.href.split(".html")[0]+".html",duration:"",exclusive:a.exclusive,title:e.title||document.title})}):t({url:location.href.split(".html")[0]+".html",duration:"",title:e.title||document.title})}},getVideoDuration:function(e){return e&&e.duration?"":""}}});a.exports=p});
define("interfaces/shareVideoInterface.js",["../kit/remoteInterface"],function(e,t,a){var n=e("../kit/remoteInterface"),i=Q.Class("ShareVideoInterface",{construct:function(){this._remoteInterface=new n({getVideoList:{url:"http://api.t.iqiyi.com/qx_api/comment/sharevideo"}})},methods:{request:function(e,t){e=e||{};var a=e.method||"GET",n={dataType:"GET"==a?"jsonp":"",ifname:e.ifname,method:a,param:e,antiCsrf:!0};this._remoteInterface.send(n,t)},shareVideo:function(e,t){this.request(Q.object.extend(e,{ifname:"getVideoList"}),t)}}});a.exports=i});
define("units/shareToWeiXin.js",["../components/units/pageJob","../components/action/floater","../components/action/checkDoms","../kit/parentByProp","../kit/qiyiPlayer","../kit/qrCoder","../kit/userInfo"],function(e,t,a){var n,i=e("../components/units/pageJob"),o="shareToWeixin",r=e("../components/action/floater"),s=e("../components/action/checkDoms"),l=e("../kit/parentByProp"),d=e("../kit/qiyiPlayer").getPlayer("video"),c=e("../kit/qrCoder"),m=e("../kit/userInfo"),h=Q.PageInfo&&Q.PageInfo.playPageInfo||{},u=h.position,p="";i.create(o,{getDependentDoms:function(){var e=Q.$("#widget-sharethirdpartyqrcode")||Q.$("[data-widget-sharethirdparty=weixin]");return e&&e.length>0&&(n={widget:e,weixinFly:e.down('[data-sharethirdparty-ele="weixinfly"]'),animTrigger:e.down('[data-sharethirdparty-ele="anim"]'),ie6Weixin:e.down('[data-sharethirdparty-ele="ie6weixin"]'),close:e.down('[data-sharethirdparty-ele="close"]'),qrImg:e.down('[data-sharethirdparty-ele="qrimage"]'),videoName:e.down('[data-sharethirdparty-ele="videoname"]'),ptClass:e.down('[data-sharethirdparty-ele="ptcls"]')}),n},check:function(e){var t=!0;return s(e),t},init:function(){this.doms=n,this.tempVideoInfo={};var e=n.widget.attr("data-sharethirdparty-videoname")||h.tvName,t=n.widget.attr("data-sharethirdparty-url")||h.pageUrl;this.saveVideoInfo({data:{tvName:e,vu:t||location.href}});var a=this;a.initEvent(n),Q.event.customEvent.on("share_trigger",function(e){if(2!==e.data.type)return!0;a.playtype=e.data.type;var t;if(2==a.playtype&&(t="微信",a.flyAnim=Q.anim(n.weixinFly),a.fly=n.weixinFly,a.ie6fly=n.ie6Weixin,n.ptClass.attr("class","wx-code")),Q.browser.IE6&&a.ie6fly&&a.ie6fly.show(),"qiji"===u&&e.data.sfrom&&("weixin"==e.data.sfrom||"weixin_friends"==e.data.sfrom)){var i="";p||(p=a.tempVideoInfo.video,p+=p.indexOf("?")>=0?"&":"?"),"weixin"==e.data.sfrom?i=p+"src=503301_8":"weixin_friends"==e.data.sfrom&&(i=p+"src=503301_7"),a.tempVideoInfo.video=i}var o=n.widget.down("[data-sharethirdparty-pf]");o&&o.html(t);var r=n.widget.down('[data-sharethirdparty-resource="resource"]');r&&r.html(e.data.resource||"视频"),a.initFloat(e)}),Q.event.customEvent.on("weixinRenderDone",function(e){a.saveVideoInfo(e)})},initEvent:function(){var e=this,t=this.doms,a=t.animTrigger,n=t.close;t.widget.down("a").on("click",function(e){Q.event.get(e).preventDefault()}),n.on("click",this.hideFloater.bind(this)),Q.browser.IE6||(a.on("mouseenter",this.tipAnim.bind(this)),a.on("mouseleave",function(){e.flyAnim.stop(),e.fly.hide()}));var i=t.widget.attr("data-sharethirdparty-type");"url"!=i&&(d.on("videoChanged",function(t){e.saveVideoInfo(t);var a=Q.$("#data-shareplattrigger-info");if(a){var n=t.data.vu||location.href,i=t.data.tvName||t.data.vn||document.title;a.attr("data-shareplattrigger-href",n),a.attr("data-shareplattrigger-videoname",i)}}),d.getPlayInfo(function(t){e.saveVideoInfo(t)}),d.on("dataready",function(){d.getPlayInfo(function(t){e.saveVideoInfo(t)})}))},saveVideoInfo:function(e){if(e.data){this.tempVideoInfo.video=e.data.vu||location.href;var t="?";this.tempVideoInfo.video.indexOf("?")>=0&&(t="&"),this.tempVideoInfo.video+=t+"msrc=10_107_192";var a=Q.url.getQueryValue(location.href,"list");a&&(this.tempVideoInfo.video+="&list="+a),this.tempVideoInfo.name=e.data.tvName||e.data.vn||document.title}},initFloat:function(e){this.floatShare=new r({overflow:"visible",isResponsive:!0}),this.floatShare.show({elem:this.doms.widget});var t=Q.$("[data-widget-share]"),a="",n="",i=this.floatShare.getFloater(),o="",s=e.data.target;s=l(s,"data-widget-share","live_Share");var d="";s?(d=s.attr("data-share-tpl"),e.data.href=s.attr("data-share-playurl")):(o=e.data.vu&&e.data.href?e.data.vu:this.tempVideoInfo.name,t&&(a=t.attr("data-share-topicname"),n=t.attr("data-share-topicurl")),d="《"+o+"》",n&&a&&(d="#"+a+"#《"+o+"》参与话题："+n),"url"===e.data.shareType&&(d=e.data.vu||d)),"live_play"===e.data.shareType&&(d="我在爱奇艺看直播，《"+t.attr("data-share-title")+"》#爱直播，就在爱奇艺#",e.data.href=location.href),this.doms.videoName.html(d),i.css("overflow","visible"),this.reset(),this.loadQrCode(e)},reset:function(){this.doms.qrImg.attr("src","")},loadQrCode:function(e){var t=this.tempVideoInfo.video;e.data.href&&(t=e.data.href);var a=t.replace(/^(http:\/\/)/,""),n=m.getUid();n&&(a+=a.indexOf("?")>-1?"&":"?",a+="u1=qyid"+n),a=encodeURIComponent(a);var i="http://bird.sns.iqiyi.com/jump?jump_url="+a,o={data:i,width:162},r=c.getQrCoder(o),s=this.doms.qrImg;s.attr("src",r)},tipAnim:function(){this.fly.show(),this.flyAnim.stop(),this.flyAnim.duration(700).ease("Linear").from("bottom",70).from("left",200).to("left",0).to("bottom",0).onDone(function(){}).go()},hideFloater:function(){this.floatShare&&(this.floatShare.destroy(),this.floatShare=null)}}),a.exports=o});
define("units/watchByPhoneV2.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/appstorePhonePushInterface","../kit/qrCoder","../kit/qiyiPlayer","../kit/userInfo","../kit/iframeLocation","../kit/conflictShow","../kit/formatSecondsWithText","../components/action/floater","../action/qipaLogin","../kit/loginFloater","../interfaces/appstore/getDevicesStatusInterface"],function(e){var t=e("../components/units/pageJob"),a=e("../components/action/checkDoms"),n=e("../interfaces/appstorePhonePushInterface"),i=e("../kit/qrCoder"),o=e("../kit/qiyiPlayer"),r=e("../kit/userInfo"),s=e("../kit/iframeLocation"),l=e("../kit/conflictShow"),d=e("../kit/formatSecondsWithText"),c=e("../components/action/floater"),m=e("../action/qipaLogin");e("../kit/loginFloater");var h,u,p,f,U,V,g,v,y,b,k="JUAW6YM3LDCP2SFGRVBH145QIZ0O79ETN8XK",w=e("../interfaces/appstore/getDevicesStatusInterface"),x="watchByPhoneV2",_=0,L=!1,I=null,W=0,X=!1;V=Q.PageInfo&&Q.PageInfo.playPageInfo||{},g=V.tvId,v=V.albumId,y=V.cid,b=V.userId;var C={},K=!1,E="disabled-btn",T=!1,S={pf:1,p:10,p1:101,u:Q.cookie.get("QC005")||"",pu:r.getUid()||"",jsuid:Q.cookie.get("QC006")||""};t.create(x,{getDependentDoms:function(){var e=Q.$("#widget-watchbyphonev2");return h={wrap:e,image:Q.$("#data-watchbyphone-image"),view:Q.$("*[data-funcareafloater-elem='phone']"),funcarea:Q.$("*[data-funcareafloater-elem]")}},check:function(e){return a(e),!0},init:function(){if(Q.browser.iPad)return h.wrap.hide(),!1;var e=Q.event.customEvent;h.closeBtn=Q.$("#data-watchbyphone-closebtn"),I=location.protocol+"//"+location.hostname+location.pathname;var t=o.getPlayer("video"),a=this,n=Q.$("#data-watchbyphone-title");t.on("videoChanged",function(e){n&&n.html(e.data.vn),I=e.data.vu,h.image.attr("data-image-id",e.data.aid),h.image.attr("data-image-tvid",e.data.tvid),_=0,L&&(a.doCodeImg({url:I}),_=1)}),a.getCurrentUserStatus();var i=h.wrap.attr("data-issetprivate");"true"===i&&(K=!1,Q.player.getVideoStatus&&this.getIsSupportUse(Q.player.getVideoStatus()),Q.event.customEvent.on("swf_playerStateChange",a.getIsSupportUse.bind(this)),e.on("login",function(){a.doPirvateHandel()}),e.on("logout",function(){a.doPirvateHandel()})),this.bindEvent(),this.bindTipEvent()},getIsSupportUse:function(e){var t=this;e=e||{},e=e.data||{};var a=e.state||"",n=e.privateVideo;("DataReady"==a||"Error"==a)&&("1"===n?K=!0:"0"===n&&(K=!1),t.doPirvateHandel())},doPirvateHandel:function(){var e=this;e.getCurrentUserStatus(),e.changeUseStatus()},changeUseStatus:function(){var e=h.wrap;K?T?e.hasClass(E)&&e.removeClass(E):e.addClass(E):e.hasClass(E)&&e.removeClass(E)},getCurrentUserStatus:function(){var e=r.getUid();T=b==e?!0:!1},doCodeImg:function(e){var t=e.url,a=h.image,n=t+"?qr=page",r={},s=a.attr("data-image-code_type")||"3",l=a.attr("data-image-fromtype")||"27",c=a.attr("data-image-subtype")||"4",m=a.attr("data-image-category_id")||y||"",u=a.attr("data-image-id")||v||"",p=a.attr("data-image-tvid")||g||"";n+="&Code_type="+s,n+="&Fromtype="+l,n+="&Subtype="+c,n+="&category_id="+m,n+="&id="+u,n+="&tvid="+p;var f,U=null,V="",b=!1;if(4==parseInt(c,10)){var k=Q.$("#data-watchbyphone-time");o.getPlayer("video").getPlayInfo(function(e){b=!0,V=(e.currentTime+"").split(".")[0]||"0",n+="&progress="+V,r.data=n,U=i.getQrCoder(r),a.attr("src",U),k&&k.html(d(parseInt(e.currentTime,10)))}),f&&clearTimeout(f),f=setTimeout(function(){b||(n+="&progress=0",r.data=n,U=i.getQrCoder(r),a.attr("src",U),k&&k.html(d(0)))},500)}else r.progress="0",n+="&progress="+V,r.data=n,U=i.getQrCoder(r),a.attr("src",U)},closeView:function(){h.funcarea.hide(),L=!1},bindEvent:function(){var e=Q.$("*[data-watchbyphone-pingback=item]");e&&e.on("click",function(e){var t=Q.$(this),a=t.attr("data-watchbyphone-pagetype"),n=t.attr("data-watchbyphone-type"),i=t.attr("href");Q.log.server({type:n,packgtype:a||"",ppuid:r.getUid()||"",jsuid:Q.cookie.get("QC006")||"",flshuid:Q.cookie.get("QC005")||"",qtcurl:s.url()||"",pagetype:"endpage",enttype:"mobilecltdwnld",tn:Math.random()},"http://msg.71.am/tmpstats.gif"),"_blank"!==t.attr("target")&&(Q.event.get(e).stop(),setTimeout(function(){location.href=i},1e3))});var t=this,a=h.wrap.attr("data-expand-trigger")||"hover";h.wrap.on("click",function(){return K?!1:(t.show(),void 0)}),Q.browser.iPad||"hover"==a&&(h.wrap.on("mouseenter",function(){clearTimeout(U),f=setTimeout(function(){t.show(!0)},500)}),h.wrap.on("mouseleave",function(){clearTimeout(f),U=setTimeout(function(){h.view.hide(),L=!1},3e3)}),h.view.on("mouseenter",function(){clearTimeout(U)}),h.view.on("mouseleave",function(){U=setTimeout(function(){h.view.hide(),L=!1},3e3)})),h.closeBtn&&h.closeBtn.on("click",function(e){Q.event.get(e).stop(),t.closeView()});var n=Q.$("#data-watchbyphone-openapp");if(n){var i=new c;n.on("click",function(){i.show({elem:Q.$("#data-watchbyphone-dlf")})}),Q.$("#data-watchbyphone-dlf .mobile-btn-close").on("click",function(){i&&i.hide()})}var o=Q.$("#data-watchbyphone-pushphone");o&&(C.searching=Q.$("#data-watchbyphone-searching"),C.searchfailed=Q.$("#data-watchbyphone-searchfailed"),C.searchresult=Q.$("#data-watchbyphone-searchresult"),C.download=Q.$("#data-watchbyphone-download"),C.logintip=Q.$("#data-watchbyphone-logintip"),C.successpanel=Q.$("#data-watchbyphone-tuisongsuccess"),o.on("click",function(e){Q.event.get(e).preventDefault(),t.doVideoPush()}))},bindTipEvent:function(){var e=Q.$("#watchbyphoneTip"),t=Q.$("#watchbyphoneTipClose"),a=Q.cookie.get("QC115"),n=!1;e&&t&&(a?parseInt(a,10)<3&&(Q.cookie.set("QC115",parseInt(a,10)+1+"",{expires:864e5,path:"/"}),n=!0):(Q.cookie.set("QC115","1",{expires:864e5,path:"/"}),n=!0),n&&(e.show(),l.reg("shareWatch",e[0]),t.on("click",function(t){Q.event.get(t).stop(),e.hide()})),e.on("click",function(e){Q.event.get(e).stop()}),Q.browser.iPad||e.on("mouseover",function(e){clearTimeout(f),Q.event.get(e).stop()}))},show:function(e){var t=this;if("block"===h.view.css("display")){if(e)return;t.closeView()}else Q.log.server({type:"qiyimobile130930_show",packgtype:"",ppuid:r.getUid()||"",jsuid:Q.cookie.get("QC006")||"",flshuid:Q.cookie.get("QC005")||"",qtcurl:s.url()||"",pagetype:"endpage",enttype:"mobilecltdwnld",tn:Math.random()},"http://msg.71.am/tmpstats.gif"),t.closeView(),h.view.show(),l.reg("shareWatch",h.view[0]),setTimeout(function(){_=0,_||(t.doCodeImg({url:I}),_=1)},0),L=!0},doVideoPush:function(){var e=0,t=this;p||(p=new c,p.getFloater().delegate("watchbyphone-showlogintip",function(){p.show({elem:C.logintip})}),p.getFloater().delegate("watchbyphone-showdownload",function(){p.show({elem:C.download})}),p.getFloater().delegate("watchbyphone-showfinddevices",function(){t.doVideoPush()}));var a=function(){p.show({elem:C.searching}),p.getFloater().delegate("closeWBPfloater",function(){p.hide()});var a=Q.cookie.get("P00001");u.requestSrch({authcookie:a},function(a){setTimeout(function(){var i=[];if("A00000"==a.code)for(e=0;e<a.data.length;e++){var r=a.data[e];21==r.agenttype&&i.push(r)}if(0===i.length)p.hide(),p.show({elem:C.searchfailed,replace:!0});else{i.length<3?(C.searchresult.down('[data-slide-elem="pbtn"]').hide(),C.searchresult.down('[data-slide-elem="nbtn"]').hide()):(C.searchresult.down('[data-slide-elem="pbtn"]').show(),C.searchresult.down('[data-slide-elem="nbtn"]').show()),C.searchresult.down(".js_watchbyphone-searcuresultcount").html(i.length);var s=C.searchresult.down("[data-slide-elem='list']"),l=C.searchresult.down("[data-watchbyphone-btn='startlinkdevice']");X||(X=!0,s.delegate("wbpListItem",function(e){var t=Q.$(e.target||e.srcElement);t.hasClass("selected")?t.removeClass("selected"):t.addClass("selected")}),l.on("click",function(){var e=o.getPlayer("video");e.getVideoInfo(function(e){var a=t.getPushParam(s,e.tvid,e.vn);if(a){var i=a.device_ids.split(","),o=i.length;t.sendOptionPingback({devino:o,t:20,rseat:"15030901_conet"}),(new n).request(a,function(){C.successpanel.down(".img img").attr("src",e.vpic),C.successpanel.down(".succeed em").html(e.vn),p.show({elem:C.successpanel,replace:!0})})}})})),s.removeClass().addClass("li-num-"+a.data.length);var d="";for(e=0;e<i.length;e++){var c=i[e];d+='<li j-delegate="wbpListItem" data-deviceid="'+c.device_id+'">'+'<a href="javascript:void(0);" class="pop_Fac"> <span class="pop_Fac-phone">'+"</span> <p>"+c.device_name+"</p> <i></i> </a> </li>"}s.html(d),p.show({elem:C.searchresult,replace:!0}),i.length>2&&setTimeout(function(){Q.event.customEvent.fire({type:"lazyInitSlide",data:{widget:Q.$("#data-watchbyphone-srslide")}})},100)}},1e3)})};u||(u=new w),r.isLogin()?a():(t.sendOptionPingback({t:21,block:"1503091_lgshw"}),m.openLoginWindow({},a))},sendOptionPingback:function(e){e=e||{};var t=(new Date).getTime(),a={rn:t};Q.object.extend(a,e),Q.object.extend(a,S),Q.log.server(a,"http://msg.71.am/b")},getPushParam:function(e,t,a){var n=[],i=e.down(".selected[data-deviceid]"),o=0;if(i){for(o=0;o<i.length;o++){var r=Q.$(i[o]);n.push(r.attr("data-deviceid"))}var s={content:"由其他设备推送来的”"+a+"“，已成功接收并加入下载队列。",tvid:t},l={agenttype:21,app_id:1e3,callback:"window.Q.__callbacks__.__f"+W++,device_ids:n.join(","),device_policy:1,msg_content:JSON.stringify(s),msg_title:"收到视频“"+a+"”",msg_type:38,platform_type:21},d="";for(var c in l)d+=c+"="+l[c]+"|";return d+=k,l.sign=Q.crypto.md5(d),l}}}),t.add(x)});
define("interfaces/appstorePhonePushInterface.js",["../kit/remoteInterface"],function(e,t,a){var n=e("../kit/remoteInterface"),i="http://cloudpush.iqiyi.com/apis/push/message/push_to_me.action";a.exports=Q.Class("AppstorePhonePushInterface",{construct:function(){this._remoteInterface=new n({getPush:{url:i}})},methods:{request:function(e,t){e=e||{};var a=e.callback.substr(e.callback.lastIndexOf(".")+1);delete e.callback,this._remoteInterface.send({ifname:"getPush",param:e,memory:!1,jsonpCallback:a,dataType:"jsonp"},function(a){t&&t(a,e)})}}})});
define("kit/formatSecondsWithText.js",[],function(e,t,a){a.exports=function(e){var t=Q.date.formatSeconds(e),a=t.split(":"),n="";switch(a.length){case 1:n=a[0]+"秒";break;case 2:n=a[0]+"分"+a[1]+"秒";break;case 3:n=a[0]+"时"+a[1]+"分"+a[2]+"秒";break;default:n=t}return n}});
define("interfaces/appstore/getDevicesStatusInterface.js",["../../kit/remoteInterface"],function(e,t,a){var n=e("../../kit/remoteInterface"),i="http://cloudpush.iqiyi.com/apis/push/user/get_devices.action";a.exports=Q.Class("getDevicesStatusInterface",{construct:function(){this._remoteInterface=new n({getSrch:{url:i}})},methods:{requestSrch:function(e,t){e=e||{},this._remoteInterface.send({ifname:"getSrch",param:e,dataType:"jsonp"},function(e){t&&t(e)})}}})});
define("units/upAndDownV3.js",["../components/units/pageJob","../components/action/checkDoms","../action/upAndDownV3"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n,o,r,s,l,d="upAndDownV3",c=e("../action/upAndDownV3");o=Q.PageInfo&&Q.PageInfo.playPageInfo||{},r=o.tvId,s=o.albumId,l=o.cid,i.create(d,{getDependentDoms:function(){return n={upBtn:Q.$("#widget-voteupBtn"),downBtn:Q.$("#widget-votedownBtn"),upCount:Q.$("#widget-voteupcount"),downCount:Q.$("#widget-votedowncount")}},check:function(){return n.downBtn&&n.downCount||n.upBtn&&n.upCount?!0:!1},exec:function(){var e,t,a="";try{a=decodeURIComponent(location.href)}catch(i){}t=Q.url.getQueryValue(a,"tvid"),e=Q.url.getQueryValue(a,"albumid")||Q.url.getQueryValue(a,"albumId"),e||(e=s),t||(t=r);var o={doms:n,albumId:e,tvId:t},l=new c(o);l.init()}}),a.exports=d});
define("action/upAndDownV3.js",["../kit/qiyiPlayer","../interfaces/upAndDownInterface","../kit/userInfo","../kit/conflictShow","../kit/anim"],function(e,t,a){var i,n,o,r=e("../kit/qiyiPlayer").getPlayer("video"),s=e("../interfaces/upAndDownInterface"),l=e("../kit/userInfo"),d=e("../kit/conflictShow"),c=e("../kit/anim"),u=!1,m="selected",p="my-vote-up",h="my-vote-down",f="vote-hover",g="vote-click",v="disabled-btn",y=!1;a.exports=Q.Class("UpAndDown",{construct:function(e){this._doms=e.doms||{},this.tvId=e.tvId,this.albumId=e.albumId,this.upif=new s;var t=Q.$("#upDownV3")||{},a={wrap:t,innerWrap:t.down('*[data-upDownV3-elem="wrap"]'),upWrap:t.down('*[data-upDownV3-elem="upwrap"]'),downWrap:t.down('*[data-upDownV3-elem="downwrap"]')};Q.object.extend(this._doms,a),this.optAction=0,this.diffWidth=0},methods:{init:function(){this.bindEvent(),this.getLike()},getLike:function(){var e=this;e.type=e._doms.innerWrap&&e._doms.innerWrap.attr("data-type")||2,e.type=parseInt(e.type,10);var t={type:e.type,tvId:e.tvId,albumId:e.albumId};this.upif.query(t,function(t){t&&e.render(t)})},bindEvent:function(){var e=this;r.on("videoChanged",function(t){e.tvId=t.data.tvid,e.albumId=t.data.aid,e.getLike()}),Q.event.customEvent.on("login",function(){e.getLike()}),Q.event.customEvent.on("logout",function(){e.getLike()});var t=e._doms.downBtn,a=e._doms.upBtn,s=e._doms.innerWrap,l=e._doms.wrap,b=e._doms.upWrap,V=e._doms.downWrap;a&&a.on("click",function(i){return Q.event.get(i).preventDefault(),e.optAction?!1:(e.optAction=1,s&&s.removeClass(h).addClass(p),a.attr("title","已顶"),a.addClass(m).removeClass(v).css("display",""),t.addClass(v),V.css("display","none"),l.removeClass(f),e._sendPingback({type:"xihuanclk131018"}),e.update({action:1}),void 0)}),t&&t.on("click",function(i){if(Q.event.get(i).preventDefault(),e.optAction)return!1;y=!0,e.optAction=-1,s.removeClass(p).addClass(h),t.attr("title","已踩"),t.addClass(m).removeClass(v).css("display",""),a.addClass(v);var n=e.downLeft;c({elem:V,style:"marginTop",from:0,to:-19,ease:"Linear",duration:150,done:function(){l.removeClass(f),l.addClass(g),l.removeClass(g),b.css("visibility","hidden"),u=!0,n>0&&c({elem:V,style:"marginLeft",from:0,to:n,ease:"Linear",duration:150,done:function(){}})}}),setTimeout(function(){e.update({action:-1})},500),e._sendPingback({type:"buxihuanclk131018"})});var U=function(e,t,a,n){i=c({elem:e,style:"marginLeft",from:t,to:a,ease:"Linear",duration:150,done:function(){n&&n()}})},w=function(t){n=c({elem:V,style:"marginTop",from:-19,to:0,ease:"Linear",duration:150,done:function(){t&&t(),V.css("marginLeft",0),e.optAction>=0?b.css("visibility","visible"):e.optAction<0&&(b.css("visibility",""),V.css("marginTop",""))}})},k=function(){l.addClass(f),o=c({elem:l,style:"opacity",ease:"Linear",from:"0",to:"1",duration:200})},_=function(){V.css("display","");var t=e.diffWidth;e.optAction>0?e.diffWidth>0?(k(),V.css("marginLeft",""),w()):e.diffWidth<0?(t=e.upLeft,U(b,t,0,function(){k(),w()})):(k(),w()):e.optAction<0?e.diffWidth>0?U(V,t,0,function(){b.css("visibility","visible"),k(),w()}):e.diffWidth<0?(t=e.upLeft,k(),w(function(){U(b,t,0)})):(k(),w()):e.diffWidth>0?(V.css("marginLeft",""),k(),w()):e.diffWidth<0?(t=e.upLeft,U(b,t,0,function(){k(),w()})):(k(),w());var a=s.down('*[data-conflict="upandownv2"]');a&&d.reg("shareWatch",a[0])},x=function(){return y?(y=!1,!1):(i&&i.stop(),n&&n.stop(),l.hasClass(f)&&l.removeClass(f),e.optAction>=0?(b.css("visibility","visible"),V.css("display","none")):e.optAction<0&&(b.css("visibility","hidden"),V.css("marginTop","-19px")),e.upLeft&&b.css("marginLeft",e.upLeft+"px"),e.downLeft&&V.css("marginLeft",e.downLeft+"px"),void 0)};if(s&&l){var I=s.attr("data-addaction");"hover"===I&&(s.on("mouseenter",function(){_()}),s.on("mouseleave",function(){x()}))}},render:function(e){var t=this,a=t._doms,i=a.upBtn.attr("data-isthousand");if(a.upCount)if(i&&"true"===i){var n=Q.string.divideNumber(e.up||0);a.upCount.html(n)}else a.upCount.html(t.format(e.up||0));if(a.downCount)if(i&&"true"===i){var o=Q.string.divideNumber(e.down||0);a.downCount.html(o)}else a.downCount.html(t.format(e.down||0));var r=t._doms.wrap,s=parseInt(e.action,10);t.optAction=s;var l=a.upBtn.width(),d=a.downBtn.width(),c=0,u=0;d>l?c=d-l:u=l-d,t.upLeft=c,t.downLeft=u,t.diffWidth=l-d,0===s?(a.upBtn&&a.upBtn.removeClass(m).removeClass(v).css("display","").attr("title","顶"),a.downBtn&&a.downBtn.removeClass(m).removeClass(v).css("display","").attr("title","踩"),a.upWrap.css("marginLeft",c+"px"),a.upWrap.css("visibility","visible"),a.innerWrap.addClass(p),a.innerWrap.removeClass(h),a.downWrap.css("display","none"),a.downWrap.css("marginLeft","0").css("marginTop","0")):1===s?(a.upBtn&&(a.upBtn.attr("title","已顶"),a.upBtn.addClass(m).removeClass(v).css("display","")),a.downBtn.addClass(v),a.upWrap.css("marginLeft",c+"px"),a.upWrap.css("visibility","visible"),a.innerWrap.addClass(p),a.innerWrap.removeClass(h),a.downWrap.css("display","none"),a.downWrap.css("marginLeft","0").css("marginTop","0")):-1===s&&(a.downBtn&&(a.downBtn.attr("title","已踩"),a.downBtn.addClass(m).removeClass(v).css("display","")),a.upBtn.addClass(v),a.upWrap.css("visibility","hidden"),a.upWrap.css("marginLeft","0"),a.innerWrap.removeClass(p),a.innerWrap.addClass(h),a.downWrap.css("display",""),a.downWrap.css("marginTop","-19px"),a.downWrap.css("marginLeft",u+"px")),s&&r.removeClass(f)},update:function(e){var t=this;this.upif.update({tvId:t.tvId,albumId:t.albumId,action:e.action,type:t.type},function(e){e&&t.render(e)})},format:function(e){return e=1e5>e?Q.string.divideNumber(e):1e6>e?(e/1e4).toFixed(1)+"万":1e8>e?(e/1e4+"").split(".")[0]+"万":(e/1e8).toFixed(2)+"亿"},_sendPingback:function(e){e=e||{};var t=this;Q.log.server({type:e.type||"",ppuid:l.getUid(),pru:Q.cookie.get("P00PRU")||"",flshuid:Q.cookie.get("QC005"),qtcurl:location.href||"",pagetype:"endpage",enttype:e.etype||"",tvid:t.tvId,tn:(new Date).getTime()+Math.random()},"http://msg.71.am/tmpstats.gif")}}})});
define("interfaces/upAndDownInterface.js",["../kit/remoteInterface","../kit/userInfo","../config/siteDomain","../kit/videoInfo","./config"],function(e,t,a){var n=e("../kit/remoteInterface"),i=e("../kit/userInfo"),o=e("../config/siteDomain");e("../kit/videoInfo");var r=e("./config").interfaces;a.exports=Q.Class("RIUpdateTip",{construct:function(){this._remoteInterface=new n({query:{url:r.upDownQuery},update:{url:r.upDownUpdate}})},methods:{query:function(e,t){var a={};e.param=e.param||{},a.dataid=1===e.type?e.albumId:e.tvId,a.type=e.type,a.userid=i.getUid(),a.flashuid=Q.cookie.get("QC005")||Q.cookie.get("QC006")||"",a.appID=o.isPPS()?60:21,e.param=a,e.method=e.method||"GET",e.cors=!0,e.noCache=!0,e.withCredentials=!0,e.ifname="query",e.dataType="jsonp",this._remoteInterface.send(e,function(e){t&&e&&"A00000"==e.code&&t(e.data)})},update:function(e,t){var a={};e.param=e.param||{},a.dataid=1===e.type?e.albumId:e.tvId,a.appID=o.isPPS()?60:21,a.type=e.type,a.userid=i.getUid(),a.flashuid=Q.cookie.get("QC005")||Q.cookie.get("QC006")||"",a.action=e.action,a.t=(new Date).getTime(),e.param=a,e.method=e.method||"GET",e.cors=!0,e.noCache=!0,e.withCredentials=!0,e.ifname="update",e.dataType="jsonp",this._remoteInterface.send(e,function(e){t&&e&&"A00000"==e.code&&t(e.data)})}}})});
define("units/videoDownload.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../action/videoDownload","../interfaces/getDownloadUrlInterface","../kit/checkI18nType"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../components/action/checkDoms"),o="videoDownload",r=e("../kit/userInfo"),s=e("../action/videoDownload"),l=e("../interfaces/getDownloadUrlInterface"),d=e("../kit/checkI18nType"),c={};n.create(o,{getDependentDoms:function(){var e;c.downLoadBtn=Q.$("*[data-widget-videodownload]"),Q.browser.android?e=c.downLoadBtn.attr("data-videodownload-android")||"":Q.browser.iPhone?e=c.downLoadBtn.attr("data-videodownload-iphone")||"":Q.browser.iPad&&(e=c.downLoadBtn.attr("data-videodownload-ipad")||""),e&&c.downLoadBtn.attr("href",e);var t=c.downLoadBtn.attr("data-videodownload-candownloadclass")||"";return c.downLoadBtn.addClass(t),c},check:function(e){return i(e),!0},init:function(){var e=Q.$("#getClientAppDownload"),t=e.down('*[data-widget-getUrl="getResultDownloadUrl"]');t&&t.forEach(function(e){var t=Q.$(e),a={pubarea:t.attr("pubarea"),srcchannel:document.referrer};t.attr("href",l.getDownloadUrl(a))})},exec:function(){var e={pubarea:c.downLoadBtn.attr("pubarea"),srcchannel:document.referrer},t=l.getDownloadUrl(e);if(c.downLoadBtn.attr("href",t),c.downLoadBtn.attr("data-uninstallUrl",t),(Q.browser.getOS()||"").match(/win/i)){var a=new s;a.init()}else c.downLoadBtn.on("click",function(e){Q.event.get(e).stop(),Q.log.server({type:"yingyinentrencem20130813",ppuid:r.getUid(),pru:Q.cookie.get("P00PRU")||"",flshuid:Q.cookie.get("QC005"),qtcurl:location.href,pagetype:"endpage",enttype:"offlineview",mod:d.mod,tn:(new Date).getTime()+Math.random()},"http://msg.71.am/tmpstats.gif"),setTimeout(function(){location.href=c.downLoadBtn.attr("href")},500)})}}),a.exports=o});
define("action/videoDownload.js",["../kit/yingyinPluginV2","../components/action/floater","../kit/iframeLocation","../components/view/floaterView","../kit/qiyiPlayer","../kit/userInfo","../kit/videoInfo","../kit/checkI18nType","../kit/i18nLangTransform"],function(e,t,n){function a(){return Math.max(document.body.scrollTop,document.documentElement.scrollTop)+document.documentElement.clientHeight/2}function i(){var e=f;return e&&e.position&&"album"===e.position?!0:0===e.sourceId&&e.albumId!=e.tvId&&b?!1:0===e.sourceId&&e.albumId!=e.tvId?!0:!1}function r(){if(l.check()&&!W)return!1;if(setTimeout(function(){location.href=Q.$("[data-widget-"+s+"]").attr("data-uninstallUrl")},500),o){var e=o.down('[data-ele="clientAppDownPop"]');e&&e.css("top",a()-o.attr("data-height")/2+"px")}I.show()}var o,s="videodownload",l=e("../kit/yingyinPluginV2"),d=e("../components/action/floater"),m=e("../kit/iframeLocation"),c=e("../components/view/floaterView"),h=null,u=e("../kit/qiyiPlayer").getPlayer("video"),p=e("../kit/userInfo");e("../kit/videoInfo");var f,U,V,g,y;f=Q.PageInfo&&Q.PageInfo.playPageInfo||{},U=f.tvId,V=f.albumId,g=f.cid,y=f.userId;var b=!1,v=!1,k="disabled-btn",x=!1,L=e("../kit/checkI18nType"),w=e("../kit/i18nLangTransform"),_={disapperMsg:"秒后自动消失"};w(_);var W=Q.$("[data-videodownload-pps]"),I={_flag:null,_auto:null,show:function(){var e,t=5;o&&(e=o.down(".app-download-dn"),e&&e.html(t+_.disapperMsg),o.show()),this._flag=setInterval(function(){0===--t&&clearInterval(I._flag),o&&(e=o.down(".app-download-dn"),e&&e.html(t+_.disapperMsg))},1e3),this._auto=setTimeout(function(){I.hide()},5e3)},hide:function(){clearInterval(this._flag),clearTimeout(this._auto),o&&o.hide()}},X=Q.Class("VideoDownload",{construct:function(){this.downloadBtn=Q.$("[data-widget-"+s+"]"),this.canDown=this.downloadBtn.attr("data-"+s+"-canDownload")||f.candownload,o=this.downloadTip=Q.$("[data-videodownload-elem=tip]"),b=f.isfeizhengpian},methods:{init:function(){this.bindEvent(),this.updateDownloadInfo()},bindEvent:function(){var e=this,t=Q.event.customEvent;if(o){var n=o.down('[data-ele="close"]');n&&n.on("click",function(){return I.hide(),!1})}Q.event.customEvent.on("swf_showDownLoadAppPop",function(){r()}),this.downloadBtn.on("click",function(t){function n(){e.sendPingback({ptype:d.attr("data-videodownload-ptype")||"endpage",etype:d.attr("data-videodownload-etype")||"offlineview"}),/mac/i.test(navigator.platform)?setTimeout(function(){location.href=Q.$("[data-widget-"+s+"]").attr("href")},500):(u.forceToSaveCurVideoInfo(),r())}function a(){Q.log.server({type:"yingyinentrencem20130813_offline",ppuid:p.getUid(),pru:Q.cookie.get("P00PRU")||"",flshuid:Q.cookie.get("QC005"),qtcurl:m.url()||"",pagetype:"endpage",enttype:"offlineview",mod:L.mod,tn:(new Date).getTime()+Math.random()},"http://msg.71.am/tmpstats.gif"),e.doQisuDownload()}function i(){Q.log.server({type:"yingyinentrencem20130813_offline",ppuid:p.getUid(),pru:Q.cookie.get("P00PRU")||"",flshuid:Q.cookie.get("QC005"),qtcurl:m.url()||"",pagetype:"endpage",enttype:"offlineview",mod:L.mod,tn:(new Date).getTime()+Math.random()},"http://msg.71.am/tmpstats.gif"),e.doDownload()}var o=Q.event.get(t);if(o.preventDefault(),v)return!1;var d=Q.$(this);if("true"==e.canDown){Q.$(o.target);var c=l.check();c&&!W?i():l.checkClient(a,n)}return!1}),u.on("downloadVideo",function(t){e.doDownload(t)}),u.on("videoChanged",function(t){e.setCanDown(t)}),e.getCurrentUserStatus();var a=e.downloadBtn.attr("data-issetprivate");"true"===a&&(v=!1,Q.player.getVideoStatus&&this.getIsSupportUse(Q.player.getVideoStatus()),Q.event.customEvent.on("swf_playerStateChange",e.getIsSupportUse.bind(this)),t.on("login",function(){e.doPirvateHandel()}),t.on("logout",function(){e.doPirvateHandel()}))},getIsSupportUse:function(e){var t=this;e=e||{},e=e.data||{};var n=e.state||"",a=e.privateVideo;("DataReady"==n||"Error"==n)&&("1"===a?v=!0:"0"===a&&(v=!1),t.doPirvateHandel())},doPirvateHandel:function(){var e=this;e.getCurrentUserStatus(),e.changeUseStatus()},changeUseStatus:function(){var e=this,t=e.downloadBtn;v?x?t.hasClass(k)&&t.removeClass(k):t.addClass(k):t.hasClass(k)&&t.removeClass(k)},getCurrentUserStatus:function(){var e=p.getUid();x=y==e?!0:!1},setCanDown:function(e){var t=1==e.data.idl;this.canDown=t.toString(),this.downloadBtn.attr("data-"+s+"-candownload",t.toString()),this.downloadBtn.attr("data-videodownload-albumid",e.data.aid),this.downloadBtn.attr("data-videodownload-tvname",e.data.an),this.downloadBtn.attr("data-videodownload-tvid",e.data.tvid),this.updateDownloadInfo()},updateDownloadInfo:function(){var e=this,t=this.downloadBtn.attr("data-videodownload-candownloadclass"),n=this.downloadBtn.attr("data-videodownload-cantdownloadclass"),a=this.downloadBtn.attr("data-videodownload-candownloadtitle"),i=this.downloadBtn.attr("data-videodownload-cantdownloadtitle"),r=l.check();"true"==this.canDown?(this.downloadBtn.removeClass(n).addClass(t),this.downloadBtn.attr("title",a),!r&&this.downloadTip&&l.checkClient(function(){e.downloadTip&&e.downloadBtn.attr("title","")},function(){})):(this.downloadBtn.removeClass(t).addClass(n),this.downloadBtn.attr("title",i))},doDownload:function(e){var t=e||{},n=this;if(Q.$("#data-widget-downloadSelectWrap")||Q.$("*[data-widget-downloadSelectWrap=wrap]")||Q.$("#widget-videodownselectbox")||Q.$("#widget-videodownSource"),i()){var a={aid:n.downloadBtn.attr("data-videodownload-albumid")||V,title:n.downloadBtn.attr("data-videodownload-tvname")||f.tvName},r=n.downloadBtn.attr("data-videodownload-cid")||g;return r&&Q.object.extend(a,{cid:r}),Q.event.customEvent.fire({type:"open_videodownload_box",data:a}),!1}if(Q.$("#flash"))u.getVideoInfo(function(e){e=e||{},t.albumId=e.aid,t.tvName=e.vn,t.tvId=e.tvid,t.isCharge="false",t.offline="true",u.getPlayInfo(function(e){t.definite=e.currentDefination||"1",t.albumId&&l.down(t)})});else{var o=n.downloadBtn.attr("data-videodownload-albumid")||V,s=n.downloadBtn.attr("data-videodownload-tvname")||f.tvName,d=n.downloadBtn.attr("data-videodownload-tvid")||U,m=!0;l.down({albumId:o,tvName:s,isCharge:m,tvId:d,offline:"true",startTime:"",definite:"2"})}},doQisuDownload:function(){var e={},t=this;if(i()){var n={aid:t.downloadBtn.attr("data-videodownload-albumid")||V,title:t.downloadBtn.attr("data-videodownload-tvname")||f.tvName},a=t.downloadBtn.attr("data-videodownload-cid")||g;return a&&Q.object.extend(n,{cid:a}),Q.event.customEvent.fire({type:"open_videodownload_box",data:n}),!1}if(Q.$("#flash"))u.getVideoInfo(function(t){t=t||{},e.albumId=t.aid,e.tvName=t.vn,e.tvId=t.tvid,e.isCharge="false",e.offline="true",u.getPlayInfo(function(t){e.definite=t.currentDefination||"1",e.albumId&&l.downQisuProtocol(e)})});else{var r=t.downloadBtn.attr("data-videodownload-albumid")||V,o=t.downloadBtn.attr("data-videodownload-tvname")||f.tvName,s=t.downloadBtn.attr("data-videodownload-tvid")||U,d=!0;l.downQisuProtocol({albumId:r,tvName:o,isCharge:d,tvId:s,offline:"true",startTime:"",definite:"2"})}},showYingyinDownload:function(){var e=this;if(!h){var t=new c({isResize:!0});h=new d({view:t});var n=['<div class="yingyin_popup0904"><p><a href="javascript:void(0)" id="j-yingyinCloseBut" title="关闭" class="clobtn"></a></p><div class="yytxt"><p class="p1">安装爱奇艺视频桌面版，只需10秒</p><p class="p2">马上开始下载本片</p></div><div class="download"><a id="j-yingyinDownLoadBut" href="http://dispatcher.video.qiyi.com/dispn/QIYImedia.exe" class="downloadBtn" title="下载">确定</a></div></div>'];h.show({html:n.join("")});var a=function(){i.un("click"),r.un("click"),h.destroy(),h=null},i=Q.$("#j-yingyinCloseBut");i.on("click",function(){a()});var r=Q.$("#j-yingyinDownLoadBut");r.on("click",function(t){Q.event.get(t).preventDefault(),u.forceToSaveCurVideoInfo(),a();var n=Q.$(this),i={ptype:n.attr("data-videodownload-ptype")||"endpage",etype:n.attr("data-videodownload-etype")||"popup"};e.sendPingback(i),m.href(n.attr("href"),{time:100})})}},sendPingback:function(e){e=e||{},Q.log.server({type:"yingyinentrencem20130813",ppuid:p.getUid(),pru:Q.cookie.get("P00PRU")||"",flshuid:Q.cookie.get("QC005"),qtcurl:m.url()||"",pagetype:e.ptype||"",enttype:e.etype||"",mod:L.mod,tn:(new Date).getTime()+Math.random()},"http://msg.71.am/tmpstats.gif")}}});n.exports=X});
define("kit/i18nLangTransform.js",[],function(e,t,n){var a=Q.PageInfo||{},i=a.i18nLang;n.exports=function(e){if(i)for(var t in e)e[t]=i[t]}});
define("units/report.js",["../components/units/pageJob","../components/action/checkDoms","../components/action/floater","../kit/qiyiPlayer","../action/report"],function(e){var t,a,i,n,o,r,s=e("../components/units/pageJob"),l=e("../components/action/checkDoms"),d=e("../components/action/floater"),c=e("../kit/qiyiPlayer"),u=e("../action/report"),m="report",p=c.getPlayer("video");s.create(m,{getDependentDoms:function(){return n=Q.$("#widget-report-floater"),o=Q.$("#widget-report-popbox"),n&&o&&(t={wrap:n,view:o,closeBtn:o.down('*[data-like-elem="closeBtn"]'),items:Q.$("[data-list-report='report']").down("label"),reportA:o.down('[data-elem="reportA"]'),reportB:o.down('[data-elem="reportB"]')}),t},check:function(e){return l(e),!0},exec:function(){var e=this;n&&o&&setTimeout(function(){p.on("videoChanged",function(e){var a=e.data.uid;t.wrap.attr("uid",a)}),e.bindEvent()},1e3)},bindEvent:function(){var e=this;t.wrap.on("click",function(t){Q.event.get(t).preventDefault(),e.show()}),t.closeBtn.on("click",function(t){Q.event.get(t).stop(),e.closeView()}),t.items.on("click",function(){t.items.removeClass("selected"),Q.$(this).addClass("selected"),e.msg.fire({type:"change",data:{report_type:Q.$(this).down("span").html()}})});var a={},i=Q.$('[data-widget="publish"]')||{};a.widget=i||{},a.widget.contentDom=i.down('[data-publish-elem="textarea"]')||{},a.widget.sendDom=Q.$('[data-publish-elem="submit"]')||{},a.widget.limitDom=i.down('[data-publish-elem="count"]')||{},a.widget.countDom=i.down('[data-publish-elem="imax"]')||{},a.iMax=300,a.curtext="请尽可能详细描述举报原因",a.items=t.items,a.doms=t.wrap,r=a,e.msg=new u,e.msg.init(a,function(){e.success(a)})},show:function(){p.pause(),t.view.show(),i=new d({isResponsive:!0}),i.show({elem:t.view})},closeView:function(){var e=this;p.resume(),i.destroy(),t.reportA.show(),t.reportB.hide(),t.items.removeClass("selected"),e.msg.resetNum(r)},success:function(){var e=this;t.reportA.hide(),t.reportB.show(),t.items.removeClass("selected"),a=setTimeout(function(){e.closeView()},2e3)}}),s.add(m)});
define("action/report.js",["../kit/eventPlugin","../interfaces/sendReport","../action/sendMsg","../kit/qitan/publish"],function(e,t,a){var i=e("../kit/eventPlugin"),n=e("../interfaces/sendReport"),o=e("../action/sendMsg"),r=e("../kit/qitan/publish");a.exports=Q.Class("report",{plugins:[new i],extend:o,methods:{bindEvent:function(e,t){var a=this,i=e.widget,n=e.doms,o="";if(o=a.num,i.contentDom){var s=new r({wrapper:i.contentDom,iMax:e.iMax,curtext:e.curtext||"",count:i.countDom});s.init(),s.on("count",function(t){a.num=o=t.data.num,a.text(i,o,e)}),a.getType(i,e),i.sendDom.on("click",function(e){if(Q.event.get(e).preventDefault(),a.num>=0&&a.num<300&&void 0!==a.type){var o=o||{};o.content=i.contentDom.value();var r;r=n?n.attr("uid"):Q.$("#widget-report").attr("uid")||0,o.uid=parseInt(r,10),a.send(o,t)}})}},text:function(e,t,a){t>=0?e.limitDom.html('还可以输入<em data-publish-elem="imax">'+t+"</em>"+"字"):e.limitDom.html('已经超出<em data-publish-elem="imax">'+Math.abs(t)+"</em>"+"字"),this._btnchange(e,a)},getType:function(e,t){var a=this;this.on("change",function(i){a.type=i.data.report_type,a._btnchange(e,t)})},send:function(e,t){var a=this,i=new n,o=o||{};o.act="get_report_utf8",o.TEXT_ID=e.uid,o.TEXT_FROM="微博视频举报",o.REPORT_TYPE="|"+a.type,o.REPORT_MORE=e.content,i.sendReport(o,function(e){"1"==e.state&&(t?t():a.success())})},_btnchange:function(e,t){var a=0;e.down('[data-publish-elem="textarea"]').value()!=t.curtext&&(a=e.down('[data-publish-elem="textarea"]').value().replace(/\s+/g,"").length),a>0&&a<=t.iMax&&void 0!==this.type?e.sendDom.addClass("site-btn-green").removeClass("site-btn-gray"):e.sendDom.addClass("site-btn-gray").removeClass("site-btn-green")},resetNum:function(e){var t=e.widget;t.limitDom.html("还可以输入"+e.iMax+"字"),t.contentDom.value(e.curtext),t.sendDom.addClass("site-btn-gray").removeClass("site-btn-green"),this.type=void 0,this.num=e.iMax}}})});
define("interfaces/sendReport.js",["../kit/remoteInterface","./config"],function(e,t,a){var i=e("../kit/remoteInterface");e("./config"),a.exports=Q.Class("sendReport",{construct:function(){this._remoteInterface=new i({sendReport:{url:"http://admin.keyword.pps.tv/comment_report.php"}})},methods:{sendReport:function(e,t){e=e||{};var a={method:"GET",ifname:"sendReport",param:e,dataType:"jsonp"};this._remoteInterface.send(a,function(e){t&&t(e)})}}})});
define("action/sendMsg.js",["../components/action/adapter","../components/model/model","../kit/qitan/publish","../interfaces/setNoteInterface"],function(e,t,a){var n=e("../components/action/adapter"),i=e("../components/model/model"),o=e("../kit/qitan/publish"),r=e("../interfaces/setNoteInterface");a.exports=Q.Class("sendMsg",{extend:n,construct:function(e){e=e||{},e.model=e.model||new i(e),this.callsuper(e)},methods:{init:function(e,t){this.bindEvent(e,t)},success:function(){},sendMail:function(e,t){var a=this,n=new r;n.setPrivateMsg(e,function(e){t?t(e):a.success()})},send:function(e,t){var a=e.widget,n={send_uid:e.send_uid,rev_uid:e.rev_uid,content:a.contentDom.value()};this.sendMail(n,t)},bindEvent:function(e,t){var a=this,n=e.widget,i="";if(n.contentDom){var r=new o({wrapper:n.contentDom,iMax:e.iMax,curtext:e.curtext||"",count:n.countDom});r.init(),r.on("count",function(e){i=e.data.num,a.text(n,i)}),n.sendDom.on("click",function(n){Q.event.get(n).preventDefault(),i>0&&a.send(e,t)})}},resetNum:function(e){var t=e.widget;t.limitDom.html("还可以输入"+e.iMax+"字")},text:function(e,t){t>0?e.limitDom.html("还可以输入"+t+"字"):e.limitDom.html("已经超出"+Math.abs(t)+"字")}}})});
define("kit/qitan/publish.js",["../../kit/eventPlugin"],function(e,t,a){var n=e("../../kit/eventPlugin"),i=Q.Class("Publish",{plugins:[new n],construct:function(e){this.wrapper=e.wrapper,this.count=e.count,this.iMax=e.iMax||140,this.curtext=e.curtext||""},methods:{init:function(){return this._render(),this},_render:function(){this.wrapper&&this.wrapper.html(this.curtext),this.count&&this.count.html(this.iMax),this._bindEvent()},_bindEvent:function(){var e=this;this.wrapper.on("focus",function(){e.wrapper.value()==e.curtext&&e.wrapper.value("")}),this.wrapper.on("blur",function(){""===e.wrapper.value()&&e.wrapper.value(e.curtext)}),/msie/i.test(navigator.userAgent)?(this.wrapper[0].attachEvent("onpropertychange",function(){e._changeCount()}),this.wrapper[0].attachEvent("onkeyup",function(){e._changeCount()})):this.wrapper.on("input",function(){e._changeCount()})},_changeCount:function(){var e=this,t=e.wrapper.value();t=t.replace(/\s+/g,""),t=t.replace(/\\n/g,"");var a=t.length;e.wrapper.value()==e.curtext&&(a=0),e._wordCount(e.iMax,a,e.count,t)},_wordCount:function(e,t,a,n){var i;i=0>e-t?!1:!0,this.fire({type:"count",data:{num:e-t,isok:i,text:n}})}}});a.exports=i});
define("interfaces/setNoteInterface.js",["../kit/remoteInterface","./config"],function(e,t,a){var n=e("../kit/remoteInterface"),i=e("./config");a.exports=Q.Class("setNoteInterface",{construct:function(){this._remoteInterface=new n({setPrivateMsg:{url:i.interfaces.ugcSendPrivateMsg},setReply:{url:i.interfaces.ugcReplyComment}})},methods:{setPrivateMsg:function(e,t){e=e||{};var a={method:"POST",ifname:"setPrivateMsg",param:e,dataType:"jsonp",antiCsrf:!0};this._remoteInterface.send(a,function(e){t&&t(e)})},setReply:function(e,t){e=e||{},e.cb="succ",e.qitancallback=e.cb,this._remoteInterface.send({param:e,ifname:"setReply",method:"GET",antiCsrf:!0},function(e){t&&t(e)})}}})});
define("units/playcountPieChart.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/playCountPCMobileInterfaceJSONP","../interfaces/videoIndexInterface"],function(e,t,a){var n,i,o=e("../components/units/pageJob"),r=e("../components/action/checkDoms"),s=e("../interfaces/playCountPCMobileInterfaceJSONP"),l=e("../interfaces/videoIndexInterface");n=Q.PageInfo&&Q.PageInfo.playPageInfo||{},i=n.albumId;var d,c,m,h,u,p,f,U,V,g="playcountPieChart";o.create(g,{getDependentDoms:function(){if(!d){var e=Q.$("#playcountWrapper"),t=Q.$("#chartTrigger"),a=Q.$("#widget-playcount"),n=Q.$("#playcountpiechart"),i=Q.$("#pieChartContainer"),o=n&&n.down("[data-chart-elem=leftWrapper]"),r=n&&n.down("[data-chart-elem=rightWrapper]"),s=o&&o.down("[data-chart-elem=title]"),l=r&&r.down("[data-chart-elem=title]"),c=o&&o.down("[data-chart-elem=ratio]"),g=r&&r.down("[data-chart-elem=ratio]"),v=n&&n.down("[data-chart-elem=playNum]");m=n&&n.down("[data-chart-elem=platformTipWrapper]"),h=m&&m.down("[data-chart-elem=platformTip]"),u=n&&n.down("[data-chart-elem=indexEntranceWrapper]"),p=n&&n.down("[data-chart-elem=indexEntrance]"),f=n&&n.down("*[data-chart-elem=qixi]"),U=n&&n.attr("data-chart-hasentrance-cls")||"play-digital-chart",d={playCountWrapper:e,pieChartTriggerEl:t,playCountEl:a,widget:n,chartContainer:i,leftWrapper:o,rightWrapper:r,leftTitle:s,rightTitle:l,leftRatio:c,rightRatio:g,playNum:v}}var y=Q.$("meta[name=irAlbumName]");return y&&(V=y.attr("content"),d.playCountEl&&d.playCountEl.attr("data-playcount-albumname",V)),d},check:function(e){return r(e),!0},init:function(){if(d&&d.widget){var e=this;Q.event.customEvent.on("playCountUpdated",function(){e.chartRendered=!1,e.showing&&(e.hideChartFloater(),clearTimeout(e.hideChartFloaterTimer),e.showChartFloater(),e.hideChartFloaterTimer=setTimeout(function(){e.hideChartFloater()},6e3))});var t=Q.$("body");this.hideChartFloater.bind(this),Q.browser.iPad?d.widget.on("click",function(t){t=Q.event.get(t);var a=t.target;d.pieChartTriggerEl[0]!==a&&!d.pieChartTriggerEl.contains(a)&&d.widget.contains(a)&&e.hideChartFloater()}):t.on("click",function(t){t=Q.event.get(t);var a=t.target;d.pieChartTriggerEl[0]===a||d.pieChartTriggerEl.contains(a)||d.widget.contains(a)||e.hideChartFloater()}),d.widget.on("mouseenter",function(){clearTimeout(e.hideChartFloaterTimer)}),d.widget.on("mouseleave",function(){clearTimeout(e.hideChartFloaterTimer),e.hideChartFloaterTimer=setTimeout(function(){e.hideChartFloater()},6e3)})}},exec:function(){d&&d.playCountEl&&d.pieChartTriggerEl.on("click",this.toggleChartFloater.bind(this))},showChartFloater:function(){this.showing||(c||(c=d.playCountWrapper.attr("data-toggle-class")||"playNums-hover"),d.playCountWrapper.addClass(c),d.widget.show(),this.chartRendered||this.doRenderChart(),this.showing=!0)},hideChartFloater:function(){this.showing&&(d.playCountWrapper.removeClass(c),d.widget.hide(),this.showing=!1)},toggleChartFloater:function(){var e=this;this.showing?(clearTimeout(this.hideChartFloaterTimer),this.hideChartFloater()):(clearTimeout(this.hideChartFloaterTimer),this.showChartFloater(),this.hideChartFloaterTimer=setTimeout(function(){e.hideChartFloater()},6e3))},doRenderChart:function(){var e=this,t=d.widget.attr("data-chart-pccolor")||"#7cba0f",a=d.widget.attr("data-chart-mobilecolor")||"#5aabec";d.playNum.html(d.playCountEl.html()),m&&m.hide(),u&&(u.hide(),U&&d.widget.removeClass(U));var n=d.widget.attr("data-chart-startangle");n&&(n=parseInt(n,10)),n||(n=45);var o=d.playCountEl.attr("data-playcount-albumid")||i,r=d.playCountEl.attr("data-playcount-albumname");if(new s({albumId:o,jsonpCallback:"playCountPCMobileCb"}).send({},function(i){var o;if("A00000"===i.code&&i.data&&"number"==typeof i.data.p&&"number"==typeof i.data.m){var r=Math.round(100*i.data.p/(i.data.p+i.data.m));o=[["PC",r],["Mobile",100-r]]}else o=[["PC",34],["Mobile",66]];e.chartRendered=!1;var s={chart:{renderTo:d.chartContainer[0],type:"pie",width:140,height:140,margin:[0,0,0,0]},title:{text:""},credits:{enabled:!1},plotOptions:{pie:{size:"100%",innerSize:"80%",borderWidth:4,colors:[t,a],dataLabels:{enabled:!1},states:{hover:{brightness:.1}}}},tooltip:{enabled:!1},series:[{data:o}]},l=s.series[0].data;seajs.use("http://static.iqiyi.com/js/qiyiV2/lib/highcharts.js",function(t){var a=l[0][1],i=l[1][1];d.rightTitle.html("PC占比"),d.leftTitle.html("移动占比"),d.rightRatio.html(a+"%"),d.leftRatio.html(100-a+"%"),d.leftWrapper.show(),d.rightWrapper.show(),m&&m.show(),0===a&&(s.plotOptions.pie.colors.shift(),l.shift(),d.rightWrapper.hide()),0===i&&(s.plotOptions.pie.colors.pop(),l.pop(),d.leftWrapper.hide()),0===a||0===i?(s.plotOptions.pie.borderWidth=0,s.plotOptions.pie.innerSize="90%"):1===a||1==i?(s.plotOptions.pie.borderWidth=1,s.plotOptions.pie.innerSize="88%"):(10>=a||10>=i)&&(s.plotOptions.pie.borderWidth=2,s.plotOptions.pie.innerSize="85%"),20>=a&&(s.plotOptions.pie.startAngle=n-180*a/100),40>=i&&(s.plotOptions.pie.startAngle=180*i/100-115),new t.Chart(s,function(){e.chartRendered=!0})})}),u&&p){var c={album_id:o};r&&(c.album_name=r),Q.PageInfo&&Q.PageInfo.playPageInfo&&Q.PageInfo.playPageInfo.cid&&(c.channel_id=Q.PageInfo.playPageInfo.cid),new l({ifname:"hasIndexStatIf"}).request(c,function(e){if("A00000"==e.code&&(!e.data.isEmpty||"false"==e.data.isEmpty)){var t=encodeURIComponent(e.data.album_name);if(p){var a="http://index.iqiyi.com/q/?aid="+e.data.album_id+"&name="+t;p.attr("href",a)}if(f)if(e.data.album_id&&e.data.album_name){var n="http://index.iqiyi.com/qixi/way.html?aid="+e.data.album_id+"&name="+t;f.attr("href",n),f.css("display","")}else f.css("display","none");U&&d.widget.addClass(U),u&&u.show()}})}}}),a.exports=g});
define("interfaces/playCountPCMobileInterfaceJSONP.js",["../kit/remoteInterface","./config"],function(e,t,a){var n,i=e("../kit/remoteInterface"),o=e("./config");a.exports=Q.Class("RIPlayCount",{construct:function(e){n=e.jsonpCallback;var t;t=e.kind?o.interfaces[e.kind]+"?"+e.param:o.interfaces.pr+e.albumId+"/"+n,this._remoteInterface=new i({url:t})},methods:{send:function(e,t){e.param=e.param||{},e.method="GET",e.dataType="jsonp",e.jsonp="callback",e.jsonpCallback=n,this._remoteInterface.send(e,function(e){t&&t(e)})}}})});
define("units/newsubscribe.js",["../components/units/pageJob","../components/action/checkDoms","../action/newsubscribe","../kit/qiyiPlayer"],function(e,t,a){var n=e("../components/units/pageJob");e("../components/action/checkDoms");var i,o,r,s,l=e("../action/newsubscribe"),d="newsubscribe",c="data-widget-subscribe",m=e("../kit/qiyiPlayer").getPlayer("video");i=Q.PageInfo&&Q.PageInfo.playPageInfo||{},o=i.tvId,r=i.albumId,s=i.cid;var h={};n.create(d,{check:function(){return!0},init:function(){this.bindEvent()},exec:function(){var e=this,t=Q.$("["+c+"]"+"[data-subscribe-subkey]");t?t.forEach(function(t){e.newSubscribeMVC(t)}):m.setSubscribe({canSubscribe:!1,tvName:""})},bindEvent:function(){var e=this;Q.event.customEvent.on("videoListSubscribeDone",function(t){e.newSubscribeMVC(t.data.widget)})},newSubscribeMVC:function(e){var t,a=Q.$(e),n=a.attr(c),o=h[n];if(o)t=Q.$("[data-subscribe-group='"+n+"']"),o.addDom({subscribeBtn:t.down("[data-subscribe-elem='newsubscribe']"),hasSubscribedBtn:t.down("[data-subscribe-elem='newhasSubscribed']"),subscribePop:t.down('*[data-subscribe-elem="subscribeBox"]')}),o.check();else{var s=a.attr("data-subscribe-canSubscribe");if(a.attr("data-subscribe-tvname"),"true"==s){var d=a.attr("data-subscribe-albumid")||r,m=a.attr("data-subscribe-subtype"),u=a.attr("data-subscribe-subkey")||i.tvId,p=a.attr("data-subscribe-subentry");t=Q.$("[data-subscribe-group='"+n+"']");var f,U,V=a.down("[data-subscribe-tpl='success']");V||(V=Q.$("[data-widget-subscribetpl=success]")),V&&(f=V.value());var g=a.down("[data-subscribe-tpl='confirm']");g||(g=Q.$("[data-widget-subscribetpl=confirm]")),g&&(U=g.value());var v=t.down('*[data-subscribe-elem="subscribeBox"]')||t.down("#subscribeBox"),y=new l({albumId:d,subType:m,subKey:u,subEntry:p,doms:{subscribeBtn:t.down('[data-subscribe-elem="newsubscribe"]'),hasSubscribedBtn:t.down('[data-subscribe-elem="newhasSubscribed"]'),elem:a,subscribePop:v},successTpl:f,confirmTpl:U});y.init(),y.check(),h[n]=y}}}}),a.exports=d});
define("action/newsubscribe.js",["../components/action/baseAdapter","../view/newsubscribeView","../model/newsubscribeModel","../kit/userInfo","../action/qipaLogin","../kit/qiyiPlayer","../kit/iframeLocation"],function(e,t,a){var n=e("../components/action/baseAdapter"),i=e("../view/newsubscribeView"),o=e("../model/newsubscribeModel"),r=e("../kit/userInfo"),s=e("../action/qipaLogin"),l=Q.event.customEvent,d=e("../kit/qiyiPlayer").getPlayer("video"),c=e("../kit/iframeLocation"),m="disabled-btn",h=!1,u=Q.Class("newSubscribeAction",{extend:n,construct:function(e){e.view=e.view||new i(e),e.model=e.model||new o,this.confirmFloater=null,e.albumId&&e.model.set({localData:{albumId:e.albumId,subType:e.subType,subKey:e.subKey,subEntry:e.subEntry,isSubscribed:!1}}),this.callsuper(e)},methods:{init:function(){this.sbcb=this.subscribeBtnClick.bind(this),this.usbcb=this.hasSubscribedBtnClick.bind(this),this.mesbcb=this.hasSubscribedBtnEnter.bind(this),this.mlsbcb=this.hasSubscribedBtnLeave.bind(this),this.bindEvent()},noticeSwf:function(){var e=this,t=(e._model._data.localData.isSubscribed===!1).toString();d.setSubscribe({canSubscribe:t,tvName:e._model._data.localData.subKey})},check:function(){var e=this;r.isLogin()?e._model.check({},function(t){e._view.update(t),e.noticeSwf()}):(e._view.update({localData:{isSubscribed:!1}}),e.noticeSwf())},subscribe:function(){var e=this;e._model.subscribe({},function(t){e._view.update(t)}),Q.log.server({type:"dingyuesuc20131016",ppuid:r.getUid()||"",pru:Q.cookie.get("P00PRU")||"",jsuid:Q.cookie.get("QC006")||"",flshuid:Q.cookie.get("QC005")||"",qtcurl:c.url()||"",pagetype:"endpage",enttype:"",tn:Math.random()},"http://msg.71.am/tmpstats.gif")},unsubscribe:function(){var e=this;e._model.unsubscribe({},function(t){e._view.update(t)}),Q.log.server({type:"dingyuecancle20131016",ppuid:r.getUid()||"",pru:Q.cookie.get("P00PRU")||"",jsuid:Q.cookie.get("QC006")||"",flshuid:Q.cookie.get("QC005")||"",qtcurl:c.url()||"",pagetype:"endpage",enttype:"",tn:Math.random()},"http://msg.71.am/tmpstats.gif")},bindEvent:function(){var e=this;l.on("login",function(){setTimeout(function(){e.subscribeClicked||e.check()},0)}),l.on("logout",function(){e._model._data.localData.isSubscribed=!1,e.subscribeClicked=null,e._view.update(e._model._data)}),e.reBindSubscribe(),d.on("subscribe",function(){e.subscribeBtnClick()}),d.on("videoChanged",function(t){var a={1:t.data.aid,2:t.data.sid,7:t.data.tvid};(t.data.keyword||t.data.shortTitle||t.data.vn)&&(e._model._data.localData.shortTitle=t.data.keyword||t.data.shortTitle||t.data.vn,e._model._data.localData.subKey=a[e._model._data.localData.subType],e.check())});var t=e._view._doms.subscribeBtn.attr("data-issetprivate");"true"===t&&(e.isPrivate=!1,Q.player.getVideoStatus&&e.getIsSupportUse(Q.player.getVideoStatus()),Q.event.customEvent.on("swf_playerStateChange",e.getIsSupportUse.bind(this)),l.on("login",function(){e.doPirvateHandel()}),l.on("logout",function(){e.doPirvateHandel()}))},addDom:function(e){this._view._doms.subscribeBtn=e.subscribeBtn,this._view._doms.hasSubscribedBtn=e.hasSubscribedBtn,this._view._doms.subscribePop=e.subscribePop,this.reBindSubscribe()},reBindSubscribe:function(){var e=this._view._doms;e.subscribeBtn.un("click",this.sbcb),e.subscribeBtn.on("click",this.sbcb),e.hasSubscribedBtn.un("click",this.usbcb),e.hasSubscribedBtn.on("click",this.usbcb),e.hasSubscribedBtn.on("mouseenter",this.mesbcb),e.hasSubscribedBtn.on("mouseleave",this.mlsbcb)},subscribeBtnClick:function(e){var t=this;e&&Q.event.get(e).preventDefault(),t.isPrivate||s.openLoginWindow({from:"favorite"},function(){t.subscribe(),t.subscribeClicked=!0})},hasSubscribedBtnClick:function(e){var t=this;Q.event.get(e).preventDefault(),t.isPrivate||(t._view._doms.subscribePop&&t._view._doms.subscribePop.hide(),t.unsubscribe())},hasSubscribedBtnEnter:function(e){var t=this;Q.event.get(e).preventDefault();var a=Q.$(e.target||e.srcElement);t.sbText=a.html()},hasSubscribedBtnLeave:function(e){var t=this;Q.event.get(e).preventDefault();var a=Q.$(e.target||e.srcElement);a.html(t.sbText||"")},getIsSupportUse:function(e){var t=this;e=e||{},e=e.data||{};var a=e.state||"",n=e.privateVideo;("DataReady"==a||"Error"==a)&&("1"===n?t.isPrivate=!0:"0"===n&&(t.isPrivate=!1),t.doPirvateHandel())},doPirvateHandel:function(){var e=this;e.getCurrentUserStatus(),e.changeUseStatus()},getCurrentUserStatus:function(){var e=0;try{e=Q.PageInfo.playPageInfo.userId}catch(t){}e=parseInt(e,10);var a=r.getUid()||0;a=parseInt(a,10),h=e===a?!0:!1},changeUseStatus:function(){var e=this,t=e.isPrivate,a=e._view._doms,n=a.subscribeBtn,i=a.hasSubscribedBtn,o=function(e){e?(n.hasClass(m)&&n.removeClass(m),i&&i.hasClass(m)&&i.removeClass(m)):(n.addClass(m),i&&i.addClass(m))};t?h?o(1):o(0):o(1)}}});a.exports=u});
define("components/action/baseAdapter.js",["../model/baseModel","../view/view"],function(e,t,a){var n=e("../model/baseModel"),i=e("../view/view");a.exports=Q.Class("BaseAdapter",{construct:function(e){e=e||{};var t=e.model,a=e.view;t instanceof n&&(this._model=t,this._model.init(this)),a instanceof i&&(this._view=a,this._view.init(this))},methods:{notice:function(e){if(!e.hasOwnProperty("type"))throw'The ctrlClass method "notice" argument is not Meet the standard!';this._fire(e)},_fire:function(e){this.events&&this.events.hasOwnProperty(e.type)&&this.events[e.type].call(this,e)},syncGet:function(e){if(this._model)var t=this._model.get(e);this._view&&this._view.update(t)},asyncGet:function(e){if(!this._model)return!1;var t=this;this._model.asyncGet(e,function(e){t._view&&t._view.update(e)})},syncSet:function(e){if(this._model)var t=this._model.set(e);this._view&&this._view.update(t)},asyncSet:function(e){if(!this._model)return!1;var t=this;this._model.asyncSet(e,function(e){t._view&&t._view.update(e)})}}})});
define("components/model/baseModel.js",[],function(e,t,n){function a(){return{}}n.exports=Q.Class("BaseModel",{ns:"Q.model",construct:function(e){this._data={remoteData:{},localData:{}},this._remoteInterface=e.ri||null,this._remoteGetParam=e.remoteGetParam||a,this._remoteSetParam=e.remoteSetParam||a,this._remoteMethods=e.remoteMethods||{}},methods:{init:Q.fn.emptyMethod,get:function(){return this._data},asyncGet:function(e,t){var n=this;e=e||{},e=Q.object.extend(this._remoteGetParam(),e);var a=new this._remoteInterface;this._remoteMethods.get&&a[this._remoteMethods.get](e,function(e){Q.object.extend(n._data.remoteData,e),t&&t(n.get())})},set:function(e){return Q.object.extend(this._data.localData,e.localData||e),this.get()},asyncSet:function(e,t){var n=this;Q.object.extend(this._data.localData,e.localData||e);var a=Q.object.extend(this._remoteSetParam(),e),i=new this._remoteInterface;this._remoteMethods.set&&i[this._remoteMethods.set](a,function(e){Q.object.extend(n._data.remoteData,e),t&&t(n.get())})},getRemoteData:function(e,t,n){var a=this;e=e||{};var i=new this._remoteInterface;a._remoteMethods[t]&&i[a._remoteMethods[t]](e,function(e){Q.object.extend(a._data.remoteData,e),n&&n(a._data)})}}})});
define("view/newsubscribeView.js",["../components/view/view","../kit/conflictShow","../components/action/floater"],function(e,t,a){var n=e("../components/view/view"),i=e("../kit/conflictShow");e("../components/action/floater");var o=Q.Class("newSubscribeView",{extend:n,construct:function(e){this._doms=e.doms||{},this.successTpl=e.successTpl||"",this.confirmTpl=e.confirmTpl||""},methods:{init:function(e){this._ctrl=e,this.bindEvent()},update:function(e){var t=this;e.localData.isSubscribed?(this._doms.subscribeBtn.hide(),this._doms.hasSubscribedBtn.show(),e.localData.newSubscribe&&this.showSuccess()):(this._doms.subscribeBtn.forEach(function(e){var t=Q.$(e).attr("data-subscribe-showstyle")||"inline";Q.$(e).css("display",t)}),this._doms.hasSubscribedBtn.hide()),t._doms.subscribePop&&i.reg("shareWatch",t._doms.subscribePop[0])},bindEvent:function(){var e=this._doms.subscribePop;if(e){var t=Q.$("#subscribeBoxClose");t.on("click",function(){e.hide()})}},showSuccess:function(){var e=this;e._doms.subscribePop&&(this._doms.subscribePop.show(),setTimeout(function(){e._doms.subscribePop.hide()},3e3))}}});a.exports=o});
define("model/newsubscribeModel.js",["../components/model/baseModel","../interfaces/subscribe","../config/siteDomain"],function(e,t,a){var n=e("../components/model/baseModel"),i=e("../interfaces/subscribe"),o=e("../config/siteDomain");a.exports=Q.Class("newSubscribeModel",{extend:n,construct:function(e){e=Q.object.extend({ri:i,remoteMethods:{check:"check",subscribe:"subscribe",unsubscribe:"unsubscribe",getSubscribe:"getSubscribe"}},e),this.callsuper(e),this._remoteCheckParam=function(){return{subType:this._data.localData.subType,subKey:this._data.localData.subKey}}},methods:{check:function(e,t){var a=this;e=e||{},e=Q.object.extend(this._remoteCheckParam(),e),this.callsuper("getRemoteData",e,"check",function(e){var n=e.remoteData.code;a._data.localData.isSubscribed="A00000"==n,a._data.localData.newSubscribe=!1,t&&t(a._data)})},subscribe:function(e,t){var a=this;e=e||{},e=Q.object.extend(this._remoteCheckParam(),e),this.callsuper("getRemoteData",e,"subscribe",function(e){var n=e.remoteData.code;"A00000"==n||"A00001"==n||"A00002"==n?(a._data.localData.isSubscribed=!0,a._data.localData.newSubscribe=!0):"A00201"==n?(a._data.localData.isSubscribed=!0,a._data.localData.newSubscribe=!1):(a._data.localData.isSubscribed=!1,a._data.localData.newSubscribe=!1),t&&t(a._data)})},unsubscribe:function(e,t){var a=this;e=e||{},e=Q.object.extend(this._remoteCheckParam(),e),this.callsuper("getRemoteData",e,"unsubscribe",function(e){var n=e.remoteData.code;"A00000"==n&&(a._data.localData.isSubscribed=!1,t&&t(a._data))})},getSubscribe:function(e,t){var a=this;this.callsuper("getRemoteData",e,"getSubscribe",function(e){var n=e.remoteData.code;"A00000"==n?(a._data.hasNew=!0,t&&t(a._data)):Q.cookie.set("deleCloseSubscribe","none",{path:"/",expires:24,domain:o.SITE_DOMAIN})})}}})});
define("interfaces/subscribe.js",["../kit/remoteInterface","../config/siteDomain","./config"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/siteDomain"),r=e("./config");"http://i."+i.SITE_DOMAIN+"/dingyue/api/";var o="http://i."+i.SITE_DOMAIN+"/dingyue/data/new/",l="1";"pps.tv"==i.getDomain()&&(l="39"),n.exports=Q.Class("RIMark",{construct:function(){this._remoteInterface=new a({check:{url:r.interfaces.dyCheck},set:{url:r.interfaces.dySet},del:{url:r.interfaces.dyDel},getNew:{baseUrl:o},delAllLoginSubscribe:{url:"http://lwl."+i.SITE_DOMAIN+"/apis/watchlater/deleteAllSubscriptions.action"},updateSubscription:{url:r.interfaces.updateSubs}})},methods:{check:function(e,t){var n={method:"POST",ifname:"check",param:e,dataType:"jsonp",encodeFn:function(e){return encodeURIComponent(e)}};this._remoteInterface.send(n,function(e){t&&t(e)})},subscribe:function(e,t){e.agent_type=l;var n={method:"POST",ifname:"set",antiCsrf:!0,param:e,dataType:"jsonp",encodeFn:function(e){return encodeURIComponent(e)}};this._remoteInterface.send(n,function(e){t&&t(e)})},unsubscribe:function(e,t){e.agent_type=l;var n={method:"POST",ifname:"del",antiCsrf:!0,param:e,dataType:"jsonp",encodeFn:function(e){return encodeURIComponent(e)}};this._remoteInterface.send(n,function(e){t&&t(e)})},getSubscribe:function(e,t){var n=encodeURIComponent(e.userInfo);e.userInfo=n,e.agent_type="1";var a=this._remoteInterface._remoteInterfaces.getNew.baseUrl;this._remoteInterface._remoteInterfaces.getNew.url=a+n+"/",window.lib=window.lib||{},e={varname:"lib._newSubscribe"},this._remoteInterface.send({param:e,ifname:"getNew"},function(e){t&&t(e)})},delAllLoginSubscribe:function(e,t){e.agent_type=l;var n={method:"GET",ifname:"delAllLoginSubscribe",antiCsrf:!0,param:e,dataType:"jsonp",encodeFn:function(e){return encodeURIComponent(e)}};this._remoteInterface.send(n,function(e){t&&t(e)})},getUpdateInfo:function(e,t){e=e||{},this._remoteInterface.send({ifname:"updateSubscription",param:e,dataType:"jsonp"},function(e){t&&t(e)})}}})});
define("units/setTitle.js",["../components/units/pageJob"],function(e,t,a){function i(e){var t=null;e=e||window.event,"title"===e.propertyName&&r&&document.title!=r&&(t&&clearTimeout(t),document.detachEvent("onpropertychange",i),t=setTimeout(function(){document.title=r,document.attachEvent("onpropertychange",i)},10))}var n=e("../components/units/pageJob"),o="setTitle",r=document.title&&document.title.split("#")[0];n.create(o,{check:function(){return!0},init:function(){var e=this;document.attachEvent&&document.attachEvent("onpropertychange",i),(Q.browser.mqq||Q.browser.IE)&&setInterval(function(){r&&document.title!=r&&(document.title=r)},1500),Q.event.customEvent.on("changeTitle",function(t){e.changeTitle(t.data.title)})},changeTitle:function(e){return e?(document.title=r=e,void 0):!1}}),a.exports=o});
define("units/changeTitleOnVideoChange.js",["../components/units/pageJob","../kit/qiyiPlayer","../kit/checkI18nType"],function(e,t,a){var i=e("../components/units/pageJob"),n="changeTitleOnVideoChange",o=e("../kit/qiyiPlayer"),r=e("../kit/checkI18nType"),s=Q.PageInfo&&Q.PageInfo.bodanPlaylist||{},l=s.name;i.create(n,{check:function(){return!0},init:function(){var e=Q.$("#widget-crumbbar-doctitle")||Q.$("[data-crumbbar-widget=crumb]"),t=o.getPlayer("video");t.on("videoChanged",function(t){var a=t.data.vn;e&&e.attr("data-title-plname")&&(a=t.data.vn+"-"+e.attr("data-title-plname")+"-"+"高清影视剧、网络视频在线看"),l&&(a=r.type?t.data.vn+"-"+l+"-"+"爱奇艺":l+":"+t.data.vn+"-"+"愛奇藝"),Q.event.customEvent.fire({type:"changeTitle",data:{title:a}})})}}),a.exports=n});
define("units/comment.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../kit/qitanPingback","../action/qipaLogin"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../components/action/checkDoms");e("../kit/qiyiPlayer");var o,r,s,l,d,c,m,h="qitanComment",u=new Q.ic.InfoCenter({moduleName:"qitanComment"}),p=e("../kit/qitanPingback"),f=e("../action/qipaLogin"),U=+new Date,g=encodeURIComponent("http://t.qiyi.com/opening/start.php?returnUrl="+encodeURIComponent(document.location.href)),V=6e4;l=Q.PageInfo.livePlayInfo||Q.PageInfo.playPageInfo||{},d=l.tvId,c=l.albumId||l.liveType,m=l.cid;var v,y={};try{var b=decodeURIComponent(location.href);v=Q.url.getQueryValue(b,"l"),v&&(v=v.replace("/",""))}catch(k){}var w={showTitle:!0,showYP:!0,showTP:!0,showSort:!0,showTool:!0,showCommentShare:!0,showYuQing:!0,showReplylist:!0,plpageNum:10};n.create(h,{getDependentDoms:function(){return r={comment:Q.$("#qitancommonarea")}},check:function(e){return i(e),!0},init:function(){Q.event.customEvent.on("CreateLiveInit",function(e){e=e||{},y=e.data||{},v||(v=y.tvId)})},exec:function(){var e=this,t=r.comment;if(t){V=t.attr("data-qitancomment-timeout")||V;var a,n,i,l="http://static.iqiyi.com/js/qitan/jobs/qitan/qitan_comment.js",h=t.attr("data-qitancomment-type"),u=t.attr("id"),p=lib.__callbacks__.logBox_close;lib.__callbacks__.logBox_close.isMainsite||(lib.__callbacks__.logBox_close=function(e){p(e),Q.event.customEvent.fire({type:"loginIframeClosed"}),Q.event.customEvent.fire({type:"msgboxclose"})}),n=function(){if(clearTimeout(s),a)e.doLoadQitan({url:l,data:a});else{var n=v||t.attr("data-qitancomment-tvid")||d,o=t.attr("data-qitancomment-qitanid"),r=t.attr("data-qitancomment-categoryid")||m,p=t.attr("data-qitancomment-title"),f=t.attr("data-qitancomment-tvyear"),U=t.attr("data-qitancomment-playorder"),g=t.attr("data-qitancomment-albumid")||c;a={cmdId:u,tvId:n||"0",qitanId:o||"0",categoryId:r||"0",qitan_comment_type:h||"0",title:p||"",playurl:location.href||"",tv_year:f||"0",play_order:U||"0",albid:g||"0"},Q.extend(a,w),e.doLoadQitan({url:l,data:a})}Q.$(window).un("scroll",i)},i=function(){t.isInScreen()&&n()},s=setTimeout(function(){n()},V),Q.$(window).on("scroll",i),i(),Q.external.qitanReload=function(e){var t=Q.object.extend({},a);Q.object.extend(t,e),o&&o.reload(t)},Q.external.qitanLoad=function(){n()},Q.kit.QiyiPlayer.getPlayer("video").on("videoChanged",function(e){var t=e&&e.data||{};a={},a.cmdId=u,a.qitan_comment_type=h,a.tvId=t.tvid||"0",a.qitanId=t.qtId||"0",a.categoryId=t.c||"",a.playurl=t.vu||"",a.title=t.vn||"",a.tv_year=t.ty||"0",a.play_order=t.pd||"0",a.albid=t.aid||"0",Q.extend(a,w),o&&t.commentAllowed&&void 0===Q("#flashArea").attr("data-notchange-pinlun")&&o.reload(a),t.commentAllowed?r.comment.css("display","block"):r.comment.css("display","none")}),Q.event.customEvent.on("login",function(){o&&o.userStatusChange(1)}),Q.event.customEvent.on("logout",function(){o&&o.userStatusChange(0)})}},doLoadQitan:function(e){var t=r.comment,a=e.url,n=e.data,i=+new Date;p({ri:"req",qitanId:n.qitanId,customParams:{td:i-U}}),seajs.use(a,function(e){if(e){o=new e({middleware:{login:{show:function(){f.openLoginWindow({regUrl:g})},hide:function(){f.closeLoginWindow(),f.clearTempCallback()},on:function(e,t){Q.event.customEvent.on(e,t)}}},parm:n}),o.init();var a=+new Date-i,r={ri:"suc",qitanId:n.qitanId,customParams:{td:a}};p(r);var s=function(){setTimeout(function(){u.log("loadQitanComment"),t.children()?(setTimeout(function(){Q.event.customEvent.fire({type:"hasScrollToQitan"})},300),setTimeout(function(){Q.event.customEvent.fire({type:"hasScrollToQitan"})},600),u.log("finishLoadQitanComment")):s()},500)};s()}})}}),a.exports=h});
define("kit/qitanPingback.js",["./getWebEventID","./userInfo","./flow","./basicstat/index","./basicstat/steps/bindParams","./basicstat/steps/createParamPool","./basicstat/steps/getType","./basicstat/steps/getPlatform","./basicstat/steps/getSource","./basicstat/steps/getSubSource","./basicstat/steps/getUid","./basicstat/steps/getPuid","./basicstat/steps/getRandom","./basicstat/steps/getCustomParam","./basicstat/steps/send"],function(e,t,a){var n=e("./getWebEventID");e("./userInfo"),e("./flow");var i=e("./basicstat/index");a.exports=function(t){var a={type:"9",s2:location.href};Q.object.extend(a,t);var o=new i(a);o.implement("绑定传入参数",e("./basicstat/steps/bindParams")),o.implement("创建参数池",e("./basicstat/steps/createParamPool")),o.implement("获取日志类型",e("./basicstat/steps/getType")),o.implement("获取平台产品",e("./basicstat/steps/getPlatform")),o.implement("获取资源类型",{methods:{_process:function(e,t){e.params.rt="qitancmt",t(null,e)}}}),o.implement("获取资源接口",{methods:{_process:function(e,a){e.params.ri=t.ri||"suc",a(null,e)}}}),o.implement("获取一级来源",e("./basicstat/steps/getSource")),o.implement("获取二级来源",e("./basicstat/steps/getSubSource")),o.implement("获取用户ID",e("./basicstat/steps/getUid")),o.implement("获取登录用户ID",e("./basicstat/steps/getPuid")),o.implement("获取资源ID",{methods:{_process:function(e,a){e.params.r=t.qitanId,a(null,e)}}}),o.implement("获取事件ID",{methods:{_process:function(e,t){n(function(a){e.params.ce=a,t(null,e)})}}}),o.implement("获取随机数",e("./basicstat/steps/getRandom")),o.implement("获取自定义参数",e("./basicstat/steps/getCustomParam")),o.implement("发送",e("./basicstat/steps/send")),o.init()}});
define("kit/flow.js",[],function(){var e=new Q.ic.InfoCenter({moduleName:"Flowjs"});!function(){var t={};!function(e){var t=function(){},a={};a.superclass=Object,a.callsuper=function(e){var t,a=this;this._realsuper=this._realsuper?this._realsuper.prototype.superclass:this.superclass,"string"==typeof e?(t=Array.prototype.slice.call(arguments,1),a._realsuper.prototype[e].apply(a,t)):(t=Array.prototype.slice.call(arguments,0),a._realsuper.apply(a,t)),this._realsuper=null},t.prototype=a,e.__2=t}(t),function(e){var t=e.__2,a=function(e){var n=e.extend||t,i=function(){},o=e.plugins||[];i.prototype=n.prototype;var r,s=e.construct||function(){},l=e.properties||{},d=e.methods||{},c=e.statics||{},m=e.isAbstract===!0,h=new i;for(r in h)h.hasOwnProperty(r)&&delete h[r];for(r in l)h[r]=l[r];for(r in d)h[r]=d[r];for(var u=0;u<o.length;u++){var p=o[u];for(r in p)h[r]=p[r]}if(!m)for(var f in h)if(h[f]==a.abstractMethod)throw new Error("Abstract method ["+f+"] is not implement.");h.constructor=s,h.superclass=n,s.prototype=h;for(r in c)s[r]=c[r];return s};a.abstractMethod=function(){throw new Error("Not implement.")},e.__1=a}(t),function(e){var t=e.__1,a=t({methods:{on:function(e,t){this._ep_createList();var a=function(e){t(e)};return e=e.toLowerCase(),this._ep_lists[e]=this._ep_lists[e]||[],this._ep_lists[e].push({type:e,listener:t,realListener:a}),this},un:function(e,t){if(this._ep_createList(),e){e=e.toLowerCase();var a=this._ep_lists[e];if(a){var n=(a.length,!t);a&&a.length>0&&(n===!0?this._ep_lists[e]=[]:a.forEach(function(e,n){e.listener===t&&a.splice(n,1)}))}}else this._ep_clearList();return this},fire:function(e){this._ep_createList();var t=e.type.toLowerCase(),a=e.data,n=this._ep_lists[t];return n&&n.length>0&&n.forEach(function(e){e.listener({type:t,data:a})}),this},_ep_clearList:function(){this._ep_lists=null},_ep_createList:function(){this._ep_lists||(this._ep_lists={})}}});e.__4=a}(t),function(e){var t=function(e){var t,a=Object.prototype.hasOwnProperty;if("object"!=typeof e||null==e)return!1;if(e.constructor&&!a.call(e,"constructor")&&!a.call(e.constructor.prototype,"isPrototypeOf"))return!1;for(t in e);return void 0===t||a.call(e,t)};e.__6=t}(t),function(e){var t=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},a=function(e){return"[object Object]"==Object.prototype.toString.call(e)},n=e.__6,i=function(e,o){var r,s,l,d,c,m,h=(arguments.length,e);if(!n(o))return o;if(r=o,a(r)||t(r))for(s in r)l=h[s],d=r[s],l!==d&&(d&&(a(d)||(c=t(d)))?(c?(c=!1,m=l&&t(l)?l:[]):m=l&&a(l)?l:{},h[s]=i(m,d)):void 0!==d&&(h[s]=d));return h};e.__5=i}(t),function(t){t.__10={isArray:Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},log:function(){var t=Array.prototype.slice.call(arguments,0),a=t.join("");e.log(a)},error:function(){var t=Array.prototype.slice.call(arguments,0),a=t.join("");e.error(a)}}}(t),function(e){var t=e.__10;e.__9={check:function(e,a){var n=this;if(!e)return!0;var i,o,r=!0;for(o in a)e.hasOwnProperty(o)||delete a[o];for(o in e){if(e[o],e[o].empty!==!0&&n.isEmpty(e[o],a[o]))throw i="字段["+o+"]值为空",t.error(i),new Error(i);if(e[o].empty!==!0||!n.isEmpty(e[o],a[o])){if("number"==e[o].type&&"number"!=typeof a[o])throw i="字段["+o+"]不是数字",t.error(i),new Error(i);if("string"==e[o].type&&"string"!=typeof a[o])throw i="字段["+o+"]不是字符串",t.error(i),new Error(i);if("array"==e[o].type){if(!n.checkArray(e[o],a[o]))throw i="字段["+o+"]值与定义不符",t.error(i),new Error(i)}else if("object"==e[o].type&&!n.checkObject(e[o].struct,a[o]))throw i="字段["+o+"]值与定义不符",t.error(i),new Error(i)}}return r},checkArray:function(e,a){var n=this;if(t.isArray(a)){for(var i=0;i<a.length;i++){var o=a[i];if(e.item&&!n.checkData(e.item,o))return!1}return!0}return!1},checkObject:function(e,t){return this.check(e,t)},isEmpty:function(e,t){return void 0===t?!0:"object"==e.type?null===t:"array"==e.type?0===t.length:""===t||void 0===t||null===t},checkData:function(e,t){return"number"==e.type&&"number"==typeof t?!0:"string"==e.type&&"string"==typeof t?!0:"boolean"==e.type&&"boolean"==typeof t?!0:"array"==e.type?this.checkArray(e.item,t):"object"==e.type?this.checkObject(e.struct,t):!1}}}(t),function(e){var t=function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e};e.__11=t}(t),function(e){var t=e.__1,a=e.__4,n=e.__9,i=e.__11,o=e.__10,r=t({plugins:[new a],isAbstract:!0,construct:function(e){e=e||{},this._data={__id:(new Date).getTime(),description:e.description},this.__struct=this._describeData(),this.__next=null,this.__end=!1,this.__pausing=!1,this.__callback=null},methods:{enter:function(e,t){if(this.__pausing=!1,!this.__checkInput(e))throw new Error("Data error.");var a=this;this._process(e,function(e,n){if(!a.__checkOutput(n))throw new Error("Result error.");var i=function(){t(e,n)};a.__pausing?a.__callback=i:i()})},destroy:function(){},_process:t.abstractMethod,_describeData:function(){return{}},next:function(e){return e?(this.isEnd()||(this.__next=e,this.end()),void 0):this.__next},end:function(){this.__end=!0},isEnd:function(){return this.__end},data:function(e){return 0===arguments.length?this._data:(i(this._data,e),void 0)},getStruct:function(){return this.__struct},pause:function(){this.__pausing=!0},resume:function(){this.__pausing=!1,this.__callback&&this.__callback()},__checkInput:function(e){return o.log("Check","input data for",this._data.description),n.check(this.__struct.input,e)},__checkOutput:function(e){return o.log("Check","output data for",this._data.description),n.check(this.__struct.output,e)}}});e.__8=r}(t),function(e){var t=e.__1,a=e.__8,n=t({extend:a,construct:function(e){this.callsuper(e)},isAbstract:!0});e.__7=n}(t),function(e){var t=e.__1,a=e.__8,n=e.__11,i=t({extend:a,construct:function(e){e=e||{},this.callsuper(e),this._cases=e.cases||{},this._default=e.defaultCase},isAbstract:!0,methods:{_select:function(e,t){var a=this._cases[e]||this._default;setTimeout(function(){a(t)},0)},cases:function(e){return e?(e.cases&&n(this._cases,e.cases),e.defaultCase&&(this._default=e.defaultCase),void 0):{defaultCase:this._default,cases:this._cases}}}});e.__13=i}(t),function(e){var t=e.__1,a=e.__13;e.__11;var n=t({extend:a,construct:function(e){e=e||{},this.callsuper(e),this._inputs=e.inputs||{},this._binded=!1},isAbstract:!0,methods:{_once:function(e){this._binded||(this._binded=!0,e())},inputs:function(e){var t={};return t.cases=e.inputs,this.cases(t)}}});e.__12=n}(t),function(e){var t=e.__1;e.__14=t({construct:function(){this._queue=[],this._event={}},methods:{enqueue:function(e){this._queue.push(e)},dequeue:function(){return 0===this._queue.length?(this.end(),null):this._queue.splice(0,1)[0]},isEmpty:function(){return 0===this._queue.length},end:function(e){this.fire("end",e)},on:function(e,t){this._event[e]||(this._event[e]=[]),this._event[e].push(t)},fire:function(e,t){if(this._event[e])for(var a=0;a<this._event[e].length;a++)this._event[e][a](t)},clear:function(){this._queue=[]}}})}(t),function(e){var t=e.__1,a=e.__10,n=e.__5,i=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},o=function(e){return"[object Object]"==Object.prototype.toString.call(e)},r=t({construct:function(){this._data={}},methods:{getData:function(e){var t={};if((new Date).getTime(),a.isArray(e)){for(var n=e.length,i=0;n>i;i++){var o=e[i];this._data.hasOwnProperty(o)&&(t[o]=this._data[o])}return t}return this._data[e.toString()]},setData:function(e,t){return this._data[e]=o(t)||i(t)?n(this._data[e]||{},t):t,!1}}});e.__15=r}(t),function(e){var t=e.__1,a=e.__4,n=e.__5,i=e.__7;e.__8;var o=e.__12,r=e.__13,s=e.__14,l=e.__15,d=e.__10,c=[],m=t({plugins:[new a],construct:function(e){e=e||{},this.__begin=new i({description:"Begin",struct:{}}),this.__steps=e.steps||{},this.__stepInstances={},this.__queue=new s,this.__timer=null,this.__prev=this.__begin,this.__data=new l,this.__interfaces={},this.__pausing={},this.__working={},this.__stepCount=0;for(var t in this)c.push(t)},isAbstract:!0,methods:{init:t.abstractMethod,implement:function(e,a){var n=t({extend:this.__steps[e],construct:a.construct||function(e){this.callsuper(e)},methods:a.methods});this.__stepInstances[e]=new n({description:e})},destroy:function(){var e=this.__stepInstances;for(var t in e)if(e.hasOwnProperty(t)){var a=e[t],n=this.__getStepData(a);try{a.destroy(n)}catch(i){}}},_go:function(e,t,a){var i=this;if(this.__timer&&clearTimeout(this.__timer),"string"==typeof e&&(e=this.__stepInstances[e]),e)if(a&&(e instanceof r&&!(e instanceof o)&&(e.cases(a),e.end()),e instanceof o&&e.inputs(a)),e.__paramData=t,this.__queue.enqueue({step:e}),this.__prev&&this.__prev.next(e),this.__prev=e,this.__sync){var s=this.__queue.dequeue(),l=this.__getStepData(s.step);n(l,s.step.__paramData);try{this.__process(s.step,l)}catch(d){throw i.__queue.clear(),d}this.__timer=setTimeout(function(){e.end(),i.__queue.clear()},0)}else this.__timer=setTimeout(function(){e.end(),i.__start(),i.__queue.clear()},0);else this.__timer=setTimeout(function(){i.__prev.end(),i.__start(),i.__queue.clear()},0)},_pause:function(){for(var e in this.__working)this.__working.hasOwnProperty(e)&&(this.__working[e].pause(),this.__pausing[e]=this.__working[e],delete this.__working[e])},_resume:function(){for(var e in this.__pausing)this.__pausing.hasOwnProperty(e)&&(this.__pausing[e].resume(),this.__working[e]=this.__pausing[e],delete this.__pausing[e])},_sync:function(e){this.__sync=!0,e(),this.__sync=!1},_addStep:function(e,t){this.__steps[e]=t},_addInterface:function(e,t){if(-1!=c.indexOf(e))throw new Error("Reserve property : "+e);this[e]=t,this.__interfaces[e]=t},_getData:function(e){return this.__data.getData(e)},__start:function(){var e=this.__queue.dequeue();if(e){var t=this.__getStepData(e.step);n(t,e.step.__paramData),this.__process(e.step,t)}},__process:function(e,t){d.log("步骤开始："+e.data().description),this.__working[e.data().__id]=e,this.__enter(e,t,function(t){if(d.log("步骤结束："+e.data().description),delete this.__working[e.data().__id],t&&this.__saveData(t),!this.__sync){var a=this.__getNext(e);if(a)if(d.log("即将开始下一步："+a.step.data().description),this.__stepCount++,this.__stepCount<20)this.__process(a.step,a.data);else{this.__stepCount=0;var n=this;setTimeout(function(){n.__process(a.step,a.data)},0)}}})},__saveData:function(e){for(var t in e)e.hasOwnProperty(t)&&this.__data.setData(t,e[t])},__getNext:function(e){var t=(e.__result,null),a=e.next();if(a){var i=this.__getStepData(a);n(i,a.__paramData),t={step:a,data:i}}return t},__getStepData:function(e){var t=e.getStruct(),a=[];if(t&&t.input)for(var i in t.input)t.input.hasOwnProperty(i)&&a.push(i);return n({},this.__data.getData(a))},__enter:function(e,t,a){var i=this,o={};n(o,t);var r=!1;e.enter(o,function(t,s){if(!r){r=!0;var l=n({},s);for(var d in o)delete o[d];e.__result=l,a.call(i,l)}})}}});e.__3=m}(t),function(e){window.Flowjs={V:"0.3.4",Class:e.__1,Flow:e.__3,Step:e.__8,Condition:e.__13,Input:e.__12}}(t)}(this)});
define("kit/basicstat/index.js",["./stepdef/bindParams","./stepdef/createParamPool","./stepdef/getType","./stepdef/getPlatform","./stepdef/getChannel","./stepdef/getSubChannel","./stepdef/getSource","./stepdef/getSubSource","./stepdef/getResType","./stepdef/getResInterface","./stepdef/getEid","./stepdef/getSeid","./stepdef/getRid","./stepdef/getUid","./stepdef/getPuid","./stepdef/getInterval","./stepdef/getRandom","./stepdef/getDefination","./stepdef/getUserAct","./stepdef/getPlayerAct","./stepdef/isNewUser","./stepdef/getCustomParam","./stepdef/send"],function(e,t,a){var n=Flowjs.Class({extend:Flowjs.Flow,construct:function(t){this.callsuper(t),this._addStep("绑定传入参数",e("./stepdef/bindParams")),this._addStep("创建参数池",e("./stepdef/createParamPool")),this._addStep("获取日志类型",e("./stepdef/getType")),this._addStep("获取平台产品",e("./stepdef/getPlatform")),this._addStep("获取一级频道",e("./stepdef/getChannel")),this._addStep("获取二级频道",e("./stepdef/getSubChannel")),this._addStep("获取一级来源",e("./stepdef/getSource")),this._addStep("获取二级来源",e("./stepdef/getSubSource")),this._addStep("获取资源类型",e("./stepdef/getResType")),this._addStep("获取资源接口",e("./stepdef/getResInterface")),this._addStep("获取事件ID",e("./stepdef/getEid")),this._addStep("获取来源事件ID",e("./stepdef/getSeid")),this._addStep("获取资源ID",e("./stepdef/getRid")),this._addStep("获取用户ID",e("./stepdef/getUid")),this._addStep("获取登录用户ID",e("./stepdef/getPuid")),this._addStep("获取时间长度",e("./stepdef/getInterval")),this._addStep("获取随机数",e("./stepdef/getRandom")),this._addStep("获取码流",e("./stepdef/getDefination")),this._addStep("获取用户行为",e("./stepdef/getUserAct")),this._addStep("获取播放器行为",e("./stepdef/getPlayerAct")),this._addStep("判断是否新用户",e("./stepdef/isNewUser")),this._addStep("获取自定义参数",e("./stepdef/getCustomParam")),this._addStep("发送",e("./stepdef/send")),this._options=t},methods:{init:function(){var e=this;e._go("绑定传入参数",{options:this._options}),e._go("创建参数池"),e._go("获取日志类型"),e._go("获取平台产品"),e._go("获取一级频道"),e._go("获取二级频道"),e._go("获取一级来源"),e._go("获取二级来源"),e._go("获取资源类型"),e._go("获取资源接口"),e._go("获取事件ID"),e._go("获取来源事件ID"),e._go("获取资源ID"),e._go("获取用户ID"),e._go("获取登录用户ID"),e._go("获取时间长度"),e._go("获取随机数"),e._go("获取码流"),e._go("获取用户行为"),e._go("获取播放器行为"),e._go("判断是否新用户"),e._go("获取自定义参数",{options:this._options}),e._go("发送")}}});a.exports=n});
define("kit/basicstat/stepdef/bindParams.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{options:{type:"object",empty:!0}},output:{options:{type:"object",empty:!0}}}}}});a.exports=i});
define("kit/basicstat/stepdef/createParamPool.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{},output:{params:{type:"object",struct:{hello:{type:"string",empty:!0}}}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getType.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getPlatform.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getChannel.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getSubChannel.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getSource.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getSubSource.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getResType.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getResInterface.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getEid.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getSeid.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getRid.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getUid.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getPuid.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getInterval.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getRandom.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getDefination.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object",empty:!0}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getUserAct.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getPlayerAct.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/isNewUser.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/getCustomParam.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"},options:{type:"object",empty:!0}},output:{params:{type:"object"}}}}}});a.exports=i});
define("kit/basicstat/stepdef/send.js",[],function(e,t,a){var n=Flowjs.Class,i=n({extend:Flowjs.Step,construct:function(e){this.callsuper(e)},isAbstract:!0,methods:{_describeData:function(){return{input:{params:{type:"object"}},output:{}}}}});a.exports=i});
define("kit/basicstat/steps/bindParams.js",[],function(e,t,a){a.exports={methods:{_process:function(e,t){t(null,e)}}}});
define("kit/basicstat/steps/createParamPool.js",[],function(e,t,a){a.exports={methods:{_process:function(e,t){t(null,{params:{}})}}}});
define("kit/basicstat/steps/getType.js",[],function(e,t,a){a.exports={methods:{_process:function(e,t){e.params.t=e.options.type,t(null,e)}}}});
define("kit/basicstat/steps/getPlatform.js",["../../statPlatform"],function(e,t,a){var n=e("../../statPlatform");a.exports={methods:{_process:function(e,t){var a=n.get();e.params.pf=a.platform,e.params.p=a.subpf,e.params.p1=a.product,e.params.p2=a.subpd,t(null,e)}}}});
define("kit/statPlatform.js",[],function(e,t,a){a.exports={get:function(e){var t="1",a="10",n="101",i="1011";return Q.browser.iPad?(t="2",a="20",n="202","live"==e&&(i="2016")):Q.browser.WP||Q.browser.android||Q.browser.iPhone?(t="2",a="20",n="201","live"==e&&(i="2016")):"live"==e&&(i="1012"),{platform:t,subpf:a,product:n,subpd:i}}}});
define("kit/basicstat/steps/getSource.js",[],function(e,t,a){a.exports={methods:{_process:function(e,t){e.params.s1="1",t(null,e)}}}});
define("kit/basicstat/steps/getSubSource.js",[],function(e,t,a){a.exports={methods:{_process:function(e,t){e.params.s2=location.href,t(null,e)}}}});
define("kit/basicstat/steps/getUid.js",["../../jsuid"],function(e,t,a){var n=e("../../jsuid");a.exports={methods:{_process:function(e,t){n.get(function(a){e.params.u=a,t(null,e)})}}}});
define("kit/jsuid.js",["./uuid"],function(e,t,a){var n=e("./uuid");a.exports={get:function(e){var t=Q.cookie.get("QC006");if(t)return e(t),void 0;var a=function(e){Q.cookie.set("QC006",e,{duration:31536e6,path:"/",domain:"iqiyi.com"})};n.get(function(t){a(t),e(t)})}}});
define("kit/basicstat/steps/getPuid.js",["../../userInfo"],function(e,t,a){var n=e("../../userInfo");a.exports={methods:{_process:function(e,t){e.params.pu=n.getUid(),t(null,e)}}}});
define("kit/basicstat/steps/getRandom.js",[],function(e,t,a){a.exports={methods:{_process:function(e,t){e.params.rn=(new Date).getTime(),t(null,e)}}}});
define("kit/basicstat/steps/getCustomParam.js",[],function(e,t,a){a.exports={methods:{_process:function(e,t){var a=e.params,n=e.options;if(n&&n.customParams){var i=n.customParams;for(var o in i)if(i.hasOwnProperty(o)){if(a.hasOwnProperty(o))throw new Error("自定义参数名称："+o+" 非法！");a[o]=i[o]||""}}t(null,e)}}}});
define("kit/basicstat/steps/send.js",[],function(e,t,a){a.exports={methods:{_process:function(e,t){Q.log.server(e.params,"http://msg.71.am/b"),t()}}}});
define("units/scrollbar_menu.js",["../components/units/pageJob","../components/action/checkDoms","../kit/responsive"],function(e,t,a){var i,n=e("../components/units/pageJob"),o=e("../components/action/checkDoms"),r=e("../kit/responsive"),s="scrollbar_menu",l={};n.create(s,{getDependentDoms:function(){var e=Q.$("[data-widget-scrollmenu=position]");l={reference:e,content:e.down("[data-scrollmenu-elem=floating]")}},check:function(){return o(l),!0},init:function(){var e=this;e.getDomsheight(),setTimeout(function(){e.resetPositon(),e.tempPromotion(),e.closeImgFloater()},300),Q.$(window).on("resize",function(){setTimeout(function(){e.resetPositon()},200)}),Q.$(window).on("scroll",function(){setTimeout(function(){e.resetPositon()},200)}),Q.$(window).on("resize",function(){setTimeout(function(){i&&e.initImgWrap()},200)}),Q.browser.IE7||Q.browser.IE6||r.on("responsiveDone",function(){i&&e.initImgWrap()})},getDomsheight:function(){l.reference.show(),l.heightArr=[];var e=l.content.attr("data-scrollmenu-heightsetting");if(e){l.heightArr=e.split(",");for(var t=0;t<l.heightArr.length;)l.heightArr[t]=parseInt(l.heightArr[t],10),t++}else for(var a=l.content.down("li"),i=0;i<a.length;i++){var n,o=Q.$(a[i]),r=o.css("display");o.show(),n=o.height(),"none"==r&&o.hide(),l.heightArr.push(n+5)}l.heightArr.length<3&&l.heightArr.splice(1,0,0),l.reference.hide()},resetPositon:function(){var e=l.reference,t=l.content,a=l.heightArr,i=parseInt(t.attr("data-scrollmenu-top"),10)||0,n=parseInt(t.attr("data-scrollmenu-left"),10);e.show();var o=e.width(),r=e.left(),s=r+o+n,d=Q.page.getViewWidth(),c=Q.page.getViewHeight(),u=Q.page.getScrollTop(),m=a[0]+a[1]+a[2],p=t.width(),h=parseInt(m/3,10),f=0,g=Q.$("#flashArea")||Q.$("#flashbox")||Q.$("#destinationBox"),v=g.top()+i,b=g.height(),y=0;l.content.down("li").forEach(function(e){"none"!=e.style.display&&y++});var U=1;o+2*(p+5)>d&&(U=0);var V=!1;b+v+h*y>c&&(V=!0),(Q.browser.IE6||Q.browser.IE7)&&b+v+h>c&&(V=!0);var w=!1;v+50>u&&(w=!0);var k=!0;U?(Q.event.customEvent.fire({type:"scroll_menu_show"}),V?Q.browser.IE6?(k=!1,f=w?c+u-(a[1]+a[2]):c+u-(a[0]+a[1]+a[2])-95):f=Q.browser.IE7?w?c-(a[1]+a[2]):c-(a[0]+a[1]+a[2])-95:w?c-(a[1]+a[2]):c-(a[0]+a[1]+a[2]):Q.browser.IE6?(k=!1,f=v+b+u):f=v+b,y>=2&&(f-=(y-1)*h),this.setCssPosition(k,s+1,f)):e.hide()},setCssPosition:function(e,t,a){var i=l.content;e?i.css("position","fixed"):i.css("position","absolute"),i.css("left",t+"px").css("top",a+"px")},tempPromotion:function(){var e=l.content,t=e.down('*[data-btn-pad="show"]'),a=e.down('*[data-btn-pad="hide"]');Q.browser.iPad&&t&&a&&(t.css("display",""),a.css("display","none"))},closeImgFloater:function(){var e=this,t=l.content;if(i=t.down('*[data-updatetip-elem="imgwrap"]')){var a=i.down('*[data-close="x"]');a&&a.on("click",function(e){Q.event.get(e).preventDefault(),i.hide()}),e.initImgWrap()}},initImgWrap:function(){var e=Q.page.getViewWidth(),t=l.reference.width();i.show();var a=i.width();a+t/2>e/2&&i.hide()}}),a.exports=s});
define("units/scrollToTop.js",["../components/units/pageJob","../components/action/checkDoms","../kit/yingyinPluginV2"],function(e,t,a){var n,i,o,r=e("../components/units/pageJob"),s=e("../components/action/checkDoms"),l=e("../kit/yingyinPluginV2"),d="scrollToTop",c={},m=1;r.create(d,{getDependentDoms:function(){var e=Q.$("[data-widget-totopbtn=totop]");c={widget:e}},check:function(){return s(c),!0},init:function(){var e=this,t=c.widget;o=t.attr("data-totopbtn-scrolltop")||0,o?t.css("visibility","hidden"):t.hide();var a=Q.$('[data-widget="scrolBarlClientAppDownLoad"]');a&&(l.check()||a.show(),/mac/i.test(navigator.platform)&&a.down("a").attr("href","http://app.iqiyi.com/mac/player/index.html")),n=t.attr("data-totopbtn-hoverclass")||"selected",i=t.attr("data-totopbtn-undownclass")||"unEffective";var r=parseInt(t.attr("data-totopbtn-time"),10)||100;setTimeout(function(){e.doMoveToTop()},300),Q.$(window).on("scroll",function(){setTimeout(function(){e.doMoveToTop()},200)}),Q.$(window).on("resize",function(){setTimeout(function(){e.doMoveToTop()},200)});var s=function(){m&&t.addClass(n)},d=function(){m&&t.removeClass(n)},h=function(e){if(m){var a=Q.page.getScrollTop();if(Q.browser.IE)window.scrollTo(0,0);else{var i=Q.anim.create(Q.$(document.body));i.onCompute=function(){window.scrollTo(0,this.info.scrollTo.animArray[this.counter]),this.counter++,this.counter==this.interval&&window.scrollTo(0,this.info.scrollTo.to)},i.duration(r).from("scrollTo",a).to("scrollTo",0).go()}t.hasClass(n)&&t.removeClass(n),Q.$(e.target||e.srcElement)}};t.on("click",h),t.on("mouseenter",s),t.on("mouseleave",d)},doMoveToTop:function(e){var t=c.widget,a=Q.page.getScrollTop();if(o)return o>a?(t.css("visibility","hidden"),m=0):(t.css("visibility","visible"),m=1),void 0;Q.$("*[data-scrollmenu-elem=floating]"),e=e||{};var n,i=Q.$("#flashArea")||Q.$("#destinationBox");n=i?i.top():45,n+50>a?(t.hide(),m=0):(t.show(),m=1)}}),a.exports=d});
define("units/playcountLazyload.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/playCountInterfaceJSONP","../kit/formatNumber"],function(e,t,a){var n=e("../components/units/pageJob");e("../components/action/checkDoms");var i,o,r=e("../interfaces/playCountInterfaceJSONP"),s=e("../kit/formatNumber"),l="playcountLazyload",d=1,c=[],m=[];n.create(l,{check:function(){return!0},init:function(){var e=this;Q.event.customEvent.on("newplaycount-lazyload",function(t){t=t||{},t.data&&t.data.wrap&&(d||(d=1),e.toBindLazy(),e.checkDoms(t.data.wrap),e.doHandleLazy())}),o=Q.$('*[data-widget-playconter="lazyload"]'),o&&o.length&&(e.toBindLazy(),e.checkDoms(o),e.doHandleLazy())},toBindLazy:function(){var e=this;d&&(i=e.doHandleLazy.bind(this),Q.$(window).on("scroll",i),Q.$(window).on("resize",i))},toDestroy:function(){Q.$(window).un("scroll",i),Q.$(window).un("resize",i),d=0},checkDoms:function(e){e.forEach(function(e){var t=Q.$(e),a=t.attr("data-pc-islazy");a?c.push(t):m.push(t)})},doHandleLazy:function(){for(var e=this,t=0;t<c.length;t++){var a=c[t],n=a.attr("data-playconter-isload");!n&&a.isInScreen()&&(e.getPlaycount({widgets:a}),c.splice(t,1),a.attr("data-playconter-isload","1"),--t)}if(c.length||e.toDestroy(),m.length){for(var i=0;i<m.length;i++){var o=m[i],r=o.attr("data-playconter-isload");r||(e.getPlaycount({widgets:o}),o.attr("data-playconter-isload","1"))}m.length=0}},requestPlayCount:function(e,t,a){e&&t&&!isNaN(a)&&new r(e).send({timeout:5e3,param:{src:"760859ef3a0046e0932d0381e641cbb6"},dataType:"jsonp"},function(e){t.length;for(var n,i=e.length,o=0,r="",l=a;a+i>l;l++)n=Q.$(t[l]),r=n.attr("data-pc-albumid"),o=e[l%200][r]+"",o=s.format(o),o&&n.html(o)})},getPlaycount:function(e){var t=this,a=e.widgets.down('*[data-widget-counter="player"]');if(a&&0!==a.length){for(var n,i=[],o=a.length,r=e.widgets.attr("data-pc-islive"),s=0,l=0;o>l;l++){if(n=Q.$(a[l]),0!==l&&(0===l%200||l===o-1)){l===o-1&&i.push(n.attr("data-pc-albumid"));var d={path:i.join(",")+"/",islive:r};t.requestPlayCount(d,a,s),i=[],s=l}i.push(n.attr("data-pc-albumid"))}1==o&&t.requestPlayCount({path:i.join(",")+"/",islive:r},a,0)}}}),a.exports=l});
define("interfaces/playCountInterfaceJSONP.js",["../kit/remoteInterface"],function(e,t,a){var n,i=e("../kit/remoteInterface");a.exports=Q.Class("RIPlayCount",{construct:function(e){e=e||{},e.islive=e.islive||"";var t="http://cache.video.qiyi.com/jp/pc/"+e.path;n=e.path.split("/")[1],this._remoteInterface=new i({url:t})},methods:{send:function(e,t){e.param=e.param||{},e.method="GET",e.dataType="jsonp",e.ifname="playcount",e.qoe=!0,this._remoteInterface.send(e,function(e){t&&t(e)})}}})});
define("kit/formatNumber.js",["../kit/i18nLangTransform"],function(e,t,a){var n=e("../kit/i18nLangTransform"),i={tenThousand:"万",hundredMillion:"亿"};n(i),a.exports={format:function(e){var t;e=parseInt(e,10);var a=1e5,n=1e4;return t=a>e?Q.string.divideNumber(e):10*a>e?parseFloat((e/n).toFixed(1),10)+i.tenThousand:1e3*a>e?parseFloat((e/n).toFixed(),10)+i.tenThousand:parseFloat((e/(1e3*a)).toFixed(2),10)+i.hundredMillion}}});
define("units/barrage1_5.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/barrageInterface","../kit/userInfo","../kit/placeholder","../config/siteDomain","../kit/qiyiPlayer","../kit/barrageMap","../kit/barragerUserStatus","../kit/caret","../action/barrageConfigPanel1_5","../action/scrollV2","../interfaces/ipRegionV2Interface"],function(e,t,a){var n=e("../components/units/pageJob");e("../components/action/checkDoms");var i=e("../interfaces/barrageInterface"),o=e("../kit/userInfo"),r=e("../kit/placeholder"),s=e("../config/siteDomain"),l=e("../kit/qiyiPlayer").getPlayer("video"),d=e("../kit/barrageMap"),c=e("../kit/barragerUserStatus"),m=e("../kit/caret"),u=new(e("../action/barrageConfigPanel1_5")),h=e("../action/scrollV2"),p=e("../interfaces/ipRegionV2Interface"),f="barrage1_5",g=300,v={},U=0,V=!1,y="",b={},k="normal",w="",_=!1,x=!1,L=null;Q.PageInfo&&Q.PageInfo.playPageInfo&&Q.PageInfo.playPageInfo.tvId&&(U=Q.PageInfo.playPageInfo.tvId,_=!0);var I=[],C={},W=!0,X=Q.browser.iPad,K={},S={},T={},E='<li  j-delegate="clickface" data-barrage-type="pic" data-barrage-face="item" title="衰" data-barrage-code="[衰]"><a class="" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li>',P='<li j-delegate="clickface" data-barrage-face="item" data-barrage-code="(⊙﹏⊙)" title="呃呃呃"><a href="" rseat="14090903_ywz" data-barrage-face="anchor" class="letterSpace">(⊙﹏⊙)</a></li>',A='<div class="facial-bd clearfix"><div class="facial-lt fl"><ul></ul></div><div class="facial-rt fl" style="height:90px;" ></div></div>',D='<span class="facial-line">|</span>',J='<a href=""></a>',N={enable:!0,save:!1,sending:!1},F={version:"1.5",hadCloseTips:0,isStar:!1,isOpen:0,isFirstConfigPanel:!0,isFirstGuideTip:!0,enable:0},M=!1,B='<div class="danmuLogin dn" id="danmuLogin"><p class="danmuLogin-info dn" id="danmuLoginInfo">请<a href="javascript:void(0)" j-delegate="login" class="green">登录</a>或<a href="javascript:void(0)" j-delegate="regist" class="green">注册爱奇艺账号</a></p></div>';n.create(f,{check:function(){return!0},getConfig:function(){var e=Q.cookie.get("QC118")||{};try{e=JSON.parse(e),C=e}catch(t){}return e||{}},changeFilterImage:function(e){this.extendConfig({isFilterImage:e}),l.setBarrageSetting({isFilterImage:e+""})},changeAlpha:function(e){this.extendConfig({opacity:e}),l.setBarrageSetting({alpha:e+""})},extendConfig:function(e){var t=this.getConfig();Q.object.extend(t,e),C=t;var a=JSON.stringify(t);Q.cookie.set("QC118",a,{path:"/",domain:s.SITE_DOMAIN,expires:31536e6})},reply:function(e){v.barrageInput.value("");var t=e.name;t||(t=c.getAnonyUserName());var a=v.barrageInput.width()||0;155>a&&(t=Q.string.truncate(t,12,"..."));var n="回复@"+t+"：";F.reply_contentId=e.replyContentId,F.reply_content=e.replyContent,F.replyStr=n,F.replyId=e.uid,F.replyName=e.name,F.replyPrefix=n,F.reply_udid=e.reply_udid,v.barrageInput[0].focus(),this.insertText(n)},sendContent:function(e,t){var a,n=this,r=new i;e=e;for(var s in b)a=new RegExp(s,"g"),e=e.replace(a,b[s]);var d=Q(v.widget).find(".atsomebody");e.length>50&&(e=e.substring(0,50)),l.getPlayInfo(function(a){var i=parseInt(a.currentTime,10)-2,s=a.tvid||a.tvID;i=i>0?i:0,F.size=u.getSize(),F.color=u.getColor(),F.position=u.getPosition(),F.background=u.getBackground(),n.contentType=F.isStar?2:0;var c={tvid:s,appid:21,font:F.size,contentType:n.contentType,color:F.color,position:F.position,play_time:i||0,content:e,authcookie:o.getAuthCookies(),udid:Q.cookie.get("QC005"),showTime:i,is_iqiyi:!0,is_video_page:!0,qypid:"01010011010000000000",categoryId:a.categoryId||""};"living"==k?(c.business="danmu_live",c.albumid=w):(c.business="danmu",Q.PageInfo&&Q.PageInfo.playPageInfo&&(c.albumid=Q.PageInfo.playPageInfo.albumId)),x&&(c.tpid=Q.$("#appid").value()),c.isReply="false",e=e.trim(),0===e.indexOf(F.replyStr)&&(c.reply_contentid=F.reply_contentId,c.reply_content=F.reply_content,c.reply_name=F.replyName,c.content=c.content.replace(F.replyPrefix,""),c.isReply="true"),F.background>=0&&(c.background=F.background),d&&d.length>0&&(c.interceptors=1001,c.reply_uid=Q(".select-option>li.selected").index("ul.select-option li"));var m=function(){c.reply_contentid="",c.reply_content="",c.reply_name="",u.insertColor(F.color),F.colors=u.getColorList(),F.colors&&n.extendConfig(F),t&&t(),Q.event.customEvent.fire({type:"barrage-commentsend",data:{}})};c.contentId="",l.setSelfSendBarrageInfo(c),F.isReal||"living"==k?m():r.send(c,function(e){"A00000"==e.code&&m()})})},insertText:function(e){var t=this;v.barrageInput[0].focus();var a=v.barrageInput.value();(Q.browser.IE6||Q.browser.IE7||Q.browser.IE8||Q.browser.IE9)&&v.barrageInput.__value()&&(v.barrageInput.__value().trim()==v.placeholder&&v.barrageInput.__value(""),a=v.barrageInput.__value());var n=50;a.length+e.length>n&&(e=e.substring(0,n-a.length),t.cannotInputTip()),m.insertText(v.barrageInput[0],e)},getPlayInfo:function(e){l.getPlayInfo(function(t){var a=parseInt(t.currentTime,10)-2,n=t.tvid||t.tvID;a=a>0?a:0,e&&e({playTime:a,tvid:n})})},guideTip:function(){if("festival"!=this.from&&N.enable){var e=function(e,t){1!=F.hadCloseTips&&(e.show(),setTimeout(function(){e.hide(),t&&t()},3e3))};if(!C.hadTip){e(v.btnTipWrap,function(){e(v.guideTip,function(){e(v.faceTipWrap,function(){})})}),C.hadTip=1;var t=JSON.stringify(C);Q.cookie.set("QC118",t,{path:"/",domain:"iqiyi.com",expires:31536e6})}}},resetPingback:function(e){var t="qpid="+e;if(e=e,v.kaiguan.attr("data-pb",t),v.sendBtn.attr("data-pb",t),v.faceBtn.attr("data-pb",t),v.faceItem){var a=v.faceItem.down('[data-barrage-face="anchor"]');a&&a.attr("data-pb",t)}},placeholder:function(e,t){e.attr("placeholder",t),v.placeholder=t},changeAdPlaceHolder:function(e){e.ty&&(Q.browser.IE6||Q.browser.IE7||Q.browser.IE8||Q.browser.IE9?(v.barrageInput.value=v.barrageInput.__value,v.barrageInput.value(""),r.unBind(v.barrageInput),this.placeholder(v.barrageInput,v.inputTxtDef),r.simulate(v.barrageInput,F.simulateParam)):this.placeholder(v.barrageInput,v.inputTxtDef))},cannotInputTip:function(){var e=this;if(!N.sending){var t=0,a=function(){setTimeout(function(){v.inputWrap&&v.inputWrap.addClass("tucao-input-no"),2==e.contentType&&v.barrageInput.addClass("tucao-input-none"),setTimeout(function(){v.inputWrap&&v.inputWrap.removeClass("tucao-input-no"),2==e.contentType&&v.barrageInput.removeClass("tucao-input-none"),3>t&&a()},100)},200),t++};a()}},openOrClose:function(e,t){var a=this;if("input"==t&&!F.isOpen){if(1!=C.hadCloseTip){var n=function(){v.btnTipWrap&&(v.btnTipWrap.removeClass("guide-switch"),v.btnTipWrap.show(),v.btnTipWrap.addClass("guide-switch-close")),v.guideTip&&v.guideTip.hide(),v.faceTipWrap&&v.faceTipWrap.hide(),F.hadCloseTips=1,a.extendConfig({hadCloseTip:1}),setTimeout(function(){v.btnTipWrap.hide()},3e3)};if(l.getIsInMainVideo)try{l.getIsInMainVideo(function(e){"1"==e?n():I.push(n)})}catch(i){}}var o="tucao_zt";Q.PageInfo&&(Q.PageInfo.playPageInfo||Q.PageInfo.livePlayInfo)&&(o="tucaou");var r={t:"20",u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),pf:"1",qpid:U,block:o,p:"10",p1:"101",rseat:"140820_tanm"};r.p2="living"==k?"1012":"1011",x&&(r.coop=L,r.block="tucaou"),Q.log.server(r,"http://msg.71.am/b")}var s;if(x){var d=Q.$("#playerInfo");if(d){var c=JSON.parse(d.value());s=c.barrage_inputbar_switchbtn_color}else s=Q.$("#switchBtn").attr("data-barrage-rgb");"input"!==t&&(e=Q.$("#switchBtn").hasClass("switch_open")?0:1)}var m;m=1==e?!0:!1,l.setBarrageStatus({isOpen:m}),Q.event.customEvent.fire({type:"barrage-switch-self",data:{isOpen:m}}),F.isOpen=e,this.extendConfig({isOpen:F.isOpen}),v.kaiguan.attr("rseat",0===e?"140743_opn":"140742_cls"),1==e?(v.widget.addClass("play-danmuWrap_open"),v.kaiguan.addClass("switch_open"),v.kaiguantip&&v.kaiguantip.hide(),x&&(v.kaiguan.css("background",s.replace("0x","#")),"input"!==t&&a._sendClickPingBack("140743_opn"))):(v.widget.removeClass("play-danmuWrap_open"),v.kaiguan.removeClass("switch_open"),x&&(v.kaiguan.css("background","#444"),"input"!==t&&a._sendClickPingBack("140742_cls")))},initScroll:function(e){if(e){var t=e.attr("data-scrollname"),a=Q.$("#scrollbar-"+t),n=e.down("[data-scrollwrap='"+t+"']");if(a){var i={doms:{widget:e,scrollBar:a,scrollWrap:n,scrollContent:e.down("[data-scrollcontent='"+t+"']")},name:t},o=n&&n.attr("data-scrollheight");o&&(i.scrollWrapHeight=o);try{new h(i)}catch(r){}}}},initFaceEvent:function(){var e=this,t=new i;v.faceModule&&(v.facePopup=v.faceModule);var a=function(e,t){for(var a=0;a<t.length;a++)if(e===t[a])return!0;return!1},n=function(e){e=e||[];for(var t=[1,2,3],n={},i=[],o=0;o<e.length;o++){var r=e[o].exclude.some(function(e){return"PC_JS"===e||"pc_js"===e});void 0===n[e[o].type]&&a(e[o].type,t)&&1===e[o].display&&!r&&(n[e[o].type]=o)}"3"in n&&(i[i.length]=e[n[3]]);for(var s in n)"3"!==s&&(i[i.length]=e[n[s]]);return i},r=function(){K.packageList=n(K.packageList);for(var e=K.packageList.length,t="",a="",i=0;e>i;i++)t+=J,i!=e-1&&(t+=D),a+=A;Q.$("#wrapft").html(t),Q.$("#panelContainer").html(a);var o=Q.$("#wrapft").down("a"),r=Q.$("#panelContainer>div");for(i=0;e>i;i++){var s=K.packageList[i],l=s.name;l=l.length>5?l=l.substring(0,5)+"...":l;var d=s.id,c=s.type,m=Q.$(o[i]);m.html(l),m.attr("data-barrage-switch",d),m.attr("class","facial-"+d);var u=Q.$(r[i]);u.attr("data-scrollname",d+"popup").attr("data-barrage-panel",d),Q.$(u.down("div")[0]).attr("data-scrollwrap",d+"popup"),1===c?u.down("ul").attr("data-scrollcontent",d+"popup").attr("id",d+"list").addClass("facial-con").addClass("clearfix"):3===c&&u.down("ul").attr("data-scrollcontent",d+"popup").attr("id",d+"list").addClass("facial-text-con"),Q.$(u.down("div")[1]).attr("id","scrollbar-"+d+"popup").css("height",0),Q.browser.IE6&&Q.$(u.down("div")[1]).css("overflow","hidden").css("font-size",0).css("line-height",0)}2!==e&&Q.$(".facial-tab a").css("width",(305-e-20+1)/e+"px")},s=0,l={},c={},u=function(a){t.requestUniqueBarrgae({url:K.path+K.packageList[a].id+"_config.json"},function(t){if("E00000"==t.code)return Q.$("#"+K.packageList[a].id+"list").html('<div style="color:red"><p>图片表情包下载失败</p></div>'),void 0;T=t.data;for(var n=T.emoticonList.length,i="",o=T.id,r=0;n>r;r++)i+=E;Q.$("#"+o+"list").html(i);var d=Q.$("#"+o+"list").down("li"),m=-1,u=T.eUrl;for(r=0;r<u.length;r++)if(-1!=u[r].platform.search(/pc-js/i)){m=r;break}var h=T.eUrl[m].sWidth;for(T.eUrl[m].sHeight,r=0;n>r;r++){var p=T.emoticonList[r],f=p.name;b["\\["+T.prefix+p.name+"\\]"]="["+T.id+p.id+"]";var g=Q.$(d[r]),U=Q.$(d[r]).down("a");g.attr("title",f),g.attr("data-barrage-code","["+T.prefix+f+"]"),U.css("background","url("+T.eUrl[m].value+") no-repeat"),U.css("backgroundPosition",-r*h+"px"+" 0px"),U.attr("rseat","14090903_"+K.packageList[a].id)}s===a&&void 0===l[a]&&(e.initScroll(Q.$(v.FacePanel[a])),l[a]=1);var V=Q.$('[data-scrollwrap="'+T.id+'popup"]');Q.browser.IE6&&V&&V.attr("data-scrollheight",150),c[s]=!0,v.faceItem=v.facePopup&&v.facePopup.down('[data-barrage-face="item"]')})},h=function(a){t.requestUniqueBarrgae({url:K.path+K.packageList[a].id+"_config.json"},function(t){if("E00000"==t.code)return Q.$("#"+K.packageList[a].id+"list").html('<div style="color:red"><p>颜文字表情包下载失败</p></div>'),void 0;S=t.data;for(var n=S.emoticonList,i=n.length,o=S.id,r="",d=0;i>d;d++)r+=P;Q.$("#"+o+"list").html(r);for(var m=Q.$("#"+o+"list").down("li"),u=0,h=0;i>h;h++){var p=S.emoticonList[h],f=p.content;if(""!==f){var g=Q.$(m[u]);g.attr("title",p.name),g.attr("data-barrage-code",f);var U=g.down("a");U.html(f).attr("rseat","14090903_"+K.packageList[a].id),f.length>=10&&(g.attr("class","facial-text-lg"),(Q.browser.IE6||Q.browser.IE7)&&U.css("width","136px")),u++}}for(;h>u;){var V=Q.$(m[u])[0];V.parentNode.removeChild(V),u++}s==a&&void 0===l[a]&&(e.initScroll(Q.$(v.FacePanel[a])),l[a]=1);var y=Q.$('[data-scrollwrap="'+S.id+'popup"]');Q.browser.IE6&&y&&y.attr("data-scrollheight",150),c[s]=!0,v.faceItem=v.facePopup&&v.facePopup.down('[data-barrage-face="item"]')})},p=function(e){var t=K.packageList[e].type;3===t?h(e):1===t&&u(e)},f=function(e){Q.$(v.FacePanel[e]).removeClass("dn"),Q.$(v.SwitchDom[e]).addClass("selected");var t=0;t=K.packageList.length;for(var a=0;t>a;a++)a!=e&&(Q.$(v.FacePanel[a]).addClass("dn"),Q.$(v.SwitchDom[a]).removeClass("selected"));s=e,c[s]||p(e)};if(Q.browser.IE6||Q.browser.IE7||Q.browser.IE8||Q.browser.IE9){var U="";v.barrageInput[0].onbeforedeactivate=function(){U=m.getCaretPosition(v.barrageInput[0])},v.barrageInput[0].onactivate=function(){m.setCaretPosition(v.barrageInput[0],{start:U,end:U})}}Q.$(document).delegate("clickface",function(t){var a=Q.$(t.target);Q.event.get(t).preventDefault();var n=a.attr("data-barrage-code");a.attr("data-barrage-type"),e.insertText(n),N.save=!1}),Q.$(document).delegate("clickface",function(){V=!0},"mousedown"),Q.$(document).delegate("clickface",function(){V=!1},"mouseup");var y=function(){if(v.SwitchDom)for(var t=function(t){return function(a){Q.event.get(a).preventDefault(),f(t),e.extendConfig({whichFace:t})}},a=0;a<v.SwitchDom.length;a++)Q.$(v.SwitchDom[a]).on("click",t(a))},k=null,w="smile-hover",_=function(){var e="";k=setTimeout(function(){e=v.facePopup&&v.facePopup.hide(),e=v.faceBtn&&v.faceBtn.removeClass("smile-hover")},g)};v.faceBtn&&v.faceBtn.on("mouseleave",function(){_()});var L=!0,I=function(){if(L){var a=e.getConfig();v.faceModule&&(v.faceModule.html(d.faceTemplate),t.requestTotalBarrgae({},function(e){if("E00000"==e.code)return Q.$("#panelContainer").html('<div style="color:red;"><p>"加载失败。"</p></div>'),void 0;K=e.data,r(),v.SwitchDom=v.facePopup.down("[data-barrage-switch]"),v.FacePanel=v.facePopup.down("[data-barrage-panel]"),v.facePopup.show();try{void 0===a.whichFace?f(0):a.whichFace>=0&&(a.whichFace>=v.SwitchDom.length&&(a.whichFace=0),f(a.whichFace))}catch(t){}y(),L=!1}))}v.facePopup.show(),v.faceTipWrap.hide(),L||c[s]||!Q.$("#"+K.packageList[s].id+"list").children("div")||f(s)};v.faceBtn&&v.faceBtn.on("click",function(e){N.enable&&(o.isLogin()||x)&&(Q.event.get(e).preventDefault(),v.faceBtn.addClass(w),clearTimeout(k),I(),Q(v.widget).find(".blty-danmu-tip").is(":visible")&&Q(v.widget).find(".blty-danmu-tip").hide())}),v.facePopup&&v.facePopup.on("mouseenter",function(){clearTimeout(k)}),Q.$(document).on("click",function(e){e=Q.event.get(e),V=!1;var t=Q.$(e.target);v.facePopup&&(v.facePopup.contains(t)||v.faceBtn.contains(t)||t[0]!=v.faceBtn[0]&&_())})},initConfigPanelEvent:function(){var e=0,t=this,a="";v.Panel=v.configModule||v.Panel;var n=function(){var e=v.configModule&&v.configModule.attr("data-render"),n=v.configModule.attr("data-rendertype");e||(1==n?a=v.configModule&&v.configModule.html(d.configStarTemplate):2!=n&&n||(a=v.configModule&&v.configModule.html(d.configTemplate)),v.configModule&&v.configModule.attr("data-render",1),v.panel=v.configModule.down('[data-barrage-panel="panel"]'),u.init({ctrl:t,widget:v.Panel}),u.resetConfig());var i={t:"21",u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),pf:"1",p2:"living"==k?"1012":" 1011",block:"140826_dmfc",p:"10",p1:"101",bstp:"24_dmfc"};x&&(i.coop=L),Q.log.server(i,"http://msg.71.am/b"),v.configBtn&&v.configBtn.addClass("set-hover"),v.configPanel.addClass("tucao-static-open"),v.configPanel.addClass("tucao-static-open_top")},i=function(){v.configBtn&&v.configBtn.removeClass("set-hover"),v.configPanel.removeClass("tucao-static-open"),v.configPanel.removeClass("tucao-static-open_top")};F.isFirstConfigPanel&&(v.configBtn&&(v.configBtn.on("mouseleave",function(){e=setTimeout(function(){i()},g)}),v.configBtn.on("click",function(t){N.enable&&(Q.event.get(t).preventDefault(),clearTimeout(e),n(),Q(v.widget).find(".blty-danmu-tip").is(":visible")&&Q(v.widget).find(".blty-danmu-tip").hide())})),v.Panel&&v.Panel.on("mouseenter",function(){clearTimeout(e)}),Q.$(document).on("click",function(e){e=Q.event.get(e);var t=Q.$(e.target);v.Panel&&v.configBtn&&(v.Panel.contains(t)||v.configBtn.contains(t)||t[0]!=v.configBtn[0]&&i())}),v.Panel.on("mouseleave",function(){e=setTimeout(function(){i()},g)}),F.isFirstConfigPanel=!1)},initSwithEvent:function(){var e=this.openOrClose.bind(this),t=!1,a=0,n=0;v.kaiguan.on("click",function(e){Q.event.get(e).preventDefault()}),v.kaiguan.on("mousedown",function(e){Q.event.get(e).preventDefault(),a=e.offsetX||e.layerX,n=e.offsetX||e.layerX,t=!0}),v.kaiguan.on("mousemove",function(n){if(Q.event.get(n).preventDefault(),!t||0===a)return!1;var i=n.offsetX||n.layerX;i-a>20?(a=0,e(1)):-20>i-a&&(a=0,e(0))}),v.kaiguan.on("mouseup",function(i){Q.event.get(i).preventDefault(),t=!1;var o=i.offsetX||i.layerX;Math.abs(o-n)<10&&(F.isOpen=1==F.isOpen?0:1,e(F.isOpen)),a=0,n=0})},initLoginRegSendEvent:function(){var e=v.barrageTool||v.widget;e=Q(e),Q(v.inputWrap).append(B);var t=Q("#danmuLogin"),a=Q("#danmuLoginInfo");o.isLogin()||(v.barrageInput.attr("disabled","disabled"),t.removeClass("dn"),a.removeClass("dn")),Q.event.customEvent.on("login",function(){v.barrageInput.removeAttr("disabled"),t.addClass("dn"),a.addClass("dn")}),Q.event.customEvent.on("logout",function(){v.barrageInput.attr("disabled","disabled"),t.removeClass("dn"),a.removeClass("dn")})},sendContentEvent:function(){var e=this;if(N.enable){var t=this.openOrClose.bind(this),a=function(a){return""===a?(e.cannotInputTip(),v.barrageInput.attr("placeholder","发送内容不能为空哦"),void 0):(N.sending||(N.sending=!0,e.sendContent(a,function(){t(1,"input");var e=Q(v.widget).find(".atsomebody"),a="";e&&e.length>0?(a=Q(v.widget).find(".select-option").find(".selected").find("a").text(),"所有人"===a?(v.barrageInput.value(""),(Q.browser.IE6||Q.browser.IE7||Q.browser.IE8||Q.browser.IE9)&&v.barrageInput.value(" ")):(a="@"+a+"：",v.barrageInput.value(a))):(v.barrageInput.value(""),(Q.browser.IE6||Q.browser.IE7||Q.browser.IE8||Q.browser.IE9)&&v.barrageInput.value(" ")),v.barrageInput[0].focus()}),N.save=!1,N.sending=!1,x&&e._sendClickPingBack("140730_set")),void 0)};v.barrageInput.on("focus",function(){v.inputWrap&&v.inputWrap.removeClass("tucao-input-default"),v.barrageInput.addClass("input-activated")}),v.barrageInput.on("blur",function(){(Q.browser.IE6||Q.browser.IE7||Q.browser.IE8||Q.browser.IE9)&&""===v.barrageInput.value().trim()&&v.barrageInput.value(""),V===!1&&(v.inputWrap&&v.inputWrap.addClass("tucao-input-default"),v.barrageInput.removeClass("input-activated"))}),v.sendBtn.on("click",function(e){if(o.isLogin()||x){Q.event.get(e).preventDefault();var t=v.barrageInput.value().trim();a(t)}else Q.browser.IE6&&Q.external.openLoginBox()}),v.barrageInput.on("keydown",function(t){e.placeholder(v.barrageInput,v.placeholder);var n=v.barrageInput.value().trim();n.length>=(e.inputMaxLength||50)&&e.cannotInputTip(),13==t.keyCode?a(n):N.save||(N.save=!0,e.getPlayInfo(function(e){Q.object.extend(F,e)}))})}},changeStarBarrage:function(e){e&&l.getPlayInfo(function(t){var a=t.tvid||t.tvID,n=c.userIsStar(e,a);F.isStar=n,F.isReal=1==e.isConnected;var i=1==e.isConnected&&n?1:2;v.configModule.removeAttr("data-render"),v.configModule.attr("data-rendertype",i)})},kaiguanTip:function(){var e=this.getConfig();!e.barragelight&&1!=F.isOpen&&v.kaiguantip&&(v.kaiguantip.show(),this.extendConfig({barragelight:1}),setTimeout(function(){v.kaiguantip&&v.kaiguantip.hide()},3e4))},bindEvent:function(){var e=this;if(x||e.initLoginRegSendEvent(),u.filterImageConfig(this),2==this.contentType){var t=function(){v.sendBtn.removeClass("Send-none"),N.sending=!1},a=function(){v.sendBtn.addClass("Send-none"),N.sending=!0};o.isLogin()?t():a(),u.init({ctrl:this,widget:v.Panel}),Q.event.customEvent.on("logout",function(){a()}),Q.event.customEvent.on("login",function(){t()})}u.resetConfig(),v.kaiguantipClose&&v.kaiguantipClose.on("click",function(e){Q.event.get(e).preventDefault(),v.kaiguantip.hide()}),l.on("barrageReply",function(t){e.reply(t.data)});var n=function(){v.configModule.removeAttr("data-render"),v.configModule.removeAttr("data-rendertype")};Q.event.customEvent.on("logout",function(){n()}),l.on("videoChanged",function(t){e.festivalForbiddenBarrage(t.data),e.changeAdPlaceHolder(t.data,1),N.save=!1,n(),e.closeBarrage(),e.resetPingback(t.data.tvid)}),l.on("liveChannelChanged",function(t){N.save=!1;var a=t.data,n=a.tvID;e.closeBarrage(),e.resetPingback(n)}),l.on("StartPlay",function(t){F.isFirstGuideTip&&(e.guideTip(),F.isFirstGuideTip=!1),e.resetPingback(t.data.tvid||t.tvID);var a=I.pop();a&&a()}),Q.event.customEvent.on("login",function(){e.changeStarBarrage(y)}),l.on("setBarrageInteractInfo",function(t){t=t.data,y=t,e.changeStarBarrage(y)}),this.sendContentEvent(),this.initSwithEvent(),this.initFaceEvent(),this.initConfigPanelEvent(),2==this.contentType&&this.openOrClose(1)},closeBarrage:function(){var e=v.barrageTool||v.widget;"short"!=k||v.barrageTool||(e=Q.$("#block-tucaou")||e),e.hide();var t=Q('[data-barrage-dmmask="adfloater"]');t.length>0&&t.removeClass("dn")},displayHideBarrage:function(e){var t=v.barrageTool||v.widget;"short"!=k||v.barrageTool||(t=Q.$("#block-tucaou")||t),t=Q(t);var a=t.find(".danmu-main"),n=t.find(".danmu-close"),i=this.openOrClose.bind(this),o=Q('[data-barrage-dmmask="adfloater"]');if(X)return t.hide(),void 0;if(!M)return t.hide(),o.length>0&&o.removeClass("dn"),void 0;var r=Q.$("#flashArea"),s=e.data.configInfo,l=s.inputBoxEnable,d=s.contentDisplayEnable;return s.fakeWriteEnable,s.albumid&&(w=s.albumid),W?(!l&&d?(a&&a.hide(),n&&n.fadeIn(3e3),r&&"long"==k&&r.addClass("tucaoWrap"),o.length>0&&o.addClass("dn"),t.fadeIn(3e3),i(F.isOpen)):l||d?l&&d&&(o.length>0&&o.addClass("dn"),a&&(Q("body").hasClass("qypage-980")?a.show(function(){Q(this)[0].style.display=""}):a.fadeIn(3e3)),n&&n.fadeIn(3e3),t.fadeIn(3e3),r&&"long"==k&&r.addClass("tucaoWrap"),i(F.isOpen)):(r&&"long"==k&&r.removeClass("tucaoWrap"),"short"==k&&setTimeout(function(){v.widget.removeClass("play-danmuWrap_open"),v.kaiguan.removeClass("switch_open")},3e3),t.fadeOut(3e3),o.length>0&&o.removeClass("dn")),void 0):(t.hide(),void 0)},festivalForbiddenBarrage:function(e){var t=this;if(e&&(e.sid||e.tvid))if("202445101"==e.sid||"260135123"==e.tvid){var a=function(e){return/OVERSEA/.test(e.t)?(v.barrageInput.attr("disabled","true"),N.enable=!1,v.configBtn.addClass("tucao-btn-disabled"),v.faceBtn.addClass("tucao-bqBtn-disabled"),v.sendBtn.hide(),v.widget.removeClass("play-danmuWrap-chunwan"),void 0):(t.kaiguanTip(),void 0)},n=Q.cookie.get("festival2015barrage");if(n){var i=JSON.parse(n);return a(i),void 0}var r=new p;r.request({},function(e){if("A00000"===e.code){e=e.data;var t=JSON.stringify(e);Q.cookie.set("festival2015barrage",t,{expires:864e5,path:"/"}),a(e)}})}else v.barrageInput.removeAttr("disabled"),N.enable=!0,v.configBtn.removeClass("tucao-btn-disabled"),v.faceBtn.removeClass("tucao-bqBtn-disabled"),v.sendBtn.show(),o.isLogin()||x||v.barrageInput.attr("disabled","disabled")},_sendClickPingBack:function(e){var t=Q.$("#flashbox").attr("data-player-tvid");Q.log.server({t:"20",u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),pf:"1",qpid:t,block:"tucaou",p:"10",p1:"101",rseat:e,p2:"1011",coop:L},"http://msg.71.am/b")},init:function(){var e=this;v.widget=Q.$("[data-widget-barrage1_5]"),Q.event.customEvent.on("lazyInitBarrage",function(t){v.widget=t.data.widget,k=v.widget.attr("data-barrage1_5-type")||k,x=!0,e.initBarrage()}),v.widget&&v.widget&&(k=v.widget.attr("data-barrage1_5-type")||k,e.initBarrage())},initBarrage:function(){var e=this;v.kaiguan=v.widget.down('[data-barrage-status="show"]'),v.barrageInput=v.widget.down('[data-barrage-input="barrage"]'),v.sendBtn=v.widget.down('[data-barrage-send="barrage"]'),v.faceBtn=v.widget.down('[data-barrage-face="barrage"]'),v.btnTipWrap=v.widget.down('[data-barrage-btntip="wrap"]'),v.faceTipWrap=v.widget.down('[data-barrage-facetip="wrap"]'),v.faceTipClose=v.widget.down('[data-barrage-facetip="close"]'),v.facePopup=v.widget.down('[data-barrage-facepopup="barrage"]'),v.guideTip=v.widget.down('[data-barrage-guide="tip"]'),v.guideTipClose=v.widget.down('[data-barrage-guide="close"]'),v.kaiguanWrap=v.widget.down('[data-barrage-wrap="kaiguan"]'),v.configBtn=v.widget.down('[data-barrage-config="config"]'),v.configWrap=v.widget.down('[data-barrage-wrap="config"]'),v.configPanel=v.widget.down('[data-barrage-panel="config"]'),v.barrageTool=v.widget.down('[data-barrage-ele="barrage"]'),v.configModule=v.widget.down('[data-barrage-module="config"]'),v.faceModule=v.widget.down('[data-barrage-module="face"]'),v.inputWrap=v.widget.down('[data-barrage-wrap="input"]'),this.contentType=v.widget.attr("data-barrage-contenttype"),this.inputMaxLength=v.barrageInput.attr("maxlength"),v.kaiguantip=v.widget.down('[data-barrage-tip="kaiguantip"]'),v.kaiguantipClose=v.widget.down('[data-barrage-close="kaiguantip"]'),v.Panel=v.widget.down('[data-barrage-panel="panel"]'),v.inputTxtDef=v.barrageInput.attr("placeholder")||v.barrageInput.attr("oldplaceholder")||"可以在这里输入弹幕哦！";var t={tipColor:"#333"};"short"!=k&&"living"!=k&&_||(t.tipColor="#999",t.valColor="#999"),F.simulateParam=t,r.simulate(v.barrageInput,t);var a=Q.PageInfo&&Q.PageInfo.playPageInfo,n={sid:a&&a.sourceId};e.changeAdPlaceHolder(n),v.placeholder=v.barrageInput.attr("placeholder"),v.inputTxtDef=v.barrageInput.attr("oldplaceholder")||v.barrageInput.attr("placeholder")||"可以在这里输入弹幕哦！","1"==v.widget.attr("data-barrage1_5-firstopen")&&(F.isOpen=1);var i=this.getConfig();F.isOpen=0===i.isOpen?0:i.isOpen||F.isOpen||0;var o=Q.$("#flashbox");if(o){var s=o.attr("data-player-tvid");s&&this.festivalForbiddenBarrage({tvid:s}),"260135123"==s&&(this.from="festival")}var d=v.widget.attr("data-barrage1_5-defaultopen");"1"==d&&"festival"!=this.from&&(F.isOpen=1);var c="",m="";if(Q.event.customEvent.on("startPlayLive",function(e){c=e.data.tvId}),Q.event.customEvent.on("barrage-switch-other",function(t){t=t||{},t=t.data||{},e.openOrClose(t.isOpen),"flashright"===t.vfrom&&e.cannotInputTip()}),Q.PageInfo&&Q.PageInfo.playPageInfo&&(c=Q.PageInfo.playPageInfo.tvId,m=Q.PageInfo.playPageInfo.albumId),x){F.hadCloseTips=1,F.isFirstGuideTip=!1;var u=Q.$("#switchBtn");L=Q.$("#appKey").value(),F.isOpen=u.hasClass("switch_open")?1:0}if(Q.log.server({t:"21",u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),pf:"1",bstp:"24_dmfc",p2:"living"==k?"1012":"1011",qpid:c,aid:m,block:"1409011_dm",p:"10",p1:"101"},"http://msg.71.am/b"),Q.PageInfo&&Q.PageInfo.livePlayInfo){var h=Q.PageInfo.livePlayInfo.tvId;h&&this.festivalForbiddenBarrage({tvid:h})}var p=v.widget.attr("data-issetprivate");"true"===p&&(W=!1,Q.event.customEvent.on("swf_playerStateChange",function(e){e=e||{},e=e.data||{};var t=e.state||"",a=e.privateVideo;("DataReady"==t||"Error"==t)&&("1"===a?W=!1:"0"===a&&(W=!0))})),X&&e.displayHideBarrage(),l.getVideoInfo(function(t){e.festivalForbiddenBarrage(t),e.changeAdPlaceHolder(t),1!=t.isPopup?(M=!1,e.displayHideBarrage(t)):M=!0}),l.getPlayInfo(function(t){e.resetPingback(t.tvid||t.tvID)}),l.on("dataready",function(){l.getPlayInfo(function(t){e.resetPingback(t.tvid||t.tvID)})}),l.on("barrageState",function(t){e.openOrClose(t.data.barrageState)}),l.on("setHasBarrageConfigInfo",function(t){if(M=!0,x){var a=t.data.configInfo,n=a.inputBoxEnable,i=a.contentDisplayEnable;if(n&&i)return}e.displayHideBarrage(t)}),l.getHasBarrageConfigInfo();try{l.getIsInMainVideo(function(t){"1"==t&&(F.isFirstGuideTip=!1,e.guideTip())})}catch(f){}this.bindEvent()}}),a.exports=f});
define("interfaces/barrageInterface.js",["../kit/remoteInterface"],function(e,t,a){var n=e("../kit/remoteInterface");a.exports=Q.Class("barrageInterface",{construct:function(){this._remoteInterface=new n({publish:{url:"http://bar.i.iqiyi.com/myna-api/publish"},getStarBarrage:{url:"http://bar.i.iqiyi.com/myna-api/get_time_bullets"},getSortedBullets:{url:"http://bar.i.iqiyi.com/myna-api/get_sorted_bullets"},getTotalBarrage:{url:"http://cmts.iqiyi.com/emoticon/ep_config.json"}})},methods:{requestTotalBarrgae:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"getTotalBarrage",param:e,cors:!0,method:"GET",jsonp:"callback",jsonpCallback:"onsuccess",withCredentials:!0},function(a){t&&t(a,e)})},requestUniqueBarrgae:function(e,t){e=e||{},this._remoteInterface._remoteInterfaces.getUniqueBarrage={url:e.url},this._remoteInterface.send({dataType:"jsonp",ifname:"getUniqueBarrage",param:{},cors:!0,method:"GET",jsonp:"callback",jsonpCallback:"success",withCredentials:!0},function(a){t&&t(a,e)})},send:function(e,t){e=e||{},e.callback="bar"+(new Date).getTime(),this._remoteInterface.send({dataType:"jsonp",ifname:"publish",param:e,cors:!0,method:"POST",withCredentials:!0},function(a){t&&t(a,e)})},requestStarBarrgae:function(e,t){e=e||{},e.callback="bar"+(new Date).getTime(),this._remoteInterface.send({dataType:"jsonp",ifname:"getStarBarrage",param:e,cors:!0,method:"GET",withCredentials:!0},function(a){t&&t(a,e)})},requestSortedBullets:function(e,t){e=e||{},e.callback="bar"+(new Date).getTime(),this._remoteInterface.send({dataType:"jsonp",ifname:"getSortedBullets",param:e,cors:!0,method:"GET",withCredentials:!0},function(a){t&&t(a,e)})}}})});
define("kit/barrageMap.js",[],function(e,t,a){a.exports={imageMap:{"[鬼脸]":"[000]","[衰]":"[001]","[甩泪]":"[002]","[亲亲]":"[003]","[鄙视]":"[004]","[高兴]":"[005]","[暴走]":"[006]","[电眼]":"[007]","[皱眉]":"[008]","[我吐]":"[009]","[惨]":"[010]","[惊悚]":"[011]","[忧伤]":"[012]","[基情]":"[013]","[大哭]":"[014]","[捂脸]":"[015]","[萌]":"[016]","[欧耶]":"[017]","[花痴]":"[018]","[委屈]":"[019]","[无语]":"[020]","[跌眼镜]":"[021]","[怨气]":"[022]","[哼哼]":"[023]","[吵架]":"[024]","[啦啦啦]":"[025]","[困]":"[026]","[窃喜]":"[027]","[石化]":"[028]","[雷劈]":"[029]"},configStarTemplate:'<div data-barrage-panel="panel" class="danmu-set-v danmu-star-set-v" style=""> <div class="danmu-set_arrowWrap"><i class="danmu-set_arrow"></i><i class="danmu-set_arrowInner"></i></div> <div class="set-bd-v"><div class="danmuSet-lt fl"> <div class="set-bd-tit"> <h4>弹幕文字<em>编辑发送的文字样式</em></h4></div><div class="set-bd-container clearfix"><!-- 字号 --> <div class="setFontSize fl"> <h3>字号</h3> <ul><li class="selected"><a rseat="140826_zihao" data-barrage-size="30" class="fs18" href="javascript:void(0);">大</a></li><li class=""><a rseat="140826_zihao" data-barrage-size="20" class="fs16" href="javascript:void(0);">中</a></li><li><a rseat="140826_zihao" data-barrage-size="10" class="fs12" href="javascript:void(0);">小</a></li></ul></div><!-- 字号 end--><!-- 颜色 --><div class="danmu-set-colorHd-v fl"> <div class="danmu-set-colorHd-tit clearfix"><span class="tag-fs fl">颜色</span><span class="colBox fl"> <input type="text" data-barrage-customcolor="color" placeholder="#FFFFFF"> </span><span data-barrage-preview="color" class="save-color-box fl" style="background: none repeat scroll 0% 0% rgb(255, 255, 255);"></span></div><div class="color-set-bd mt5"> <ul><li><a class="col-FFFFFF" href="javascript:void(0);" data-barrage-color="FFFFFF" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-000000" href="javascript:void(0);" data-barrage-color="000000" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-FF0000" href="javascript:void(0);" data-barrage-color="FF0000" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-FF9900" href="javascript:void(0);" data-barrage-color="FF9900" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-FFF100" href="javascript:void(0);" data-barrage-color="FFF100" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-00FF12" href="javascript:void(0);"  data-barrage-color="00FF12" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-00FCFF" href="javascript:void(0);"  data-barrage-color="00FCFF" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-008CEE" href="javascript:void(0);" data-barrage-color="008CEE" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-8600FF" href=javascript:void(0);"" data-barrage-color="8600FF" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-FF6600" href=javascript:void(0);"" data-barrage-color="FF6600" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-FF0096" href="javascript:void(0);" data-barrage-color="FF0096" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-920683" href="javascript:void(0);" data-barrage-color="920683" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-601886" href="javascript:void(0);" data-barrage-color="601886" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-1D24A4" href="javascript:void(0);" data-barrage-color="1D24A4" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-804E21" href="javascript:void(0);" data-barrage-color="804E21" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-9D6A3C" href="javascript:void(0);" data-barrage-color="9D6A3C" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-DE8A3E" href="javascript:void(0);" data-barrage-color="DE8A3E" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-90C41E" href="javascript:void(0);" data-barrage-color="90C41E" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-21AC38" href="javascript:void(0);" data-barrage-color="21AC38" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-009139" href="javascript:void(0);" data-barrage-color="009139" rseat="140826_yanse"><i class="hoverBor"></i></a></li></ul></div> </div> </div></div><div data-barrage-wrap="danmusetrt" class="danmuSet-rt fl"> <div class="set-bd-tit"><h4>弹幕边框<em>编辑发送的边框样式</em></h4></div><ul class="danmu-star-border clearfix"> <li><a href="#" data-barrage-background="0" data-background-color="FFFFFF" class="border-style border-style1"><i class="style"></i><i class="star-icon"></i></a></li><li><a href="#" data-barrage-background="1" data-background-color="804E21" class="border-style border-style2"><i class="style"></i><i class="star-icon"></i></a></li><li><a href="#" data-barrage-background="2" data-background-color="FFF100" class="border-style border-style3"><i class="style"></i><i class="star-icon"></i></a></li><li><a href="#" data-barrage-background="3" data-background-color="FFF100" class="border-style border-style4"><i class="style"></i><i class="star-icon"></i></a></li><li><a href="#" data-barrage-background="4" data-background-color="FFFFFF" class="border-style border-style5"><i class="style"></i><i class="star-icon"></i></a></li><li><a href="#" data-barrage-background="5" data-background-color="FFFFFF" class="border-style border-style6"><i class="style"></i><i class="star-icon"></i></a></li></ul></div></div></div>',configTemplate:'<div class="danmu-set-v " data-barrage-panel="panel"><div class="danmu-set_arrowWrap"><i class="danmu-set_arrow"></i><i class="danmu-set_arrowInner"></i></div><div class="set-bd-v"><div class="danmuSet-lt fl"><div class="set-bd-tit"><h4>我的弹幕<em>编辑自己发送的弹幕</em></h4></div><div class="set-bd-container clearfix"><!-- 字号 --><div class="setFontSize fl"><h3>字号</h3><ul><li><a href="javascript:void(0);" class="fs18"   data-barrage-size="30" rseat="140826_zihao">大</a></li><li class="selected"><a href="javascript:void(0);" class="fs16" data-barrage-size="20" rseat="140826_zihao">中</a></li><li><a href="javascript:void(0);" class="fs12"  data-barrage-size="10" rseat="140826_zihao">小</a></li></ul></div><!-- 字号 end--><!-- 颜色 --><div class="danmu-set-colorHd-v fl"><div class="danmu-set-colorHd-tit clearfix"><span class="tag-fs fl">颜色</span><span class="colBox fl"><input type="text" placeholder="#FFFFFF" data-barrage-customcolor="color"></span><span class="save-color-box fl" data-barrage-preview="color"></span></div><div class="color-set-bd mt5"><ul><li><a class="col-FFFFFF" href="javascript:void(0);" data-barrage-color="FFFFFF" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-000000" href="javascript:void(0);" data-barrage-color="000000" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-FF0000" href="javascript:void(0);" data-barrage-color="FF0000" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-FF9900" href="javascript:void(0);" data-barrage-color="FF9900" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-FFF100" href="javascript:void(0);" data-barrage-color="FFF100" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-00FF12" href="javascript:void(0);"  data-barrage-color="00FF12" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-00FCFF" href="javascript:void(0);"  data-barrage-color="00FCFF" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-008CEE" href="javascript:void(0);" data-barrage-color="008CEE" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-8600FF" href=javascript:void(0);"" data-barrage-color="8600FF" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-FF6600" href=javascript:void(0);"" data-barrage-color="FF6600" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-FF0096" href="javascript:void(0);" data-barrage-color="FF0096" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-920683" href="javascript:void(0);" data-barrage-color="920683" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-601886" href="javascript:void(0);" data-barrage-color="601886" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-1D24A4" href="javascript:void(0);" data-barrage-color="1D24A4" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-804E21" href="javascript:void(0);" data-barrage-color="804E21" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-9D6A3C" href="javascript:void(0);" data-barrage-color="9D6A3C" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-DE8A3E" href="javascript:void(0);" data-barrage-color="DE8A3E" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-90C41E" href="javascript:void(0);" data-barrage-color="90C41E" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-21AC38" href="javascript:void(0);" data-barrage-color="21AC38" rseat="140826_yanse"><i class="hoverBor"></i></a></li><li><a class="col-009139" href="javascript:void(0);" data-barrage-color="009139" rseat="140826_yanse"><i class="hoverBor"></i></a></li></ul></div></div><div class="mod-location fl"><h3>位置</h3><div class="mod-location-bd"><a class="" href="javascript:void(0);" data-barrage-position="1" rseat="140826_weizhi"><i class="dt_top" ></i><span >顶部</span></a><a href="javascript:void(0);" class="" data-barrage-position="2"  rseat="140826_weizhi"><i class="dt_center" ></i><span ata-barrage-position="2">中间</span></a><a href="javascript:void(0);" class="" data-barrage-position="3"  rseat="140826_weizhi"><i class="dt_bottom" ></i><span ata-barrage-position="3">底部</span></a><a href="javascript:void(0);" class="selected" data-barrage-position="0"  rseat="140826_weizhi"><i class="dt_random " ></i><span ata-barrage-position="0">随机</span></a></div></div></div></div><div class="danmuSet-rt fl" data-barrage-wrap="danmusetrt"><div class="set-bd-tit"><h4>弹幕显示设置</h4></div><!-- 透明度 --><div class="mod-opac-set" data-barrage-opacity="wrap"><h3>透明度</h3><div class="opac-block mt5 clearfix"><div class="opacBg-outer-v fl pr" data-barrage-opacity="btn" rseat="140826_toumin"><span data-barrage-opacity="trigger" style="left:30px" class="opacBg-inner-v"></span></div><div data-barrage-opacity="value" class="opac-block-num fl ml5">80%</div></div></div><!-- 透明度 --><div class="bq-set-show"><h3>弹幕显示</h3><a href="javascript:void(0);" data-barrage-filter="image" class="disabled-pic "><i class="disPic-ico"></i><span>屏蔽图片表情</span></a></div></div></div></div>',faceTemplate:'<div class="bq-con_v2" data-barrage-facepopup="barrage"><div class="bq-con-box"><div class="bq_arrowWrap"><i class="bq_arrow"></i><i class="bq_arrowInner"></i></div><div class="facial-container" id="panelContainer"></div><div class="facial-ft"><div class="facial-tab" id="wrapft"></div></div></div></div>',faceTemplateLiving:'<div class="bq-con_v2" data-barrage-facepopup="barrage"><div class="bq-con-box"><div class="bq_arrowWrap"><i class="bq_arrow"></i><i class="bq_arrowInner"></i></div><div class="facial-container"><!-- 颜文字部分 --><div data-scrollname="textfacepopup" class="facial-bd clearfix" data-barrage-panel="textface"><div class="facial-lt fl" data-scrollwrap="textfacepopup"><ul class="facial-text-con" data-scrollcontent="textfacepopup"><li data-barrage-face="item" data-barrage-code="(⊙﹏⊙)" title="呃呃呃"><a href="" rseat="14090903_ywz" data-barrage-face="anchor">(⊙﹏⊙)</a></li><li data-barrage-face="item" data-barrage-code="o(≧口≦)o" title="崩溃"><a href="" rseat="14090903_ywz" data-barrage-face="anchor">o(≧口≦)o</a></li><li data-barrage-face="item" data-barrage-code="o(一︿一+)o" title="怨念"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">o(一︿一+)o</a></li><li data-barrage-face="item" data-barrage-code="ヽ(✿ﾟ▽ﾟ)ノ" title="好耶"><a href="" rseat="14090903_ywz" data-barrage-face="anchor">ヽ(✿ﾟ▽ﾟ)ノ</a></li><li data-barrage-face="item" data-barrage-code="♪(^∇^*)" title="啦啦啦"><a href="" rseat="14090903_ywz" data-barrage-face="anchor">♪(^∇^*)</a></li><li data-barrage-face="item" data-barrage-code="（´Д`）" title="囧"><a href="" rseat="14090903_ywz" data-barrage-face="anchor">（´Д`）</a></li><li data-barrage-face="item" data-barrage-code="o( =·ω·= )m" title="喵星人"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">o( =·ω·= )m</a></li><li data-barrage-face="item" data-barrage-code="╰(*°▽°*)╯" title="惊喜"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">╰(*°▽°*)╯</a></li><li data-barrage-face="item" data-barrage-code="(#`O′)" title="喂"><a href="" rseat="14090903_ywz" data-barrage-face="anchor">(#`O′)</a></li><li data-barrage-face="item" data-barrage-code="(*￣(エ)￣)" title="熊"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">(*￣(エ)￣)</a></li><li data-barrage-face="item" data-barrage-code="X﹏X" title="糟糕"><a href="" rseat="14090903_ywz" data-barrage-face="anchor">X﹏X</a></li><li data-barrage-face="item" data-barrage-code="Ψ(￣∀￣)Ψ" title="美味"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">Ψ(￣∀￣)Ψ</a></li><li data-barrage-face="item" data-barrage-code="(✿◡‿◡)" title="害羞"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">(✿◡‿◡)</a></li><li data-barrage-face="item" data-barrage-code="╮(╯▽╰)╭" title="摊手"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">╮(╯▽╰)╭</a></li><li data-barrage-face="item" data-barrage-code="(￣△￣；) " title="呆滞"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">(￣△￣；) </a></li><li data-barrage-face="item" data-barrage-code="ರ_ರ" title="心塞"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">ರ_ರ</a></li><li data-barrage-face="item" data-barrage-code="_(:3」∠)_" title="卧倒"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">_(:3」∠)_</a></li><li data-barrage-face="item" data-barrage-code="( ♥ω♥ )" title="心心眼"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">( ♥ω♥ )</a></li><li data-barrage-face="item" data-barrage-code="m(_ _)m" title="膜拜"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">m(_ _)m</a></li><li data-barrage-face="item" data-barrage-code="(｡•ˇ‸ˇ•｡) " title="难过"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">(｡•ˇ‸ˇ•｡) </a></li><li data-barrage-face="item" data-barrage-code="눈_눈" title="衰"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">눈_눈</a></li><li data-barrage-face="item" data-barrage-code="ʅ(‾◡◝)ʃ" title="得瑟"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">ʅ(‾◡◝)ʃ</a></li><li data-barrage-face="item" data-barrage-code="(* ￣3)(ε￣ *)" title="啵啵"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">(* ￣3)(ε￣ *)</a></li><li data-barrage-face="item" data-barrage-code="✧(≖◡≖✿)" title="闪"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">✧(≖◡≖✿)</a></li><li data-barrage-face="item" data-barrage-code="┌(。Д。)┐" title="恐怖"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">┌(。Д。)┐</a></li><li data-barrage-face="item" data-barrage-code="┭┮﹏┭┮" title="呜呜哭"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">┭┮﹏┭┮</a></li><li data-barrage-face="item" data-barrage-code="ㄟ( ▔, ▔ )ㄏ" title="不是我"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">ㄟ( ▔, ▔ )ㄏ</a></li><li data-barrage-face="item" data-barrage-code="o(￣ヘ￣o＃)" title="哼"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">o(￣ヘ￣o＃)</a></li><li data-barrage-face="item" data-barrage-code="(ノへ￣、)" title="擦眼泪"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">(ノへ￣、)</a></li><li data-barrage-face="item" data-barrage-code="o(*￣▽￣*)ブ" title="hi"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">o(*￣▽￣*)ブ</a></li><li data-barrage-face="item" data-barrage-code="(°ー°〃)" title="愣住"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">(°ー°〃)</a></li><li data-barrage-face="item" data-barrage-code="╰(*°▽°*)╯" title="惊喜"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">╰(*°▽°*)╯</a></li><li class="facial-text-lg" data-barrage-face="item" data-barrage-code="（づ￣3￣）づ╭❤～" title="亲亲"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">（づ￣3￣）づ╭❤～</a></li><li class="facial-text-lg" data-barrage-face="item" data-barrage-code="ԅ(¯﹃¯ԅ) （¯﹃¯）" title="流口水"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">ԅ(¯﹃¯ԅ) （¯﹃¯）</a></li><li class="facial-text-lg" data-barrage-face="item" data-barrage-code="...( ＿ ＿)ノ｜壁" title="扶墙"><a href="" class="letterSpace" rseat="14090903_ywz" data-barrage-face="anchor">...( ＿ ＿)ノ｜壁</a></li><li class="facial-text-lg" data-barrage-face="item" data-barrage-code="┗|｀O′|┛ 嗷~~" title="嗷"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">┗|｀O′|┛ 嗷~~</a></li><li class="facial-text-lg" data-barrage-face="item" data-barrage-code="(ˉ▽￣～) 切~~" title="切~~"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">(ˉ▽￣～) 切~~</a></li><li class="facial-text-lg" data-barrage-face="item" data-barrage-code="━━(￣ー￣*|||━━" title="淡定"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">━━(￣ー￣*|||━━  </a></li><li  class="facial-text-lg" data-barrage-face="item" data-barrage-code="( ﹁ ﹁ ) ~→" title="斜眼"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">( ﹁ ﹁ ) ~→</a></li><li  class="facial-text-lg" data-barrage-face="item" data-barrage-code="o(*≧▽≦)ツ┏━┓" title="拍桌"><a href="" class="" rseat="14090903_ywz" data-barrage-face="anchor">o(*≧▽≦)ツ┏━┓</a></li></ul></div><div class="facial-rt fl" style="height:90px;" id="scrollbar-textfacepopup"></div></div><!-- 颜文字部分 end--><div class="facial-bd clearfix dn"  data-scrollname="picfacepopup" data-barrage-panel="picface"><div class="facial-lt fl" data-scrollwrap="picfacepopup"><ul class="facial-con clearfix" data-scrollcontent="picfacepopup"><li data-barrage-type="pic" data-barrage-face="item" title="鬼脸" data-barrage-code="[鬼脸]"><a class="facial-item1" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="衰" data-barrage-code="[衰]"><a class="facial-item2" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="甩泪" data-barrage-code="[甩泪]"><a class="facial-item3" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="亲亲" data-barrage-code="[亲亲]"><a class="facial-item4" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="鄙视" data-barrage-code="[鄙视]"><a class="facial-item5" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="高兴" data-barrage-code="[高兴]"><a class="facial-item6" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="暴走" data-barrage-code="[暴走]"><a class="facial-item7" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="电眼" data-barrage-code="[电眼]"><a class="facial-item8" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="皱眉" data-barrage-code="[皱眉]"><a class="facial-item9" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="我吐" data-barrage-code="[我吐]"><a class="facial-item10" href="" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="惨" data-barrage-code="[惨]"><a class="facial-item11" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="惊悚" data-barrage-code="[惊悚]"><a class="facial-item12" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="忧伤" data-barrage-code="[忧伤]"><a class="facial-item13" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="基情" data-barrage-code="[基情]"><a class="facial-item14" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="大哭" data-barrage-code="[大哭]"><a class="facial-item15" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="捂脸" data-barrage-code="[捂脸]"><a class="facial-item16" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="萌" data-barrage-code="[萌]"><a class="facial-item17" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="欧耶" data-barrage-code="[欧耶]"><a class="facial-item18" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="花痴" data-barrage-code="[花痴]"><a class="facial-item19" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="委屈" data-barrage-code="[委屈]"><a class="facial-item20" href="" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="无语" data-barrage-code="[无语]"><a class="facial-item21" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="跌眼镜" data-barrage-code="[跌眼镜]"><a class="facial-item22" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="怨气" data-barrage-code="[怨气]"><a class="facial-item23" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="哼哼" data-barrage-code="[哼哼]"><a class="facial-item24" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="吵架" data-barrage-code="[吵架]"><a class="facial-item25" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="啦啦啦" data-barrage-code="[啦啦啦]"><a class="facial-item26" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="困" data-barrage-code="[困]"><a class="facial-item27" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="窃喜" data-barrage-code="[窃喜]"><a class="facial-item28" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="石化" data-barrage-code="[石化]"><a class="facial-item29" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li><li data-barrage-type="pic" data-barrage-face="item" title="雷劈" data-barrage-code="[雷劈]"><a class="facial-item30" href="javascript:void(0);" data-barrage-face="anchor" rseat="14090903_pst"></a></li></ul></div><div class="facial-rt fl" style="height:90px;" id="scrollbar-picfacepopup"></div></div></div><div class="facial-ft"><div class="facial-tab"><a href="" data-barrage-switch="textface" class="selected facial-text">颜文字表情</a><span class="facial-line">|</span><a href="" data-barrage-switch="picface" class=" facial-pic">图片表情</a></div></div></div></div>'}});
define("kit/barragerUserStatus.js",["./userInfo"],function(e,t,a){var n=e("./userInfo"),i=0;a.exports={userIsStar:function(e,t){for(var a=e.interactInfo.list,i=!1,o=n.getUid(),r=0,s=a.length;s>r;r++)if(t==a[r].id){var l=a[r].data.begin_time,d=a[r].data.end_time,c=(new Date).valueOf()/1e3;if(c>d||l>c){i=!1;break}for(var m=e.interactInfo.list[r].data.stars,u=0,h=m.length;h>u;u++)if(m[u].uid==o){i=!0;break}}return i},getAnonyUserName:function(){i++;var e=9999999*Math.random();return e=parseInt(e,10),e="匿名用户"+e},getAnonyUserNum:function(e){for(var t=e+"",a=0;7>a&&t.length<7;a++)t="0"+t;return t}}});
define("kit/caret.js",[],function(e,t,a){var n={getCaretPosition:function(e){var t=0;if(document.selection){e.focus();var a=document.selection.createRange();a.moveStart("character",-e.value.length),t=a.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t},setCaretPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t.start,t.end);else if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",t.end),a.moveStart("character",t.start),a.select()}},insertText:function(e,t){if(document.selection){var a=document.selection.createRange();a.text=t}else if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd){var n=e.selectionStart,i=e.selectionEnd,o=n,r=e.value;e.value=r.substring(0,n)+t+r.substring(i,r.length),o+=t.length,e.selectionStart=e.selectionEnd=o}else e.value+=t}};a.exports=n});
define("action/barrageConfigPanel1_5.js",["../components/action/adapter"],function(e,t,a){var n=e("../components/action/adapter"),i={};a.exports=Q.Class("BarrageConfigPanel",{extend:n,construct:function(){},properties:{color:"FFFFFF",doms:{},background:-1,perNum:1.7,position:0,size:"30",isFilterImage:0,opacity:"90",fontList:[]},methods:{opMethod:function(){var e=this;return{moveIt:function(t,a){var n=parseInt(i.opacityTrigger.css("left"),10),o=i.opacityBtn.width(),r=0;r=a?t:n+t>o?o:n+t;var s=100-parseInt(r/e.perNum,10);s=s>100?100:50>s?50:s,s=150-s,isNaN(s)||(i.opacityValue.html(s+"%"),e.opacity=s,0>r?r=0:r>85&&(r=85),i.opacityTrigger.css("left",r+"px"),e.ctrl.changeAlpha(s))}}},initOpacity:function(){var e=this,t=0,a=e.opMethod().moveIt,n=function(e){e=Q.event.get(e);var n=e.clientX,i=n-t;Q.$(e.target).attr("data-barrage-opacity")&&(a(i),t=e.clientX)},o=0;Q.$(document).on("mouseup",function(){o=0}),i.opacityTrigger&&(i.opacityBtn.on("mousemove",function(e){o&&n(e)}),i.opacityTrigger.on("mousedown",function(){o=1}),i.opacityBtn.on("click",function(e){t=e.offsetX||e.layerX,e=Q.event.get(e),"trigger"!=Q.$(e.target).attr("data-barrage-opacity")&&a(parseInt(t,10),1)})),i.opacityBtn&&(i.opacityBtn.on("mousedown",function(e){e=Q.event.get(e),t=e.clientX}),i.opacityBtn.on("mouseup",function(){t=0,o=0}));var r=function(e){Q.event.get(e).stop();var t=e||window.event,n=t.wheelDelta?t.wheelDelta/120:0-t.detail/3;1==n||n>0?a(-1):(-1==n||0>n)&&a(1)};i.widget.on("DOMMouseScroll",r.bind(this)),i.widget.on("mousewheel",r.bind(this)),i.danmusetrt&&i.danmusetrt.on("selectstart",function(e){Q.event.get(e).stop()})},initDom:function(e){e=e||Q.$(document),i.widget=e.down('[data-barrage-panel="panel"]')||e,i.size=i.widget.down("[data-barrage-size]"),i.color=i.widget.down("[data-barrage-color]"),i.background=i.widget.down("[data-barrage-background]"),i.colorPreview=i.widget.down('[data-barrage-preview="color"]'),i.customColor=i.widget.down('[data-barrage-customcolor="color"]'),i.opacityBtn=i.widget.down('[data-barrage-opacity="btn"]'),i.opacityWrap=i.widget.down('[data-barrage-opacity="wrap"]'),i.opacityValue=i.widget.down('[data-barrage-opacity="value"]'),i.opacityTrigger=i.widget.down('[data-barrage-opacity="trigger"]'),i.position=i.widget.down("[data-barrage-position]"),i.danmusetrt=i.widget.down('[data-barrage-wrap="danmusetrt"]'),i.filterImage=i.widget.down('[data-barrage-filter="image"]')},initEvent:function(){var e=this;i.position&&i.position.on("click",function(t){Q.event.get(t).preventDefault();var a=Q.$(this);i.position.removeClass("selected"),a.addClass("selected"),e.position=a.attr("data-barrage-position")}),i.size&&i.size.on("click",function(t){Q.event.get(t).preventDefault();var a=Q.$(this),n=a.attr("data-barrage-size");e.size=n,i.size.parent().removeClass("selected"),a.parent().addClass("selected")});var t=function(t,a){i.color.parent().removeClass("hover"),i.widget.down('[data-barrage-color="'+t+'"]'),a.parent().addClass("hover"),i.colorPreview.css("background","#"+t),e.color=t,i.customColor.value("#"+t)};i.background&&i.background.on("click",function(a){Q.event.get(a).preventDefault();var n=Q.$(this);i.background.parent().removeClass("clicked"),i.background.parent().removeClass("selected"),n.parent().addClass("clicked"),n.parent().addClass("selected");var o=n.attr("data-barrage-background");e.background=o;var r=n.attr("data-background-color");t(r,n)}),i.color&&i.color.on("click",function(e){Q.event.get(e).preventDefault();var a=Q.$(this),n=a.attr("data-barrage-color");t(n,a)}),i.customColor&&i.customColor.on("keyup",function(){var t=i.customColor.value().trim();i.color.parent().removeClass("hover"),t&&(t.indexOf("#")<0&&(t="#"+t),i.colorPreview.css("background",t),t=t.replace(/#/g,"")),e.color=t}),i.filterImage&&i.filterImage.on("click",function(t){Q.event.get(t).preventDefault(),Q.$(this),e.filterImage(0===e.isFilterImage?1:0,e.ctrl)}),this.initOpacity()},filterImage:function(e,t){"0"==e?i.filterImage&&(i.filterImage.attr("rseat","14090901_bqkq"),i.filterImage.removeClass("selected")):i.filterImage&&(i.filterImage.attr("rseat","14090901_bqgb"),i.filterImage.addClass("selected")),this.isFilterImage=e,t.changeFilterImage(this.isFilterImage)},filterImageConfig:function(e){var t=this,a=Q.cookie.get("QC118");try{a=JSON.parse(a),a=a||{},0===a.isFilterImage?a.isFilterImage:t.isFilterImage,0===a.isFilterImage||"1"==a.isFilterImage?t.filterImage(a.isFilterImage):Q.PageInfo&&Q.PageInfo.playPageInfo?4==Q.PageInfo.playPageInfo.cid?t.filterImage(1,e):t.filterImage(0,e):t.filterImage(0,e)}catch(n){}},resetConfig:function(){var e=this,t=Q.cookie.get("QC118");try{if(t=JSON.parse(t),t=t||{},e.size=t.size||this.size,e.color=t.color||this.color,e.position=t.position||e.position,e.background=t.background||e.background,i.size&&(i.size.parent().removeClass("selected"),t.size=t.size||this.size,i.size.forEach(function(e){e=Q.$(e);var a=e.attr("data-barrage-size");a==t.size&&e.parent().addClass("selected")})),i.position&&(i.position.removeClass("selected"),i.position.forEach(function(t){t=Q.$(t);var a=t.attr("data-barrage-position");a==e.position&&t.addClass("selected")})),i.color){var a=!1;i.color.parent().removeClass("hover");for(var n=t.colors&&t.colors.split("_"),o=0,r=i.color.length;r>o&&n;o++)Q.$(i.color[o]).css("background","#"+n[o]),Q.$(i.color[o]).attr("data-barrage-color",n[o]);t.color=t.color||this.color,i.color.forEach(function(e){e=Q.$(e);var n=e.attr("data-barrage-color");n==t.color&&(a=!0,e.parent().addClass("hover"))}),a||i.customColor.html("#"+t.color),i.colorPreview.css("background","#"+t.color)}i.background&&i.background.forEach(function(t){t=Q.$(t);var a=t.attr("data-barrage-background"),n=e.background>=0?e.background:0;a==n&&(t.parent().addClass("clicked"),t.parent().addClass("selected"))}),e.filterImageConfig(e.ctrl),t.opacity=t.opacity||e.opacity;var s=0,l=t.version&&parseFloat(t.version)<1.5;!t.version||l?(s=this.opacity,this.ctrl.extendConfig({version:"1.5"})):s=t.opacity,i.opacityValue.html(s+"%");var d=s-50;i.opacityTrigger.css("left",d*e.perNum+"px")}catch(c){}},insertColor:function(e){var t=Q.$('[data-barrage-color="'+e+'"]');if(t&&i.color){for(var a=i.color.attr("data-barrage-color"),n=[e],o=0,r=a.length;r>o;o++)a[o]==e||n.push(a[o]);for(o=0,r=i.color.length;r>o;o++)Q.$(i.color[o]).css("background","#"+n[o]),Q.$(i.color[o]).attr("data-barrage-color",n[o]);i.color.parent().removeClass("hover"),Q.$(i.color[0]).parent().addClass("hover")}},init:function(e){this.ctrl=e.ctrl,e.widget&&(this.initDom(e.widget),this.initEvent())},getBackground:function(){var e=this.background;return e},getPosition:function(){var e=this.position;return e},getColorList:function(){var e="";return i.color&&i.color.forEach(function(t){t=Q.$(t);var a=t.attr("data-barrage-color");e+=a+"_"}),e},getisFilterImage:function(){return this.isFilterImage},getColor:function(){return this.color},getSize:function(){return this.size},getOpacity:function(){return this.opacity<=1&&(this.opacity=10*this.opacity),this.opacity}}})});
define("interfaces/ipRegionV2Interface.js",["../kit/remoteInterface"],function(e,t,a){var n=e("../kit/remoteInterface");a.exports=Q.Class("IpRegionInterface",{construct:function(){this._remoteInterface=new n({getZone:{url:"http://data.video.qiyi.com/v.mp4"}})},methods:{request:function(e,t){e=e||{},this._remoteInterface.send({ifname:"getZone",param:e,memory:!0,dataType:"jsonp"},function(a){t&&t(a,e)})}}})});
define("units/playBangdanHover.js",["../components/units/pageJob"],function(e,t,a){var i,n,o=e("../components/units/pageJob"),r="playBanddanHover";o.create(r,{check:function(){return!0},init:function(){var e=this;i=Q.$('[data-bangdan-wrap="hasHover"]'),i&&(e.handleLazyImg(i),e.bindHoverEvent(i)),Q.event.customEvent.on("bangDanHover",function(t){e.bindHoverEvent(t.data.widget)})},handleLazyImg:function(e){e.forEach(function(e){var t=Q.$(e),a=t.down("li");if(a){var i=a.down('[data-hover-type="img"]');if(i){var n=i.down("img[data-lazy]")||i.down("img[data-lazyload-src]");n&&n.forEach(function(e){var t=Q.$(e),a=t.attr("data-lazy")||t.attr("data-lazyload-src");t.removeAttr("data-lazyload-src"),t.removeAttr("data-lazy"),(a||""!==a)&&t.attr("src",a)})}}})},bindHoverEvent:function(e){e&&e.forEach(function(e){var t=Q.$(e),a=t.down("li");if(a){var i="mouseenter";Q.browser.iPad&&(i="touchstart");var o=a.down('[data-hover-type="title"]'),r=a.down('[data-hover-type="img"]');a.delegate("hoverShowImg",function(e){if(!n){var t=Q.$(e.target);n=setTimeout(function(){var e=t.down('[data-hover-type="title"]'),a=t.down('[data-hover-type="img"]');e&&a&&(o&&r&&(o.removeClass("dn"),r.addClass("dn")),e.addClass("dn"),a.removeClass("dn")),n=0},0)}},i)}})}}),a.exports=r});
define("units/changeHash.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../kit/qiyiPlayer").getPlayer("video"),o="changeHash";i.create(o,{check:function(){return!0},init:function(){n.on("videoChanged",function(e){var t=Q.url.queryToJson(location.hash.slice(1));t.curid=e.data.tvid+"_"+e.data.vid,location.hash=Q.url.jsonToQuery(t,function(e){return e})})}}),a.exports=o});
define("units/steamPlayerPopup.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../components/view/floaterCustomView","../components/action/floater","../interfaces/vipLiveInterface","../kit/userInfo"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n,o=e("../kit/qiyiPlayer"),r=null,s=e("../components/view/floaterCustomView"),l=e("../components/action/floater"),d=e("../interfaces/vipLiveInterface"),c=e("../kit/userInfo"),u="2",m=o.getPlayer("video"),p="steamPlayerPopup",h=Q.event.customEvent,f={};i.create(p,{check:function(){return!0},init:function(){var e=this;f={player:Q.$("[data-widget-player=flash]")},m.on("setJsDoSomething",function(t){t=t.data||{},"LimitDefinitionClick"===t.handleType&&e.getBuyFrag()}),m.on("videoChanged",function(){n&&e.closeVipLayer()}),h.on("login",function(){e.closeVipLayer()}),h.on("qipaLoginIfrHide",function(){e.closeVipLayer()})},getBuyFrag:function(){var e=this,t="996179b7755333de",a="b6c13e26323c537d",i={app_version:"pc_web",deviceId:"deviceId",layCode:t,platform:a};d.getSteamBuyFrag(i,function(t){var a;if("A00000"===t.code){if(t=t.data,t=t.data,a=t.html,!a)return;r||(r=new l({view:new s({zIndex:u,background:"url(0) no-repeat",isResponsive:!0,pos:function(){return{left:f.player.getPosition().left,top:f.player.getPosition().top}},boxSize:function(){return{width:f.player.width(),height:f.player.height()}}})})),r.show({html:a}),n=Q.$("#steamBuyLayer"),n&&(n.css("left","50%"),n.css("margin-left","-250px"),n.css("top","50%"),n.css("margin-top","-145px"),n.css("position","absolute")),m.pause(),c.isLogin()||h.fire({type:"loginIframeResume",data:{resumePlayer:!1}});var i=Q.$('[data-widget-closebtn="vipLayerClose"]');i&&i.on("click",function(){e.closeVipLayer()})}})},closeVipLayer:function(){n.parent().remove(n),r.hide(),m.resume()}}),a.exports=p});
define("interfaces/vipLiveInterface.js",["../kit/remoteInterface","./config","../kit/generateRandomString"],function(e,t,a){var i=e("../kit/remoteInterface"),n=e("./config"),o=e("../kit/generateRandomString").generate,r=Q.Class("LiveVipInterface",{construct:function(){this._remoteInterface=new i({getVipBuyFrag:{url:n.interfaces.getVipBuyFrag},checkBuyState:{url:n.interfaces.checkBuyState},subcribleLive:{url:n.interfaces.subcribleLive},checkSubcribe:{url:n.interfaces.subcribleLive},saveRemindPhone:{url:n.interfaces.saveRemindPhone},getSteamBuyFrag:{url:n.interfaces.getSteamBuyFrag}})},methods:{request:function(e,t){var a={ifname:e.ifname,method:e.method||"GET",param:e};e.jsonp?a.dataType="jsonp":a.encodeFn=function(e){return encodeURIComponent(e)},delete e.ifname,delete e.method,delete e.jsonp,this._remoteInterface.send(a,t)},getVipBuyFrag:function(e,t){this.request(Q.object.extend({ifname:"getVipBuyFrag",jsonp:!0},e),t)},checkBuyState:function(e,t){this.request(Q.object.extend({ifname:"checkBuyState",cb:"cb_"+o(36)},e),t)},subcribleLive:function(e,t){this.request(Q.object.extend({ifname:"subcribleLive",cb:"cb_"+o(36)},e),t)},checkSubcribe:function(e,t){this.request(Q.object.extend({ifname:"checkSubcribe",cb:"cb_"+o(36)},e),t)},saveRemindPhone:function(e,t){this.request(Q.object.extend({ifname:"saveRemindPhone",jsonp:!0},e),t)},getSteamBuyFrag:function(e,t){this.request(Q.object.extend({ifname:"getSteamBuyFrag",jsonp:!0},e),t)}}});a.exports=new r});
define("units/videoSeries.js",["../components/units/pageJob","../kit/qiyiPlayer","../kit/userInfo","../action/tab","../kit/artTemplate","../model/videoSeriesModel","./responseForSlide","../components/action/checkDoms","../interfaces/videoSeriesInterface"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../kit/qiyiPlayer"),o=e("../kit/userInfo"),r=e("../action/tab"),s=e("../kit/artTemplate"),l=e("../model/videoSeriesModel");e("./responseForSlide");var d=e("../components/action/checkDoms");e("../interfaces/videoSeriesInterface");var c,u,m,p,h,f,g="videoSeries",v=!1,y=n.getPlayer("video");i.create(g,{getDependentDoms:function(){var e=Q.$(".widget-series");return h={widget:e,title:Q.$("#widget-series-title"),body:e.down("*[data-widget-series='body']"),list:e.down("*[data-series-elem='list']"),tpl:e.down("*[data-series-elem='tpl']")}},check:function(){return d(h),!0},init:function(){var e=this;f=Q.PageInfo.playPageInfo.cid||"",5==f&&y.on("videoChanged",function(t){v=!1,e.loadSeries(t)})},exec:function(){var e=this;u=o.getUid();var t=h.title.attr("data-tab-belongto")||"setPlayTab";c=r.getTab(t),c&&c.on("focuschange",function(t){var a,i=t.data.title,n=i.down('*[data-series-elem="txt"]');n&&(a=n.html().match(/[&|"|>|<]/g)?n[0].textContent||n[0].innerText:n.html()),(i.html()==p||n&&a==p)&&(v||e.requestSeries({supId:m,userId:u}))}),y.getVideoInfo(function(t){e.loadSeries(t)})},loadSeries:function(e){if(e.supName&&e.supId){p=e.supName,m=e.supId;var t=h.title.down('*[data-series-elem="txt"]');t?(t.html(p),t.attr("rseat",p),t.attr("title",p)):h.title.html(p),h.title.show();var a=h.title.down('*[data-series-elem="albumimg"]');a&&e.apic&&(a.attr("src",e.apic),a.attr("alt",p)),Q.event.customEvent.fire({type:"seriesDone"})}},requestSeries:function(e){var t=this,a=new l(e),i=t.resultHandler.bind(this),n=function(){};a.getData({callSucFn:i,callFailFn:n})},resultHandler:function(e){if(!v){v=!0;var t=s.compile(h.tpl.value()),a=t(e);h.list.html(a);var i=h.list.down(".mod-listTitle_right");i.forEach(function(e){e=Q.$(e),""===e.html().trim()&&e.hide()}),Q.event.customEvent.fire({type:"lazyInitSlide",data:{widget:h.widget}}),Q.event.customEvent.fire({type:"singleSlideResp-btnShowHide",data:{wrap:h.widget,len:e.colls.length}})}}}),a.exports=g});
define("model/videoSeriesModel.js",["../components/model/model","../interfaces/videoSeriesInterface","../kit/userInfo"],function(e,t,a){var i=e("../components/model/model");new Q.ic.InfoCenter({moduleName:"VideoSeriesModel"});var n=e("../interfaces/videoSeriesInterface"),o=e("../kit/userInfo"),r={};a.exports=Q.Class("VideoSeriesModel",{extend:i,construct:function(e){this.supId=e.supId},methods:{init:function(){},getData:function(e){var t=this;t.callSucFn=e.callSucFn,t.callFailFn=e.callFailFn;var a=t.supId;if(r[a])t.callSucFn&&t.callSucFn(r[a]);else{var i=o.getUid(),s={id:a,uid:i},l=new n(s);l.request({},t.getDataCallback.bind(this))}},getDataCallback:function(e){var t=this;if("A00000"===e.code){t.dataHandle(e.data);var a=e.data;r[a.id]=a,t.callSucFn&&t.callSucFn(a)}else t.callFailFn&&t.callFailFn()},dataHandle:function(e){e.colls.forEach(function(e,t){e.idx=t;var a=e.picUrl;e.picUrl=a,e.picUrl=a.replace(".jpg","_160_90.jpg"),e.picUrl_180=a.replace(".jpg","_180_236.jpg"),e.cName=e.shortTitle||e.contentName;var i=Q.date.formatSeconds(e.playLength);e.typeTitle=1==e.tvType?i:"共"+e.tvCount+"集";var n="",o=e.cName,r=e.cName,s=e.focus;e.sourceId?n=e.tvCount?"共"+e.tvCount+"期":"":e.tvType?1==e.categoryId?n="":16==e.categoryId?(n=i,o=Q.string.truncate(o,20)):n=i:e.tvCount&&e.allNum?n=e.tvCount===e.allNum?e.allNum+"集全":"更新至"+e.tvCount+"集":e.allNum?n=e.allNum+"集全":e.tvCount&&(n="更新至"+e.tvCount+"集"),e.qishu=n,e.biaoti=o,e.biaoti_v2=r,e.yijuhua=s})}}})});
define("interfaces/videoSeriesInterface.js",["../kit/remoteInterface"],function(e,t,a){var i=e("../kit/remoteInterface");a.exports=Q.Class("videoSeriesInterface",{construct:function(e){this._remoteInterface=new i({url:"http://cache.video.qiyi.com/jp/collection/"+e.id+"/1/?src="+e.uid})},methods:{request:function(e,t){this._remoteInterface.send({dataType:"jsonp"},function(e){t&&t(e)})}}})});
define("units/responseForSlide.js",["../components/units/pageJob","../components/action/checkDoms","../action/slideWidgetV2","../kit/qiyiPlayer","../kit/responsive"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o=e("../action/slideWidgetV2");e("../kit/qiyiPlayer");var r,s,l=e("../kit/responsive"),d=[],c="responseForSlide";i.create(c,{getDependentDoms:function(){r=Q.$(".data-slide-responsive")},check:function(){return n(r),!0},getCurListViewCount:function(){if(Q.browser.IE6||Q.browser.IE7)return{extraInfo:{playListViewCount:4,digitalSlide:7}};var e=Q.PageInfo.respInfo.curLayout,t=null;return Q.PageInfo.respInfo.cnf.forEach(function(a){return a.layout==e?(t=a,!1):void 0}),t},init:function(){var e=this;r.forEach(function(e){d.push(Q.$(e).attr("data-slide-name"))});var t=Q.$(".data-digital-responsive");t&&t.length&&t.forEach(function(e){d.push(Q.$(e).attr("data-slide-name"))}),e.responseBodyChange(),l.on("bodyClassChange",function(){e.responseBodyChange()}),Q.event.customEvent.on("singleSlideResp-btnShowHide",function(t){t=t||{},t=t.data||{},e.slidebtnShowOrHide(t)}),Q.event.customEvent.on("singleSlideResp-reset",function(t){t=t||{},t=t.data||{};var a=t.name,i=t.total;if(a){var n=e.getCurListViewCount();e.slideReset(n,a,i)}})},responseBodyChange:function(){var e=this,t=e.getCurListViewCount();d.forEach(function(a){e.slideReset(t,a)})},slideReset:function(e,t,a){if(o.getSlide(t)&&(s=o.getSlide(t)[0])){var i=s._model._data.first,n=s._view._doms.widget,r="";n.hasClass("data-slide-responsive")?r="playListViewCount":n.hasClass("data-digital-responsive")&&(r="digitalSlide");var l=e.extraInfo[r],d=s._model._data.total;d>l?(s._view._doms.nbtn.css("display",""),s._view._doms.pbtn.css("display","")):(s._view._doms.nbtn.hide(),s._view._doms.pbtn.hide());var c={disp:l,step:l-1};a&&(c.total=a),s.reset(c),s.moveTo(i)}},focusTo:function(e){if(!e){var t=s._view._doms.list.down("li.selected");t&&(e=parseInt(t.attr("data-seq"),10))}e?(s._model._data.total,s.moveTo(e-2),s.focusTo(e)):(s.moveTo(1),s.focusTo(1))},slidebtnShowOrHide:function(e){var t,a=this,i=e.wrap||{},n=i.down('*[data-slide-elem="item"]')||{},o=n.length||e.len||0;try{var r=a.getCurListViewCount();t=r.extraInfo.playListViewCount}catch(s){t=4}var l=i.down('*[data-slide-elem="pbtn"]'),d=i.down('*[data-slide-elem="nbtn"]');l&&d&&(o>t?(l.css("display",""),d.css("display","")):(l.hide(),d.hide()))}}),a.exports=c});
define("units/bigVipSubscribe.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../kit/followInfo","../interfaces/bigVipSubscribe","../kit/generateRandomString","../kit/userInfo","../interfaces/ugcVI","../kit/formatNumber","../kit/checkI18nType","../kit/checkFlashSupport"],function(e,t,a){var i,n,o,r,s,l,d,c,u,m=e("../components/units/pageJob"),p=e("../components/action/checkDoms"),h=e("../kit/qiyiPlayer"),f=e("../kit/followInfo"),g=e("../interfaces/bigVipSubscribe"),v=e("../kit/generateRandomString").generate,y=e("../kit/userInfo"),b=e("../interfaces/ugcVI"),V=e("../kit/formatNumber"),U=e("../kit/checkI18nType"),w=e("../kit/checkFlashSupport"),k="bigVipSubscribe",_=null,x=Q.event.customEvent,I="tS7BdPLU2w0JD89dh",L=null,C=!1,W=!1,T=!1,S=Q.$("#mixed_dingyue_wrap"),X=Q.$("#fixed_info_wrap"),P=Q.$("#fixed-dingyue-wrap"),E=Q.$("#widget-dramaseries"),K=Q.PageInfo.playPageInfo||{},D=Q.$("#widget-videosourceName"),A="",N="";D&&(A=D.html(),N=D.attr("href"));var F={uid:K.userId,tvid:K.tvId,qiyiPlayStrategy:"",an:A,au:N};m.create(k,{getDependentDoms:function(){var e=Q.$("#widget-bigvip-abtest");return e||(e=Q.$("#widget-bigvip")),e&&(_={bigVip:e,subscrbe:e.down("[data-bigvip-elem=subscribe]")}),_},check:function(e){return p(e),!0},init:function(){function e(e){var t={block:"",rseat:e,rt:"",r:"",rlink:"",re:"",clkx:"",clky:"",rn:+new Date,pu:y.getUid(),jsuid:Q.cookie.get("QC006"),u:Q.cookie.get("QC005"),p:"",p1:"",pf:"",t:"",tm:"",tmplt:""};Q.log.server(t,"http://msg.71.am/tmpstats.gif")}function t(e,t){var a=e;return a=1e5>e?Q.string.divideNumber(e):1e6>e?Math.floor(e/1e3)/10+"万":1e8>e?Math.floor(e/1e4)+"万":Math.floor(e/1e7)/10+"亿",t?a:a+"人已订阅"}function a(e,a){var i="cb_"+v(36);g.getUserInfo({uid:e,agenttype:1,cb:i,sign:Q.crypto.md5("agenttype=1|cb="+i+"|uid="+e+"|"+I)},function(i){if("A00000"==i.code){if(L&&N){var n=i.data.nickname;N.html(n),N.attr("rseat",n),U.type&&(N.attr("title",n),N.attr("href","http://www.iqiyi.com/u/"+e))}var o=i.data.followed_count;M&&(M.attr("num",o),o>100?(_.numWrap&&_.numWrap.css("display",""),"none"===M.css("display")&&M.css("display",""),M.html(t(o)),W=!0):(M.hide(),_.numWrap&&_.numWrap.hide(),W=!1)),c&&(c.attr("num",o),o>100&&c.html(t(o,1)));var r=!C&&!W&&!T;x.fire({type:"bigVipInfo-update",data:{isAddOnerow:r}}),a&&a()}})}function m(e,t,a){var o=this;if(o._state=t,e)if(e.css("cursor","pointer"),t>=2){var r=e.down(".btn-care_tx-cared");3==t&&(r=e.down(".btn-care-caredEachother"));var s=r.html(),l=e.attr("href");i=function(){o._state>=2&&(Q(r).parent().attr("class","btn-care btn-care-update"),Q(r).attr("class","btn-care_tx btn-care_tx-update"),r.html("查看更新"),e.attr("href","http://www.iqiyi.com/u/"+a+"/v"),e.attr("target","_blank"))},n=function(){o._state>=2&&(r.html(s),Q(r).parent().attr("class","btn-care btn-care-cared"),Q(r).attr("class","btn-care_tx btn-care_tx-cared"),e.attr("href",l),e.removeAttr("target"))},e.un("mouseenter",i).on("mouseenter",i),e.un("mouseleave",n).on("mouseleave",n)}else e.un("mouseenter",i),e.un("mouseleave",n)}function p(a){var i=a.uid;B.removeClass(O),"none"===B.css("display")&&B.css("display",""),"none"===R.css("display")&&R.css("display",""),u&&"none"===u.css("display")&&u.css("display","");var n=_.subscrbe.down('[data-state-change="true"]');if(n){e("14080809_p_desshw");var o;if(S?(S.attr("data-widget-follow","bigvip"),o=S):(B.attr("data-widget-follow","bigvip"),o=B),X){var r=X.down('[data-state-change="true"]');r.attr("j-delegate","add_follow"),r.attr("data-userid",i)}n.attr("j-delegate","add_follow"),n.attr("data-userid",i),x.fire({type:"pagefrag_update",data:{widget:o,clsConfig:{0:"btn-care btn-care-tocare",1:"btn-care btn-care-normal",2:"btn-care btn-care-cared",3:"btn-care btn-care-caredEachother",loading:"btn-care-loading",disable:"btn-care-disabled"}}}),x.on("getFollowState",function(e){e.data.uid==i&&(m(n,e.data.state,i),m(r,e.data.state,i))}),f.on("memberStateChange",function(a){var o=a.data;if(o.uid==i&&o.stateTo>=2){e("14080809_p_dessuc");var s=parseFloat(M.attr("num"))+1;if(s>100?(_.numWrap&&_.numWrap.css("display",""),"none"===M.css("display")&&M.css("display",""),M.html(t(s))):(M.hide(),_.numWrap&&_.numWrap.hide()),c){var l=parseFloat(c.attr("num"))+1;l>100&&c.html(t(l,1))}m(n,o.stateTo,i),m(r,o.stateTo,i)}})}}function k(){var e=Q.browser.iPad,t="1504281_5";H&&(t=H.attr("data-fgtwpb-block"));var a={t:21,rn:Math.random(),pf:e?2:1,p:e?20:10,p1:e?202:101,bstp:0,pu:y.getUid()||"",u:Q.cookie.get("QC005")||"",block:t};Q.log.server(a,"http://msg.71.am/b")}function K(){H&&!H.hasClass("dn")&&H.isInScreen()&&!H.attr("everShow")&&(H.attr("everShow",!0),k())}function D(e,t){var i=new b({tvid:e.tvid});i.request({callback:"ugcvi"+e.tvid},function(i){i=i.data;var n=i.user.id&&"0"!=i.user.id+"",c=!1;if(c=i.sourceId&&i.userId>0&&n?!0:1===i.fgtwVideo&&n?!0:!1,c&&U.type){z&&H&&(z.addClass("mod-zy-uploadUser clearfix"),H.removeClass("dn"));var u="http://www.iqiyi.com/u/"+i.user.id;T=!0;var m;N&&(u&&(N.attr("href",u),N.attr("target","_blank")),m=i.user.name,N.html(m),N.attr("title",m)),o&&(u&&(o.attr("href",u),o.attr("target","_blank")),o.html(m),o.attr("title",m)),q&&(u&&q.attr("href",u),q.children().attr("src",i.user.avatar));var h=i.user.videoCount;if(J){if(h){var f=V.format(h);J.html("上传"+f+"个视频"),J.removeClass(O)}else J.html("");C=!0}var g=null;Q.$(window).on("scroll",function(){g&&clearTimeout(g),g=setTimeout(function(){K(),g=null},1e3)}),K()}else{T=!1,z&&H&&(z.removeClass("mod-zy-uploadUser clearfix"),H.addClass("dn")),j&&$&&G&&(j.attr("rseat","14080809_p_desclk"),G.attr("rseat","14080809_p_desclk"),$.attr("rseat","")),s&&l&&d&&(s.attr("rseat","14080809_p_desclk"),d.attr("rseat","14080809_p_desclk"),l.attr("rseat",""));var v=e.s||e.an;if(N&&!L){var y=N.attr("data-albumurlkey")||e.au;N.html(v),N.attr("rseat",v),U.type&&(N.attr("title",v),N.attr("href",y)),o&&(o.html(v),o.attr("rseat",v),U.type&&(o.attr("title",v),o.attr("href",y)))}J&&(e.qiyiPlayStrategy?(J.html(e.qiyiPlayStrategy),J.removeClass(O),C=!0):(C=!1,J.addClass(O))),!E&&r&&e.qiyiPlayStrategy&&r.html(e.qiyiPlayStrategy)}if(t&&U.type)a(e.uid,function(){p({uid:e.uid,qiyiPlayStrategy:e.qiyiPlayStrategy})});else{W=!1;var b=!C&&!W&&!T;B.addClass(O),P&&P.attr("showCss","dn"),x.fire({type:"bigVipInfoHide",data:{}}),x.fire({type:"bigVipInfo-update",data:{isAddOnerow:b}})}X&&X.attr("isLoad","true")})}function A(e){try{var t=e.uid&&"0"!=e.uid+"";D(e,t)}catch(a){}}if(_){X&&(o=X.down("[data-bigvip-elem=name]"),r=X.down("[data-bigvip-elem=update]"),s=X.down(".btn-care_tx-care"),d=X.down(".btn-care_tx-tocare"),l=X.down(".btn-care_tx-cared"),c=X.down("[data-bigvip-elem=fansnum]"),u=X.down("[data-bigvip-elem=subscribe]")),L=_.bigVip.attr("data-fg"),_.name=_.bigVip.down("[data-bigvip-elem=name]"),_.fansNum=_.bigVip.down("[data-bigvip-elem=fansnum]"),_.update=Q.$("#widget-bigvip-update"),_.numWrap=Q.$("#widget-vshort-numwrap");var N=_.name,J=_.update,B=_.bigVip,M=_.fansNum,O=B.attr("data-bigvip-hidecss")||"dn";Q.PageInfo.playPageInfo.albumId;var R=_.subscrbe,z=Q.$("#dingyue-wrap"),H=Q.$("#dingyue-fgtw-img"),q=Q.$("#data-bigvip-fgtwimg"),j=B.down(".btn-care_tx-care"),G=B.down(".btn-care_tx-tocare"),$=B.down(".btn-care_tx-cared"),Y=h.getPlayer("video");w.type?Y.getVideoInfo(A):A(F),H||Y.on("videoChanged",function(){Y.getVideoInfo(A)})}}}),a.exports=k});
define("interfaces/bigVipSubscribe.js",["./config","../kit/remoteInterface"],function(e,t,a){var i=e("./config"),n=e("../kit/remoteInterface"),o=Q.Class("bigVipInterface",{construct:function(){this._remoteInterface=new n({getUserInfo:{url:i.interfaces.getUserInfo}})},methods:{request:function(e,t){e=e||{};var a={ifname:e.ifname,method:"GET"|e.method,param:e,encodeFn:function(e){return encodeURIComponent(e)}};delete e.ifname,delete e.method,this._remoteInterface.send(a,t)},getUserInfo:function(e,t){this.request(Q.object.extend(e,{ifname:"getUserInfo"}),t)}}});a.exports=new o});
define("interfaces/ugcVI.js",["../kit/remoteInterface","./config","../kit/checkI18nType"],function(e,t,a){var i,n=e("../kit/remoteInterface"),o=e("./config").interfaces,r=e("../kit/checkI18nType");r.type||(i="zh_tw"),a.exports=Q.Class("ugcVI",{construct:function(e){var t=o.ugcVI+e.tvid;e.topic&&(t+="?select=topic"),e.multi&&(t="http://mixer.video.iqiyi.com/jp/mixin/videos?tvIds="+e.tvid),this._remoteInterface=new n({vgcVi:{url:t}})},methods:{request:function(e,t){e=e||{},e.status=1,i&&(e.locale=i),this._remoteInterface.send({ifname:"vgcVi",param:e,dataType:"jsonp"},function(e){t&&t(e)})}}})});
define("kit/checkFlashSupport.js",[],function(e,t,a){var i=!1;try{i=Boolean(new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(n){i="undefined"!=typeof navigator.mimeTypes["application/x-shockwave-flash"]}a.exports={type:i}});
define("units/playerPopupReward.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/bigVipRewardInterface","../interfaces/ugcVI","../kit/qiyiPlayer","../components/action/floater","../components/view/floaterView","../action/vip/reward","../action/qipaLogin","../kit/userInfo"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n,o,r,s,l,d,c,u=e("../interfaces/bigVipRewardInterface"),m=e("../interfaces/ugcVI"),p=e("../kit/qiyiPlayer"),h=e("../components/action/floater"),f=e("../components/view/floaterView"),g=e("../action/vip/reward"),v=e("../action/qipaLogin"),y=e("../kit/userInfo"),b=null,V="playerPopupReward",U={},w={},k=Q.PageInfo&&Q.PageInfo.playPageInfo||{},_="81df4ff6423a13e3";i.create(V,{check:function(){return Q.$("#widget-dramaseries")||Q.$("#widget-slidewidget-0")?!0:void 0},init:function(){var e=this;U.flashFloatWrap=Q.$(document.createElement("div")),U.flashFloatWrap.addClass("award-player"),n=p.getPlayer("video"),c=new u,l=k.qipuId||k.tvId,e._initRender(),e._eventBind()},_initRender:function(){n.getVideoInfo(function(e){var t=new m({tvid:e.tvid});t.request({callback:"ugcvi"+e.tvid},function(e){e=e.data,r=e.user.name,s=e.user.avatar})})},_eventBind:function(){function e(){i._renderRewardFloat(function(e){if(e){var t="",a=0;e.map(function(e,i){var n="";e.recommend&&(n="selected",a=i),t+='<a href="" class="award-player-list '+n+'" rewardcount="'+parseInt(e.fee,10)+'" '+'rewardtext="'+e.word+'" target="'+e.target+'">'+'<div class="award-player-box"><span class="award-player-text">'+e.word+"</span></div>"+'<span class="award-player-money">'+parseInt(e.fee,10)/100+"元</span>"+"</a>"}),t='<div class="award-player-wrap"><div class="award-player-hd"><p class="pop-hd-txt">请选择打赏金额：</p><a href="javascript:void(0);" class="award-pop_closeBtn" data-bigvip-reward="closeFloat"></a></div><div class="award-player-bd clearfix" data-reward-elem="payList">'+t+"</div>"+'<div class="award-player-zsBtn"><a href="javascript:void(0);" class="award-player-ft" data-reward-elem="doReward">我要打赏</a></div>'+"</div>",U.flashFloatWrap.html(t),o=Q.$(U.flashFloatWrap.down('[data-reward-elem="payList"]')[0].childNodes[a])}Q.$("body").append(U.flashFloatWrap),b||(b=new h({view:new f({isResize:!0,zIndex:4850})})),i._sendShowPingback({block:"604082_popup"}),b.show({elem:U.flashFloatWrap})})}function t(e,t){setTimeout(function(){n.pause()},100),g.rewardPay(e,function(){t()})}function a(){U.flashFloatWrap.html(""),b.hide()}var i=this;n.on("videoChanged",function(e){var t=e.data;l=t.videoQipuId}),n.on("requestReward",function(){e()});var c=U.flashFloatWrap;c&&c.on("click",function(e){Q.event.get(e).preventDefault();for(var c=Q.$(e.target||e.srcElement);"A"!==c[0].tagName;)c=c.parent();if(c.attr("data-bigvip-reward")&&"closeFloat"===c.attr("data-bigvip-reward"))a(),n.resume();else if("doReward"===c.attr("data-reward-elem")){var u={};i._sendClickPingback({rseat:"604081_popupclick"}),u.payValue=parseInt(o.attr("rewardcount"),10)||0,u.payLetter=o.attr("rewardtext")||"",u.icon=s||"http://www.qiyipic.com/common/fix/site/zsv.png",u.type=0,u.aid=l,u.name=r||"视频作者",u.target=o.attr("target")||"",u.rseat=d||"";var m=function(){n.resume()};a(),y.isLogin()?t(u,m):(i._sendShowPingback({block:"604082_login"}),v.openLoginWindow({resumePlayer:!1},function(){i._sendClickPingback({rseat:"604081_login"}),t(u,m)}))}else o!==c&&(o.removeClass("selected"),c.addClass("selected"),o=c)})},_renderRewardFloat:function(e){if(w[l])e(w[l].payList);else{var t={};t.aid=l,t.rseat="604081_rewardbtn_2",t.target=_,c.getVideoRewardInfo(t,function(t){t=t.data,t=t.data,w[l]=t;var a=t.payList;d=t.rseat,e(a)})}},_sendClickPingback:function(e){var t={};t.t="20",t.pf=1,t.p=10,t.p1=101,t.u=Q.cookie.get("QC006"),t.pu=y.getUid(),t.jsuid=Q.cookie.get("QC006")||"",t.rn=(new Date).getTime(),t.subtype="1",t.flshuid=Q.cookie.get("QC005"),Q.object.extend(t,e),Q.log.server(t,"http://msg.71.am/b")},_sendShowPingback:function(e){var t={};t.t="21",t.bstp="21_yunshw",t.pf=1,t.p=10,t.p1=101,t.u=Q.cookie.get("QC006"),t.pu=y.getUid(),t.jsuid=Q.cookie.get("QC006")||"",t.rn=(new Date).getTime(),t.subtype="1",t.flshuid=Q.cookie.get("QC005"),Q.object.extend(t,e),Q.log.server(t,"http://msg.71.am/b")}}),a.exports=V});
define("interfaces/bigVipRewardInterface.js",["../kit/remoteInterface","./config"],function(e,t,a){var i=e("../kit/remoteInterface"),n=e("./config").interfaces;a.exports=Q.Class("bigVipRewardInterface",{construct:function(){this._remoteInterface=new i({getVideoAwardList:{url:n.getAwardList},getVideoRewardInfo:{url:n.getRewardInfo},getBigVRewardInfo:{url:n.getBigVRewardInfo},getBigVRankInfo:{url:n.getBigVRankInfo}})},methods:{getVideoAwardList:function(e,t){e=e||{},this._remoteInterface.send({ifname:"getVideoAwardList",dataType:"jsonp",param:e},function(e){t&&t(e)})},getVideoRewardInfo:function(e,t){e=e||{},this._remoteInterface.send({ifname:"getVideoRewardInfo",dataType:"jsonp",param:e},function(e){t&&t(e)})},getBigVRewardInfo:function(e,t){e=e||{},this._remoteInterface.send({ifname:"getBigVRewardInfo",dataType:"jsonp",param:e},function(e){t&&t(e)})},getBigVRankInfo:function(e,t){e=e||{},this._remoteInterface.send({ifname:"getBigVRankInfo",dataType:"jsonp",param:e},function(e){t&&t(e)})}}})});
define("action/vip/reward.js",["../../components/action/floater","../../components/view/floaterView","../../kit/userInfo","../../action/qipaLogin","../../action/input","../../interfaces/vip/reward"],function(e,t,a){var i=e("../../components/action/floater"),n=e("../../components/view/floaterView"),o=e("../../kit/userInfo"),r=e("../../action/qipaLogin"),s=e("../../action/input"),l=e("../../interfaces/vip/reward"),d=null,c=null,u=new l,m={getIcon:"http://www.qiyipic.com/common/fix/admire/admire-image.png",getName:"",setIcon:"http://www.qiyipic.com/common/fix/admire/admire-image.png",setName:"",payValue:"",payLetter:"",payTarget:"",payRseat:"",payAid:""},p=null,h=Q.Class("Reward",{construct:function(){},properties:{timer:null,timeOut:null},methods:{init:function(){var e=this;e.bindEvent()},rewardPay:function(e,t){var a=this;if(p=t,o.isLogin()){var i=a.getPayString();a.createfloater(i),a.showPingBack("604082_payment"),a.setRewardData(e),c.down('[data-reward-get="value"]').html(m.payValue),c.down('[data-reward-get="message"]').html(e.payLetter),o.getIcon(function(e){e&&(m.setIcon=e),a.setUserInfo()}),a.createOrder(e)}else a.showPingBack("604082_login"),r.openLoginWindow(e,function(){a.rewardPay(e,t)})},setRewardData:function(e){var t=o.getName();m.getIcon=e.icon,m.getName=e.name,m.setName=t,m.payValue=parseFloat(e.payValue)/100,m.payLetter=e.payLetter,m.payTarget=e.target,m.payRseat=e.rseat,"0"==e.type&&(m.payAid=e.aid)},setUserInfo:function(){c&&(c.down('[data-reward-get="icon"]').attr("src",m.getIcon),c.down('[data-reward-get="name"]').html(m.getName),c.down('[data-reward-set="name"]').html(m.setName),c.down('[data-reward-set="icon"]').attr("src",m.setIcon))},bindEvent:function(){var e=this;Q(document).delegate('[data-reward-ele="closeBtn"]',"click",function(t){Q.event.get(t).preventDefault(),e.clearTimer(),d.hide(),e.callbackFun("false")}),Q(document).delegate('[data-reward-ele="successCloseBtn"]',"click",function(t){Q.event.get(t).preventDefault(),e.clearTimer(),d.hide(),e.callbackFun("true")}),Q(document).delegate('[data-reward-ele="codeCover"]',"click",function(t){Q.event.get(t).preventDefault();var a=c.attr("data-orderCode");e.getQrcode(a)}),Q(document).delegate('[data-reward-ele="payDone"]',"click",function(t){Q.event.get(t).preventDefault(),e.clearTimer(),e.checkPayResult(!0)}),Q(document).delegate('[data-reward-ele="payCountinue"]',"click",function(t){Q.event.get(t).preventDefault();var a=c.attr("data-orderCode");c.html(e.getPayString()),e.setUserInfo(),c.down('[data-reward-get="value"]').html(m.payValue),c.down('[data-reward-get="message"]').html(m.payLetter),e.getQrcode(a)})},createOrder:function(e){var t=this,a={P00001:Q.cookie.get("P00001"),type:e.type,fee:e.payValue,target:e.target,platform:"b6c13e26323c537d",rseat:encodeURIComponent(e.rseat)};"0"==a.type?a.aid=e.aid:a.uid=e.uid,u.createOrder(a,function(e){if("A00000"==e.code&&"A00000"==e.data.code){var a=e.data.data.orderCode;t.getQrcode(a)}})},getQrcode:function(e){var t=this,a=["orderCode="+e],i="http://reward.iqiyi.com/pay/scanPay.action?",n=["url="+encodeURIComponent(i+a.join("&")),"short=1","validTime=15*60","width=110"],o="http://reward.iqiyi.com/service/getQRCode.action?"+n.join("&");c.down('[data-reward-ele="codeImg"]').attr("src",o),c.down('[data-reward-ele="codeImg"]').attr("data-orderCode",e),c.attr("data-orderCode",e),"hidden"==c.css("visibility")&&d.show(),c.down('[data-reward-ele="qrCodeBox"]').removeClass("erWeiMa-pasted"),c.down('[data-reward-ele="codeCover"]').addClass("dn"),c.down('[data-reward-ele="inWord"]').removeClass("dn"),c.down('[data-reward-ele="outWord"]').addClass("dn"),t.autoCheckResult()},createfloater:function(e){d||(d=new i({view:new n({isResize:!0,zIndex:4850})}),c=d.getFloater()),c.html(e)},autoCheckResult:function(){var e=this;e.clearTimer(),e.timer=setInterval(function(){e.checkPayResult(!1)},2e3),e.timeOut=setTimeout(function(){e.timer&&(clearInterval(e.timer),c.down('[data-reward-ele="qrCodeBox"]').addClass("erWeiMa-pasted"),c.down('[data-reward-ele="codeCover"]').removeClass("dn"),c.down('[data-reward-ele="inWord"]').addClass("dn"),c.down('[data-reward-ele="outWord"]').removeClass("dn"))},9e5)},checkPayResult:function(e){var t=this,a={orderCode:c.attr("data-orderCode")};u.getPayResult(a,function(a){"A00000"==a.code&&("A00000"==a.data.code&&"1"==a.data.data.status?(t.clearTimer(),c.html('<img src="http://www.qiyipic.com/common/fix/dashang/loveyou.gif">'),window.setTimeout(function(){t.sendMessageFloater()},1100)):"A00001"==a.data.code?(t.clearTimer(),t.getQrcode(a.data.data.newOrderCode)):e&&(t.clearTimer(),c.html(t.payFinishString())))})},sendMessageFloater:function(){var e=this;c.html(e.getMessageString()),e.showPingBack("604082_payresult"),e.setUserInfo(),e.bindEventMessage()},bindEventMessage:function(){var e=this,t=c.down('[data-reward-ele="messageBox"]'),a=c.down('[data-reward-ele="sendBtn"]');t.on("focus",function(){Q(this).removeClass("titleTxt-color")}),t.on("blur",function(){Q(this).addClass("titleTxt-color")}),t.on("keyUp",function(){Q(this).addClass("titleTxt-color")});var i=e.getInput(t,!1),n=140,o=function(){var e=Q.$('[data-reward-ele="limitWord"]'),t=i.syncGet().value;e.html(Math.floor(Q.string.getLength(t)/2)+"/140"),t?Math.floor(Q.string.getLength(t)/2)>n?(e.addClass("beyondTit"),a.addClass("default-btn")):(e.hasClass("beyondTit")&&e.removeClass("beyondTit"),a.hasClass("default-btn")&&a.removeClass("default-btn")):a.addClass("default-btn")};i.on("valueChange",function(){o()}),a.on("click",function(t){Q.event.get(t).preventDefault(),Q(this).hasClass("default-btn")||e.sendMessageFun()})},sendMessageFun:function(){var e=this,t={P00001:Q.cookie.get("P00001"),orderCode:c.attr("data-orderCode"),content:Q('[data-reward-ele="messageBox"]').val()};m.payAid&&(t.aid=m.payAid),u.sendMessage(t,function(t){"A00000"==t.code&&("A00000"==t.data.code?(c.down('[data-reward-ele="sendResult"]').removeClass("dn"),c.down('[data-reward-ele="successSend"]').removeClass("dn"),c.down('[data-reward-ele="failSend"]').addClass("dn"),e.showPingBack("604082_msgsatisfied"),window.setTimeout(function(){d.hide(),e.callbackFun("true")},1e3)):(c.down('[data-reward-ele="sendResult"]').removeClass("dn"),c.down('[data-reward-ele="successSend"]').addClass("dn"),c.down('[data-reward-ele="failSend"]').removeClass("dn"),e.showPingBack("604082_msgfailed"),window.setTimeout(function(){c.down('[data-reward-ele="sendResult"]').addClass("dn")},1e3)))})},getInput:function(e,t){return new s({doms:{input:e},value:e.value().trim(),defaultValue:e.value().trim(),likePlaceHolder:t})},clearTimer:function(){var e=this;e.timer&&clearInterval(e.timer),e.timeOut&&clearTimeout(e.timeOut)},callbackFun:function(e){if(p){var t={status:e,userIcon:m.setIcon,userName:m.setName};p(t)}},showPingBack:function(e){var t={authcookie:o.getAuthCookies(),agent_type:1},a={t:"21",pf:1,p:10,p1:101,p2:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),block:e};Q.object.extend(a,t),Q.log.server(a,"http://msg.71.am/b")},getPayString:function(){var e='<div class="admireFc"><div class="admireFc-inner"><div class="pa boxCustom-close"><a href="javascript:void(0);" class="btn-close-pop" data-reward-ele="closeBtn"><i class="ff-icon">&#xe684;</i></a></div><div class="admirePay"><p class="admirePay-tle pa">打赏</p><div class="admirePay-left"><div class="userPic admirePic"><img src="http://www.qiyipic.com/common/fix/admire/admire-image.png" width="61" height="61" data-reward-set="icon"><span class="userPic-til"><em class="textOverflow title" data-reward-set="name"></em></span></div><div class="admirePay-left-main"><p class="money">赏金<em data-reward-get="value"></em>元</p><p class="content" data-reward-get="message"></p><div class="arrows"></div></div><div class="userPic"><img src="" width="61" height="61" data-reward-get="icon"><span class="userPic-til"><em class="textOverflow title" data-reward-get="name"></em></span></div></div><!-- 二维码过期 添加 erWeiMa-pasted--><div class="admirePay-right" data-reward-ele="qrCodeBox"><div class="admirePay-right-top"><p data-reward-ele="inWord"><i class="erWeiMa-icon"></i>请扫描二维码完成支付！ </p><p data-reward-ele="outWord" class="dn"><i class="erWeiMa-icon"></i>二维码已过期，请重新获取！</p></div><div class="admirePay-right-center"><div class="vp_ewmBox"><div class="code_hover dn" data-reward-ele="codeCover" style="cursor:pointer;"></div><img src="http://www.qiyipic.com/common/fix/admire/admire-image.png" width="110" height="110" data-reward-ele="codeImg"></div><div class="payType"><span class="aliPay"></span><span class="weChat"></span></div></div><p class="admirePay-right-bottom"><a href="javascript:void(0);" class="issue" data-reward-ele="payDone">支付遇到问题？</a><a href="javascript:void(0);" class="Payed" data-reward-ele="payDone">完成支付</a></p></div></div></div></div>';return e},getMessageString:function(){var e='<div class="admireFc"><!-- 气泡弹窗  开始 --><div class="admireSend dn" data-reward-ele="sendResult"><div class="admireFc-inner"><!-- 消息发送成功 --><p class="admireSend-ok dn" data-reward-ele="successSend"> <i class="ff-icon ff-ok"></i><span>发送成功！</span></p><!-- 消息发送失败 --><p class="admireSend-fail dn" data-reward-ele="failSend"> <i class="ff-icon ff-fail"></i><span>私信发送失败，请重试！</span></p></div></div><!-- 气泡弹窗  结束 --><div class="admireFc-inner"><div class="pa boxCustom-close"><a href="javascript:void(0);" class="btn-close-pop" data-reward-ele="successCloseBtn"><i class="ff-icon"></i></a></div><div class="admireMessage"><div class="userPic"><img src="http://www.qiyipic.com/common/fix/admire/admire-image.png" width="61" height="61" data-reward-get="icon"><span class="userPic-til"><em class="textOverflow title" data-reward-get="name"></em></span></div><div class="messageCon"><div class="messageTop"><span>心意已收到，还有什么要对我说的吗？</span><div class="fc_panel_arrowWrap"><i class="fc_panel_arrow"></i><i class="fc_panel_arrowInner"></i></div></div><div class="message-main pr"><!-- 光标点入时 去掉  titleTxt-color  --><textarea class="titleEdit-txt titleTxt-color" placeholder="可以发信息给TA了" value="可以发信息给TA了" data-reward-ele="messageBox"></textarea><div class="fc_panel_arrowWrap"><i class="fc_panel_arrow"></i><i class="fc_panel_arrowInner"></i></div><div class="pa textarea-decr"><!-- 字数超出 140 个字时  添加 beyondTit --><span data-reward-ele="limitWord">0/140</span></div></div></div><div class="userPic admirePic"><img src="http://www.qiyipic.com/common/fix/admire/admire-image.png" width="61" height="61" data-reward-set="icon"><span class="userPic-til"><em class="textOverflow title" data-reward-set="name"></em></span></div></div><div class="quxiao fl"><a href="javascript:void(0);" data-reward-ele="successCloseBtn">算了</a></div> <div class="send fl"><a href="javascript:void(0);" data-reward-ele="sendBtn" class="default-btn">发送</a></div></div></div>';return e},payFinishString:function(){var e='<div class="admireFc"><div class="admireFc-inner"><div class="pa boxCustom-close"><a href="javascript:void(0);" class="btn-close-pop" data-reward-ele="closeBtn"><i class="ff-icon"></i></a></div><div class="admirePay"><p class="admirePay-tle pa">支付问题提示</p><div class="payIssue"><ul><li><span class="payIssue-tle"><i class="round"></i>已扣款成功，但没有成功提示</span><p class="describe">由于网络传输延迟，订单信息可能尚未更新，我们会及时查询并更新订单状态，请勿重新支付～<a href="http://account.iqiyi.com/order" target="_blank">查看订单</a></p></li><li><span class="payIssue-tle"><i class="round"></i>未扣款成功</span><p class="describe">您可以继续支付～<a href="javascript:;" data-reward-ele="payCountinue">继续支付</a></p></li></ul></div></div></div></div>';return e}}}),f=new h;f.init(),a.exports={rewardPay:function(e,t){return f.rewardPay(e,t)}}});
define("interfaces/vip/reward.js",["../../kit/remoteInterface"],function(e,t,a){var i=e("../../kit/remoteInterface");a.exports=Q.Class("rewardInter",{construct:function(){this._remoteInterface=new i({createOrder:{url:"http://reward.iqiyi.com/order/makeOrder.action"},getPayResult:{url:"http://query.reward.iqiyi.com/order/queryOrder.action"},sendMessage:{url:"http://reward.iqiyi.com/sns/sendMessage.action"}})},methods:{createOrder:function(e,t){this.request(e,t,"createOrder")},getPayResult:function(e,t){this.request(e,t,"getPayResult")},sendMessage:function(e,t){this.request(e,t,"sendMessage")},request:function(e,t,a){e=e||{},e.t=(new Date).getTime(),this._remoteInterface.send({dataType:"jsonp",param:e,ifname:a},function(e){t&&t(e)})}}})});
define("units/follow.js",["../components/units/pageJob","../action/followTrigger","../kit/followInfo","../kit/userInfo","../kit/parentByProp","../kit/formatNumber"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../action/followTrigger"),o=e("../kit/followInfo"),r=e("../kit/userInfo"),s="data-widget-follow",l=Q.$("[data-widget-aggregate]"),d=e("../kit/parentByProp"),c=e("../kit/formatNumber"),m={},h={};n.create("follow",{getDependentDoms:function(){return m},check:function(){return!0},init:function(){},exec:function(){function e(e,t,a,n){var i=e.down("[data-state-change=true][data-userid="+t+"]");i&&i.forEach(function(e){e=Q.$(e),n.changeOriginState(e,a,t),u.fire({type:"getFollowState",data:{uid:t,state:n.convertState(a)}})})}function t(t,a){if(t.doms){var n=t.doms.wrapper,i=n.down("[data-state-change=true][data-userid]");if(i)if(r.isLogin()&&!a){var s,l="";i.forEach(function(e){e=Q.$(e);var a=e.attr("data-userid");return a&&a===r.getUid()?(t.changeStateToDisable(e),void 0):(l?l+=","+a:l=a,void 0)}),l&&o.getRel({uids:l},function(a){a.data.forEach(function(a){var i=a.fuid;l=l.replace(i,""),e(n,i,a.type,t)}),s=l.split(","),s.forEach(function(a){a&&e(n,a,0,t)}),u.fire({type:"refreshFollowState",data:{instance:t}})})}else i.forEach(function(e){e=Q.$(e);var a=e.attr("data-userid");a&&(u.fire({type:"getFollowState",data:{uid:a,state:0}}),t.changeOriginState(e,0,a))}),u.fire({type:"refreshFollowState",data:{instance:t}})}}function a(e){var t,a=e.doms.wrapper,n=a.down("[data-state][data-userid]");n&&n.forEach(function(a){t=Q.$(a).attr("data-state"),t=parseInt(t,10),e.setButtonEvent(t,Q.$(a))}),u.fire({type:"refreshFollowState",data:{instance:e}})}function n(){var e=o.getAllFollow();for(var n in e)e[n].doms&&(e[n].doms.wrapper.attr("data-follow-enable")?a(e[n]):(t(e[n],parseInt(e[n].doms.wrapper.attr("data-pgcfollow"),10)),e[n].doms.wrapper.removeAttr("data-pgcfollow")))}function i(e){var n=o.getFollow(e);n&&n.doms&&(n.doms.wrapper.attr("data-follow-enable")?a(n):t(n))}function d(e){var t=Q(e).parent().hasClass("site-piclist_info_describe");return t?"subscription_alternately":"add_subscription"}function c(e){var t=Q(e).parent();if(t){var a=t.prev();return a}}var m=this,u=Q.event.customEvent,p=Q.$("["+s+"]");o.on("memberStateChange",function(e){var t=e.data,a=o.getAllFollow();for(var n in a)if(a[n].doms){var i=a[n].doms.wrapper.down("[data-state-change=true][data-userid="+t.uid+"]");i&&i.forEach(function(e){t.name!==a[n].name&&a[n].changeStateTo(Q.$(e),t.stateTo);var i=Q.$(e).parent();i&&(a[n].hideUnFollow(i,t.stateTo),a[n].changeStateTo(Q.$(e),t.stateTo,t.uid))})}}),p&&(p.forEach(function(e){m.initGroup(e)}),n()),u.on("pagefrag_update",function(e){var t=e.data.widget,a=e.data.init,o=e.data.followName;if(a&&(h={}),t.length)for(var r=0;r<t.length;r++)m.initGroup(t[r],e.data.clsConfig);else m.initGroup(t,e.data.clsConfig);o?i(o):n()}),u.on("pagefollow_delete",function(e){var t=e.data.widget;if(t.length)for(var a=0;a<t.length;a++){var n=Q.$(t[a]).attr("data-widget-follow");delete h[n],o.deleteFollow(n)}}),u.on("login",function(){n()}),u.on("logout",function(){n()}),u.on("pgcChangeStates",function(){n()}),Q(document).delegate("[j-delegate=show_hide_follow]","mouseenter",function(){var e=Q.$(this),t=e.down('[data-hide="1"]');if(t)if(l){var a=c(t);a.hasClass("site-piclist_info_describe")&&a.addClass("dn"),a.removeClass("subscription_alternately"),t.removeClass("dn")}else{var n=d(t);t.parent().addClass(n),t.removeClass("dn")}}),Q(document).delegate("[j-delegate=show_hide_follow]","mouseleave",function(){var e=Q.$(this),t=e.down('[data-hide="1"]');t&&(l?setTimeout(function(){t.addClass("dn");var e=c(t);e.hasClass("site-piclist_info_describe dn")&&e.removeClass("dn"),e.addClass("subscription_alternately")},0):setTimeout(function(){t.addClass("dn");var e=d(t);t.parent().removeClass(e)},0))})},initGroup:function(e,t){var a=Q.$(e),n=a.attr(s),o=a.attr("data-ext"),r=a.attr("data-settled"),l=h[n];l||(h[n]=new i({doms:{wrapper:a},name:n,stateList:t,isExt:o,isSettled:r}),h[n].on("addFollowDone",function(e){var t=d(e.data.target,"data-follow-add","add");if(t){var a=t.down("[data-fans]");a||(a=t.down("[data-change-fans]"));var n=a.attr("data-countNum");a.attr("data-countNum",++n),a.html(c.format(n))}}),h[n].on("removeFollowDone",function(e){var t=d(e.data.target,"data-follow-add","add");if(t){var a=t.down("[data-fans]");a||(a=t.down("[data-change-fans]"));var n=a.attr("data-countNum");a.attr("data-countNum",--n),a.html(c.format(n))}}))}}),n.add("follow"),a.exports="follow"});
define("action/followTrigger.js",["../view/followView","../kit/eventPlugin","../kit/followInfo","../action/qipaLogin","../kit/changeCss","../units/ugc/followPlugin","../kit/userInfo"],function(e,t,a){var n=new Q.ic.InfoCenter({moduleName:"action/followTrigger"}),i=e("../view/followView"),o=e("../kit/eventPlugin"),r=e("../kit/followInfo"),s=e("../action/qipaLogin"),l=e("../kit/changeCss"),d=e("../units/ugc/followPlugin"),c=e("../kit/userInfo");a.exports=Q.Class("FollowTrigger",{plugins:[new o],construct:function(e){e=e||{},e.actionName=e.actionName||"follow",e.ctrl=this,this.doms=e.doms,this.name=e.name,r.insert({name:e.name,action:this}),this.view=e.view||new i(e),this.stateList=e.stateList||this.getStateList(),this.isExt=!!e.isExt&&!Q.browser.iPad,this.isSettled=!!e.isSettled,this.init()},statics:{getFollow:function(e){return r.getFollow(e)},getAllFollow:function(){return r.getAllFollow()}},methods:{init:function(){this.beforeAdd=this._beforeAdd},regHandler:function(e,t,a){switch(e){case 1:"function"==typeof a&&("add"===t?this.beforeAdd=a:"remove"===t&&(this.beforeRemove=a));break;case 2:"function"==typeof a&&("add"===t?this.afterAdd=a:"remove"===t&&(this.afterRemove=a))}},getStateList:function(){return{0:"btn-care btn-care-tocare",1:"btn-care btn-care-tocare",2:"btn-care btn-care-cared",3:"btn-care btn-care-cared",loading:"btn-care-loading",disable:"btn-care-disabled",update:"btn-care btn-care-update"}},regEvent:function(e){e=e||{};for(var t in e){if("function"!=typeof e[t])return;this.on(t,e[t].bind(this))}},addFollow:function(e){var t=this;if(e=e||{},e.uid!==c.getUid()){var a={uids:e.uid};e.optParam&&Q.object.extend(a,e.optParam),this.changeStateToLoading(e.target),r.addFollow(a,function(a){var i=e.target.next("[data-follow-failtips]");n.log("____add done"),"A00000"===a.code?(isNaN(e.state)||(t.changeStateTo(e.target,e.state+2),e.stateTo=e.state+2),e.followAdd=1,t.fire({type:"addFollowDone",data:e}),e.name=t.name,r.fire({type:"memberStateChange",data:e}),Q.event.customEvent.fire({type:"followNumChange",data:e}),Q.event.customEvent.fire({type:"pgcFollowChange",data:e}),t.afterAdd&&"function"==typeof t.afterAdd&&t.afterAdd(e),i&&i.hide()):(t.changeStateTo(e.target,e.state),e.target.attr("j-delegate","add_follow"),i&&i.show())})}},removeFollow:function(e){var t=this;e=e||{};var a={uids:e.uid},i=e.addBtn||e.target;this.changeStateToLoading(e.target),r.removeFollow(a,function(a){n.log("____remove done"),"A00000"===a.code?(isNaN(e.state)||(t.changeStateTo(i,e.state-2),e.stateTo=e.state-2),e.followAdd=-1,t.fire({type:"removeFollowDone",data:e}),e.total=a.total,e.name=t.name,r.fire({type:"memberStateChange",data:e}),Q.event.customEvent.fire({type:"followNumChange",data:e}),Q.event.customEvent.fire({type:"removeFollowDone",data:e}),0===a.total&&r.fire({type:"removeToZero",data:e})):(t.changeStateTo(e.target,e.state),e.target.attr("j-delegate","remove_follow"))})},removeFans:function(e){var t=this;if(e=e||{},e.uid){var a={uids:e.uid};r.removeFans(a,function(a){"A00000"===a.code&&t.fire({type:"removeFanDone",data:e})})}},setUpdateFollow:function(e){var t="btn-care-update",a="btn-care-cared";Q(e).on("mouseenter",function(){var e=Q(this),n=e.attr("data-userid"),i="http://www.iqiyi.com/u/"+n;e.attr("target","_blank"),e.attr("href",i),e.removeClass(a),e.addClass(t)}),Q(e).on("mouseleave",function(){var e=Q(this);e.removeClass(t),e.addClass(a)})},setCancelFollow:function(e){var t="btn-care-cancel",a="btn-care-cared",n=Q(e);n.on("mouseenter",function(){var e=Q(this),i=parseInt(n.attr("data-state")||0,10);i>=2&&(e.removeClass(a),e.addClass(t))}),n.on("mouseleave",function(){var e=Q(this),i=parseInt(n.attr("data-state")||0,10);i>=2&&(e.removeClass(t),e.addClass(a))})},addBatchFollows:function(e){var t=this;if(e=e||{},e.uid){var a=e.uid.split(",").length,n={uids:e.uid};e.followAdd=a,r.addFollow(n,function(a){"A00000"===a.code&&(Q.event.customEvent.fire({type:"followNumChange",data:e}),t.fire({type:"addBatchFollowDone",data:e}))})}},recommendFollows:function(e){r.pushFollow(function(t){e&&e(t)})},clearState:function(e){e.attr("data-userid",""),e.removeAttr("j-delegate"),e.removeAttr("data-mouse"),e.attr("title","")},changeStateTo:function(e,t,a){var n=this,i=!1;if(this.stateList&&this.stateList[t]&&e&&e.attr("data-state-change")){if("loading"===t)return e.addClass(this.stateList[t]),void 0;if(a&&e.attr("data-userid",a),e.attr("data-state",t),Q(e).hasClass("dn")&&(i=!0),e[0].className=this.stateList[t],i&&Q(e).addClass("dn"),2>t){if(a&&c.getUid()===a)return this.changeStateToDisable(e),void 0;e.attr("j-delegate","add_follow"),1===t?e.attr("title","已订阅我，点击订阅Ta"):0===t&&e.attr("title","订阅Ta，获取最新动态")}else e.removeAttr("j-delegate"),e.removeAttr("data-mouse"),e.attr("title","");setTimeout(function(){n.setButtonEvent(t,e)},50)}},setButtonEvent:function(e,t){if(this.isExt)if(2>e)d.setUnFollow(t);else{var a="true"==t.attr("data-update")?!0:!1,n="true"==t.attr("data-cancel")?!0:!1;if(n)this.setCancelFollow(t);else if(a)this.setUpdateFollow(t);else{var i="http://www.iqiyi.com/u/sub";t.attr("data-href")&&(i=t.attr("data-href")),d.setFollowed(t,["mouseenter","mouseleave"],{css:this.stateList.update,rawCss:this.stateList[e],url:i})}}},unButtonEvent:function(e){d.setUnFollow(e)},hideUnFollow:function(e,t){var a=e.down("*[data-follow-btn=unfollow]");a&&(2>t?l.changeCss(a,"dn",!1):(a.attr("j-delegate","remove_follow"),l.changeCss(a,"dn",!0)))},changeStateToLoading:function(e){e&&(e.removeAttr("j-delegate"),this.changeStateTo(e,"loading"))},changeStateToDisable:function(e){e&&(e.removeAttr("j-delegate"),l.changeCss(e,this.stateList.disable,!1))},_beforeAdd:function(e){var t=Q.$("#ppsShortVideoList");t?location.href="http://passport.iqiyi.com/pages/user/login.action":s.openLoginWindow({from:"subscribe"},e)},changeOriginState:function(e,t,a){var n=this.convertState(t);this.changeStateTo(e,n,a)},convertState:function(e){switch(e){case 0:return 0;case 2:return 1;case 1:return 2;default:return 3}},sendPingbackSub:function(e,t){var a="1412042";e.attr("data-rseat")&&(a=e.attr("data-rseat"));var n={};n.rseat||(n.rseat=1===t?a+"_subs"||"":a+"_canl"||"",n.rseat+=e.attr("data-idx")||""),r.sendPingback(n)}}})});
define("view/followView.js",["../kit/userInfo","../units/ugc/followFloater","../units/ugc/popuptip","../units/ugc/followTipShow"],function(e,t,a){new Q.ic.InfoCenter({moduleName:"view/followView"});var n=e("../kit/userInfo"),i=e("../units/ugc/followFloater"),o=e("../units/ugc/popuptip"),r=e("../units/ugc/followTipShow");a.exports=Q.Class("FollowView",{construct:function(e){this.ctrl=e.ctrl,this.doms=e.doms,this.init()},properties:{},methods:{init:function(){this.doms&&this.doms.wrapper&&(this.initState(),this._buildEvent())},initState:function(){var e=this.doms.wrapper.attr("data-follow-showtip");e&&1===parseInt(e,10)&&this.ctrl.regHandler(2,"add",this._afterAddHandler.bind(this.ctrl))},setEnableState:function(e){e?this.doms.wrapper.attr("data-follow-enable","1"):this.doms.wrapper.attr("data-follow-enable","")},_buildEvent:function(){var e=this;this.doms.wrapper.delegate("add_follow",function(t){var a=e._getAttr(t);if(n.isLogin())e.ctrl.addFollow(a);else{var i=e._beforeHandler.bind(e,a);e.ctrl.beforeAdd(i)}}),this.doms.wrapper.delegate("remove_follow",function(t){var a=e._getAttr(t,!0);e.ctrl.beforeRemove&&e.ctrl.beforeRemove();var n=a.target.attr("data-confirm");n&&1!==parseInt(n,10)?e.ctrl.removeFollow(a):i.currentUser||(i.currentUser=a,i.currentFollow=e.ctrl,i.showFollowTip({target:a.target,offset:e.getPos(a.target),isResize:!1}))}),this.doms.wrapper.delegate("remove_fans",function(t){var a=e._getAttr(t);i.currentUser||(i.currentUser=a,i.currentFollow=e.ctrl,i.showFansTip({target:a.target,offset:e.getPos(a.target),isResize:!1}))})},_beforeHandler:function(e){var t=this;setTimeout(function(){if(e.target){var a=e.target.attr("data-state");if(a&&parseInt(a,10)>1)return}return e.uid===n.getUid()?(t.ctrl.changeStateToDisable(e.target),void 0):(t.ctrl.addFollow(e),void 0)},600)},_afterAddHandler:function(e){r.show(e.target,"1")},_getAttr:function(e,t){var a=Q.event.get(e.event);a.preventDefault();var n,i=Q.$(e.target),o=i.attr("data-userid"),r=i.attr("data-state")?parseInt(i.attr("data-state"),10):0,s=null,l=i.attr("data-opt-param"),d=parseInt(i.attr("data-player"),10);l&&(s=JSON.parse(l)),t&&(n=this.doms.wrapper.down('[data-userid="'+o+'"][data-state-change="true"]'));var c={target:i,addBtn:n,uid:o,state:r,optParam:s};return(d||0===d)&&(c.playerSubscribe=d),c},getPos:function(e){var t={},a=o.getPos({target:e,popWidth:240,popHeight:125,offsetHeighta:20,offsetWidth:230});return 1===a.dir?(t.disLeft=80,t.disTop=20):2===a.dir?(t.disLeft=-230,t.disTop=20):3===a.dir?(t.disLeft=80,t.disTop=-20):(t.disLeft=-230,t.disTop=-20),t}}})});
define("units/ugc/followFloater.js",["../../config/htmlConfig","../../action/floatData"],function(e,t,a){new Q.ic.InfoCenter({moduleName:"ugc/units/followFloater"});var n=Q.$("body"),i=e("../../config/htmlConfig"),o=e("../../action/floatData"),r=Q.browser.iPad?"touchstart":"click",s="popup_follow",l=Q.Class("FollowFloater",{construct:function(){this._initFloater(),this.hideFloaterHandler=this._hideFloater.bind(this),this.keydownFloaterHandler=this._keydownFloater.bind(this),this.currentFollow=null},methods:{_initFloater:function(){if(!Q.$("#"+s)){var e=this;this.followHtml=i.follow.removeFollow.join(""),this.fansHtml=i.follow.removeFans.join(""),this.followTip=new o({info:{html:this.followHtml},noOverflowHidden:!0,zIndex:4301}),this.followTip.on("sure",function(){e._doConfirm("follow")}),this.followTip.on("close",function(){e.currentUser=null,n.un(r,e.hideFloaterHandler)}),this.fansTip=new o({info:{html:this.fansHtml},noOverflowHidden:!0,zIndex:4301}),this.fansTip.on("sure",function(){e._doConfirm("fans")}),this.fansTip.on("close",function(){e.currentUser=null,n.un(r,e.hideFloaterHandler)})}},_doConfirm:function(e){if(this.currentFollow){switch(e){case"follow":this.currentFollow.removeFollow(this.currentUser);break;case"fans":this.currentFollow.removeFans(this.currentUser)}this.currentUser=null,n.un(r,this.hideFloaterHandler)}},_hideFloater:function(e){if(this.currentUser){if(this.followFloater&&this.followFloater.isOpen())return this.followTip.doCloseBtnClick(e),void 0;this.fansFloater&&this.fansFloater.isOpen()&&this.fansTip.doCloseBtnClick(e),n.un("keydown",this.keydownFloaterHandler)}},_keydownFloater:function(e){var t=e.keyCode;switch(t){case 27:this._hideFloater();break;case 13:if(this.followFloater&&this.followFloater.isOpen())return this.followTip.doSureBtnClick(e),void 0;this.fansFloater&&this.fansFloater.isOpen()&&this.fansTip.doSureBtnClick(e)}},showFollowTip:function(e){var t=this;n.on("keydown",this.keydownFloaterHandler),this.followTip.show(e),this.followFloater||(this.followFloater=this.followTip.floater,this.followFloaterView=this.followFloater.getFloater(),this.followFloaterView.attr("id",s),this.followFloaterView.on("mouseleave",function(){n.on(r,t.hideFloaterHandler)}),this.followFloaterView.on("mouseenter",function(){n.un(r,t.hideFloaterHandler)}))},showFansTip:function(e){var t=this;n.on("keydown",this.keydownFloaterHandler),this.fansTip.show(e),this.fansFloater||(this.fansFloater=this.fansTip.floater,this.fansFloaterView=this.fansFloater.getFloater(),this.fansFloaterView.on("mouseleave",function(){n.on(r,t.hideFloaterHandler)}),this.fansFloaterView.on("mouseenter",function(){n.un(r,t.hideFloaterHandler)}))}}}),d=new l;a.exports=d});
define("config/htmlConfig.js",[],function(e,t,a){a.exports={edit_pwd:{success:['<table cellspacing="0" cellpadding="0" class="successPop">',"<tbody><tr>",'<td style="height: 4px; overflow: hidden; font-size: 4px; line-height: 4px;" class="successPop_Bg" colspan="3"></td>',"</tr>","<tr>",'<td style="width: 4px; overflow: hidden;" class="successPop_Bg"></td>','<td><div class="successPop_con" id="j-tips-cnt">','<p > <span class="j-tip-content" data-floater="info"></span></p>','<div class="j-tip-foot" style="display:none"></div>',"</div></td>",'<td style="width: 4px; overflow: hidden;" class="successPop_Bg"></td>',"</tr>","<tr>",'<td style="height: 4px; overflow: hidden; font-size: 4px; line-height: 4px;" class="successPop_Bg" colspan="3"></td>',"</tr>","</tbody></table>"],fail:['<table cellspacing="0" cellpadding="0" class="conformPop">',"<tbody><tr>",'<td style="height: 4px; overflow: hidden; font-size: 4px; line-height: 4px;" class="conformPop_Bg" colspan="3"></td>',"</tr>","<tr>",'<td style="width: 4px; overflow: hidden;" class="conformPop_Bg"></td>','<td><div class="conformPop_con" id="j-tips-cnt">','<p class="j-tip-content" data-floater="info"></p>','<p class="j-tip-foot"><a class="btnBg btn3" data-floaterbtn="close" href="javascript:void(0)">关闭</a></p>',"</div></td>",'<td style="width: 4px; overflow: hidden;" class="conformPop_Bg"></td>',"</tr>","<tr>",'<td style="height: 4px; overflow: hidden; font-size: 4px; line-height: 4px;" class="conformPop_Bg" colspan="3"></td>',"</tr>","</tbody></table>"],icon:{WARNING:'<img style="vertical-align: middle;" src="http://www.qiyipic.com/common/fix/hudong2_images/img2.jpg">&nbsp;',SUCCESS:'<img style="vertical-align: middle;" src="http://www.qiyipic.com/common/fix/hudong2_images/img1.jpg">&nbsp;'},code:{}},credits_draw:{win:['<div class="tiger-popsh">','<a href="javascript:void(0)" class="tiger-popsh-close" data-floaterbtn="close"></a>','<div class="tiger-popsh-jiangpin" data-floater="info"></div>','<div class="gongxi"  data-floater="info1"></div>',"</div>"],fall:['<table width="390" border="0" cellspacing="0" cellpadding="0" class="pointPop" >','<tr><td height="5" colspan="3" style="font-size:5px; line-height:5px; overflow: hidden;" class="pointPop_Bg"></td></tr>',"<tr>",'<td width="5" style="overflow:hidden;" class="pointPop_Bg">&nbsp;</td>','<td><div class="pointPop_con">','<h3>提示 <a class="np_btn btn_close" data-floaterbtn="close" href="javascript:void(0)"></a></h3>','<div class="pointPop_content">','<p data-floater="info"></p>','<p class="acenter"><a class="np_btn btn_gray mr20" href="http://biostime.tmall.com/shop/view_shop.htm?spm=a220m.1000858.0.0.ZJlFvn&rn=f8b08edb52739639f1b423ebf75f1757" target="_blank" j-delegate="lottory_pingback">安慰奖</a>','<a class="np_btn btn_gray" data-floaterbtn="close" href="javascript:void(0)">关闭</a></p>',"</div>","</div></td>",'<td width="5" style="overflow:hidden;" class="pointPop_Bg">&nbsp;</td>',"</tr>",'<tr><td height="5" colspan="3" style="font-size:5px; line-height:5px; overflow: hidden;" class="pointPop_Bg"></td></tr>',"</table>"],code:{A00001:"服务器错误",E00001:"活动失效",E00002:"您的积分不足了，快去看大片、抢积分了",E00003:"参与抽奖失败"}},credits_draw_new:{win:['<div class="tiger-popsh">','<a href="javascript:void(0)" class="tiger-popsh-close" data-floaterbtn="close"></a>','<div class="tiger-popsh-jiangpin" data-floater="info"></div>','<div class="gongxi"  data-floater="info1"></div>',"</div>"],fall:['<div class="pc_popInteraction">','<div class="pc_popInteraction_inner">','<h3>提示 <a class="np_btn btn_close" data-floaterbtn="close" href="javascript:void(0)"></a></h3>','<div class="pc_popInteraction_con">','<p data-floater="info"></p>','<p><a class="btn_new btn_gray_m mt20" data-floaterbtn="close" href="javascript:void(0)"><span class="left_pd">关闭</span></a></p>',"</div>","</div>","</div>"],code:{A00001:"服务器错误",E00001:"活动失效",E00002:"您的积分不足了，快去看大片、抢积分了",E00003:"参与抽奖失败"}},exchange_credit:{tishiHtml:['<div class="pc_popInteraction">','<div class="pc_popInteraction_inner">','<h3>提示 <a class="np_btn btn_close" data-floaterbtn="close" href="javascript:void(0)"></a></h3>','<div class="pc_popInteraction_con">','<p data-floater="name"></p>','<p data-floater="info"></p>','<p><a class="btn_new btn_gray_m mt20" data-floaterbtn="close" href="javascript:void(0)"><span class="left_pd">关闭</span></a></p>',"</div>","</div>","</div>"],html:['<div class="pc_popInteraction">','<div class="pc_popInteraction_inner">','<h3>提示 <a class="np_btn btn_close" data-floaterbtn="close" href="javascript:void(0)"></a></h3>','<div class="pc_popInteraction_con">','<p data-floater="name"></p>','<p data-floater="info"></p>','<p ><a class="btn_new btn_green_m mt20" data-floaterbtn="sure" href="javascript:void(0)"><span class="left_pd">确认兑换</span></a>&nbsp;<a class="btn_new btn_gray_m mt20" data-floaterbtn="close" href="javascript:void(0)"><span class="left_pd">取消</span></a></p>',"</div>","</div>","</div>"]},video_upload:{cancel:['<div class="mod-popup-upload" style="width:294px;">','<div class="mod-popup">','<div class="popup_inner">','<h3 class="popup_title">','<div class="popup_inner_closeBtn">','<a href="javascript:void(0);" class="btn-close-popup" data-floaterbtn="close">×</a>',"</div>","</h3>",'<div class="popup-item">','<h3 class="fs14 plr60" data-floater="name"></h3>','<div class="clearfix btnWrap" > <a href="javascript:void(0);" title="" class="btn-link fl ml30" data-floaterbtn="close">继续上传</a> <a href="javascript:void(0);" class="site-btn site-btn-green" data-floaterbtn="sure">确定</a> </div>',"</div>","</div>",'<iframe class="frameLayer popupFrame"></iframe>',"</div>","</div>"],failed:['<div class="mod-popupWrap" style="width:415px;">','<div class="mod-popup">','<div class="popup_inner">','<h3 class="popup_title">','<div class="popup_inner_closeBtn">','<a href="javascript:void(0);" data-floaterbtn="sure" class="btn-close-popup">×</a>',"</div>","</h3>",'<div class="popup-item tc">','<h3 class="fs16 plr140"><i class="site-icons icon-alert-normal"></i><span data-floater="name"></span></h3>','<p class="mt5" data-floater="info"></p>','<p class="mt10"><span class="c999">一直上传失败？</span><a href="http://www.iqiyi.com/common/helpandsuggest.html?entry＝ugcudfail" target="_blank" title="反馈">反馈</a></p>','<div class="clearfix btnWrap">','<a href="javascript:void(0);" title="" class="btn-link mr30"data-floaterbtn="sure">返回</a>','<a href="javascript:void(0);" class="site-btn site-btn-green" data-floaterbtn="sure">确定</a>',"</div>","</div>","</div>",'<iframe class="frameLayer popupFrame"></iframe>',"</div>",'<span class="popup_vm"></span>',"</div>"]},follow:{removeFollow:['<div class="mod-popup" style="height:130px;width:240px;">','<div class="popup_inner">','<h3 class="popup_title">','<div class="popup_inner_closeBtn">','<a href="javascript:void(0);" class="btn-close-popup" data-floaterbtn="close">×</a>',"</div>","</h3>",'<div class="popup-item">','<h3 class="fs14 tc">确定要取消订阅吗？</h3>','<div class="clearfix btnWrap">','<a class="btn-link mr30" title="" href="javascript:void(0);" data-floaterbtn="close">取消</a>','<a class="site-btn site-btn-green" href="javascript:void(0);" data-floaterbtn="sure">确定</a>',"</div>","</div>","</div>","</div>"],removeFans:['<div class="mod-popup" style="height:130px;width:240px;">','<div class="popup_inner">','<h3 class="popup_title">','<div class="popup_inner_closeBtn">','<a href="javascript:void(0);" class="btn-close-popup" data-floaterbtn="close">×</a>',"</div>","</h3>",'<div class="popup-item">','<h3 class="fs14 tc">确定移除粉丝吗？</h3>','<div class="clearfix btnWrap">','<a class="btn-link mr30" title="" href="javascript:void(0);" data-floaterbtn="close">取消</a>','<a class="site-btn site-btn-green" href="javascript:void(0);" data-floaterbtn="sure">确定</a>',"</div>","</div>","</div>","</div>"]},worldCupGuessDetail:{head:['<table class="wc-table wc-table-5-mx"><tbody>'],body:['<tr class="{{className}}">','<td width="15%">第{{round}}轮</td>','<td  width="30%">{{title}}</td>','<td  width="21%">{{answer}}</td>','<td  width="17%">{{rightStr}}</td>','<td  width="17%">{{timeStr}}</td></tr>']},worldCupGifs:{head:['<table class="wc-table wc-table-5-mx" ><tbody>'],body:['<tr class="{{className}}">','<td class="wc-table_item1"><div class="table_item1-item">','<span class="wc-tab-pic">','<img width="38" height="50" src="{{purl}}"></span>','<span class="wc-tab-des">{{pname}}:{{rname}}</span>',"</div></td>",'<td class="wc-table_item2">{{rtype}}</td>','<td class="wc-table_item3">{{payTime}}</td>','<td class="wc-table_item4">{{productEndTime}}</td>','<td class="wc-table_item5"><a href="{{useUrlOpt}}" title="{{opration}}" class="{{optClass}}" {{optAttr}}>{{opration}}</a></td></tr>'],"float":['<div class="mod_score_wrap" >','<div class="mod_score_pop">','<a class="closeBtn" href="javascript:;" j-delegate="closefloater">×</a>','<div class="pop_info" >','<form action="" data-show="hide">','<div class="mb5">','<label class="item_lbl"></label>','<span class="item_tip">请填写真实信息，我们会将奖品寄送给您</span>',"</div>",'<div class="pop_info_item">','<label class="item_lbl">姓名：</label>','<input class="item_input" type="text" placeholder="请输入您的姓名" data-form-post-elem="userName">',"</div>",'<div class="pop_info_item">','<label class="item_lbl">手机号码：</label>','<input class="item_input" type="text" placeholder="请输入您的手机号" data-form-post-elem="phone">',"</div>",'<div class="pop_info_item">','<label class="item_lbl">收货地址：</label>','<textarea class="item_textarea" type="text" placeholder="请输入您的详细地址" data-form-post-elem="address"></textarea>',"</div>",'<div class="pop_info_item">','<label class="item_lbl"></label>','<input class="item_submit" type="button" value="确 认" j-delegate="send_data_event">','<a class="item_link_btn" href="javascript:;" j-delegate="closefloater">取&nbsp;&nbsp;消</a>','<span class="warning ml10" data-form-elem="msg"></span>',"</div>","</form>",'<div data-show="show" class="tc fs16" style="padding-top: 100px;display:none;" >保存成功</div>',"</div>","</div>","</div>"]},wolrdCupGuessIndex:{login:"我的竞猜世界杯",logout:'立即<a j-delegate="login" href="javascript:;" class="green">登录</a>，参与世界杯竞猜，共赢缤纷大奖'},worldCupFinally:{winners:'<li class="{{className}}"><span class="winners_name">{{nick}}</span><span class="winners_prize">获得 {{pname}}</span></li>',success:['<div class="flashGame-pop">','<div class="flashGame-pop-con">','<div class="flashGame-pop-hd clearfix">','<div class="flashGame-pop-hd-lt fl fs14">提示</div>','<div class="flashGame-pop-hd-close fr">','<a href="javascript:;" data-floaterbtn="close" ></a>',"</div>","</div>",'<div class="flashGame-pop-bd clearfix">','<span class="fl flashGame-img"><img src="{{pic}}" width="143" height="99"></span>','<div class="flashGame-pop-bd-rt fl">','<p class="p-txt mb5">恭喜您中奖啦！</p>','<p class="p-txt-name">{{pname}}</p>','<p class="p-txt-get">请去<a href="http://www.iqiyi.com/2014/jingcai/lwmx.html?type=gift" class="green">竞猜&gt;获奖明细</a>领奖</p>',"</div>","</div>",'<div class="flashGame-pop-fd">','<a href="http://www.iqiyi.com/2014/jingcai/lwmx.html?type=gift" class="get-kudo">去领奖</a>',"</div>","</div>","</div>"],fail:['<div class="flashGame-pop">','<div class="flashGame-pop-con">','<div class="flashGame-pop-hd clearfix">','<div class="flashGame-pop-hd-lt fl fs14">提示</div>','<div class="flashGame-pop-hd-close fr">','<a href="javascript:;" data-floaterbtn="close" ></a>',"</div>","</div>",'<div class="flashGame-pop-bd clearfix">',"{{if (isHit==0)}}",'<div class="flashGame-pop-bd-fourBg"></div>',"{{/if}}",'{{if (message!="")}}','<div class="flashGame-pop-bd-rt">','<p class="p-txt-no">{{message}}</p>',"</div>","{{/if}}","</div>",'<div class="flashGame-pop-fd">','<a href="javascript:;" data-floaterbtn="close" class="pop-closeBtn">关闭</a>',"</div>","</div>","</div>"]},tagCloudPage:{related:['<tr class="{{className}}">','<td><div class="label_hot_tabs"><i></i><a href="{{url}}" j-delegate="do_click_item" title="{{tag}}" data-itemid="{{tag}}"data-rank="{{rank}}" data-root="j-table-taglike">{{tag}}</a></div></td>','<td class="bor_lr"><div class="label_hotBar"><span style=" width:{{percent}}%;"></span></div></td>','<td align="center" class="label_hot_mub">{{videoNumStr}}</td>',"</tr>"]}}});
define("action/floatData.js",["../kit/eventPlugin","../components/action/floater","../components/view/floaterView","../components/view/floaterCustomView"],function(e,t,a){var n=e("../kit/eventPlugin"),i=e("../components/action/floater"),o=e("../components/view/floaterView"),r=e("../components/view/floaterCustomView"),s={};a.exports=Q.Class("FloatData",{plugins:[new n],construct:function(e){e=e||{},this.showInfo=e.info,this.closeName=e.closeName||"data-floaterbtn=close",this.sureName=e.sureName||"data-floaterbtn=sure",e.noOverflowHidden&&(this.noOverflowHidden=e.noOverflowHidden),e.zIndex&&(this.zIndex=e.zIndex||110);var t=e.name;t&&(s[t]?s[t].push(this):s[t]=[this])},statics:{getFloater:function(e){return s[e]}},methods:{show:function(e){var t,a;e=e||{},e.isResize=e.isResize===!1?!1:!0;var n=null;if(this.floater)e.target&&(t=e.offset?e.offset.disLeft:0,a=e.offset?e.offset.disTop:0,this.floater.pos(function(){return{top:e.target.top()+a,left:e.target.left()+t}})),this.floater.reShow();else{e.target?(t=e.offset?e.offset.disLeft:0,a=e.offset?e.offset.disTop:0,this.floater=new i({view:new r({pos:function(){return{top:e.target.top()+a,left:e.target.left()+t}},zIndex:this.zIndex,isResize:e.isResize,noOverflowHidden:this.noOverflowHidden})})):this.floater=new i({view:new o({zIndex:this.zIndex,isResize:!0,noOverflowHidden:this.noOverflowHidden})}),this.floater.show(this.showInfo);var s=this.floater.getFloater(),l=s.down("*["+this.closeName+"]");l&&l.on("click",this.doCloseBtnClick.bind(this)),this.closeBtn=l;var d=s.down("*["+this.sureName+"]");this.sureBtn=d,d&&d.on("click",this.doSureBtnClick.bind(this))}if(e.labelInfo&&(e.label=e.label||"data-floater=info",n=this.floater.getFloater().down("*["+e.label+"]"),n&&n.html(e.labelInfo)),e.labelInfos)for(var c=0,m=e.labelInfos.length;m>c;c++)n=this.floater.getFloater().down("*["+e.labelInfos[c].label+"]"),n&&n.html(e.labelInfos[c].labelInfo)},hide:function(){this.floater.hide()},showSureBtn:function(){this.sureBtn.css("display","")},hideSureBtn:function(){this.sureBtn.hide()},doCloseBtnClick:function(e){e=Q.event.get(e),e.stop(),this.floater.hide(),this.fire({type:"close",data:{e:e}})},doSureBtnClick:function(e){e=Q.event.get(e),e.stop(),this.floater.hide(),this.fire({type:"sure",data:{e:e}})}}})});
define("units/ugc/popuptip.js",[],function(e,t,a){a.exports={getRect:function(e){var t=e.width()>this.opt.maxWidth?this.opt.maxWidth:e.width(),a=e.height(),n=e.top(),i=e.left(),o=n-Q.page.getScrollTop(),r=i-Q.page.getScrollLeft();return{top:n,left:i,right:i+t,bottom:n+a,width:t,height:a,distanceTop:o,distanceLeft:r}},getPos:function(e){this.opt=e,this.opt.maxWidth=this.opt.maxWidth||0;var t=e.popup,a=e.target,n=e.offsetHeight||0,i=e.offsetWidth||0,o=this.getRect(a),r=Q.page.getWidth(),s=Q.page.getHeight(),l=e.popWidth||t.width(),d=e.popHeight||t.height(),c=o.distanceTop>=d+n,m=s-(o.distanceTop+o.height)>=d+n,h=r-o.left>l+i,u=o.left-o.width>l+i,p="",f="",U="";return c?(f=o.top-d-n,h?(U=1,p=o.left-i):u&&(U=2,p=o.left-l+o.width+i),p=p>=0?p:o.left-l+o.width+i,U=U?U:2):m&&(f=o.top+o.height+n,h?(U=3,p=o.left-i):u&&(U=4,p=o.left-l+o.width+i),p=p>=0?p:o.left-i,U=U?U:3),f=f?f:o.top-d-n,p=p>=0?p:o.left-l+o.width+i,U=U?U:2,{left:p,top:f,dir:U}}}});
define("units/ugc/followTipShow.js",["../../kit/tips","../../config/siteDomain"],function(e,t,a){var n,i=e("../../kit/tips"),o=e("../../config/siteDomain"),r='<div class="no-login1116 continuLookPop"><div class="no-login1116pop" ><span class="no-loginarrow narrow-r" data-tip-arrow="arrow"></span><a class="shut-btn" href="javacript:;" data-tip-btn="close"></a><div class="continuLookPop-bd" data-tip-elem="content"></div></div></div>',s=Q.$(window),l="pop_follow_tip",d=Q.Class("FollowTipShow",{construct:function(){this.timer=null,this.doms={},this.hideTick=1e4,this.codeSign="QC128",this.codeSignDay="TQC014",this.stateString={1:'可在<a href="http://www.iqiyi.com/u/sub" target="_blank">我的订阅</a>查看最新动态。',0:"订阅后第一时间通知你"},this.init()},methods:{init:function(){this.createTip(),this.bindEvent(),this.getShowTimes(),this.resetDelay=100,(Q.browser.IE6||Q.browser.IE7||Q.browser.IE8)&&(this.resetDelay=600)},createTip:function(){if(Q.$("#"+l))this.doms.tipDom=Q.$("#"+l);else{var e=document.createDocumentFragment(),t=document.createElement("div");t.className="subscription_pop",t.style.display="none",t.innerHTML=r,t.id=l,e.appendChild(t),document.body.appendChild(e),this.doms.tipDom=Q.$(t)}this.doms.content=this.doms.tipDom.down('[data-tip-elem="content"]'),this.doms.rb=this.doms.tipDom.down('[data-tip-elem="arrow"]'),this.doms.btnClose=this.doms.tipDom.down('[data-tip-btn="close"]')},bindEvent:function(){var e=this;this.doms.btnClose.on("click",function(t){Q.event.get(t).preventDefault(),e.hide()}),this.adjustHandler=this._doAdjust.bind(this)},show:function(e,t){if(n=e,this.canShow&&!(this.hasShowTimes&&this.hasShowTimes>=3)){var a=this;this.hide(),this.doms.content.html(this.stateString[t]),this.doms.tipDom.show(),this.setPosition(),this.setShowTimes(),this.timer=setTimeout(function(){a.hide()},this.hideTick),s.on("resize",this.adjustHandler)}},hide:function(){this.doms.content.html(""),this.doms.tipDom.hide(),this.timer&&(clearTimeout(this.timer),this.timer=null),s.un("resize",this.adjustHandler)},_doAdjust:function(){var e=this;setTimeout(function(){e.setPosition()},e.resetDelay)},setPosition:function(e){e&&(n=e);var t,a=i.getPos({target:n,popup:this.doms.tipDom,popHeight:-n.height()});t=0!==a.dir%2?a.left-(this.doms.tipDom.width()-n.width()):a.left- -n.width(),this.doms.tipDom.css("left",t+"px").css("top",a.top+"px")},getShowTimes:function(){var e=null;this.hasShowTimes=null,Q.cookie.get(this.codeSignDay)?this.canShow=!1:(e=Q.cookie.get(this.codeSign),e=e||"0",e=parseInt(e,10),3>e?(this.hasShowTimes=e,this.canShow=!0):this.canShow=!1)},setShowTimes:function(){this.canShow=!1,Q.cookie.set(this.codeSignDay,1,{path:"/",domain:o.getDomain(),expires:864e5}),Q.cookie.set(this.codeSign,++this.hasShowTimes,{path:"/",domain:o.getDomain(),expires:31536e6})}}}),c=new d;a.exports=c});
define("kit/tips.js",[],function(e,t,a){a.exports={getRect:function(e){var t=e.width()>this.opt.maxWidth?this.opt.maxWidth:e.width(),a=e.height(),n=e.top(),i=e.left(),o=n-Q.page.getScrollTop(),r=i-Q.page.getScrollLeft();return{top:n,left:i,right:i+t,bottom:n+a,width:t,height:a,distanceTop:o,distanceLeft:r}},getPos:function(e){this.opt=e,this.opt.maxWidth=this.opt.maxWidth||0;var t=e.popup,a=e.target,n=e.offsetHeight||0,i=e.offsetWidth||0,o=this.getRect(a),r=Q.page.getWidth(),s=Q.page.getHeight(),l=t.width(),d=e.popHeight||t.height(),c=o.distanceTop>=d,m=s-(o.distanceTop+o.height)>=d,h=r-o.left>l,u=o.left-o.width>l,p="",f="",U="";return c?(f=o.top-d-n,h?(U=1,p=o.left-i):u&&(U=2,p=o.left-l+o.width+i),p=p>=0?p:o.left-l+o.width+i,U=U?U:2):m&&(f=o.top+o.height+n,h?(U=3,p=o.left-i):u&&(U=4,p=o.left-l+o.width+i),p=p>=0?p:o.left-i,U=U?U:3),f=f?f:o.top-d-n,p=p>=0?p:o.left-l+o.width+i,U=U?U:2,{left:p,top:f,dir:U}}}});
define("kit/changeCss.js",[],function(e,t,a){a.exports={changeCss:function(e,t,a){a?e.hasClass(t)&&e.removeClass(t):e.hasClass(t)||e.addClass(t)},removeAll:function(e,t){Q.array.isArray(t)&&t.forEach(function(t){e.hasClass(t)&&e.removeClass(t)})},switchCss:function(e,t){e.hasClass(t)?e.removeClass(t):e.addClass(t)}}});
define("units/ugc/followPlugin.js",[],function(e,t,a){var n=Q.Class("FollowPlugin",{construct:function(){this._init()},methods:{_init:function(){this.eventList={},this.eventList.mouseenter=this._doMouseEnter.bind(this),this.eventList.mouseleave=this._doMouseLeave.bind(this)},setFollowed:function(e,t,a){this.info=a,"bind"!==e.attr("data-mouse")&&(this.isUnFollow(e)?e.attr("j-delegate","remove_follow"):e.attr("j-delegate",""),this.regEvent(e,t),e.attr("data-mouse","bind"))},setUnFollow:function(e){"bind"===e.attr("data-mouse")&&e.removeAttr("data-mouse"),"true"==e.attr("data-update")&&Q(e).off("mouseenter").off("mouseleave"),e.attr("j-delegate","add_follow"),this.removeEvent(e)},regEvent:function(e,t){var a=this;t.forEach(function(t){e.on(t,a.eventList[t])})},removeEvent:function(e){for(var t in this.eventList)e.un(t,this.eventList[t])},_doMouseEnter:function(e){var t=this._getTarget(e),a=this,n=Q(t).attr("data-userid");t[0].className=a.info.css,a.isUnFollow(t)?Q(t).attr("j-delegate","remove_follow"):(Q(t).attr("j-delegate",""),Q(t).attr("href","http://www.iqiyi.com/u/"+n+"/v"),Q(t).attr("isrefresh")?Q(t).attr("target","iqiyiplay"):Q(t).attr("target","_blank"))},_doMouseLeave:function(e){var t=this._getTarget(e),a=this;t[0].className=a.info.rawCss,Q(t).removeAttr("target"),Q(t).removeAttr("href")},_getTarget:function(e){return e=Q.event.get(e),e.preventDefault(),Q.$(e.target||e.srcElement)},isUnFollow:function(e){var t=Q(e.down(".pc-btn-update")).text(),a=Q(e.down(".btn-care_tx-update")).text();return"取消订阅"===t||"取消订阅"===a?!0:!1}}}),i=new n;a.exports=i});
define("units/pgcPlayerFollow.js",["../components/units/pageJob","../action/qiyuRecommend","../kit/qiyiPlayer","../kit/followInfo","../interfaces/ugcVI","../kit/promise","../action/qipaLogin","../kit/userInfo","../kit/parentByProp"],function(e,t,a){var i=e("../components/units/pageJob");e("../action/qiyuRecommend").getInstance();var n=e("../kit/qiyiPlayer"),o=e("../kit/followInfo"),r=e("../interfaces/ugcVI");e("../kit/promise");var s,l,d,c,u,m=e("../action/qipaLogin"),p=e("../kit/userInfo"),h=e("../kit/parentByProp"),f="pgcPlayerFollow",g=Q.PageInfo||{};i.create(f,{check:function(){return!0},init:function(){s=n.getPlayer("video"),this.bindEvent()},checkState:function(e,t){var a,i={},n=e.data.user,r=n.verifyState,u=n.copyright;i.title=n.name,i.headUrl=n.avatar,i.des=n.recommendation||"爱奇艺爱频道",i.profileUrl=n.profileUrl,l=n.id,a=l,c&&c!=l&&(a=l+","+c,l.toString().length<3&&(a=c)),o.getRel({uids:a},function(e){var a;"A00000"===e.code?(a=1,i.subState=0,e.data.forEach(function(e){e.fuid==l&&(i.subState=1),e.fuid==c&&(a=0)})):(i.subState=0,a=1),d||(d=Q.$('[data-userid="'+l+'"][data-state-change="true"]'),d=h(d,"data-widget-follow","bigvip")||d,c=l),t&&(d.attr("data-pgcFollow",a),t()),4==r&&2!=u&&s.setFollowInfo(i)})},getVideoInfo:function(e,t){var a=this,i=new r({tvid:e});i.request({callback:"ugcvi"+e},function(e){u=e,a.checkState(e,t)})},bindEvent:function(){var e=this,t=g.playPageInfo.tvId,a=function(t,a){new r({tvid:t});var i=Q.player.getVideoStatus();i&&"DataReady"==i.data.state?e.getVideoInfo(t,a):s.on("dataready",function(){e.getVideoInfo(t,a),s.un("dataready")})};Q.$('[data-state-change="true"]')?a(t):Q.event.customEvent.on("bigVipInfo-update",function(){a(t)}),Q.event.customEvent.on("removeFollowDone",function(){u&&e.checkState(u)}),s.on("videoChanged",function(e){t=e.data.tvid,a(t,function(){Q.event.customEvent.fire({type:"pgcChangeStates"})})}),Q.event.customEvent.on("pgcFollowChange",function(e){var t=e.data.target,a=t.attr("data-userid");l==a&&s.setSubscribeStateChange({subState:1,playerSubscribe:e.data.playerSubscribe})}),s.on("pgcFollow",function(e){function t(){o.addFollow({uids:l},function(e){"A00000"===e.code&&s.setSubscribeStateChange({subState:1})})}var a=Q.$('[data-userid="'+l+'"][data-state-change="true"]'),i=parseInt(e.data.playerSubscribe,10);a?((i||0===i)&&a.attr("data-player",i),a[0].click()):p.isLogin()?t():m.openLoginWindow(null,function(){t()})}),Q.event.customEvent.on("login",function(){a(t)}),Q.event.customEvent.on("refreshFollowState",function(e){("bigvip"==e.data.instance.name||"playlist"==e.data.instance.name)&&a(t)})}}),a.exports=f});
define("action/qiyuRecommend.js",["../action/templateRenderer","../model/qiyuRecommendModel","../view/qiyuRecommendView","../kit/eventPlugin","../kit/qiyiPlayer"],function(e,t,a){var i=e("../action/templateRenderer"),n=e("../model/qiyuRecommendModel"),o=e("../view/qiyuRecommendView"),r=e("../kit/eventPlugin");e("../kit/qiyiPlayer");var s=[];a.exports=Q.Class("QiyuRecommend",{extend:i,plugins:[new r],construct:function(e){e=e||{},e.model=e.model||new n,e.view=e.view||new o(e),this._init=!1,this._plugins={},this.callsuper(e),s.push(this)},statics:{getInstance:function(){return s}},methods:{init:function(e){e=e||{},this._renderAction(e)},_renderAction:function(e){var t=this;t._model.makeupData(e,function(e){t._init=!0;var a=function(e){t._view.toRender(e),t.fire({type:"qiyu-data-ready",data:e})};t._view.focus2self&&e.self?(e.data.unshift(e.self),e.data.splice(10,1),a(e)):a(e)})},pluginInit:function(e){for(var t in this._plugins)this._plugins[t].init&&this._plugins[t].init(e)},registPlugin:function(e){Q.object.extend(this._plugins,e)},_destroy:function(){this._view._destroy()}}})});
define("action/templateRenderer.js",["../components/action/adapter","../model/templateModel","../view/templateView"],function(e,t,a){var n=e("../components/action/adapter"),i=e("../model/templateModel"),o=e("../view/templateView"),r=new Q.ic.InfoCenter({moduleName:"TemplateRenderer"});a.exports=Q.Class("TemplateRenderer",{extend:n,construct:function(e){e=e||{};var t=e.model,a=e.view;if(!(t instanceof i))throw new Error("Template.construct : model is not instance of TemplateModel");if(!(a instanceof o))throw new Error("Template.construct : view is not instance of TemplateView");this.callsuper(e)},methods:{render:function(e){var t=e,a=e;Q.object.isObject(e)&&(t=e.onsuccess,a=e.onfailure);var n=this;r.debug("Begin to get template data.");var i=new Date;this._model.makeupData(function(e){r.debug("Data loaded in "+(new Date-i)+" ms"),r.debug("Data is : "+("object"==typeof e?JSON.stringify(e):e.toString())),e&&"A00000"==e.code?(r.debug("Success getting data."),i=new Date,n._view.load({onsuccess:function(){r.debug("All templates loaded in "+(new Date-i)+" ms."),i=new Date,n._view.render(e.data||{},function(e){r.debug("Mustache calculated in "+(new Date-i)+" ms."),t(e)})},onfailure:function(){a&&a()}})):(r.debug("Fail to get data."),a&&a())})},config:function(e){this._view.config(e)}}})});
define("model/templateModel.js",["../components/model/model"],function(e,t,a){var n=e("../components/model/model");a.exports=Q.Class("TemplateModel",{extend:n,construct:function(){this.callsuper()},methods:{makeupData:Q.fn.abstractMethod}})});
define("view/templateView.js",["../components/view/view","../config/mobileRoot","../config/mobileConfig","../kit/plugins/storage/localStoragePlugin","../components/action/asyncQueue","../config/projectConfig"],function(e,t,a){var n=e("../components/view/view");e("../config/mobileRoot");var i,o,r=e("../config/mobileConfig"),s=new Q.ic.InfoCenter({moduleName:"TemplateView"}),l=e("../kit/plugins/storage/localStoragePlugin"),d=e("../components/action/asyncQueue"),c=e("../config/projectConfig"),m=c.getConfig();Q.event.customEvent.on("cachedownloading",function(){i={},o={}}),a.exports=Q.Class("TemplateView",{extend:n,construct:function(e){this._plugins={storage:new l},this._tplBase=m.tplBase||"",this._partials=[],this._partialsCount=0,this._tplUrl=e.tplUrl,this._id="default",this._tplUrl&&(this._id=this._tplUrl)},methods:{load:function(e){var t,a=e;Q.object.isObject(e)&&(a=e.onsuccess,t=e.onfailure);var n=this,r=new Date;this._loadStorageData(function(){i[n._id]&&o[n._id]&&!/\/(?:home)|(?:chunwan).inc$/.test(n._id)?a():(i[n._id]={},n._loadTmpl(function(e){e?(s.debug("Tmpl["+n._id+"] loaded in "+(new Date-r)+" ms."),o[n._id]=e,n._saveTmplToStorage(function(){n._getPartials(e,{onsuccess:function(e){e.forEach(function(e){i[n._id][e.name]=e.content,"/templates/pages/play.inc"===n._id&&s.log(n._id+'["'+e.name+'"]: '+(e.content.length>20?e.content.length:e.content))}),a(),n._savePdToStorage()},onfailure:function(){s.warn("Tmpl["+n._id+"] load failed."),t.apply(null,arguments)}})})):(s.warn("Tmpl["+n._id+"] load failed."),t.apply(null,arguments))}))})},config:function(e){e&&e.plugins&&"storage"in e.plugins&&(this._plugins.storage=e.plugins.storage)},render:function(e,t){e=this._getData(e),this._renderTemplate(e,function(e){t(e)})},_getData:function(e){return e},_loadTmpl:function(e){o[this._tplUrl]?e(o[this._tplUrl]):Q.http.text(this._tplUrl+"?"+Date.now(),{cors:!0,onsuccess:function(t,a){e(a)},timeout:r.http.timeout,onfailure:function(){e("")}})},_loadStorageData:function(e){if(!this._plugins.storage)return i={},o={},e(),void 0;var t=new d,a=this;t.enqueue(function(){i?t.dequeue():a._plugins.storage.read("tmplpd",function(e,a){i=a||{},t.dequeue()})}),t.enqueue(function(){o?t.dequeue():a._plugins.storage.read("tmpl",function(e,a){o=a||{},t.dequeue()})}),t.on("end",e),t.start()},_saveTmplToStorage:function(e){this._plugins.storage?this._plugins.storage.write("tmpl",o,function(){e()}):e()},_savePdToStorage:function(e){this._plugins.storage?this._plugins.storage.write("tmplpd",i,function(){e&&e()}):e&&e()},_getPartials:function(e,t){var a,n=t;Q.object.isObject(t)&&(n=t.onsuccess,a=t.onfailure);var i=/\{\{> *.+? *\}\}/g,l=/[\{\} >]/g,d=this,c=e.match(i);c&&c.length>0?(this._partialsCount+=c.length,c.forEach(function(e){var t=e.replace(l,""),i=d._tplBase+t+".inc",c=new Date,m=function(e){d._partials.push({name:t,content:e}),d._getPartials(e,n)};o[i]?m(o[i]):Q.http.text(i+"?"+Date.now(),{cors:!0,timeout:r.http.timeout,onsuccess:function(e,a){s.debug("Tmpl["+i+"] loaded in "+(new Date-c)+" ms."),"fragments/chunwan/item/chunwandetail"!=t&&"fragments/chunwan/item/chuwanpushdetail"!=t&&(o[i]=a),m(a),d._savePdToStorage()},onfailure:function(){s.warn("Tmpl["+i+"] load failed."),a.apply(null,arguments)}})})):this._partialsCount==this._partials.length&&n(this._partials)},_renderTemplate:function(e,t){var a=this,n=Q.plugins.Mustache.render(o[this._id],e,i[this._id]);"/templates/pages/play.inc"===a._id&&(a._plugins.storage.read("tmplpd",function(){s.log('read tmplpd partialsDatas["/templates/pages/play.inc"]'+JSON.stringify(i["/templates/pages/play.inc"]).length)}),s.log("this._id: "+this._id),s.log("tpls[this._id]: "+JSON.stringify(o[this._id]).length),s.log("partialsDatas[this._id]: "+JSON.stringify(i[this._id]).length),s.log("str.length "+n.length)),t(n)}}})});
define("config/mobileRoot.js",[],function(e,t,a){a.exports=""});
define("kit/plugins/storage/localStoragePlugin.js",["./storagePlugin","../../storage"],function(e,t,a){var n=e("./storagePlugin"),i=e("../../storage");a.exports=Q.Class("LocalStoragePlugin",{extend:n,construct:function(){},methods:{_write:function(e,t,a){t&&i.write(e,JSON.stringify(t)),a()},_read:function(e,t){var a=i.read(e);a&&(a=JSON.parse(a)),t(null,a)},_remove:function(e,t){i.remove(e),t()}}})});
define("kit/plugins/storage/storagePlugin.js",[],function(e,t,a){a.exports=Q.Class("StoragePlugin",{construct:function(){},methods:{write:function(e,t,a){e=this.__getKey(e),this._write(e,t,a)},read:function(e,t){e=this.__getKey(e),this._read(e,t)},remove:function(e,t){e=this.__getKey(e),this._remove(e,t)},__getKey:function(e){return"StoragePlugin_"+e},_write:Q.fn.abstractMethod,_read:Q.fn.abstractMethod,_remove:Q.fn.abstractMethod}})});
define("components/action/asyncQueue.js",[],function(e,t,a){a.exports=Q.Class("AsyncQueue",{ns:"Q.action",construct:function(){this._queue=[],this._event={}},methods:{enqueue:function(){var e,t;1==arguments.length&&(e=arguments[0]),2==arguments.length&&(e=arguments[0],t=arguments[1]),this._queue.push({fn:e,param:t||{}})},dequeue:function(){if(0==this._queue.length)this.end(!0);else{var e=this._queue.splice(0,1)[0];e.fn(e.param)}},start:function(){this.dequeue()},end:function(e){this.fire("end",e)},on:function(e,t){this._event[e]||(this._event[e]=[]),this._event[e].push(t)},fire:function(e,t){if(this._event[e])for(var a=0;a<this._event[e].length;a++)this._event[e][a](t)},clear:function(){this._queue=[]}}})});
define("model/qiyuRecommendModel.js",["../model/templateModel","../interfaces/qiyuRecommendInterface","../components/model/recommendModelUtil"],function(e,t,a){var i=e("../model/templateModel"),n=e("../interfaces/qiyuRecommendInterface"),o=e("../components/model/recommendModelUtil"),r=Q.date.formatSeconds;a.exports=Q.Class("QiyuRecommendModel",{extend:i,construct:function(e){e=e||{},this.callsuper(e),this.rmu=new o},methods:{makeupData:function(e,t){var a=this;e=this._bulidParams(e);var i=new n(e);i.request(e,function(e){e=e||{},"A00000"===e.code?(e=a._bulidData(e),t&&t(e)):t(!1)})},_bulidParams:function(e){e=e||{};var t={};return t.albumId=e.albumId||"",t.area=e.area||"",t.uid=e.uid||"",t.ppuid=e.ppuid||"",t.domain=e.domain||"www",t.aid=t.albumId,t.cid=e.categoryId||"",t.rltnum=e.rltnum||"",t.s_num=e.s_num||"0",t.ls=e.ls||"",t.platform=e.platform||"",t.viptype=e.viptype||"",t},__parseData:function(e){var t=this,a=e.album_channel,i={};i.albumId=e.id,i.categoryId=a,i.albumPlayUrl=e.album_play_url,i.firstTvid=e.album_tvid,i.firstVid=e.album_vid,i.focus=e.album_focus.substring(0,10),i.name=e.album_name,e.album_play_count&&(i.playcount=t.rmu.formatPlayCount(e.album_play_count));var n=e.album_pic_url;i.album_pic_url=n,i.apic=n.replace(".jpg","_110_70.jpg"),i.initIssueTime=e.initIssueTime,i.pubtime=e.album_date,i.season=e.album_season||"",i.period=e.album_phase||"",i.isSeries=e.album_sets_flag,i.codeId=-1==e.album_source_id?0:e.album_source_id;var o=e.album_update_flag,s=e.album_prospect_sets_num;return 0===s&&1===o?i.follow=e.album_sets_num:0===o?i.follow=e.album_sets_num:i.sets=e.album_prospect_sets_num,e.album_time_length&&(i.playTime=r(e.album_time_length)),i.purchaseType=parseInt(e.purchaseType,10),i.source=e.album_source,i.reason=e.reason,i.tag=e.reason,i["3d"]=parseInt(e.album_3d,10),i.hc=parseInt(e.album_hc,10),i.only=parseInt(e.exclusive_status,10),i.exclusive=parseInt(e.exclusive_status,10),i._1080p=parseInt(e.is_1080p,10),i},_bulidData:function(e){e=e.data;var t=e.attributes,a=e.self,i=this,n=[],o=e.albums||[];return o.forEach(function(e){var t=i.__parseData(e);n.push(t)}),a&&(a=i.__parseData(a)),{data:n,self:a,attributes:t}}}})});
define("interfaces/qiyuRecommendInterface.js",["../kit/remoteInterface"],function(e,t,a){var i=e("../kit/remoteInterface");a.exports=Q.Class("QiyuRecommendInterface",{construct:function(e){e=e||{};var t;t="1"==e.platform?"http://rec.inter.qiyi.com/resys"+(e.viptype?"/yml":""):"http://qiyu.m.iqiyi.com/resys";var a={albumRecommend:{url:t}};this._remoteInterface=new i(a)},methods:{request:function(e,t){e=e||{};var a=e.timeout;delete e.timeout,this._remoteInterface.send({ifname:"albumRecommend",param:e,dataType:"jsonp",timeout:a||5e3},function(e){t&&t(e)})}}})});
define("components/model/recommendModelUtil.js",["./model","../../model/channelModel"],function(e,t,a){var i=e("./model"),n=e("../../model/channelModel");a.exports=Q.Class("RecommendModelUtil",{ns:"Q.model",extend:i,construct:function(e){e=e||{},this.channelModel=new n,this.callsuper()},methods:{getData4PTmpl:function(e){var t=this;return returns=e||[],e.forEach(function(e){var a=t.channelModel.getCategoryById(e.album_channel);e.category=a;var i={};i[album_channel]=t._bindData(e),data.push(i)}),data},getCategoryById:function(e){var t=this.channelModel.getCategoryById(e);return t.htid},_bindData:function(e){return e},_formatPlayCount:function(e){if(e.length<3)return e;for(var t=[];e.length>3;){var a=e.substring(e.length-3,e.length);e=e.substr(0,e.length-3),t.push(a)}return t.push(e),t.reverse(),t.join(",")},formatPlayCount:function(e){return this._formatPlayCount(e.toString())},parseTag:function(e){if(e){var t=e.split(","),a={};return t.forEach(function(e){var t=e.split(":");a[t[1]]||(a[t[1]]=[]),a[t[1]].push(t[0])}),a}return{}}}})});
define("model/channelModel.js",["../model/templateModel"],function(e,t,a){var n=e("../model/templateModel");a.exports=Q.Class("ChannelModel",{extend:n,construct:function(e){this.callsuper(),e&&(this.name=e.name)},statics:{},methods:{setName:function(e){this.name=e},getChannels:function(){var e=[{name:"电影",htid:"dianying",categoryId:1,types:[{desc:"按地区",mb10:!0,all:["全部","华语","美国","欧洲","韩国","日本","泰国","其他"]},{desc:"按类型",all:["全部","动作","喜剧","爱情","惊悚","科幻","剧情","战争","青春","灾难"]}]},{name:"电视剧",htid:"dianshiju",categoryId:2,types:[{desc:"按地区",mb10:!0,all:["全部","内地","香港","台湾","韩国","日本","美剧","泰剧","其他"]},{desc:"按类型",all:["全部","青春","家庭","军旅","言情","古装","武侠","偶像","谍战","喜剧"]}]},{name:"片花",htid:"pianhua",categoryId:10,types:[{desc:"按分类",mb10:!0,all:["全部","电影","电视剧"]},{desc:"按地区",all:["全部","华语","美国","欧洲"]}]},{name:"微电影",htid:"weidianying",categoryId:16,types:[{desc:"按片种",mb10:!0,all:["全部","剧情","动画","创意","记录"]},{desc:"按类型",all:["全部","明星","歌舞","文艺","喜剧","爱情","动作","奇幻","惊悚","悬疑"]}]},{name:"动漫",htid:"dongman",categoryId:4,types:[{desc:"按地区",mb10:!0,all:["全部","大陆","日本","美国","法国","韩国","英国","其他"]},{desc:"按年龄",all:["全部","0-3","4-6","7-13","14-17","18以上"]}]},{name:"综艺",htid:"zongyi",categoryId:6,types:[{desc:"按地区",mb10:!0,all:["全部","内地","港台","日韩","其它"]},{desc:"按类型",all:["全部","情感","搞笑","访谈","选秀","时尚","杂谈","游戏","播报","粤语"]}]},{name:"纪录片",htid:"jilupian",categoryId:3,types:[{desc:"按类型",all:["全部","社会","军事","探索","自然","历史","人物","文化","地理","旅游"]}]},{name:"音乐",htid:"yinyue",categoryId:5,types:[{desc:"按地区",mb10:!0,all:["全部","内地","港台","日韩","欧美","拉丁","东南亚"]},{desc:"按流派",all:["全部","流行","摇滚","民谣","说唱","爵士","另类","朋克","金属","独立"]}]},{name:"旅游",htid:"lvyou",categoryId:9,types:[{desc:"按地区",mb10:!0,all:["全部","北京","西藏","法国","日本","埃及","澳洲","安徽","河南","湖南"]},{desc:"按类型",all:["全部","风光","饮食","出行","住宿"]}]},{name:"时尚",htid:"shishang",categoryId:13,types:[{desc:"按行业",mb10:!0,all:["全部","美容","服饰","生活","其他"]},{desc:"按季节",all:["全部","早春","春夏","早秋","秋冬","其他"]}]},{name:"娱乐",htid:"yule",categoryId:7,types:[{desc:"按地区",mb10:!0,all:["全部","内地","港台","日韩","海外","其它"]},{desc:"按类型",all:["全部","新闻","访谈","专题","花絮","MV","独家","热点","原创","八卦"]}]},{name:"体育",htid:"sports",categoryId:17,types:[{desc:"按项目",mb10:!0,all:["全部","足球","篮球","网球","高尔夫","赛车","极限","台球","其他"]},{desc:"按类型",all:["全部","集锦","花絮","进球","整场","节目","纪录片","教学","咨询","其他"]}]},{name:"搞笑",htid:"fun",categoryId:22,types:[{desc:"按地区",mb10:!0,all:["全部","国内","国外"]},{desc:"按类型",all:["全部","自爆","原创","恶搞","相声","小品","宠物","屌丝","童趣","方言"]}]},{name:"广告",htid:"ad",categoryId:20,types:[{desc:"按分类",mb10:!0,all:["全部","明星","公益","欧美","形象","搞笑","时尚","儿童","生活","性感"]},{desc:"按品牌",all:["全部","食品","饮料","化妆品","房地产","金融","汽车","IT数码","烟酒"]}]},{name:"生活",htid:"life",categoryId:21,types:[{desc:"按地区",mb10:!0,all:["全部","国内","国外"]},{desc:"按类型",all:["全部","社会","民生","科技","财经","奇闻","美食","健康","居家","美容"]}]},{name:"教育",htid:"edu",categoryId:12,types:[{desc:"按类型",mb10:!0,all:["全部","幼儿","小学","初中","高中","学历教育","外语学习","职业教育","管理培训"]},{desc:"按学科",all:["全部","语文","数学","英语","物理","化学","政治","生物","历史","地理"]}]}];return{channels:e}},makeupData:function(e){var t=this.name,a=this.getChannels();a.channels.forEach(function(a){if(a.name==t){a.types.forEach(function(e,t){var a=[];e.all.forEach(function(e){"全部"==e?a.push({name:e,sel:!0}):a.push({name:e,sel:!1})}),e.all=a,e.i=t});var n={};return n.data=a,n.code="A00000",e(n),void 0}})},getData:function(e,t){var a=this.getChannels();a.channels.forEach(function(a){if(Q.object.like(a,e))for(var n in t)t[n]=a[n]})},getCategoryIdByName:function(e){var t=this.getChannels(),a=0;return t.channels.forEach(function(t){t.name==e&&(a=t.categoryId)}),a},gethtidByName:function(e){var t=this.getChannels(),a=null;return t.channels.forEach(function(t){t.name==e&&(a=t.htid)}),a},getCategoryById:function(e){var t,a=this.getChannels();return a.channels.forEach(function(a){a.categoryId==e&&(t=a)}),t},getCategorys:function(){var e=[],t=this.getChannels();return t.channels.forEach(function(t){e.push(t.name)}),e}}})});
define("view/qiyuRecommendView.js",["../view/templateView","../kit/lazyload","../components/model/recommendModelUtil","../kit/qiyiPlayer"],function(e,t,a){var i=e("../view/templateView"),n=e("../kit/lazyload"),o=e("../components/model/recommendModelUtil"),r=Q.event.customEvent,s=e("../kit/qiyiPlayer");a.exports=Q.Class("QiyuRecommendView",{extend:i,construct:function(e){e=e||{},this._doms=e.doms||"",this._ppuid=e.ppuid||"",this._categoryId=e.categoryId,this._aid=e.albumid,this._uid=e.uid,this._area=e.area,e.tplUrl=e.tplUrl||"",this.rmu=new o,this.callsuper(e)},methods:{init:function(e){this._ctrl=e,this._initEvent()},toRender:function(e){var t=this;t.load(function(){t.render(e,function(a){e&&t._renderUHtml(a),t._ctrl.fire({type:"qiyu-recommend-done",data:e}),r.fire({type:"qiyu-recommend-done",data:e}),n.check()})})},_getData:function(e){var t=this;this._area=e.attributes.area,this._bkt=e.attributes.bkt,this._event_id=e.attributes.event_id;var a=e.data||[];if(0===a.length)return{data:null,norecommend:"没有相关推荐"};var i=[];return a.forEach(function(e){var a={},n=e.categoryId;e.sname=e.name.length>20?e.name.substring(0,20):"","14"==n?(e.channel="shishang",e.cat="shishanga"):(e.channel=t.rmu.getCategoryById(n),e.cat=e.channel+"a"),(22==n||20==n)&&(e.pubtime=e.initIssueTime?e.initIssueTime.substring(0,10):""),(21==n||17==n)&&"NULL"==e.album_date&&(e.pubtime=e.initIssueTime?e.initIssueTime.substring(0,10):"");var o=t.rmu.parseTag(e.tags),r=o["地区"]||[],s=o["类型"]||[],l=o["片种"]||[],d=o["一级分类"]||[],c=o["二级分类"]||[],m=o["三级分类"]||[],u=o["语种"]||[];1==n||2==n||4==n?(o=r.length?r.join("/")+"/"+s.splice(0,2).join("/"):s.splice(0,2).join("/"),o=(e.pubtime.slice(0,4)+"/").concat(o)):16==n?o=l.concat(s).join("/"):12==n?o=d.concat(c).concat(m).join("/"):5==n?r.length&&(o=r.join("/")+"/"+u.join("/")+"/"+s.splice(0,2).join("/")):o=r.length?r.join("/")+"/"+s.splice(0,4).join("/"):s.splice(0,4).join("/"),e.tags=o.replace(/\/$/,""),e.actors&&(e.emcee=e.actors.split(",","3").join(",")),a[n]=e,i.push(a)}),{data:i}},_renderUHtml:function(e){this._doms.recommend&&this._doms.recommend.html(e)},_initEvent:function(){var e=this,t=s.getPlayer("video");this.qiyu_recommend_done_handler=function(a){var i=e._doms.recommend;if(i&&i.down("li")){var n=i.down("li").length;n&&a.data&&(i.down("li").forEach(function(e,t){Q.$(e).attr("data-qiyu-idx",t+1)}),i.down("a").on("click",function(a){if(t._player)t.getVideoInfo(function(t){var i=Q.$(a.currentTarget),n=i.parent("li"),o=n.attr("data-qiyu-idx"),r={};r.href=i.attr("href"),r.idx=o,r.cid=t.c||n.attr("data-qiyu-cid"),r.aid=t.aid||n.attr("data-qiyu-aid"),r.uid=e._uid,r.bkt=e._bkt,r.platform=31,r.area=e._area,r.ppuid=e._ppuid,r.event_id=e._event_id,r.taid=n.attr("data-qiyu-aid"),r.tcid=n.attr("data-qiyu-cid"),e._ctrl.plugin(r)});else{var i=Q.$(a.currentTarget),n=i.parent("li"),o=n.attr("data-qiyu-idx"),r={};r.href=i.attr("href"),r.idx=o,r.cid=e._categoryId||n.attr("data-channelid"),r.aid=e._aid||n.attr("data-albumid"),r.uid=e._uid,r.bkt=e._bkt,r.platform=31,r.area=e._area,r.ppuid=e._ppuid,r.event_id=e._event_id,r.taid=n.attr("data-albumid"),r.tcid=n.attr("data-channelid"),e._ctrl.plugin(r)}}))}},r.on("qiyu-recommend-done",this.qiyu_recommend_done_handler)},_destroy:function(){r.un("qiyu-recommend-done",this.qiyu_recommend_done_handler)}}})});
define("kit/promise.js",[],function(e,t,a){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),function(e){function t(e){var t,a=this;this._private.value=e,this._private.state=n.FULFILLED,this._private.resolve.forEach(function(a){t=a(e)}),t instanceof i?this._private.resolvecall.forEach(function(e){t.then(function(t){"function"==typeof e&&e(t)},function(e){a._private.rejectcall.forEach(function(t){"function"==typeof t&&t(e)})})}):this._private.resolvecall.forEach(function(e){"function"==typeof e&&e(t)}),this._private.resolvecall=[],this._private.rejectcall=[]}function a(e){var t;this._private.value=e,this._private.state=n.REJECTED,this._private.reject.forEach(function(a){t=a(e)}),this._private.resolvecall=[],this._private.rejectcall=[]}var i,n={PENDIND:0,FULFILLED:1,REJECTED:2};i=e.Promise||function(e){var i=this;if(this._private={state:n.PENDIND,value:void 0,resolve:[],resolvecall:[],reject:[],rejectcall:[]},"function"!=typeof e)throw new TypeError(typeof e+" is not a function");try{e(function(e){t.call(i,e)},function(e){a.call(i,e)})}catch(o){a.call(i,o)}},i.prototype.then=i.prototype.then||function(e,t){var a,o=this;return this._private.state==n.FULFILLED?(a=e(this._private.value),a instanceof i?new i(function(e,t){a.then(function(t){e(t)},function(e){t(e)})}):new i(function(e){e(a)})):this._private.state==n.REJECTED?(t(this._private.value),new i(function(e){e()})):(this._private.resolve.push(e),this._private.reject.push(t),new i(function(e,t){o._private.resolvecall.push(e),o._private.rejectcall.push(t)}))},i.prototype["catch"]=i.prototype["catch"]||function(e){return this.then(null,e)},i.all=i.all||function(e){if(!Array.isArray(e))throw new TypeError("Cannot read property 'length' of undefined");var t,a,n=e.length,o=0,r=[],s=new i(function(e,i){t=e,a=i});return 0===n?new i(function(e){e([])}):(e.forEach(function(e,i){e.then(function(e){r[i]=e,o++,o==n&&t(r)},function(e){a(e)})}),s)},i.cast=i.cast||function(e){return e instanceof i?e:e.then&&2==e.then.length?new i(function(t,a){e.then(function(e){t(e)},function(e){a(e)})}):new i(function(t){t(e)})},e.Promise=i}(window),a.exports=window.Promise});
define("units/userinfopopup.js",["../components/units/pageJob","../kit/tips","../interfaces/popupUploadInterface","../action/followTrigger","../kit/followInfo","../kit/findParent","../kit/iframeLocation"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../kit/tips"),o=e("../interfaces/popupUploadInterface"),r="userinfopopup",s={},l=e("../action/followTrigger"),d=e("../kit/followInfo");e("../kit/findParent");var c=e("../kit/iframeLocation"),m=Q.$("#qitancommonarea");n.create(r,{getDependentDoms:function(){return!0},check:function(){return Q.browser.iPad?!1:!0},getHtml:function(){return'<div class="pop-upload_inner"><div class="loading_con" data-userinfopop-loading="loading"><img width="" height="" src="http://www.qiyipic.com/common/fix/site/site-loading.gif" alt=""><span class="c999 ml10">加载中。。。</span></div><!-- 弹层箭头位置包括lt(左上), lb(左下), rt(右上), rb(右下) --><div class="pop-upload_arrow arrow-rb" data-userinfopop-arrow="arrow"><i class="arrow-inner"></i><i class="arrow-outer"></i></div><!--整体输出部分_START--><div class="pk_pop" data-userinfopop-content="content" style="display: none;"></div><iframe class="ugc-frameLayer" data-userinfopop-dian="dian" style="height:0px;" data-elem="bg;border:0;" frameborder="no" marginheight="0" marginwidth="0"></iframe><!--整体输出部分_END--></div>'},createFloater:function(){var e=document.createDocumentFragment(),t=document.createElement("div");t.className="mod-pop-upload",t.style.top="200px",t.style.left="200px",t.style.display="none",t.innerHTML=this.getHtml(),e.appendChild(t),document.body.appendChild(e),s.dom=Q.$(t),s.content=s.dom.down("[data-userinfopop-content]"),s.rb=s.dom.down('[data-userinfopop-arrow="arrow"]'),s.loading=s.dom.down("[data-userinfopop-loading]"),s.dian=Q.$('[data-userinfopop-dian="dian"]')},removeClass:function(){s.rb.removeClass("arrow-lt"),s.rb.removeClass("arrow-lb"),s.rb.removeClass("arrow-rt"),s.rb.removeClass("arrow-rb")},popPosition:function(e){var t=e.target,a=70,n=15,o=i.getPos({target:t,popup:s.dom,offsetHeight:n,popHeight:e.popHeight,maxWidth:a}),r=1==o.dir?"arrow-lb":2==o.dir?"arrow-rb":3==o.dir?"arrow-lt":"arrow-rt";if(this.removeClass(),s.rb.addClass(r),this.isShow=!0,e.sub){var l=e.popHeight-s.dom.height();o.top=1==o.dir||2==o.dir?o.top+l:o.top}var d=t.width()>a?a:t.width(),c=d/2;1==o.dir||3==o.dir?(s.rb.css("left",c-2+"px"),s.rb.css("right","")):(2==o.dir||4==o.dir)&&(s.rb.css("left",""),s.rb.css("right",c+5+"px")),s.dom.css("left",o.left+"px").css("top",o.top+"px"),s.dian.css("width",s.dom.width()+"px").css("height",s.dom.height()+"px").show()},showPopup:function(e){var t={};t.type=null!=e[0].getAttribute("data-v2")?1:"";var a=new o(t),n=e.attr("data-userinfopopup-id"),i=e.attr("data-idx")||"1",r=this,l=function(t){s.loading.hide(),s.content.html(t),r.resetButton(!1,{index:i}),s.content.show(),r.popPosition({target:e,popHeight:161,sub:1})};a.request({target_uid:n,index:i},function(e){l(e.data),d.sendPingback({block:"1412043_cshw",t:"21"})},function(){l("获取信息失败")}),s.dom.show(),s.loading.show(),s.content.hide(),this.popPosition({target:e,popHeight:161,sub:1})},hide:function(){this.resetButton(!0),s.dom.hide(),this.isShow=!1},bindEvent:function(){var e=this,t=null,a=null,n=500,i=500,o=function(i){if(!m||!m.attr("data-qitancomment-nocard")){var o=Q.$(i.target||i.srcElement),r=o.attr("data-userinfopopup-id");r&&(clearTimeout(t),a=setTimeout(function(){clearTimeout(a),e.showPopup(o)},n))}},r=function(n){var o=Q.$(n.target||n.srcElement),r=o.attr("data-userinfopopup-id");r&&(clearTimeout(a),t=setTimeout(function(){clearTimeout(a),e.hide()},i))};Q.$(document).delegate("userinfopopup",o,"mouseover"),Q.$(document).delegate("userinfopopup",r,"mouseout"),s.dom.on("mouseenter",function(){setTimeout(function(){clearTimeout(t)},0)}),s.dom.on("mouseleave",function(){t=setTimeout(function(){e.hide()},i)})},init:function(){s.dom||this.createFloater(),this.follow||(this.follow=new l({name:"popInfo",doms:{wrapper:s.dom},isExt:!0})),this.bindEvent()},resetButton:function(e,t){var a,n=s.content.down("a[data-userid][data-state]");n&&(e?(this.follow.unButtonEvent(n),s.resetElem&&s.resetElem.un("click",this.doSendPingback)):(a=n.attr("data-state"),a=parseInt(a,10),this.follow.setButtonEvent(a,n),s.resetElem=s.content.down("[rseat]"),s.resetElem&&s.resetElem.on("click",this.doSendPingback)),t&&(n.attr("data-idx",t.index),n.attr("data-rseat","1412043")))},doSendPingback:function(e){Q.event.get(e).preventDefault();var t=Q.$(this),a=t.attr("rseat"),n=t.attr("href");d.sendPingback({rseat:a}),c.href(n,{time:100})}}),a.exports=r});
define("interfaces/popupUploadInterface.js",["../kit/remoteInterface","../config/mobileConfig","./config"],function(e,t,a){var n=e("../kit/remoteInterface");e("../config/mobileConfig");var i=e("./config").interfaces;a.exports=Q.Class("PopupUpload",{construct:function(e){var t=e.type?i.ugcGetUserPopup2:i.ugcGetUserPopup;this._remoteInterface=new n({getPopupUpload:{url:t,struct:{code:{type:"string",empty:"false"},data:{type:"object",empty:"false"}}}})},methods:{request:function(e,t,a){e=e||"",this._remoteInterface.send({ifname:"getPopupUpload",param:e,dataType:"jsonp"},function(e){"A00000"==e.code?t&&t(e):a&&a(e)})}}})});
define("units/ugcFocusFloater.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/recommendUserInterface","../kit/userInfo","../kit/formatNumber","../kit/qiyiPlayer"],function(e,t,a){var i,n,o,r=e("../components/units/pageJob"),s=e("../components/action/checkDoms"),l=e("../interfaces/recommendUserInterface"),d=e("../kit/userInfo"),c=e("../kit/formatNumber"),u=e("../kit/qiyiPlayer"),m=u.getPlayer("video"),p={left:80,top:45},h=0,f="ugcFocusFloater";r.create(f,{getDependentDoms:function(){var e=Q.$("#widget-focus-sucess");return e&&(i={wrap:e,list:e.down('*[data-focussucess-elem="list"]'),tpl:e.down('*[data-focussucess-elem="tpl"]'),close:e.down('*[data-focussucess-elem="close"]')}),i},check:function(e){return s(e),!!i},init:function(){var e=this;e.widget=i,Q.event.customEvent.on("toShowFocusFloater",function(t){t=t||{},n=t.data.referenceId;var a=t.data.fcPos||{};p.left=a.left||p.left,p.top=a.top||p.top,e.initFocuswidget(i)})},exec:function(){},initFocuswidget:function(){var e=this.widget;e.close&&e.close.on("click",function(t){Q.event.get(t).preventDefault(),e.wrap.hide(),window.clearTimeout(o)}),this.getUserFromIf()},getUserFromIf:function(){var e=this,t=e.widget.wrap,a=n||t.attr("data-ur-referenceid"),i={userId:d.getUid(),pru:Q.cookie.get("P00PRU"),area:t.attr("data-ur-area"),referenceId:a,size:t.attr("data-ur-size")||2};(new l).request(i,e.doUserInfCallback.bind(this))},doUserInfCallback:function(e){for(var t=this,a=t.widget,i=a.tpl.value(),n=e.users,o="",r=0;r<n.length;r++){var s=n[r];s.followerCount_v2=c.format(s.followerCount),s.r_my="1409260_mydes",0===r?(s.r_avatar="1409261_fsthd",s.r_name="1409261_fstnm",s.r_book="1409261_fstdes"):1===r&&(s.r_avatar="1409262_sechd",s.r_name="1409262_secnm",s.r_book="1409262_secdes"),o+=Q.plugins.Mustache.render(i,s)}a.list.attr("data-widget-follow","playerfocus"),a.list.html(o),a.wrap.css("left",p.left+"px"),a.wrap.css("top",p.top+"px"),a.wrap.show(),t.autoHide(),Q.event.customEvent.fire({type:"pagefrag_update",data:{widget:a.list}})},autoHide:function(){var e=this,t=e.widget.wrap,a=t.attr("data-delaytime")||"5000";a=parseInt(a,10),o=setTimeout(function(){t.hide()},a),h||(h=1,m.on("videoChanged",function(){window.clearTimeout(o),"none"!=e.widget.wrap.css("display")&&e.widget.wrap.hide()}),i.wrap.on("mouseenter",function(){window.clearTimeout(o)}),i.wrap.on("mouseleave",function(){o=setTimeout(function(){e.widget.wrap.hide()},a)}))}}),a.exports=f});
define("interfaces/recommendUserInterface.js",["../kit/remoteInterface","./config"],function(e,t,a){var i=e("../kit/remoteInterface"),n=e("./config");a.exports=Q.Class("RecommendUserInterface",{construct:function(){this._remoteInterface=new i({userdory:{url:n.interfaces.userRecommend}})},methods:{request:function(e,t){e=e||{},this._remoteInterface.send({ifname:"userdory",param:e,memory:!0,dataType:"jsonp"},function(a){t&&t(a,e)})}}})});
define("units/dragPlay.js",["../components/units/pageJob","../components/action/checkDoms","../kit/responsive","../kit/qiyiPlayer","../kit/flashCall","../kit/checkI18nType"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o=e("../kit/responsive"),r=e("../kit/qiyiPlayer").getPlayer("video");e("../kit/flashCall");var s,l=e("../kit/checkI18nType"),d="dragPlay",c=!1,u={height:0,width:0},m=0,p=0,h=0,f=0,g=0,v=0,y=0,b=0,V=!1,U=!1,w=0,k=!1,_=!1,x="http://msg.71.am/b",I=!0,L=!1;i.create(d,{getDependentDoms:function(){return{flashBox:Q.$("#flashbox"),wrapper:Q.$('[data-content-wrapper="wrapper"]'),doc:Q.$(document),flashParent:Q.$("#flashArea")}},check:function(e){return n(e),s=e,!0},init:function(){var e=s.flashBox;"true"==e.attr("data-player-issmallwindow")&&(u.height=e.height(),u.width=e.width(),this.doc=s.doc,this.dragTip=Q.$('[data-dragplaer-tip="tip"]'),this.dragCover=Q.$('[data-dragplaer-cover="cover"]'),this.flashParent=s.flashParent,this.bindEvent(e))},bindEvent:function(e){var t=this;r.on("endPlay",function(){U=!0,t.playerHide(e)}),r.on("recharge",function(){t.playerHide(e,!0)}),r.on("startPlay",function(){U=!1,t.showSmallWindow(e),t.scrollActive(e)}),r.on("ADPlaying",function(){U=!0,t.playerHide(e)}),r.on("error",function(){U=!0,t.playerHide(e)}),r.on("ADPaused",function(){U=!0}),r.on("ADResumed",function(){U=!1}),r.on("Paused",function(){U=!0}),r.on("Playing",function(){U=!1}),r.on("Stoped",function(){U=!0,t.playerHide(e)}),Q.$(window).on("resize",function(){V&&!U&&t.resize(e)}),o.on("responsiveDone",function(){if(V&&!U){var a=Q.PageInfo.respInfo.curLayout,i=Q.PageInfo.respInfo.cnf[a].viewHeight,n=Math.floor(i*u.width/u.height);e.css("height",i+"px"),e.css("width",n+"px"),y=g-e.width(0),b=v-e.height(0),g=e.width(),v=e.height(),t.resize(e)}}),e.on("mouseover",function(){V&&(t.dragTip.show(),t.dragCover.show())}),e.on("mouseout",function(){V&&(t.dragTip.hide(),t.dragCover.hide())}),Q.event.customEvent.on("twSelWebDragPlay",function(a){a.data.showTag?(V=!1,U=!1,I=!1,t.showSmallWindow(e)):t.playerHide(e)}),Q.event.customEvent.on("twSelWebTipShow",function(e){L=e.data.showTag?!0:!1})},resize:function(e){function t(){_=a/2>=e.left()+e.width()/2?!0:!1}var a=Q.page.getViewWidth(),i=Q.page.getViewHeight(),n=e.width(),o=e.height(),r=i-f+b;if(45>r&&(r=45),r>i-o&&(r=i-o),_)0>p&&(p=0),p>a-n&&(p=a-n-15),Q.PageInfo.respInfo||(r=100,p=(Q.page.getWidth()-980)/2),e.css("left",p+"px"),e.css("top",r+"px");else{var s=a-h+y;0>s&&(s=0),s>a-n&&(s=a-n-15),Q.PageInfo.respInfo||(r=100,s=(Q.page.getWidth()-980)/2),e.css("left",s+"px"),e.css("top",r+"px")}k||(k=!0,t(),setTimeout(function(){k=!1},500))},scrollActive:function(e){var t=this;c||(c=!0,Q.$(window).on("scroll",function(){t.showSmallWindow(e)}))},showSmallWindow:function(e){var t=this;if(this.flashParent.top()+this.flashParent.height()-45<Q.page.getScrollTop()&&!Q.browser.IE6&&!Q.browser.IE7){if(V||U||L)return;V=!0,I&&(r.setPlayerChangeToSmall("1"),t.sendSmallFlashPingBack()),I=!0,r.getPlayInfo(function(a){var i,n;Q.PageInfo.respInfo?(i=Q.PageInfo.respInfo.curLayout,n=Q.PageInfo.respInfo.cnf[i].viewHeight):n=240;var o=Math.floor(n*u.width/u.height);(a.width||a.height)&&(o=Math.floor(n*a.width/a.height),u.width=a.width,u.height=a.height),e.css("height",n+"px"),e.css("width",o+"px"),e.addClass("videoWindow"),t.initView(e),45>m&&(m=45),m>Q.page.getViewHeight()-e.height()&&(m=Q.page.getViewHeight()-e.height()),0>p&&(p=0),p>Q.page.getViewWidth()-e.width()&&(p=Q.page.getViewWidth()-e.width()-15),Q.PageInfo.respInfo||(m=100,p=(Q.page.getWidth()-980)/2),e.css("top",m+"px"),e.css("left",p+"px"),t.drag(e)})}else r.setPlayerChangeToSmall("0"),V&&(e.removeClass("videoWindow"),e.css("top",""),e.css("left",""),e.css("height",""),e.css("width",""),t.undrag(e),V=!1)},drag:function(e){var t=this;e.on("mousedown",function(a){var i=Q.event.get(a),n=i.clientY-e.top(),o=i.clientX-e.left();e.on("mousewheel",function(e){Q.event.get(e).stop()}),t.doc.on("mousemove",function(t){var a=t.clientY-n-Q.page.getScrollTop(),i=t.clientX-o-Q.page.getScrollLeft();45>a&&(a=45),a>Q.page.getViewHeight()-e.height()&&(a=Q.page.getViewHeight()-e.height()),0>i&&(i=0),i>Q.page.getViewWidth()-e.width()&&(i=Q.page.getViewWidth()-e.width()-15),e.css("top",a+"px"),e.css("left",i+"px"),m=a,p=i,h=Q.page.getViewWidth()-i,f=Q.page.getViewHeight()-a}),t.doc.on("mouseup",function(){t.doc.un("mousemove"),t.doc.un("mouseup"),e.un("mousewheel")}),i.preventDefault()})},undrag:function(e){var t=this;e.un("mousedown"),t.dragTip.hide(),t.dragCover.hide()},initView:function(e){var t=s.wrapper,a=Q.page.getViewHeight(),i=Q.page.getViewWidth();w||(m=a-e.height()-10,p=t.left()+t.width()-e.width(),h=i-p,f=a-m,w=1),g=e.width(),v=e.height()},playerHide:function(e){var t=this;t.dragTip.hide(),t.dragCover.hide(),e.removeClass("videoWindow"),e.css("top","0"),e.css("left","0"),e.css("height",""),e.css("width",""),U=!0,V=!1,t.undrag(e)},sendSmallFlashPingBack:function(){var e={};e.t="21",e.pf="1",e.p="10",e.p1="101",e.block="140901_bfq",e.bstp="25_bfq",e.u=Q.cookie.get("QC006")||"",e.pu=Q.cookie.get("P00003")||"",e.rn=(new Date).getTime(),e.mod=l.mod,Q.log.server(e,x)}}),a.exports=d});
define("units/adOutParam.js",["../components/units/pageJob","../kit/adSiteOutParam"],function(e,t,a){var i,n=e("../components/units/pageJob"),o=e("../kit/adSiteOutParam"),r=Q.url.getQueryValue(window.location.href,"vr"),s="adOutParam";n.create(s,{getDependentDoms:function(){return i={vr:r}},check:function(e){return 1==e.vr},init:function(){var e=this;e.initAdParam()},exec:function(){},initAdParam:function(){var e,t=location.search;Q.event.customEvent.on("jobdone",function(){e||(e=!0,o.get(t,"=(\\s||undefined)$"))})}}),a.exports=s});
define("kit/adSiteOutParam.js",[],function(e,t,a){a.exports={get:function(e,t){var a=e.indexOf("?");if(-1==a)e="";else{e=e.substr(a+1);for(var i=e.split("&"),n=[],o=0;o<i.length;o++){var r=i[o];r.replace(/' '/g,""),t?r.match(t)||n.push(r):n.push(r)}e=n.join("&")}var s="http://api.cupid.iqiyi.com/vr?";s+=e;var l=new Image(1,1);l.src=s}}});
define("units/topPingback.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../interfaces/topPingbackInterface","../kit/parentByProp"],function(e,t,a){var n=e("../components/units/pageJob");e("../components/action/checkDoms");var i=e("../kit/userInfo"),o=e("../interfaces/topPingbackInterface"),r=e("../kit/parentByProp"),s={},l="topPingback";n.create(l,{getDependentDoms:function(){return s},check:function(){return!0},init:function(){var e=this;s.wrappers=Q.$("[data-widget-topwrapper=topwrapper]"),s.wrappers&&s.wrappers.length&&s.wrappers.forEach(function(t){e.initWidget(t)}),Q.event.customEvent.on("asyncLoad_topping_show",function(t){t=t||{};var a=t.data;if(a&&a.length){a=Q.$(a);var n=a.down("*[data-widget-topwrapper=topwrapper]");e.initWidget(n)}})},initWidget:function(e){e&&Q.$(e).delegate("topvideo",function(e){e=Q.event.get(e.event);var t=Q.$(e.target);t=r(t,"j-delegate","topvideo")||t;var a=t.attr("data-aid"),n=t.attr("href");a&&n&&(e.preventDefault(),Q.event.customEvent.fire({type:"history-loction2Watched",data:{url:n,aid:a}}));var s={type:"recctplay20121226",usract:"userclick",ppuid:i.getUid(),uid:Q.cookie.get("QC005"),area:"qiyi_index",platform:11,taid:t.attr("top-video-qpid"),tcid:t.attr("top-video-cid"),src:t.attr("top-video-src")};if("A"==t[0].tagName.toUpperCase()&&"_blank"!=t.attr("target")&&t.attr("href")&&"iqiyiplay"!=t.attr("target")&&!a){e.preventDefault();var l;try{l=t.attr("href"),o.send(s,function(){window.location.href=l})}catch(d){window.location.href=l}}else o.send(s)})}}),a.exports=l});
define("interfaces/topPingbackInterface.js",["../kit/remoteInterface","../kit/generateRandomString"],function(e,t,a){var n=e("../kit/remoteInterface"),i=e("../kit/generateRandomString").generate,o=Q.Class("TopPingbackInterface",{construct:function(){this._remoteInterface=new n({send:{url:"http://msg.video.iqiyi.com/tmpstats.gif"}})},methods:{send:function(e,t){e.cb="cb_"+i(36),this._remoteInterface.send({ifname:"send",method:"GET",param:e},t)}}});a.exports=new o});
define("units/ipadAdResource.js",["../components/units/pageJob","../components/action/checkDoms"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o="ipadAdResource";i.create(o,{getDependentDoms:function(){var e,t=Q.$('*[data-widget-ipadadresource="pad"]'),a=t.down("*[data-ipadadresource-elem=container]");return Q.browser.android?e=t.down("[data-ipadadresource-tpl=android]"):Q.browser.iPad?e=t.down("[data-ipadadresource-tpl=ipad]"):Q.browser.iPhone&&(e=t.down("[data-ipadadresource-tpl=iphone]")),{resources:e,widget:t,container:a}},check:function(e){return n(e),!0},exec:function(){var e=this.getDependentDoms();if(e.resources){var t=e.widget.attr("data-ipadadresource-interval")||5e3;e.container.css("display",""),e.container.html(e.resources.value());var a=e.container.down('[data-ipadadresource-elem="ad"]'),i=a.length;if(i&&i>1){var n=1;setInterval(function(){a.hide(),n%=i,Q.$(a[n]).show(),n++},t)}}}}),a.exports=o});
define("units/playAutoNextArrayList.js",["../components/units/pageJob","../kit/qiyiPlayer","../components/action/checkDoms","../action/playListArray","../kit/userInfo"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../kit/qiyiPlayer");e("../components/action/checkDoms");var o,r=e("../action/playListArray"),s=e("../kit/userInfo"),l=new Q.ic.InfoCenter({moduleName:"playAutoNextArrayList"}),d="playAutoNextArrayList";n.create(d,{getDependentDoms:function(){var e=Q.$("[data-widget-player='flash']");return o={flash:e}},check:function(){return!0},init:function(){Q.event.customEvent.on("playArrayListData",this.doPlayArrayListData)},exec:function(){var e=this,t=i.getPlayer("video");this.bindedStop=this.stop.bind(this),t.on("Stoped",this.bindedStop),Q.event.customEvent.on("requireUnStop",function(a){var n=a.data.action;"un"==n?t.un("stoped",e.bindedStop):"on"==n&&t.on("stoped",e.bindedStop),l.log("requireUnStop")}),Q.event.customEvent.on("requireNextAgain",function(){l.log("requireNextAgain"),t.on("stoped",e.bindedStop),e.gonext(),e.sendQiyuPingback()})},stop:function(){l.log("stop go next"),this.gonext(),this.sendQiyuPingback()},gonext:function(){r.next()},sendQiyuPingback:function(){var e=this,t=i.getPlayer("video");t.getVideoInfo(function(t){try{var a=t.c,n=t.sid;if("true"===o.flash.attr("data-player-padhookup")||7==a||10==a||16==a||5==a||13==a||17==a&&!n||21==a&&!n||20==a||22==a||24==a||25==a){var i=e.qiyuData,d=r.getNextInfo()||{aid:"",cid:""};Q.log.server({type:"recctplay20121226",usract:"ctplay",ppuid:s.getUid(),uid:Q.cookie.get("QC006"),pru:Q.cookie.get("P00PRU")||"",aid:t.aid,event_id:i.event_id,cid:a,bkt:i.bkt,area:i.area,rank:r.getFocus(),url:t.vu||"",tag:i.tag||"",t:(new Date).getTime(),platform:i.platform||"31",taid:d.aid,tcid:d.cid},"http://msg.71.am/tmpstats.gif")}}catch(c){l.error("play next pingback error message: "+c.message)}})},destroy:function(){Q.event.customEvent.un("playArrayListData",this.doPlayArrayListDataHander)},doPlayArrayListData:function(e){var t=e.data.attributes;this.qiyuData=t,r.setQiyuInfo(t)}}),a.exports=d});
define("action/playListArray.js",["../kit/qiyiPlayer","../kit/page"],function(e,t,a){var n=e("../kit/qiyiPlayer"),i=e("../kit/page");a.exports=Q.Class("PlayListArray",{construct:function(){},statics:{_list:[],_focus:0,_info:{},init:function(){this._list=[],this._focus=0},setList:function(e){this._list=e},getList:function(){return this._list},setQiyuInfo:function(e){this._info=e},getQiyuInfo:function(){return this._info},addBeforeList:function(e){this._list=e.concat(this._list)},addAfterList:function(e){this._list=this._list.concat(e)},clearList:function(){this.init()},initFocus:function(){var e=this,t=n.getPlayer("video");t.getPlayInfo(function(t){t.vid&&t.tvid&&e._list.some(function(a,n){return a.tvId==t.tvid&&a.vid==t.vid?(e._focus=n,!0):void 0})})},getFocus:function(){return this._focus},has:function(e){var t,a=this._focus;return"next"==e?t=this._list[a+1]:"prev"==e&&(t=this._list[a-1]),!!t},prev:function(){var e=this._focus,t=this._list[e-1];t&&(this._focus--,this._play(t))},next:function(){var e=this._focus,t=this._list[e+1];t&&(this._focus++,this._play(t))},_play:function(e){if(e&&e.tvId&&e.vid){var t=n.getPlayer("video");t.load({tvId:e.tvId,vid:e.vid});try{var a=i.getCurrent(),o=a.getUrl();o=o.replace(/tvid=\d+/i,"tvid="+e.tvId).replace(/vid=\w{32}/i,"vid="+e.vid),a.replaceUrl(o)}catch(r){}}},getNextInfo:function(){return this._list[this._focus+1]},getPrevInfo:function(){return this._list[this._focus-1]},getInfo:function(){return this._list[this._focus]}}})});
define("kit/page.js",["../components/units/pageJob","../action/templateRenderer","../view/templateView","../model/channelModel","./eventPlugin","../components/action/nonMVCWidget","../action/phoneLoading","../kit/ifrestime","../config/projectConfig"],function(e,t,a){var n,i=e("../components/units/pageJob"),o=e("../action/templateRenderer"),r=e("../view/templateView");e("../model/channelModel");var s=e("./eventPlugin"),l=e("../components/action/nonMVCWidget"),d=e("../action/phoneLoading"),c=[],m=[],u={},h=new Q.ic.InfoCenter({moduleName:"Page"}),p=e("../kit/ifrestime"),f=e("../config/projectConfig"),g=f.getConfig();Q.$(window).on("popstate",function(e){Q.event.get(e).preventDefault();var t;if(h.log("state: "+t+", e.state: "+e.state),t=e.state)if(null!=t?t.id:0){var a=U.getCurrent(),n=!1;n=!a.state||a.state&&a.state.id>=t.id?U.back(t.id):U.foward(t.id),n||location.reload()}else location.reload()});var U=Q.Class("Page",{extend:l,properties:{},plugins:[new s],construct:function(e){this._uid=(new Date).getTime(),this.callsuper(e),this._wrapper=e.wrapper,this._tmp=Q.element.Element.create({tagName:"div"}),this._scroll=0},statics:{_backStack:[],_fowardStack:[],_currPage:null,getInstance:function(e){var t=new U({wrapper:Q.$("body")});return t.setUrl(e),t},setCurrent:function(e){U._currPage=e},getCurrent:function(){return U._currPage},canBack:function(){return c.length>0},back:function(e){var t=u[e];if(t){var a=U.getCurrent();return m.push(a),t.setType("back"),t.renderHtml(t.getHtml(),function(){t.initPage(!1),U.setCurrent(t),t.removeHiddenPages()}),!0}return!1},foward:function(e){var t=u[e];if(t){var a=U.getCurrent();return c.push(a),t.setType("foward"),t.renderHtml(t.getHtml(),function(){t.initPage(!1),U.setCurrent(t),t.removeHiddenPages()}),!0}return!1},updateHistory:function(e){m=[],c.push(e),h.log("back:"+c.length),h.log("foward:"+m.length)},_getPageFromStack:function(e){var t;return c.some(function(a){return a.getUrl()==e?(t=a,!1):void 0}),t}},methods:{load:function(e){Q.LoadTime&&Q.LoadTime.reset(["jsloaded","jobdone"]),h.log("load | tplid | "+e.tplId),this._check(),this.setType("newload"),this._loading||(this._loading=new d({doms:{wrapper:Q.$("body")}})),this._id=(new Date).getTime()-1,u[this._id]=this;var t=this,a=Q.object.extend({},e),n=new Date;a.onsuccess=function(){h.debug("Page loaded in "+(new Date-n)+" ms"),t.initPage(!0);var a=U.getCurrent();t.setReferrer(a.getUrl()),U.setCurrent(t),U.updateHistory(a,t),t.removeHiddenPages(),e.onsuccess&&e.onsuccess()},a.onfailure=function(){e.onfailure&&e.onfailure()},this._render(a)},removeHiddenPages:function(){var e=Q.$("[data-widget=page]"),t=U.getCurrent();e.forEach(function(e){e!=t.getPageElem()[0]&&Q.$(document.body).remove(e)})},initPageResource:function(){this._getScript(),this._getHtmlTitle()},setType:function(e){this._type=e},getType:function(){return this._type},replaceUrl:function(e){history.replaceState&&history.replaceState("","",e),this.setUrl(e)},initPage:function(e){this.initPageResource(),this.setTitle(),this._initPageJob(),h.debug("Resume to scrollTop : "+this._scroll),setTimeout(this.execScript.bind(this),0),this.pushState(e)},pushState:function(e){if(this.state||(this.state={id:this._id}),this._url)try{e&&history.pushState?history.pushState(this.state,this.getTitle(),this._url):history.replaceState&&history.replaceState(this.state,this.getTitle(),this._url)}catch(t){}},unload:function(){this._destroyJobs()},getHtml:function(){return this._html||""},setUrl:function(e){this._url=e},getUrl:function(){return decodeURI(this._url)},setReferrer:function(e){this._referrer=e},getReferrer:function(){return this._referrer||""},_render:function(e){var t,a=e.tplId,i=e.tplUrl,s=e.onsuccess,l=e.onfailure,d=!1;t=setTimeout(function(){d=!0,l&&l()},g.http.timeout),h.log("_render | tmpl to render: "+a);var c=this,m=new Date;g.getTpls(function(u){if(!d){p.send({tl:new Date-m,intype:"ht_tm"}),h.debug("Loaded template data : "+(new Date-m)+" ms."),t&&clearTimeout(t),u=u||{},i=u[a].tpl,h.debug("_render | tmpl url: "+i);var f=u[a];if(i&&f){f.Action&&(o=f.Action),f.Model&&(n=f.Model),f.View&&(r=f.View);var g=new n({dom:e.dom}),U=new r({tplUrl:i}),v=new o({model:g,view:U});m=new Date,v.render({onsuccess:function(e){h.debug("Template rendered in "+(new Date-m)+" ms"),h.log("_render | begin to renderHtml"),m=new Date,c.renderHtml(e,function(){h.debug("Html rendered in "+(new Date-m)+" ms"),s&&s(e)})},onfailure:function(){h.error("_render | No string rendered."),l&&l()}})}else h.error("_render | Missing tplUrl or rendererInfo"),l&&l()}})},renderHtml:function(e,t){this.saveHtml(e),e=this._trimBody(e);var a=new Date;this._tmp.html(e);var n=this._tmp.first();h.debug("Trim body2 cost : "+(new Date-a)+" ms"),this._pageElem=n,n.css("visibility","hidden"),this._wrapper.append(n);var i=U.getCurrent(),o=i.getPageElem();i._saveScroll(),this._switchPage(o,this._pageElem,t)},_saveScroll:function(){this._scroll=Q.page.getScrollTop(),h.debug("Saved scrollTop : "+this._scroll)},getPageElem:function(){return this._pageElem},getScripts:function(){return this._scripts||[]},execScript:function(){var e=this._scripts;e&&e.forEach(function(e){if(e=e.replace(/<.*?>/g,"").trim())try{new Function(e).call()}catch(t){h.debug(t)}})},_switchPage:function(e,t,a){var n=U.getCurrent();n.fire({type:"beforeunload",data:{page:n}}),n.fire({type:"beforeswitchpage",data:{type:this._type,callback:a,oldPage:e,newPage:t}}),n.unload()},setPageElem:function(e){this._pageElem=e},removePageElem:function(e){this._wrapper.remove(e)},_getScript:function(){var e=this._html,t=/<script.*?>([\s\S]*?)<\/ *script>/g,a=e.match(t);a&&(this._scripts=a)},getTitle:function(){return this._title||""},setTitle:function(e){document.title=e||this.getTitle(),this._title=document.title},_getHtmlTitle:function(){var e=this._html,t=/<title>([\s\S]+?)<\/title>/;e.match(t)&&(this._title=RegExp.$1.trim())},_trimBody:function(e){return e.replace(/^[\s\S]*<body.*?>/,"").replace(/<\/ *body>[\s\S]*/,"")},saveHtml:function(e){this._html=e},_destroyJobs:function(){var e=i.getJobs();e.forEach(function(e){if(e.object.destroy)try{e.object.destroy()}catch(t){h.warn("job destroy failed in "+e.name+" with message: "+t.message)}})},_initPageJob:function(){i.clear()},_showLoading:function(){this._loading.show()},_hideLoading:function(){this._loading.hide()},_check:function(){var e=Q.$("[data-widget=page]");e.length>1}}});a.exports=U});
define("action/phoneLoading.js",["../components/action/widget","../components/model/model","../view/phoneLoadingView"],function(e,t,a){var n=e("../components/action/widget"),i=e("../components/model/model"),o=e("../view/phoneLoadingView");a.exports=Q.Class("PhoneLoading",{extend:n,construct:function(e){e=e||{},e.model=e.model||new i,e.view=e.view||new o(e),this.callsuper(e)},methods:{show:function(){this.syncSet({display:!0})},hide:function(){this.syncSet({display:!1})}}})});
define("view/phoneLoadingView.js",["../components/view/widgetView"],function(e,t,a){var n=e("../components/view/widgetView"),i=function(e){Q.event.get(e).stop()};a.exports=Q.Class("PhoneLoadingView",{extend:n,construct:function(e){this.callsuper(e),e.message=e.message||"加载中..",this._elem=Q.$("#loadingelem");var t=Q.page.getViewHeight(),a=Q.page.getViewWidth(),n=Q.page.getScrollTop();if(this._elem)this._elem.html('<img src="http://www.qiyipic.com/common/images/load.gif"/>&nbsp;'+e.message);else{Q.page.getScrollTop();var i=0+t/2-24;this._elem=Q.element.Element.create({tagName:"div"}),this._elem.html('<img src="http://www.qiyipic.com/common/images/load.gif"/>&nbsp;'+e.message),this._elem.css("position","absolute"),this._elem.css("left","0"),this._elem.css("width",a+"px"),this._elem.css("height",t+"px"),this._elem.css("color","white"),this._elem.css("background","black"),this._elem.css("zIndex","10"),this._elem.css("opacity","0.6"),this._elem.css("display","none"),this._elem.css("textAlign","center"),this._elem.attr("data-fixed-enable","true"),this._elem.attr("id","loadingelem"),this._elem.css("paddingTop",i+"px"),e.doms.wrapper.append(this._elem)}this._elem.css("top",n+"px")},methods:{init:function(e){this.callsuper("init",e)},update:function(e){e.display?(this._elem.show(),Q.$("body").on("touchmove",i)):(this._elem.hide(),Q.$("body").un("touchmove",i))}}})});
define("units/playPrevNextArrayList.js",["../components/units/pageJob","../components/action/checkDoms","../action/playListArray","../config/playnextConfig","../kit/qiyiPlayer","../kit/userInfo"],function(e,t,a){var n=e("../components/units/pageJob");e("../components/action/checkDoms");var i,o,r,s,l=e("../action/playListArray"),d=e("../config/playnextConfig"),c=e("../kit/qiyiPlayer"),m=e("../kit/userInfo"),u=!1,h=new Q.ic.InfoCenter({moduleName:"playPrevNextArrayList"}),p=function(){var e=this.getDependentDoms();this.player.getVideoInfo(function(t){var a=d.vrslist.concat(d.qiyu,d.all,d.special);a.forEach(function(a){if(!Q.browser.iPad&&t.c==a&&!r){var n=l.has("next");n?e.next.show():e.next.hide(),n=l.has("prev"),n?e.prev.show():e.prev.hide()}})})},f=function(e){h.log("playArrayListData  "+JSON.stringify(e)),e.data&&(u||(l.init(),u=!0),0===e.data.index?l.addBeforeList(e.data.list):-1==e.data.index&&l.addAfterList(e.data.list),l.initFocus(),i())},g=function(){l.clearList()},U="playPrevNextArrayList";n.create(U,{getDependentDoms:function(){return{prev:Q.$("[data-elem=pre]"),next:Q.$("[data-elem=back]")}},check:function(){return!0},init:function(){o=f.bind(this),s=g.bind(this),Q.event.customEvent.on("playArrayListData",o),Q.event.customEvent.on("clearArrayListData",s),this.lvyouHandler=function(){r=!0},Q.event.customEvent.on("lvyou-juji",this.lvyouHandler)},exec:function(){var e=this,t=this.getDependentDoms();this.player=c.getPlayer("video"),l.init(),t.next&&t.next.on("click",function(t){Q.event.get(t).preventDefault(),e.player.getVideoInfo(function(e){Q.browser.iPad||r||(Q.event.customEvent.fire({type:"pingbackUsrAct",data:{usract:"nxt"}}),l.next());var t=d.vrslist.concat(d.qiyu,d.all,d.special);t.forEach(function(t){if(!Q.browser.iPad&&e.c==t&&!r){if(21===e.c&&e.sid)return!1;var a=l.getNextInfo(),n=l.getQiyuInfo();Q.log.server({type:"recctplay20121226",usract:"userclick",ppuid:m.getUid(),uid:Q.cookie.get("QC006"),aid:e.aid,event_id:n.event_id,cid:e.c,bkt:n.bkt,area:n.area,rank:l.getFocus()+1,url:"",tag:n.tag||"",t:(new Date).getTime(),platform:"31",taid:a.aid,tcid:a.cid},"http://msg.71.am/tmpstats.gif")}})})}),t.prev&&t.prev.on("click",function(t){Q.event.get(t).preventDefault(),e.player.getVideoInfo(function(e){Q.browser.iPad||r||(Q.event.customEvent.fire({type:"pingbackUsrAct",data:{usract:"lst"}}),l.prev());var t=d.vrslist.concat(d.qiyu,d.all,d.special);t.forEach(function(t){if(!Q.browser.iPad&&e.c==t&&!r){if(21===e.c&&e.sid)return!1;var a=l.getPrevInfo(),n=l.getQiyuInfo();Q.log.server({type:"recctplay20121226",usract:"userclick",ppuid:m.getUid(),uid:Q.cookie.get("QC006"),pru:Q.cookie.get("P00PRU")||"",aid:e.aid,event_id:n.event_id,cid:e.c,bkt:n.bkt,area:n.area,rank:l.getFocus()-1,url:"",tag:n.tag||"",t:(new Date).getTime(),platform:"31",taid:a.aid,tcid:a.cid},"http://msg.71.am/tmpstats.gif")}})})}),i=p.bind(this),this.player.on("dataloaded",function(){i()}),this.player.on("videoChanged",function(){l.initFocus()})},destroy:function(){Q.event.customEvent.un("playArrayListData",o),Q.event.customEvent.un("lvyou-juji",this.lvyouHandler)}}),a.exports=U});
define("config/playnextConfig.js",[],function(e,t,a){var n={albumlist:[2,4,3,12,9],qiyu:[5,7,10,13,16,20,22],vrslist:[6,14],all:[17,21],special:[9]};a.exports=n});
define("units/videoAuthPlay.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../config/video"],function(e,t,a){function n(){try{var e=Q.url.queryToJson(location.search),t=this.getDependentDoms(),a=t.widget,n=a.attr("data-player-albumid")||e.albumId||e.albumid,i=a.attr("data-player-tvid")||e.tvid,o=a.attr("data-player-videoid")||e.vid||e.videoid,r=a.attr("data-player-ismember")||!1;if(!i||!o)return;var l=s.getPlayer("video");l.load({tvId:i,vid:o,isMember:r,albumId:n})}catch(c){d.warn("auth:"+c.message)}}function i(){var e=s.getPlayer("video");e.recharge()}var o=e("../components/units/pageJob"),r=e("../components/action/checkDoms"),s=e("../kit/qiyiPlayer"),l=e("../config/video"),d=new Q.ic.InfoCenter({moduleName:"videoAuthPlay"});Q.ic.InfoCenter.whatToSave("videoAuthPlay");var c,m,u,h="videoAuthPlay",p=Q.event.customEvent;o.create(h,{getDependentDoms:function(){var e=Q.$("[data-widget-player=flash]");return{widget:e}},check:function(e){return r(e),!0},init:function(){if(l){u=!1,m=!1,c=n.bind(this),c(),Q.event.customEvent.on("dynamic-flash-loaded",c),p.on("login",c),p.on("logout",c);var e=s.getPlayer("video");e.on("authenticationResult",function(t){var a=t.data.isTryWatch;void 0===a&&(a=t.data),a?m||(e.on("stoped",i),m=!0):(e.un("stoped",i),m=!1)})}},destroy:function(){p.un("login",c),p.un("logout",c)}}),a.exports=h});
define("units/videoLayerShow.js",["../components/units/pageJob","../components/action/checkDoms","../config/video"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../components/action/checkDoms"),o=e("../config/video"),r="videoLayerShow";n.create(r,{getDependentDoms:function(){return{layer:Q.$("[data-widget-layer=layer]"),video:Q.$("[data-player-playerbody=flash]")}},check:function(e){return i(e),!0},exec:function(){if(o){var e=this.getDependentDoms();e.layer.show()}}}),a.exports=r});
define("units/videoPlayBtn.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../config/video"],function(e,t,a){var n,i=e("../components/units/pageJob"),o=e("../components/action/checkDoms"),r=e("../kit/qiyiPlayer"),s=e("../config/video"),l="videoPlayBtn";i.create(l,{getDependentDoms:function(){var e={btn:Q.$("[data-videoctrl-elem=playOrStop]"),video:Q.$("[data-player-playerbody=flash]")};return e},check:function(e){return o(e),!0},init:function(){!s},exec:function(){if(s){var e=this.getDependentDoms(),t=r.getPlayer("video");t.on("Paused",function(){e.btn.removeClass("ctrlwait"),e.btn.removeClass("ctrlstop"),e.btn.addClass("ctrlplay")}),t.on("Ready",function(){n=!1,e.btn.removeClass("ctrlwait"),e.btn.removeClass("ctrlplay"),e.btn.addClass("ctrlstop")}),t.on("Play",function(){e.btn.removeClass("ctrlwait"),e.btn.removeClass("ctrlplay"),e.btn.addClass("ctrlstop")}),t.on("Stoped",function(){e.btn.removeClass("ctrlstop"),e.btn.removeClass("ctrlplay"),e.btn.addClass("ctrlwait"),n=!0}),e.btn.on("click",function(e){Q.event.get(e).preventDefault(),t.getPlayInfo(function(e){"Playing"==e.currentStatus?t.pause():n?t.replay():t.play()})}),t.getPlayInfo(function(t){"Playing"==t.currentStatus?e.btn.addClass("stop"):e.btn.removeClass("stop")})}},destroy:function(){}}),a.exports=l});
define("units/videoControlBarLocate.js",["../components/units/pageJob","../components/action/checkDoms","../config/video"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o=e("../config/video"),r="videoControlBarLocate";i.create(r,{getDependentDoms:function(){return{control_bar:Q.$("[data-widget-videoctrl=videoControl]"),player_bg:Q.$("[data-widget-player=flash]"),video:Q.$("[data-player-playerbody=flash]")}},check:function(e){return n(e),!0},exec:function(){if(o){var e=this.getDependentDoms(),t=e.video.height(),a=e.control_bar.height();e.control_bar.css("top",t-a+"px"),e.video.css("height",t-a+"px")}}}),a.exports=r});
define("units/mobileBigPlayBtn.js",["../components/units/pageJob","../kit/qiyiPlayer","../components/action/checkDoms","../config/video"],function(e,t,a){var n,i=e("../components/units/pageJob"),o=e("../kit/qiyiPlayer"),r=e("../components/action/checkDoms"),s=e("../config/video"),l="mobileBigPlayBtn",d=function(){var e=this.getDependentDoms(),t=o.getPlayer("video");t.getPlayInfo(function(t){"Paused"==t.currentStatus?e.btn.removeClass("stop"):e.btn.addClass("stop")})};i.create(l,{getDependentDoms:function(){var e=Q.$("[data-widget-videolayer=bigPlayLayer]"),t={btn:e.down("[data-videolayer-elem=bigPlayOrStop]"),video:Q.$("[data-player-playerbody=flash]"),widget:e};return t},check:function(e){return r(e),!0},init:function(){s&&(n=d.bind(this),Q.event.customEvent.on("showcontrol",n))},exec:function(){if(s){var e=this.getDependentDoms(),t=o.getPlayer("video");t.on("Play",function(){e.widget.hide()}),e.btn.on("click",function(e){Q.event.get(e).preventDefault(),t.getPlayInfo(function(e){"Playing"==e.currentStatus?t.pause():t.play()})}),t.getPlayInfo(function(t){"Playing"==t.currentStatus?e.btn.addClass("stop"):e.btn.removeClass("stop")})}},destroy:function(){Q.event.customEvent.un("showcontrol",n)}}),a.exports=l});
define("units/fullScreen.js",["../components/units/pageJob","../kit/qiyiPlayer","../components/action/checkDoms","../config/video"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../kit/qiyiPlayer"),o=e("../components/action/checkDoms"),r=e("../config/video"),s="fullScreen";n.create(s,{getDependentDoms:function(){var e=Q.$("[data-widget-videoctrl=videoControl]"),t={btn:e.down("[data-videoctrl-elem=fullScreen]")};return t},check:function(e){return o(e),!0},init:function(){if(r){var e=this.getDependentDoms(),t=i.getPlayer("video");e.btn.on("click",function(e){Q.event.get(e).preventDefault(),t.switchVideoFullScreen(!0)}),e.btn.hide(),t.on("StartPlay",function(){e.btn.show()})}}}),a.exports=s});
define("units/videoExpand.js",["../components/units/pageJob","../kit/qiyiPlayer","../components/action/checkDoms","../config/video"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../kit/qiyiPlayer");e("../components/action/checkDoms");var o=e("../config/video"),r="videoExpand",s=Q.event.customEvent;i.create(r,{getDependentDoms:function(){var e=Q.$("[data-widget-videoctrl=videoControl]"),t={contr:Q.$("[data-widget-controlls=controlls]"),btn:e.down("[data-videoctrl-elem=expand]"),btnP:e.down("[data-widget-expand=expand]"),video_layer:Q.$("[data-widget-player=flash]"),video:Q.$("[data-player-playerbody=flash]")};return t},check:function(){return!0},init:function(){if(o){var e=this.getDependentDoms(),t=n.getPlayer("video"),a=this,i=e.video_layer.attr("data-player-expandstate");"true"==i?a.expand():a.shrink(),t.on("expand",function(e){"false"==e.data.value?a.shrink():a.expand()}),t.on("authenticationResult",function(i){var n=i.data.isTryWatch;if(void 0===n&&(n=i.data),n)e.btn.hide(),a.progressAdjust();else{var o=e.video_layer.attr("data-player-expandstate");t.fire({type:"expand",data:{value:o}}),a.expand(),e.btn.show()}}),t.on("dataloaded",function(){e.btn.show()}),e.btn.on("click",function(i){Q.event.get(i).stop();var n=e.btn.attr("data-videoctrl-expandstate");"true"==n?a.shrink():a.expand(),t.fire({type:"expand",data:{value:e.btn.attr("data-videoctrl-expandstate")}}),s.fire({type:"progress-adjust"})})}},progressAdjust:function(){var e=this.getDependentDoms();e.btnP.hide(),e.contr.addClass("no_ctrlOpen")},shrink:function(){var e=this.getDependentDoms();e.btn.attr("data-videoctrl-expandstate","false"),e.btn.removeClass("ctrlClose"),e.btn.addClass("ctrlOpen")},expand:function(){var e=this.getDependentDoms();e.btn.attr("data-videoctrl-expandstate","true"),e.btn.removeClass("ctrlOpen"),e.btn.addClass("ctrlClose")}}),a.exports=r});
define("units/videoProgress.js",["../components/units/pageJob","../kit/qiyiPlayer","../components/action/checkDoms","../action/customProgress","../config/video"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../kit/qiyiPlayer"),o=e("../components/action/checkDoms"),r=e("../action/customProgress");new Q.ic.InfoCenter({moduleName:"VideoProgress"});var s,l=e("../config/video"),d=Q.date.formatSeconds,c=Q.event.customEvent,m="videoProgress";n.create(m,{getDependentDoms:function(){var e=Q.$("[data-widget-videoctrl=videoControl]"),t={widget:e,duration:e.down("[data-videoctrl-elem=progressBar]"),played:e.down("[data-videoctrl-elem=progress]"),btn:e.down("[data-videoctrl-elem=progressFocus]"),current_time:e.down("[data-videoctrl-elem=currentTime]"),total_time:e.down("[data-videoctrl-elem=totalTime]"),video:Q.$("[data-player-playerbody=flash]")};return t},check:function(e){return o(e),!0},init:function(){if(l){var e=this.getDependentDoms(),t=i.getPlayer("video"),a=new r({doms:e});t.on("StartPlay",function(){a.init(),s=function(){t.getPlayInfo(function(t){"Paused"!=t.currentStatus&&"Stoped"!=t.currentStatus||dragging||(total=parseInt(t.totalDuration),btnWidth=halfBtnWidth,durationWidth=Q.$(e.duration).width(),barWidth=durationWidth-btnWidth,unit=barWidth/total,current=parseInt(t.currentTime),e.played.css("width",parseInt(unit*current)+halfBtnWidth+"px"),e.current_time.html(d(current)))})},c.on("progress-adjust",s)})}},destroy:function(){c.un("progress-adjust",s)}}),a.exports=m});
define("action/customProgress.js",["../components/action/widget","../components/model/widgetModel","../view/customProgressView","../kit/qiyiPlayer"],function(e,t,a){var n=e("../components/action/widget"),i=e("../components/model/widgetModel"),o=e("../view/customProgressView"),r=e("../kit/qiyiPlayer");a.exports=Q.Class("CustomProgress",{extend:n,construct:function(e){e=e||{},e.model=e.model||new i,e.view=e.view||new o(e),this.callsuper(e)},methods:{init:function(){this.getPlayInfo()},getPlayInfo:function(){var e=this,t=r.getPlayer("video");t.getPlayInfo(function(t){e._model.set(t),e._view.update(t)})}}})});
define("view/customProgressView.js",["../components/view/widgetView","../kit/qiyiPlayer"],function(e,t,a){var n,i=e("../components/view/widgetView"),o=e("../kit/qiyiPlayer"),r=Q.date.formatSeconds,s=new Q.ic.InfoCenter({moduleName:"CustomProgressView"});a.exports=Q.Class("CustomProgressView",{extend:i,construct:function(e){this.callsuper(e),this.V=600,this.U=Date.now(),this._doms=e.doms,this._progress=this._doms.widget,this._seek=this._doms.duration,this._played=this._doms.played,this._seekHandle=this._doms.btn,this._current=this._doms.current_time,this._total=this._doms.total_time},methods:{update:function(e){this.c=e.currentTime,this.totalTime=e.totalDuration?e.totalDuration:0,s.log("this.c "+this.c),s.log("totalTime "+this.totalTime),this._current.html(r(parseInt(this.c))),this._total.html(this.totalTime?r(parseInt(this.totalTime)):"00:00"),this._removeEvent(),this._bindEvent()},_bindEvent:function(){n=o.getPlayer("video"),this.setProgess_binded=this.setProgress.bind(this),this.seek_binded=this.seek.bind(this),this.onTimeupdate_binded=this.onTimeupdate.bind(this),this.ontouchStart_binded=this.ontouchStart.bind(this),n.on("playing",this.onTimeupdate_binded),this._seek.on("click",this.seek_binded),this._seekHandle.on("touchstart",this.ontouchStart_binded)},_removeEvent:function(){n=o.getPlayer("video"),n.un("playing",this.onTimeupdate_binded),this._seek.un("click",this.seek_binded),this._seekHandle.un("touchstart",this.ontouchStart_binded)},onTimeupdate:function(){this.isTouching||4==n._player.readyState&&this.setProgress(n._player.currentTime)},setProgress:function(e){var t=n._player.currentTime;if(this.totalTime=n._player.duration,isNaN(t)&&(t=0),4==n._player.readyState){t=Math.min(Math.max(t,0),this.totalTime);var a=Math.min(Math.max(e,0),this.totalTime),i=a/this.totalTime,o=this._seek.width(),l=this._seekHandle.width();s.log("currentTime "+t+"-- width"+Math.min(100*(i+l/o/2),100)+"%"),this._played.css("width",parseInt(Math.min(100*(i+l/o/2),100))+"%"),this._current.html(r(parseInt(t))),this._total.html(this.totalTime?r(parseInt(this.totalTime)):"00:00")}},seek:function(e){e.preventDefault();var t=e.srcElement;this.totalTime=n._player.duration;var a=(new Date).getTime()-this.U;if(t==this._seekHandle||a<this.V)return!0;var i=e.offsetX||e.changedTouches[0].clientX-this._seek[0].clientX,o=i/this._seek[0].offsetWidth,r=o*this.totalTime;this.setProgress(Math.min(Math.max(r,0),this.totalTime)),n.seek(r)},ontouchStart:function(e){return 1!=e.targetTouches.length||this.isTouching?!1:(this.startX=e.targetTouches[0].clientX,e.preventDefault(),this.isTouching=!0,this.startTime=this._currentTime=n._player.currentTime||0,this.ontouchMove_binded=this.ontouchMove.bind(this),this.ontouchEnd_binded=this.ontouchEnd.bind(this),this._seek.on("touchmove",this.ontouchMove_binded),this._seek.on("touchend",this.ontouchEnd_binded),void 0)},ontouchMove:function(e){return 1!=e.targetTouches.length?!1:(e.preventDefault(),e.stopPropagation(),this.totalTime=n._player.duration,this._currentTime=this.startTime+(e.targetTouches[0].clientX-this.startX)/this._seek.width()*this.totalTime,s.log("ontouchMove"+this._currentTime),this.setProgress(Math.min(Math.max(this._currentTime,0),this.totalTime)),this._current.html(r(parseInt(Math.min(Math.max(this._currentTime,0),this.totalTime)))),!1)},ontouchEnd:function(e){return this.isTouching=!1,1<e.changedTouches.length?!1:(e.preventDefault(),e.stopPropagation(),this._seek.un("touchmove",this.ontouchMove_binded),this._seek.un("touchend",this.ontouchEnd_binded),n.seek(Math.min(Math.max(this._currentTime,0))),!1)}}})});
define("units/pingbackVV.js",["../components/units/pageJob","../kit/qiyiPlayer","../kit/videoEventId","../kit/weid","../kit/uid","../kit/userInfo","../kit/storage","../kit/page","../components/model/html5VVModel","../components/action/html5VV","../components/view/html5VVView","../interfaces/uidInterface","../config/video"],function(e,t,a){function i(){var e=u.getCurrent()?u.getCurrent().getUrl():location.href;return 23==Q.url.getQueryValue(e,"cnid")}var n=e("../components/units/pageJob"),o=e("../kit/qiyiPlayer"),r=e("../kit/videoEventId"),s=e("../kit/weid"),l=e("../kit/uid"),d=e("../kit/userInfo"),c=e("../kit/storage"),u=e("../kit/page"),m=e("../components/model/html5VVModel"),p=e("../components/action/html5VV"),h=e("../components/view/html5VVView");e("../interfaces/uidInterface"),new Q.ic.InfoCenter({moduleName:"pingbackVV"});var f,g,v,y=e("../config/video"),b=function(e){var t=this.getDependentDoms();s.get(function(a){f&&f.destroy(),f=new p({model:new m({aid:e.aid,vid:e.vid,tvid:e.tvid,puid:d.getUid(),veid:r.get(),weid:a,newusr:l.getnewusr()?1:0,cid:e.c,lev:c.read(i()?"QIPAQVD":"QVD")||"1",tn:Date.now()+Math.random(),msrc:Q.cookie.get("QC015")||"",pla:function(){var e="3";return Q.browser.iPad&&(e="2"),e+="1"}()}),view:new h({doms:t})})})},U="pingbackVV";n.create(U,{getDependentDoms:function(){var e={player:Q.$("#flash")};return e},check:function(){return!0},init:function(){y&&r.init()},exec:function(){y&&(g=o.getPlayer("video"),v=b.bind(this),g.on("StartPlay",function(){r.get(function(){g.getVideoInfo(function(e){v(e)})})}),Q.event.customEvent.on("adloaded",function(){r.get(function(e){g.getVideoInfo(function(t){s.get(function(a){l.get(function(n){Q.log.server({aid:t.aid,vid:t.vid,tvid:t.tvid,puid:d.getUid(),veid:e,weid:a,suid:n,newusr:l.getnewusr()?1:0,cid:t.c,lev:c.read(i()?"QIPAQVD":"QVD")||"1",tn:Date.now()+Math.random(),msrc:Q.cookie.get("QC015")||"",flag:"plyract",plyract:"ready",url:location.href,prgr:"0",tg:"",pla:function(){var e="3";return Q.browser.iPad&&(e="2"),e+="1"}()},"http://msg.71.am/livepb.gif")})})})})}))},destroy:function(){g.destroy(),g=null,g.destroy(),r.destroy(),f&&f.destroy()}}),a.exports=U});
define("kit/videoEventId.js",["../kit/qiyiPlayer","./uuid"],function(e,t,a){var i,n=e("../kit/qiyiPlayer"),o=e("./uuid");a.exports={_veid:"",init:function(){var e=this;i=n.getPlayer("video"),i.on("Stoped",function(){e._veid=""})},set:function(e){this._veid=e},get:function(e){var t=this;return this._veid?(e&&e(this._veid),this._veid):(o.get(function(a){t._veid=a,e&&e(a)}),void 0)},destroy:function(){i.destroy(),i=null,n.destroy()}}});
define("kit/weid.js",["./uuid"],function(e,t,a){var i,n=e("./uuid");a.exports={get:function(e){return i?(e(i),void 0):(this.gen(e),void 0)},gen:function(e){n.get(function(t){i=t,e(i)})},destroy:function(){i=null}}});
define("kit/uid.js",["./uuid"],function(e,t,a){var i=e("./uuid");a.exports={newsur:!1,get:function(e){var t=Q.cookie.get("QC006");return t?(e(t),void 0):(this.newsur=!0,i.get(function(t){Q.cookie.set("QC006",t,{expires:31536e6}),e(t)}),void 0)},getnewusr:function(){return this.newsur?this.newsur:Q.cookie.get("QC006")?!1:!0}}});
define("components/model/html5VVModel.js",["./model","./getUidModel","../../kit/uid"],function(e,t,a){var i=e("./model"),n=e("./getUidModel"),o=e("../../kit/uid"),r=Q.Class("Html5VVModel",{ns:"Q.model",extend:i,construct:function(e){this.callsuper(),this._data.url="http://msg.71.am/vpb.gif",this._data.first=!0,this._data.data=Q.object.extend({flag:"plyract",plyract:"start",purl:function(e){return e.protocol+"//"+e.host+e.pathname}(window.location)},e),this.getUid=new n},properties:{},methods:{init:function(){this.reInit()},reInit:function(e){this._data.first=!0,this._data.tiktok=0,this._data.loadTimes=0,e&&Q.object.extend(this._data.data,e)},set:function(e,t){var a=this;o.get(function(i){if(Q.object.extend(a._data.data,e),a._data.first)a._data.first=!1,a._data.data.suid=i,t(a._data);else if("stop"==a._data.data.plyract)t(a._data);else switch(a._data.tiktok++,a._data.loadTimes){case 0:15==a._data.tiktok&&(a._data.loadTimes++,t(a._data),a._data.tiktok=0);case 1:60==a._data.tiktok&&(a._data.loadTimes++,t(a._data),a._data.tiktok=0);break;case 2:120==a._data.tiktok&&(t(a._data),a._data.tiktok=0)}})}}});a.exports=r});
define("components/model/getUidModel.js",["./asyncModel"],function(e,t,a){var i=e("./asyncModel"),n=Q.Class("GetUidModel",{ns:"Q.model",extend:i,construct:function(e){this.callsuper(),this._opt=e||{},this._url="http://data.video.qiyi.com/uid",this._param={varname:"uid"},this.cookieFlag="QC006"},methods:{get:function(e,t){var a={},i=this,n=Q.cookie.get(this.cookieFlag);return n?(t(n),void 0):(Q.object.extend(a,this._param),Q.object.extend(a,e),this.callsuper("get",a,function(e){n=e?e.uid:Q.crypto.md5(+new Date+Math.round(2147483647*Math.random())+""),Q.cookie.set(i.cookieFlag,n,{duration:31536e6,path:"/",domain:"iqiyi.com"}),t(n)}),void 0)}}});a.exports=n});
define("components/model/asyncModel.js",["./model"],function(e,t,a){var i=e("./model");a.exports=Q.Class("AsyncModel",{ns:"Q.model",extend:i,construct:function(e){this.callsuper(),this._url=e},methods:{get:function(e,t){var a={onsuccess:function(e,a){t(a)},onfailure:function(){t(!1)},data:e,timeout:e.timeout||3e4};Q.http.json(this._url,a)},set:function(){}}})});
define("components/action/html5VV.js",["./widget"],function(e,t,a){var i=e("./widget"),n=Q.Class("Html5VV",{ns:"Q.action",extend:i,construct:function(e){this.callsuper(e),this.asyncSet({plyract:"start"})},properties:{timer:0},methods:{init:function(e){clearTimeout(this.timer),this._model.reInit(e)},start:function(e){var t=this,a=Q.event.get(e).target;this.timer=window.setInterval(function(){return a.ended||a.paused?(window.clearInterval(t.timer),t._view.onStartEvt(),void 0):(t.asyncSet({plyract:"timing"}),void 0)},1e3),t._view.unStartEvt()},close:function(){this.asyncSet({plyract:"stop"})},destroy:function(){this.timer&&window.clearInterval(this.timer),this._view.destroy()}}});a.exports=n});
define("components/view/html5VVView.js",["./widgetView"],function(e,t,a){var i,n=new Q.ic.InfoCenter({moduleName:"Html5VVView"}),o=e("./widgetView"),r=function(){this._ctrl.close();var e=this.player;e.un("ended",i)};a.exports=Q.Class("Html5VVView",{ns:"Q.view",extend:o,construct:function(e){this.callsuper(e),this.opt=e||{}},methods:{init:function(e){this.callsuper("init",e),this.player=this._doms.player,this.initEvent()},initEvent:function(){var e=this.player;this.ctrlStart=this._ctrl.start.bind(this._ctrl),i=r.bind(this),e&&e[0].play&&(this.onStartEvt(),e.on("ended",i),Q.$(window).on("beforeunload",i))},onStartEvt:function(){var e=this.player;e.on("timeupdate",this.ctrlStart)},unStartEvt:function(){var e=this.player;e.un("timeupdate",this.ctrlStart)},update:function(e){n.log("vv, update, data: "+JSON.stringify(e)),e.first&&this.sent2comScore(),this.sendPingback(e)},sent2comScore:function(){Q.log.server({c1:"1",c2:"7290408",c3:"",c4:"",c5:"",c6:""},"http://b.scorecardresearch.com/b")},sendPingback:function(e){n.log("vv, sendPingback");var t={};Q.object.extend(t,e.data),Q.object.extend(t,{prgr:parseInt(this.player[0].currentTime,10)}),("timing"===e.data.plyract||"stop"===e.data.plyract)&&Q.object.extend(t,{tl:e.tiktok}),"start"==e.data.plyract&&Q.object.extend(t,{jltl:window.__videoready-window.__start}),n.log("vv, plyract: "+e.data.plyract),Q.log.server(t,e.url)},destroy:function(){Q.$(window).un("beforeunload",i);var e=this.player;e.un("ended",i)}}})});
define("interfaces/uidInterface.js",["../kit/remoteInterface"],function(e,t,a){var i=e("../kit/remoteInterface");a.exports=Q.Class("UIDInterface",{construct:function(){var e=String(Math.floor(999999999*Math.random()))+""+(new Date).getTime(),t="http://data.video.qiyi.com/uid?tn="+e;this._remoteInterface=new i({UID:{url:t}})},methods:{request:function(e){this._remoteInterface.send({ifname:"UID",param:{},jsonp:{varname:"uid"}},function(t){"A00000"==t.code?e&&e(t.data):e({})})}}})});
define("units/pingbackKadunRate.js",["../components/units/pageJob","../kit/qiyiPlayer","../kit/uid","../kit/page","../kit/getRemoteInfo","../kit/storage","../kit/userInfo","../config/video","../components/action/checkDoms"],function(e,t,a){function i(){var e=l.getCurrent()?l.getCurrent().getUrl():location.href;return 23==Q.url.getQueryValue(e,"cnid")}var n,o=e("../components/units/pageJob"),r=e("../kit/qiyiPlayer"),s=e("../kit/uid"),l=e("../kit/page"),d=e("../kit/getRemoteInfo"),c=e("../kit/storage"),u=e("../kit/userInfo"),m=e("../config/video"),p=e("../components/action/checkDoms"),h=r.getPlayer("video"),f=!0,g=!0,v="pingbackKadunRate";o.create(v,{getDependentDoms:function(){var e={player:Q.$("#flash")};return e},check:function(e){return p(e),!0},init:function(){if(m){var e=this.getDependentDoms(),t="http://msg.71.am/err.gif",a=function(){var e=3;return Q.browser.iPad&&(e=2),Q.browser.iPhone&&(e=3),e+="1"}();d(null,function(o){var r=o.z;h.getVideoInfo(function(o){var l={flag:"error",errcode:"4015",tvid:o.tvid||"",cid:o.c||"",pla:a,z:r,lev:c.read(i()?"QIPAQVD":"QVD")||"1"},d=function(){f&&(f=!1),n=setTimeout(function e(){return h._player.ended||h._player.paused?(clearTimeout(n),h.on("playing",d),void 0):(n=setTimeout(e,1e3),void 0)},1e3),h.un("playing",d)},m=function(){var a=Object.extend({},l);u.getUid(),!f&&g&&s.get(function(i){a.suid=i,e.player[0].webkitDisplayingFullscreen===!1&&Q.log.server(a,t)})},p=function(){g=!1},v=function(){g=!0},y=function(){f=!0};h.on("playing",d),h.on("waiting",m),h.on("ready",v),h.on("userSeek",p),h.on("stoped",y)})})}}}),a.exports=v});
define("units/padPlay.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../kit/page","../model/playhistoryModel"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o=e("../kit/qiyiPlayer");e("../kit/page");var r,s=e("../model/playhistoryModel"),l=new Q.ic.InfoCenter({moduleName:"PadPlay"}),d="padPlay",c=0,u=function(e){var t=e.data;c=t.ads[0].duration},m=!1,p=!1,h=function(e){c&&(e.webkitDisplayingFullscreen?(e.webkitExitFullScreen(),e.controls=!1,m=!0):m=!1)},f=function(e){var t=e._player,a=function(){var e=Q.$("[data-videoctrl-elem=playOrStop]"),t=Q.$("[data-videoctrl-elem]");t.css("visibility","hidden"),e.css("visibility","visible")},i=function(){var e=Q.$("[data-videoctrl-elem]");e.css("visibility","visible")},n=function(){h(t)},o=function(e){var n=e.target,o=n.currentTime;o>c?(m&&(t.webkitEnterFullScreen(),m=!1),i()):(a(),n.controls=!1)};c&&(Q.$("[data-widget-videoctrl=videoControl]"),t.removeEventListener("ended",n),t.removeEventListener("timeupdate",o),t.addEventListener("timeupdate",o))};i.create(d,{getDependentDoms:function(){var e={video:Q.$("#flash")};return e},check:function(e){return n(e),!0},init:function(){Q.event.customEvent.on("adloaded",u),window.onpageshow=function(e){e.persisted&&window.location.reload(!0)},this._playVideo()},_playVideo:function(){var e=this,t=e.getDependentDoms();t.video;var a=null;if(r=o.getPlayer("video"),r.on("webkitfullscreenchange",function(){m=r._player.webkitDisplayingFullscreen}),r.on("startGetVideoSrc",function(){c=0,p=!1}),Q.event.customEvent.on("adloaded",function(){h(r._player)}),r.on("StartPlay",function(){f(r),r.getVideoInfo(function(e){l.debug("Playing video data : "+JSON.stringify(e));var t=e.tvid,i=new s;l.debug("Begin to get playhistory."),i.getByTvId({tvId:t,onsuccess:function(e){l.debug("Success getting playhistory : "+e.videoPlayTime),l.debug("Ad time : "+c),l.log("timer : "+a),a&&clearTimeout(a);var t=function(){l.debug("Waiting for ad .."),r.getPlayInfo(function(a){if(l.log("playInfo : "+a.currentTime),a.currentTime>c){var i=parseInt(e.videoPlayTime,10)+parseInt(c,10);i>0&&(l.debug("Being to seek : "+i),r.seek(i))}else setTimeout(t,500)})};a=setTimeout(function(){t()},1e3)},onfailure:function(){l.debug("No playhistory")}})})}),Q.browser.iPad&&Q.$('[data-widget-flashplayerparam="zhuanti"]')){var i=function(){r.getVideoInfo(function(e){e.vu&&-1===window.location.href.indexOf(e.vu)&&(r.getPlayerElem().load(),window.location.href=e.vu)})};r.on("play",i),r.on("playing",i)}},destroy:function(){c=0,Q.event.customEvent.un("adloaded",u),r.destroy(),r=null}}),a.exports=d});
define("model/playhistoryModel.js",["../components/model/widgetModel","../interfaces/playhistory","../kit/storage","../kit/userInfo","../kit/checkI18nType"],function(e,t,n){function a(){return 11==c?Q.cookie.get("QC005"):21==c||31==c?Q.cookie.get("QC006"):null}var i,r=e("../components/model/widgetModel"),o=e("../interfaces/playhistory"),l=e("../kit/storage"),s=e("../kit/userInfo"),m=new Q.ic.InfoCenter({moduleName:"Playhistory"}),d=e("../kit/checkI18nType");d.type||(i="TW");var h=navigator.userAgent.toLowerCase(),c=/ipad/.test(h)?21:Q.browser.android||Q.browser.iPhone||Q.browser.WP?31:11;n.exports=Q.Class("PlayhistoryModel",{extend:r,properties:{_storageKey:"playhistory"},construct:function(){this.callsuper()},methods:{getPlayhistory:function(e){var t=s.isLogin();m.log("Is login : "+t),t?this.getLoginPlayHistory(e):this.getUnLoginPlayHistory(e)},setPlayhistory:function(e){var t=s.isLogin();e.data||[],m.log("Is login : "+t),t?this.setLoginPlayHistory(e):this.setUnLoginPlayHistory(e)},getByAlbumId:function(e){e=e||{};var t=e.albumId,n=e.onsuccess,a=e.onfailure;this.getPlayhistory({onsuccess:function(e){var i=[];e.length&&(i=e.filter(function(e){return e.albumId==t?!0:void 0})),i.length>0?n&&n(i[0]):a&&a()},onfailure:a})},getByTvId:function(e){e=e||{};var t=e.tvId,n=e.onsuccess,a=e.onfailure;this.getPlayhistory({onsuccess:function(e){var i=[];e.length&&(i=e.filter(function(e){return e.tvId==t?!0:void 0})),i.length>0?n&&n(i[0]):a&&a()},onfailure:a})},getLocalPlayhistory:function(e){e=e||{},e.param||{limit:10};var t=e.onsuccess;e.onfailure;var n=l.read(this._storageKey);n=n?JSON.parse(n):[],t&&t(n)},getRemotePlayhistory:function(e){e=e||{};var t=e.param||{limit:10},n=e.onsuccess,a=e.onfailure,i=new o;i.get(Q.url.jsonToQuery(t),function(e){"A00000"==e.code?(m.log("Success getting remote data : "+JSON.stringify(e.data)),n&&n(e.data)):(m.log("Failed to get remote data. Error code : "+JSON.stringify(e.code)),a&&a(e))})},setLocalPlayhistory:function(e){var t=this;e=e||{};var n=e.data||[];this.getLocalPlayhistory({onsuccess:function(a){Q.array.isArray(n)||(n=[n]),0===a.length?a=n:n.forEach(function(e){a.forEach(function(t,n){t.tvId==e.tvId&&t.videoId==e.videoId&&a.splice(n,1)}),a.splice(0,0,e)});var i=e.onsuccess;e.onfailure,l.write(t._storageKey,JSON.stringify(a)),i&&i()}})},setRemotePlayhistory:function(e){e=e||{};var t=e.data;t.terminalId="31";var n=e.onsuccess,a=e.onfailure,i=new o;i.set(Q.url.jsonToQuery(t),function(e){"A00000"==e.code?n&&n():a&&a(e)})},getLoginPlayHistory:function(e){e=e||{};var t=e.param||{limit:10};t.auth=s.getSubAuthCookies(),t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36),e.noPPS||(t.dp=3),t.terminalId=t.terminalId||c;var n=e.onsuccess,a=e.onfailure,i=new o;i.getPcLogin(t,function(e){"A00000"==e.code?n&&n(e.data):a&&a(e)})},getUnLoginPlayHistory:function(e){e=e||{};var t=e.param||{};t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36),e.noPPS||(t.dp=3),t.limit=10,t.terminalId=t.terminalId||c,a()&&(t.ckuid=t.ckuid||a());var n=e.onsuccess,i=e.onfailure,r=new o;m.log("getUnLoginPlayHistory, param: "+JSON.stringify(t)),r.getPcUnLogin(t,function(e){"A00000"==e.code?n&&n(e.data):i&&i(e)})},setLoginPlayHistory:function(e){m.log("setLoginPlayHistory, videoName:"+e.data.videoName+", videoPlayTime:"+e.data.videoPlayTime),e=e||{};var t=e.data||{};i&&(t.locale=i),t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36),t.terminalId=t.terminalId||c;var n=e.onsuccess,a=e.onfailure,r=new o;r.setPcLogin(t,function(e){"A00000"==e.code?n&&n(e.data):a&&a(e)})},setUnLoginPlayHistory:function(e){m.log("setUnLoginPlayHistory, videoName:"+e.data.videoName+", videoPlayTime:"+e.data.videoPlayTime),e=e||{};var t=e.data||{};i&&(t.locale=i),t.terminalId=t.terminalId||c,a()&&(t.ckuid=t.ckuid||a()),t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36);var n=e.onsuccess,r=e.onfailure,l=new o;l.setPcUnLogin(t,function(e){"A00000"==e.code?n&&n(e.data):r&&r(e)})},delPlayHistory:function(e){var t=s.isLogin();t?this.delLoginHistory(e):this.delUnLoginPlayHistory(e)},delLoginHistory:function(e){e=e||{};var t=e.param||{};t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36);var n=e.onsuccess,a=e.onfailure,i=new o;i.delPcLogin(t,function(e){"A00000"==e.code?n&&n(e.data):a&&a(e)})},delUnLoginPlayHistory:function(e){e=e||{};var t=e.param||{};a()&&(t.ckuid=t.ckuid||a()),t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36);var n=e.onsuccess,i=e.onfailure,r=new o;r.delPcUnLogin(t,function(e){"A00000"==e.code?n&&n(e.data):i&&i(e)})},clearPlayHistory:function(e){var t=s.isLogin();m.log("Is login : "+t),t?this.clearLoginPlayHistory(e):this.clearUnLoginPlayHistory(e)},clearLoginPlayHistory:function(e){e=e||{};var t=e.param||{};t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36);var n=e.onsuccess,a=e.onfailure,i=new o;i.clearPcLogin(t,function(e){"A00000"==e.code?n&&n(e.data):a&&a(e)})},clearUnLoginPlayHistory:function(e){e=e||{};var t=e.param||{};a()&&(t.ckuid=t.ckuid||a()),t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36);var n=e.onsuccess,i=e.onfailure,r=new o;r.clearPcUnLogin(t,function(e){"A00000"==e.code?n&&n(e.data):i&&i(e)})},importPlayHistory:function(e){this.importLoginPlayHistory(e)},importLoginPlayHistory:function(e){e=e||{};var t=e.param||{};a()&&(t.ckuid=t.ckuid||a()),t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36);var n=e.onsuccess,i=e.onfailure,r=new o;r.importPcLogin(t,function(e){e.data?n&&n(e.data):i&&i(e)})},importSearchLogin:function(e){e=e||{};var t=e.data||{};t.terminalId=t.terminalId||c,t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36);var n=e.onsuccess,a=e.onfailure,i=new o;i.importSearchLogin(t,function(e){"A00000"==e.code?n&&n(e.data):a&&a(e.data)})},getPlayHistoryByChannel:function(e){e=e||{};var t=e.param||{},n=e.onsuccess,a=e.onfailure,i=new o;i.getPcChannel(t,function(e){"A00000"==e.code?n&&n(e.data):a&&a(e.data)})},getPlayHistoryByAlbum:function(e){var t=s.isLogin();m.log("Is login : "+t),t?this.getLoginByAlbum(e):this.getUnLoginByAlbum(e)},getUnLoginByAlbum:function(e){e=e||{};var t=e.param||{};t.terminalId=t.terminalId||c,t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36);var n=e.onsuccess,a=e.onfailure,i=new o;i.getPcUnLoginAlbum(t,function(e){"A00000"==e.code?n&&n(e.data):a&&a(e.data)})},getLoginByAlbum:function(e){e=e||{};var t=e.param||{};t.terminalId=t.terminalId||c,t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36);var n=e.onsuccess,a=e.onfailure,i=new o;i.getPcLoginAlbum(t,function(e){"A00000"==e.code?n&&n(e.data):a&&a(e.data)})},importSearchUnLogin:function(e){e=e||{};var t=e.data||{};t.terminalId=t.terminalId||c,t.cb="cb_"+Math.floor(2147483648*Math.random()).toString(36),a()&&(t.ckuid=t.ckuid||a());var n=e.onsuccess,i=e.onfailure,r=new o;r.importSearchUnLogin(t,function(e){"A00000"==e.code?n&&n(e.data):i&&i(e.data)})}}})});
define("interfaces/playhistory.js",["../kit/remoteInterface","../config/siteDomain"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/siteDomain");n.exports=Q.Class("RIPlayhistory",{construct:function(){this._remoteInterface=new a({get:{url:"http://passport.m."+i.SITE_DOMAIN+"/apis/qiyirc/getrc.php"},set:{url:"http://passport.m."+i.SITE_DOMAIN+"/apis/qiyirc/setrc.php"},getPcLogin:{url:"http://l.rcd."+i.SITE_DOMAIN+"/apis/qiyirc/getrc.php"},getTWPcLogin:{url:"http://l.rcd."+i.SITE_DOMAIN+"/apis/tw/qiyirc/getrc.php"},getPcUnLogin:{url:"http://nl.rcd."+i.SITE_DOMAIN+"/apis/urc/getrc"},getTWPcUnLogin:{url:"http://nl.rcd."+i.SITE_DOMAIN+"/apis/tw/urc/getrc"},setPcLogin:{url:"http://l.rcd."+i.SITE_DOMAIN+"/apis/qiyirc/setrc.php"},setTWPcLogin:{url:"http://l.rcd."+i.SITE_DOMAIN+"/apis/tw/qiyirc/setrc.php"},setPcUnLogin:{url:"http://nl.rcd."+i.SITE_DOMAIN+"/apis/urc/setrc"},setTWPcUnLogin:{url:"http://nl.rcd."+i.SITE_DOMAIN+"/apis/tw/urc/setrc"},delPcLogin:{url:"http://l.rcd."+i.SITE_DOMAIN+"/apis/qiyirc/delrc.php"},delPcUnLogin:{url:"http://nl.rcd."+i.SITE_DOMAIN+"/apis/urc/delrc"},clearPcLogin:{url:"http://l.rcd."+i.SITE_DOMAIN+"/apis/qiyirc/delall.php"},clearPcUnLogin:{url:"http://nl.rcd."+i.SITE_DOMAIN+"/apis/urc/delall"},importPcLogin:{url:"http://nl.rcd."+i.SITE_DOMAIN+"/apis/urc/merge"},importSearchLogin:{url:"http://l.rcd."+i.SITE_DOMAIN+"/apis/qiyirc/setsrc"},importSearchUnLogin:{url:"http://l.rcd."+i.SITE_DOMAIN+"/apis/urc/setsrc"},getPcLoginAlbum:{url:"http://l.rcd."+i.SITE_DOMAIN+"/apis/qiyirc/getalbumrc"},getPcUnLoginAlbum:{url:"http://nl.rcd."+i.SITE_DOMAIN+"/apis/urc/getalbumrc"},getChannel:{url:"http://l.rcd."+i.SITE_DOMAIN+"/apis/qiyirc/getchannel"}})},methods:{get:function(e,t){e=e||"",this._remoteInterface.send({ifname:"get",param:e,cors:!0,withCredentials:!0},function(e){t&&t(e)})},set:function(e,t){e=e||"",this._remoteInterface.send({method:"POST",ifname:"set",param:e,cors:!0,withCredentials:!0},function(e){t&&t(e)})},getPcLogin:function(e,t){e=e||"";var n=e.locale||"";delete e.locale,this._remoteInterface.send({ifname:"get"+n+"PcLogin",param:e,timeout:3e3},function(e){t&&t(e)})},getPcUnLogin:function(e,t){e=e||"";var n=e.locale||"";delete e.locale,this._remoteInterface.send({ifname:"get"+n+"PcUnLogin",param:e,timeout:3e3},function(e){t&&t(e)})},setPcLogin:function(e,t){e=e||"";var n=e.locale||"";delete e.locale,e.t=(new Date).getTime(),this._remoteInterface.send({ifname:"set"+n+"PcLogin",param:e},function(e){t&&t(e)})},setPcUnLogin:function(e,t){e=e||"";var n=e.locale||"";delete e.locale,this._remoteInterface.send({method:"POST",ifname:"set"+n+"PcUnLogin",param:e},function(e){t&&t(e)})},clearPcLogin:function(e,t){e=e||"",this._remoteInterface.send({ifname:"clearPcLogin",param:e},function(e){t&&t(e)})},clearPcUnLogin:function(e,t){e=e||"",this._remoteInterface.send({ifname:"clearPcUnLogin",param:e},function(e){t&&t(e)})},delPcLogin:function(e,t){e=e||"",e.t=(new Date).getTime(),this._remoteInterface.send({ifname:"delPcLogin",param:e},function(e){t&&t(e)})},delPcUnLogin:function(e,t){e=e||"",this._remoteInterface.send({ifname:"delPcUnLogin",param:e},function(e){t&&t(e)})},importPcLogin:function(e,t){e=e||"",this._remoteInterface.send({ifname:"importPcLogin",param:e},function(e){t&&t(e)})},importSearchLogin:function(e,t){e=e||"",this._remoteInterface.send({method:"GET",ifname:"importSearchLogin",param:e,timeout:3e3},function(e){t&&t(e)})},getPcLoginAlbum:function(e,t){e=e||"",this._remoteInterface.send({method:"GET",ifname:"getPcLoginAlbum",param:e,timeout:3e3},function(e){t&&t(e)})},getPcUnLoginAlbum:function(e,t){e=e||"",this._remoteInterface.send({method:"GET",ifname:"getPcUnLoginAlbum",param:e,timeout:3e3},function(e){t&&t(e)})},getPcChannel:function(e,t){e=e||"",this._remoteInterface.send({method:"GET",ifname:"getChannel",param:e,dataType:"jsonp",cors:!0,timeout:3e3},function(e){t&&t(e)})}}})});
define("units/videoDownTip.js",["../components/units/pageJob","../components/action/checkDoms","../config/video","../kit/qiyiPlayer"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o=e("../config/video"),r=e("../kit/qiyiPlayer"),s="videoDownTip",l=0;i.create(s,{getDependentDoms:function(){return{control_bar:Q.$("[data-widget-videoctrl=videoControl]"),layer:Q.$("[data-widget-layer=layer]")}},check:function(e){return n(e),!0},exec:function(){if(o&&Q.browser.iPad){var e=r.getPlayer("video"),t=Q.element.Element.create({tagName:"div"});t.html('<span class="DownloadBtnBar_content">下载爱奇艺视频iPad客户端观看，更高清更流畅</span><a href="http://ota.iqiyi.com/adf/46c9206aeee34627864f2ad342152894" class="DownloadBtnBar_btn" target="_blank">立即下载</a>'),t.addClass("DownloadBtnBar"),t.css("zIndex","9999");var a=this.getDependentDoms();a.layer.append(t),t.hide(),e.on("StartPlay",function(){if(l++,0===l%2)t.hide();else{t.show();var e=a.control_bar.height();t.css("bottom",e+"px"),setTimeout(function(){t.hide()},5e3)}})}}}),a.exports=s});
define("units/slideWidgetForId.js",["../components/units/pageJob","../action/slideWidgetV2"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../action/slideWidgetV2"),r="slideWidgetForId",o=25,s="widget-slidewidget-",l=Q.PageInfo.respInfo;n.create(r,{check:function(){return!0},init:function(){for(var e=this,t=0;o>t;t++){var a=Q.$("#"+s+t)||Q.$("."+s+t);try{e.initSlide(a)}catch(n){}}Q.event.customEvent.on("lazyInitSlide",function(t){var a=t.data.widget;if(!a.hasClass||a.length>1)a.forEach(function(t){e.initSlide(Q.$(t))});else{if(a.hasClass("data-slide-trailer")||a.hasClass("data-slide-responsive")){var n=l.cnf[l.curLayout];a.attr("data-slide-disp",n.extraInfo.playListViewCount),a.attr("data-slide-step",n.extraInfo.playListViewCount-1)}e.initSlide(a)}})},initSlide:function(e){if(e){var t=e.down("*[data-slide-elem=list]"),a={pbtn:e.down("*[data-slide-elem=pbtn]"),nbtn:e.down("*[data-slide-elem=nbtn]"),content:e.down("*[data-slide-elem=content]"),list:t,item:t.down("*[data-slide-item]")||t.down("li"),widget:e},n=parseInt(e.attr("data-slide-disp"),10)||0,r=parseInt(e.attr("data-slide-step"),10)||1,o=e.attr("data-slide-respparamname");if(o){var s=0;try{s=l.cnf[l.curLayout].extraInfo[o]}catch(d){}s&&(n=parseInt(s,10))}var c=e.attr("data-slide-scrollmode");"screen"===c&&(r=n-1);var m="true"===e.attr("data-slide-usedefaultoffset");new i({interval:parseInt(e.attr("data-slide-interval"),10)||6e3,disableWheel:e.attr("data-slide-disablewheel")||!1,dura:parseInt(e.attr("data-slide-dura"),10),autoPlay:void 0!==e.attr("data-slide-autoplay"),name:e.attr("data-slide-name"),enableScroll:"true"===e.attr("data-slide-enableScroll"),enableTouch:"true"===e.attr("data-slide-enableTouch"),lBtnClass:e.attr("data-slide-lBtnClass"),rBtnClass:e.attr("data-slide-rBtnClass"),itemWidth:e.attr("data-slide-itemWidth"),itemfocusclass:e.attr("data-slide-itemfocusclass"),style:e.attr("data-slide-style"),dir:e.attr("data-slide-dir"),navBarWrap:e.down("*[data-slide-navbarwrap]"),navDotWrap:e.down("*[data-slide-navdotwrap]"),navDotTpl:e.down("*[data-slide-navdottpl]"),useDefaultOffset:m||e.down("*[data-slide-useDefaultOffset]"),circle:e.attr("data-slide-circle"),doms:a,lazyLoadImage:e.attr("data-slide-lazyload"),lazyMoreHalf:e.attr("data-slide-lazymorehalf"),total:a.item.length||0,disp:n,step:r,first:parseInt(e.attr("data-slide-first"),10)||1,offset:parseInt(e.attr("data-slide-offset")||0,10)}).start(),Q.event.customEvent.fire({type:"lazyInitSlideComplete",data:{name:e.attr("data-slide-name"),widget:e}})}}}),a.exports=r});
define("units/tabForId.js",["../components/units/pageJob","../action/tab","../components/action/checkDoms"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../action/tab");e("../components/action/checkDoms");var o="tabForId",r=10,s="widget-tab-";n.create(o,{check:function(){return!0},init:function(){for(var e=0;r>e;e++){var t=Q.$("#"+s+e)||Q.$("."+s+e);if(t){var a=t.down("[data-tab-title='"+s+e+"']"),n=t.down("[data-tab-body='"+s+e+"']");a&&n&&new i({doms:{widget:t,titles:a,bodies:n}})}}}}),a.exports=o});
define("units/dramaSeries.js",["../components/units/pageJob","../components/action/checkDoms","../action/tab","../action/scrollV2","../action/dramaVlist","../model/videoSeriesModel","../interfaces/movieSoundInterface","../interfaces/cache_othlistInterface","../interfaces/vipLiveInterface","../kit/userInfo","../kit/getPicUrl","../kit/anim","../kit/artTemplate","../kit/iframeLocation","../kit/qiyiPlayer"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o=e("../action/tab"),r=e("../action/scrollV2"),s=e("../action/dramaVlist"),l=e("../model/videoSeriesModel"),d=e("../interfaces/movieSoundInterface"),c=e("../interfaces/cache_othlistInterface"),u=e("../interfaces/vipLiveInterface");e("../kit/userInfo");var p=e("../kit/getPicUrl");e("../kit/anim");var m,h,f,g,v,b,y,w,V,k,U,_,x,I,C=e("../kit/artTemplate"),L=e("../kit/iframeLocation"),P=new Q.ic.InfoCenter({moduleName:"dramaSeries"}),T=e("../kit/qiyiPlayer"),S=T.getPlayer("video"),W=Q('[data-widget-trywatch="trywatch"]'),E=W&&W.attr("data-isbossmixer")||"0",D=Q.PageInfo.playPageInfo||{},A={albumId:D.albumId,tvId:D.tvId,cid:D.cid,pageNo:D.pageNo},X=D.vType||"video",N=!0,K=0,F=0,M={pageCont:{},lastPd:0,inListPage:[],musicData:[],trailerData:[],forcastData:[],seriesData:[]},J=A.tvId,B=1,O=1,R=1,j=1,q=1,z=1,H=1,$=4,G=!1,Y=!0,Z=!1,et=Q("#widget-series-lastpage"),tt={wrap:Q.$("#widget-tv-moviesound")},at={wrap:Q.$("#widget-newtidbits")},it={wrap:Q.$("#widget-superseries")},nt=Q.$("#sounds-tidbits-header"),ot="dramaSeries",rt=[],st=Q.$("#general_info_wrap"),lt=[],dt=!1,ct="",ut="",pt="",mt="",ht=Q.$("#fixed_info_wrap"),ft=32,gt=!1,vt=!1;i.create(ot,{getDependentDoms:function(){var e=Q.$("#widget-dramaseries");return e&&(m={wrap:e,cont:e.down('*[data-series-elem="cont"]'),tpl:e.down('*[data-series-elem="tpl"]'),pageWrap:e.down('*[data-series-elem="pagewrap"]'),pageList:e.down('*[data-series-elem="pagelist"]'),pageTpl:e.down('*[data-series-elem="pagetpl"]')}),m},check:function(e){return n(e),!!m.wrap},init:function(){if(nt){ht&&(I=ht.down("[data-bigvip-elem=update]"));var e=this;e.initDoms(),e.bindEvent(),e.getDataFirst()}},initDoms:function(){N="video"===X?!0:!1,m.pageMoreList=m.wrap.down('*[data-series-elem="pagemorelist"]'),m.subtpl=m.wrap.down('*[data-series-elem="subtpl"]'),m.error=m.wrap.down('*[data-series-elem="error"]'),m.nodata=m.wrap.down('*[data-series-elem="nodata"]'),m.blank=m.wrap.down('*[data-series-elem="blank"]'),m.doUserAuth="yes"===m.wrap.attr("data-isuserauth"),m.subtpl?(G=!0,$=3):(G=!1,$=4)},bindEvent:function(){var e=this,t=Q.url.queryToJson(window.location.hash.substring(1)),a=t.vfrm||"";e.urlVfrm=a.replace(/\d$/,"2"),M.vfrm=e.urlVfrm||m.wrap.attr("data-drama-vfrm")||"",f||(f=new s({vfrm:M.vfrm})),w=e.getDataSucCallback.bind(this),V=e.getDataFailCallback.bind(this),k=e.getOnePageSuc.bind(this),U=e.getOnePageFail.bind(this),m.wrap.delegate("seriesTidbit-tab",function(e){Q.event.get(e.target).preventDefault();var t=o.getTab("dramaseriesTab");if(t){var a=t.getTabIndex("trailer")+1;t.select(a)}}),N&&(S.on("videoChanged",function(t){t=t||{},t=t.data||{},Z=!0,H=t.pd,J=t.tvid||t.tvId,y=t.vid,e.initSeries(t.pd),setTimeout(function(){e.videoChanged(t),e.doLazyLoadNext(t)},10)}),Q.event.customEvent.on("vip-videoChanged",function(t){t=t||{},t=t.data||{},Z=!0,J=t.tvid||t.tvId,y=t.vid,H=t.order,e.initSeries(H),setTimeout(function(){e.videoChanged(t),e.doLazyLoadNext({pd:t.order})},0)})),m.wrap.delegate("videoPlayList",function(t){var a=Q.event.get(t.event);a.preventDefault();var i=Q.$(t.target);e.dohandlePlaylist(i)});var i=Q.$("body");i.on("click",function(t){t=Q.event.get(t);var a=t.target;m.pageMoreList&&m.wrap.contains(a)||e.hideMoreinfo()}),Q.event.customEvent.on("vipChargeFloater-changesize",function(t){t=t||{},t=t.data||{};var a=t.small;a&&setTimeout(function(){var t=b._model._data.focus,a=e.getPage(H),i=e.getPageTabIndex(a);t==i&&e.scrollMoving(H)},100)}),Q.event.customEvent.on("reset_xuanji_scroll",function(){e.scrollMoving(H)}),"1"===E&&m.doUserAuth&&(Q.event.customEvent.on("login",function(){e.doAuthentication()}),Q.event.customEvent.on("logout",function(){e.doAuthentication()}))},getNonPositiveData:function(){var e=this;M.isLoadOther||(M.isLoadOther=!0,M.isLoadSound||e.getMovieSoundData(),M.isLoadTidbit||e.getTidbitsData())},getDataFirst:function(){var e=this,t=A.pageNo||"1";R=parseInt(t,10),e.getVideoData({pageNo:t},w,V)},getVideoData:function(e,t,a){var i=t||w,n=a||V;if(e.pageNo&&M.pageCont[e.pageNo])return i(M.pageCont[e.pageNo]),void 0;var o={albumId:A.albumId,tvId:A.tvId,pageNo:e.pageNo,pageNum:50,callSucFn:i,callFailFn:n};f.init(o)},getDataSucCallback:function(e){e=e||{};var t=this;return M.pageCont[e.pg]=e,M.inListPage.push(e.pg),e&&e.vlist&&e.vlist.length&&e.vlist.forEach(function(e){e.isYugao&&e.isYugao===!0&&rt.push(e.id)}),t.getRenderTpl(e),t.handlePageRange(e),t.addInitDataTolist(e),t.renderPageTab(e.pg),t.createPageTab(),t.pageEvent(),t.setMoreInfo(O),t.setUpdateInfo(e),e.vlist.length?(t.renderOneCont(e,O),m.cont.css("display",""),t.doAuthentication(e),Q.event.customEvent.fire({type:"serires-update-dom"}),Q.event.customEvent.fire({type:"widgetInit-scroll",data:{wrap:m.wrap,name:"daramseries"}}),setTimeout(function(){t.scrollEvent(),t.scrollMoving(H),t.doLazyLoadNext({pd:H})},0),setTimeout(function(){t.getNonPositiveData(),t.addBlankDiv(et[0])},5e3),t.initSeries(H),t.flashVideoData(),void 0):(t.getDataFailCallback(),void 0)},flashVideoData:function(){function e(e){if(e&&(!e||e.vlist.length)){var a=parseInt(e.pg,10);M.pageCont[a]=e,M.inListPage.push(a),t.addDataToFlash({before:B>a&&1!==a,after:B>a,sign:ct},e.vlist),ut===B&&(t.addOtherDataToList(),dt=!0)}}ut=O,mt=O,pt=O;var t=this;Q.event.customEvent.on("getFlashVideoData",function(a){ut=1==a.data.sign?mt+1:pt-1;var i=t.getCont(ut)||"";if(1==a.data.sign?(ct="next",mt++):(pt--,ct="prev"),i&&-1==lt.indexOf(ut))e(M.pageCont[ut]);else{if(ut>B)return t.addOtherDataToList(),dt=!0,void 0;var n={albumId:A.albumId,tvId:A.tvId,pageNo:ut,pageNum:50,callSucFn:e,callFailFn:V};f.init(n)}lt.push(ut)})},addInitDataTolist:function(e){e=e||{};var t=this,a=R-1>=1,i=B>=R+1;t.addDataToFlash({before:a,after:i},e.vlist)},handlePageRange:function(e){e=e||{};var t=e.pgt;t=parseInt(t,10),B=t;var a=e.pg;a=parseInt(a,10);var i=1,n=$,o=$,r=e.allNum;r=parseInt(r,10),j=r,1===t?(n=1,o=1):G?(n=t>3?3:t,o=t):t>4?3>a?(i=1,o=4):2>t-a?(i=t-3,o=t):(i=a-1,o=a+2):o=t,M.firstPage=i,M.midPage=n,M.lastPage=o},renderPageTab:function(e){var t=parseInt(m.wrap.attr("data-series-firstorder"),10)||1;e=parseInt(e,10);var a=M.firstPage,i=M.midPage,n=M.lastPage;M.pageRange=[];var o=[],r=[],s=0,l="",d="",c=0,u=0;G||(i=n);for(var p=a;i>=p;p++){var h=50*(p-1)+1;c=50*p,p===B&&c>j&&(c=j);var f=h+"-"+c;if(c>=t){s++;var g={idx:s,page:p,from:h,to:c,txt:f,option:'data-lazyhover="true" data-lazyhovertm="500"'};p==e&&(O=s),M.pageRange.push(g),o.push(g),l+='<div data-tab-page="body" data-page="'+p+'" data-seq="'+s+'"></div>'}else $--}B>$&&o.push({isLast:!0}),C.onerror=function(e){P.log(e),P.error(e.temp)};var b=C.compile(m.pageTpl.value()),y=b({data:o});if(m.pageList.html(y),1==B?(m.pageWrap.hide(),Y=!1):(m.pageWrap.show(),Y=!0),B>$){for(var w=i+1;B>=w;w++){var V=50*(w-1)+1;u=50*w,w===B&&u>j&&(u=j);var k=V+"-"+u;if(u>=t){s++;var U={idx:w,page:w,from:V,to:u,txt:k,option:""};w==e&&(O=s),M.pageRange.push(U),r.push(U),d+='<div data-tab-page="body" data-page="'+w+'" data-seq="'+s+'"></div>'}}var _=b({data:r});m.pageMoreList&&m.pageMoreList.html(_)}v=O,G?m.cont.html(l+d):m.cont.html(l)},createPageTab:function(){var e=m.wrap,t=e.down('*[data-tab-page="title"]'),a=e.down('*[data-tab-page="body"]');t&&a&&(b=new o({doms:{widget:e,titles:t,bodies:a}}))},pageEvent:function(){var e=this;b&&(b.on("itemclick",function(t){var a=t.data.title,i=a.attr("data-page-val");e.setMoreInfo(i)}),b.on("focuschange",function(t){t=t||{};var a=t.data.seq;e.hideMoreinfo(),e.dohandleTabFocus(a)}),b.select(O)),m.morepage=m.morepage||m.wrap.down('*[data-series-elem="morepage"]');var t=m.morepage,a=m.pageMoreList;if(t&&a){var i,n=!1;t.on("mouseenter",function(t){Q.event.get(t).preventDefault(),clearTimeout(i),i=setTimeout(function(){n||(e.showMoreFloater(),n=!0)},300)}),t.on("mouseleave",function(t){Q.event.get(t).preventDefault(),clearTimeout(i),i=setTimeout(function(){n&&(e.hideMoreFloater(),n=!1)},300)}),a.on("mouseenter",function(t){Q.event.get(t).preventDefault(),clearTimeout(i),i=setTimeout(function(){n||(e.showMoreFloater(),n=!0)},300)}),a.on("mouseleave",function(t){Q.event.get(t).preventDefault(),clearTimeout(i),i=setTimeout(function(){n&&(e.hideMoreFloater(),n=!1)},300)})}},showMoreFloater:function(){var e=b._model._data.focus;if(m.pageMoreList.show(),m.morepage.addClass("selected"),$>=e){var t=Q.$(b._view._doms.titles[e-1]);t.removeClass("selected")}},hideMoreFloater:function(){m.pageMoreList.hide();var e=b._model._data.focus;if($>=e){var t=Q.$(b._view._doms.titles[e-1]);t.addClass("selected"),m.morepage.removeClass("selected")}},dohandleTabFocus:function(e){var t=this;if(et&&(e===B?et.css("display",""):et.hide()),st&&(1===e?st.css("display",""):st.css("display","none")),ht&&(1===e?ht.css("display",""):ht.css("display","none")),e!=O){O=e,e!=M.lastPage&&t.emptyNullvideo();var a=b._view._doms.titles[e-1];a=Q.$(a);var i=a.attr("data-page-val"),n=t.getCont(i);n?(t.renderOneCont(n,e),t.resetScrollTop()):t.getVideoData({pageNo:i},k,U),t.getNonPositiveData()}},renderOneCont:function(e,t){var a=this,i=e.vlist;if(i&&i.length){var n=!0,o=b._view._doms.bodies[t-1];if(o){o=Q.$(o);var r=o.attr("data-isload");if(!r){for(var s=0;s<i.length;s++){var l=i[s],d=l.id;if(d==A.tvId){var c=e.pg;c=parseInt(c,10);var u=50*(c-1)+1,p=l.pd;p=parseInt(p,10),q=Math.ceil((p-u)/5),z=q,H=p,l.js_isvip&&(n=!1),y=l.vid}l.js_doms="",l.isNeedPay&&!K&&(K=l.pd,F=s,l.js_doms="widget-forcast-end"),l.js_vn_pd=l.vt||l.shortTitle,e.pg==B&&e.pn==s+1&&(M.lastPd=l.pd,M.lastTvid=l.tvid||l.js_tvid),N?(l.notPianhua=N,l.js_vurl="javascript:void(0);"):(l.js_vurl=l.vurl,"selected"===l.js_selected&&(l.js_selected=""))}var h=m._tpl,f=m._ulCss,g="{{#data}}"+h+"{{/data}}",v=Q.plugins.Mustache.render(g,{data:i});v='<ul class="'+f+'">'+v+"</ul>",o.html(v),o.attr("data-isload","true"),a.addBlankLine(o[0],e)}}}},addBlankLine:function(e,t){if(m.blank){if(1==B)return;return m.blank.show(),void 0}if(t.pgt>1&&t.pg!=t.pgt){var a=document.createElement("li");e.appendChild(a),Q.$(a).css("height","30px").addClass("item").addClass("last-blank")}},addBlankDiv:function(e){if(1!=B){if(m.blank)return m.blank.show(),void 0;var t=document.createElement("div");e.appendChild(t),Q.$(t).css("height","30px").addClass("item").addClass("last-blank")}},setUpdateInfo:function(e){var t=this,a=Q.$("#widget-dramaupdate"),i=Q.$("#widget-dramaupdate-info");Q.$("#play_topright_update");var n=e.ps+" "+"更新至"+e.pt+"集";if(e.pm>0&&(n=n+"/共"+e.pm+"集"),a&&i)if(e.pt&&e.pt!=e.pm)t.showUpdateInfo(n,a,i);else if(e.pt&&e.pt==e.pm){var o=e.vlist.length-1,r=e.vlist[o].isNeedPay;if(e.isBossMixer||r)t.showUpdateInfo(n,a,i);else{var s=e.pm+"集全";t.showUpdateInfo(s,a,i)}}else a.hide()},showUpdateInfo:function(e,t,a,i){if(e){t.css("display",""),a.attr("title",e);var n=e;Q.string.getLength(e)>70&&(e=Q.string.truncate(e,70,"")+"..."),a.html(e),i&&(i.css("display",""),i.html(e)),I&&(I.attr("title",n),I.html(e),ht.attr("isLoad","true"))}else t.hide()},getPageTabIndex:function(e){for(var t=1,a=M.pageRange,i=0;i<a.length;i++){var n=a[i];if(n.page==e){t=n.idx;break}}return t},getAllDataAfter:function(){var e=this,t=e.checkCurSeries();O!=M.lastPage||_&&t&&"latest"!=t||e.isInPlayList(O)&&e.addOtherDataToList()},addOtherDataToList:function(){var e=this;e.addMusicToList(),M.musicIsAddList&&e.addTrailerToList()},addTrailerToList:function(){var e=this,t=M.trailerData;!M.tidbitIsAddList&&t&&t.length&&(e.addDataToFlash({before:!0,after:!1,sign:"next"},t),M.tidbitIsAddList=!0)},addMusicToList:function(){var e=this,t=M.musicData;!M.musicIsAddList&&t&&t.length&&(e.addDataToFlash({before:!0,after:!1,sign:"next"},t),M.musicIsAddList=!0)},addDataToFlash:function(e,t){if(N&&t&&t.length){var a={index:0,source:3,after:e.after||!1,before:e.before||!1,sign:e.sign||"next",list:t,handle:!0,isRemove:e.isRemove||!1,vfrm:M.vfrm};e.type&&(a.type=e.type),Q.event.customEvent.fire({type:"common-list-ready",data:a})}},getDataFailCallback:function(e){if(e=e||{},!N){var t=o.getTab("dramaseriesTab");if(t){var a=t._view._doms.titles;a&&a.length&&Q.$(a[0]).hide()}}var i=m.nodata;i&&i.css("display","")},getTidbitsData:function(){if(at.wrap){var e=this;M.isLoadTidbit=!0,at.list=at.wrap.down('*[data-newtidbits-elem="list"]'),at.tpl=at.wrap.down('*[data-newtidbits-elem="tpl"]');var t={sourceidOrAlbumid:A.albumId,content_type:at.wrap.attr("data-trailer-conttype")},a=new c(t),i={},n=at.wrap.attr("data-trailer-idtype");n&&(i.idType=n),a.request(i,function(t){e.getTidbitCallback(t)})}},getTidbitCallback:function(e){var t=this;if("A00000"===e.code){var a=e.data||{},i=a.list;if(i&&i.length){var n=at.wrap.attr("data-shownum")||(2==D.cid?"2":"4"),o=at.wrap.attr("data-drama-vfrm")||"";n=parseInt(n,10);var r=i.length;n>r&&(n=r);for(var s=at.tpl.value(),l="",d=[],c=0,u=0;r>u&&!(c>=n);u++){var p=i[u];p.idx=c,p.js_vfrm=o;var m=t.singleHandleData(p,"2");l+=Q.plugins.Mustache.render(s,m),d.push(m),c++}M.trailerData=d,at.list.html(l),at.wrap.css("display",""),nt&&nt.css("display","");var h=Q.$("#series-tidbit-more");h&&h.css("display",""),Q.event.customEvent.fire({type:"newplaycount-lazyload",data:{wrap:at.list}}),t.resetSeriesScroll()}else M.tidbitIsAddList=!0}else M.tidbitIsAddList=!0;t.getAllDataAfter()},getMovieSoundData:function(){if(tt.wrap){M.isLoadSound=!0,tt.list=tt.wrap.down('*[data-soundlist-elem="list"]'),tt.tpl=tt.wrap.down('*[data-soundlist-elem="tpl"]');var e=this;new d({aid:A.albumId}).requestAlbums({status:1},function(t){e.getSoundCallback(t)})}},getSoundCallback:function(e){e=e||{};var t=this;if("A00000"===e.code){var a=e.data;if(a&&a.length){var i=tt.wrap.attr("data-num")||"2",n=tt.wrap.attr("data-drama-vfrm")||"";i=parseInt(i,10);var o=a.length;o>i&&(o=i);for(var r=tt.tpl.value(),s=[],l="",d=0;o>d;d++){var c=a[d].video;c.idx=d,c.js_vfrm=n;var u=t.singleHandleData(c,"1");l+=Q.plugins.Mustache.render(r,u),s.push(u)}M.musicData=s,tt.list.html(l),tt.wrap.css("display",""),nt&&nt.css("display",""),Q.event.customEvent.fire({type:"newplaycount-lazyload",data:{wrap:tt.list}}),t.resetSeriesScroll()}else M.musicIsAddList=!0}else M.musicIsAddList=!0;t.getAllDataAfter()},singleHandleData:function(e,t){e=e||{};var a,i={};"1"===t?(a=e.videoImageUrl||e.imageUrl,i.tvid=e.tvId,i.vurl=e.url,i.js_vn=e.subtitle||e.shortTitle||e.name,i.exclusive=e.exclusive,i.albumId=e.albumId,i.channelId=e.channelId,i.js_isvip=1==e.isPurchase?1:0,i.isNeedPay=e.isNeedPay):(a=e.vpic,i.tvid=e.id,i.vurl=e.vurl,i.js_vn=e.vn);var n="_160_90";return i.imageURL=a,i.js_itemPic=p(a,n),i.title=i.js_vn,i.js_playTime=Q.date.formatSeconds(e.timeLength||e.duration||0),i.vid=e.vid,i.idx=e.idx,e.js_vfrm&&(i.vurl+=i.vurl.indexOf("?")>-1?"&":"?",i.vurl+="vfrm="+e.js_vfrm),N?(i.notPianhua=N,i.js_vurl="javascript:void(0);"):i.js_vurl=i.vurl,i.js_selected="",i},scrollEvent:function(){var e=this;if(h=h||r.getScroll("daramseries")){var t;h.on("moving",function(a){e.scrollFixedWrap(a.data.contentPos),Z&&(Z=!1,h._view._doms.scrollBar.addClass("transition"),h._view._doms.scrollContent.addClass("transition"),clearTimeout(t),t=setTimeout(function(){h._view._doms.scrollBar.removeClass("transition"),h._view._doms.scrollContent.removeClass("transition")},300))}),vt=!0}},scrollFixedWrap:function(e){if(ht&&(gt=gt||ht.attr("isLoad"))){var t=ft-st.height();t>=e?ht.removeClass("dn"):ht.addClass("dn")}},scrollMoving:function(e){var t=this;if(h=h||r.getScroll("daramseries"),b&&h){var a,i=b._model._data.focus,n=M.pageRange[i-1],o=b._view._doms.bodies[i-1];o=Q.$(o);var s=e+"",l=0;if(it.wrap&&(l=it.wrap.height()),s.indexOf("sound")>-1){o&&(a=o.height());var d=e.replace("sound_","");d=parseInt(d,10),a=a+l+80*d}else if(s.indexOf("tidbit")>-1){o&&(a=o.height());var c=e.replace("tidbit_","");c=parseInt(c,10);var u=0;tt.wrap&&(u=tt.wrap.height()),a=a+l+80*c}else{var p=m._videonum,f=m._lineheight,g=n.from,v=Math.abs(Math.ceil((g-e)/p));v?(a=(v-1)*f,z=v):(z=1,a=(z-1)*f)}var y=h._model.get(),w=(a+y.contentPos)/y.rate;h.scroll(w),!vt&&w&&t.scrollFixedWrap(0-w)}},videoChanged:function(e){e=e||{};var t,a,i=this,n=e.tvid||e.tvId;n=parseInt(n,10);var o=m.wrap.down("*[data-videolist-tvid]")||[];o.length&&(o.removeClass("selected"),o.forEach(function(e){var i=Q.$(e),o=parseInt(i.attr("data-videolist-tvid"),10);n===o&&(t=i,a=i.attr("data-pd"),i.addClass("selected"))}));var r=i.getPage(a),s=i.getPageTabIndex(r);b.select(s),i.setMoreInfo(s),t&&i.moveInDown(t,a)},moveInDown:function(e,t){var a=this,i=!1,n=e.top()||0,o=n+e.height()||0,r=m.wrap.top()||0,s=r+m.wrap.height();Y&&(s-=30),(!e.isInScreen()||o>s||r>n)&&(i=!0),i&&setTimeout(function(){a.scrollMoving(t)},100)},resetScrollTop:function(){var e=this;h=h||r.getScroll("daramseries"),h&&(h.reset({}),H>=50*(O-1)&&50*O>=H&&e.scrollMoving(H))},resetSeriesScroll:function(){var e=this;h=h||r.getScroll("daramseries"),h&&(h._model.dis,h.reset({keepPos:!0}),e.scrollMoving(H))},initSeries:function(e){if(_=!1,e){e==M.lastPd&&(_=!0);var t=this;if(it.isload){if(!M.seriesData.length)return;_?t.removeFormPlayList():O==M.lastPage&&t.addOtherDataToList()}else{if(!it.wrap)return;it.isload=!0,it.title=it.wrap.down('*[data-dramaseries-elem="title"]'),it.list=it.wrap.down('*[data-dramaseries-elem="list"]'),it.tpl=it.wrap.down('*[data-dramaseries-elem="tpl"]'),S.getVideoInfo(function(e){e=e||{};var a=e.supId;x=e.albumQipuId,e.supName&&a&&t.requestSeries({supId:a})})}}},requestSeries:function(e){var t=this,a=new l(e),i=t.getSeriesSuccessCb.bind(this),n=t.getSeriesFailCb.bind(this);a.getData({callSucFn:i,callFailFn:n})},getSeriesSuccessCb:function(e){e=e||{};var t=this,a=e.supType,i=e.name;it.title&&it.title.html(i),A.albumId;var n=e.colls,o=n.length;if(1==a&&n&&o){for(var r=0;o>r;r++)n[r].contentId===x?(n[r].series_selected="selected",n[r].playUrl="javascript:void(0);",n[r].delegateTag=""):(n[r].series_selected="",n[r].delegateTag='j-delegate="loction2Watched"');M.seriesData=n;var s=it.tpl.value(),l=C.compile(s),d=l({data:n});it.list.html(d),it.wrap.show(),Q.event.customEvent.fire({type:"newplaycount-lazyload",data:{wrap:it.list}}),_&&t.removeFormPlayList(),O==B&&t.resetScrollTop(),setTimeout(function(){t.seriesEvent()},100)}},getSeriesFailCb:function(){M.seriesData=[]},removeFormPlayList:function(){var e=this,t=e.checkCurSeries();if("latest"!==t){var a=[],i=function(e,t){var a=e.length;a&&(e.forEach(function(e){var t={tvid:e.tvid||e.tvId,vid:e.vid};S.removeVideoList&&S.removeVideoList({list:[t]})}),M[t]=!1)},n=M.musicData||[],o=M.trailerData||[];i(n,"musicIsAddList"),i(o,"tidbitIsAddList"),a.length&&S.removeVideoList&&S.removeVideoList({list:a})}},checkCurSeries:function(){var e=M.seriesData,t=e.length,a=0;return t?(1==t?a=0:(e.forEach(function(e,t){e.albumId==A.albumId&&(a=t+1)}),a&&a!=t||(a="latest")),a):a},seriesEvent:function(){var e=this;S.on("EndPlay",function(){if(J==M.lastTvid){var t=it.list.down("li");t.length;var a,i=e.checkCurSeries();if("latest"!==i){a=Q.$(t[i]);var n=a.attr("data-playurl"),o=a.attr("data-aid");o!=A.albumId&&n&&L.href(n)}}})},getCont:function(e){var t,a=M.pageRange;return a.forEach(function(a){a.page==e&&(t=M.pageCont[e])}),t},getRenderTpl:function(e){e=e||{};var t=m.tpl.value(),a="juji-list clearfix",i=5,n=53,o=e.vlist||[],r=o[0]||{},s=r.vt||"";s=s.trim(),m.subtpl&&s&&(t=m.subtpl.value(),a="juji-list juji-list-txt clearfix",i=1,n=49),m._tpl=t,m._ulCss=a,m._videonum=i,m._lineheight=n},getDataOnePage:function(e,t,a){e=e||{};var i=this,n=e.page,o=i.getCont(n);o?i.onePageAbout(o,n):i.getVideoData({pageNo:n},t,a)},getOnePageSuc:function(e){e=e||{};var t=this;if(!e.vlist.length)return t.getOnePageFail(),void 0;var a=parseInt(e.pg,10);M.pageCont[a]=e,t.onePageAbout(e,O)},getOnePageFail:function(e){e=e||{};var t=m.nodata;if(t){var a=b._view._doms.bodies[O-1];Q.$(a).html(t.html())}},onePageAbout:function(e,t){var a=this;a.renderOneCont(e,t),Q.event.customEvent.fire({type:"widgetInit-scroll",data:{wrap:m.wrap,name:"daramseries"}})},dohandlePlaylist:function(e){var t,a=this,i=e.attr("data-pd"),n=i+"";if(n.indexOf("sound")>-1||n.indexOf("tidbit")>-1){t=M.lastPage;var o=a.isInPlayList(t);o||a.addPageToList(t),dt||a.addOtherDataToList(),pt=mt=t}else t=parseInt(i/50,10),i%50&&(t+=1),a.isInPlayList(t)||a.addPageToList(t,1),t!=M.lastPage||dt||a.addOtherDataToList(),pt=mt=t},addPageToList:function(e,t){var a=this,i=!1,n=!1;S.removeVideoList({list:[]}),M.inListPage=[],a.emptyNullvideo();var o=a.getCont(e),r=o.vlist;1==t&&(i=e-1>=1,n=B>=e+1),a.addDataToFlash({before:i,after:n,sign:e>R?"next":"prev",isRemove:!0},r),M.inListPage.push(e)},emptyNullvideo:function(){M.tidbitIsAddList=M.isLoadTidbit?M.trailerData.length?!1:!0:!1,M.musicIsAddList=M.isLoadSound?M.musicData.length?!1:!0:!1},getPage:function(e){var t,a=e+"";return a.indexOf("sound")>-1||a.indexOf("tidbit")>-1?t=B:(t=parseInt(e/50,10),e%50&&(t+=1)),t},doLazyLoadNext:function(e){var t=this,a=e.pd;if(!(a%50)){var i=a/50+1;if(!(i>B)){var n=t.getCont(i);n&&n.vlist?t.addNextPage(i):t.getDataOnePage({page:i},function(e){var a=e.pg;M.pageCont[a]=e;var n=t.getPageTabIndex(a);t.renderOneCont(e,n),t.addNextPage(i)},function(){})}}},addNextPage:function(e){var t=this,a=t.getCont(e);if(!t.isInPlayList(e)&&a&&a.vlist){var i=a.vlist;t.addDataToFlash({before:!0,after:B>e,sign:"next"},i),pt=mt=e,M.inListPage.push(e),t.addOtherDataToList()}},hideMoreinfo:function(){var e=m.pageMoreList;e&&e.hide()},setMoreInfo:function(e){if(e&&m.morepage){var t=m.morepage.down("span"),a=M.pageRange[e-1];if(a&&t){var i=a.txt;$>=e?m.morepage.removeClass("selected"):(m.morepage.addClass("selected"),t.html(i))}}},isInPlayList:function(e){for(var t=!1,a=M.inListPage,i=0;i<a.length;i++)if(e==a[i]){t=!0;break}return!!t},doAuthentication:function(){var e=this,t=D.albumPurType;t&&0!==t&&12!==D.cid&&u.checkBuyState({aid:A.albumId,cid:"afbe8fd3d73448c9",P00001:Q.cookie.get("P00001")||"",t:Math.random()},function(a){a=a||{},m.isAuth="A00000"===a.code?!0:!1,M.forcastData.length?e.forcastToggle():m.isAuth||1!==t||e.getForecastData(function(t){t=t||{},"A00000"===t.code&&(t=t.data||{},t.list&&t.list.length&&e.handleForecastData(t)),M.isLoadForecast=!0,e.forcastToggle()})})},getForecastData:function(e){var t={sourceidOrAlbumid:A.albumId,content_type:"1"},a=new c(t),i={idType:"album"};a.request(i,function(t){e&&e(t)})},handleForecastData:function(e){var t=this,a=M.pageCont[v].vlist,i=e.list,n=[];if(rt.length&&i.length&&i.forEach(function(e,t){-1!=rt.indexOf(e.id)&&i.splice(t,1)}),i.length){var o=K,r=F,s={};i.forEach(function(e){var t=e.order;(t===o||t===o+1||t===o+2)&&(s[t]||(s[t]=e))});for(var l=o;o+3>l;l++){var d=s[l];d&&(d.pd=d.order||r+1,d.tvId=d.id,d.js_tvid=d.id,d.albumId=d.aId,d.js_vurl=d.vurl,d.describe=d.desc,d.cid=d.cid||A.cid,d.publishTime=d.tvYear,d.channelId=d.vpic,d.exclusive=d.exclusive||"",d.title=d.vn||d.shortTitle,d.js_vn_pd=d.title,d.js_yugao="",d.js_fufei="dn",d.js_needVip="dn",d.js_needfufei="dn",d.js_needTicket="dn",d.js_new="dn",d.notPianhua=N,d.js_isForcast=!0,n.push(d),M.forcastData.push(d),a.splice(r,0,d),r++,o++)}}if(n.length){g=Q("#widget-forcast-end");var c=m._tpl,u="{{#data}}"+c+"{{/data}}",p=Q.plugins.Mustache.render(u,{data:n});g&&g.before(p),t.resetScrollTop()}},forcastToggle:function(){var e=this;M.isLoadForecast&&(m.isAuth?e.removeForcastData():e.addForcastData())},removeForcastData:function(){var e=m.cont.down('*[data-series-elem="forcast"]')||[];if(e.length){e.hide();var t=M.forcastData;t.forEach(function(e){var t={tvid:e.tvid||e.tvId,vid:e.vid};S.removeVideoList&&S.removeVideoList({list:[t]})})}},addForcastData:function(){var e=this,t=m.cont.down('*[data-series-elem="forcast"]')||[];if(t.length){t.show();var a=M.pageCont[v];e.isInPlayList(v)&&(S.removeVideoList({list:[]}),M.inListPage=[],e.emptyNullvideo()),e.addInitDataTolist(a,2),M.inListPage.push(v),S.switchVideo&&S.switchVideo({tvid:J,vid:y,tvId:J}),e.addOtherDataToList()}}}),a.exports=ot});
define("action/dramaVlist.js",["../components/action/adapter","../model/dramaVlistModel"],function(e,t,a){var i=e("../components/action/adapter"),n=e("../model/dramaVlistModel");new Q.ic.InfoCenter({moduleName:"dramaVlist"}),a.exports=Q.Class("dramaVlist",{extend:i,construct:function(e){e=e||{},e.model=e.model||new n(e),this.widget=e,this.callsuper(e)},methods:{init:function(e){var t=this;t._model.getData(e)}}})});
define("model/dramaVlistModel.js",["../components/model/model","../interfaces/cache_avlistInterface","../kit/getPicUrl","../kit/videoIsNewYugao"],function(e,t,a){var i=e("../components/model/model");new Q.ic.InfoCenter({moduleName:"dramaVlistModel"});var n=e("../interfaces/cache_avlistInterface"),o=e("../kit/getPicUrl"),r=e("../kit/videoIsNewYugao"),s=null,l={},d={};a.exports=Q.Class("dramaVlistModel",{extend:i,construct:function(e){e=e||{},this.vfrm=e.vfrm||this.vfrm||""},methods:{init:function(e){e=e||{},s||(s=new n)},getData:function(e){var t=this;t.callSucFn=e.callSucFn,t.callFailFn=e.callFailFn,d.tvId=e.tvId;var a=e.albumId,i=e.pageNo;if(l[a]||(l[a]={}),l[a][i])t.callSucFn&&t.callSucFn(l[a][i]);else{var n={albumId:a,pageNo:i};e.pageNum&&(n.pageNum=e.pageNum),s.request(n,t.getDataCallback.bind(this))}},getDataCallback:function(e){var t=this;if("A00000"===e.code){t.dataHandle(e.data);var a=e.data;l[a.aid+""][a.pg]=a,t.callSucFn&&t.callSucFn(a)}else t.callFailFn&&t.callFailFn()},dataHandle:function(e){var t=this,a=r.playJujiTag(e);1===a&&(r.videoIsYu(e),r.videoIsNew(e));var i=e.pm||1;i=parseInt(i,10);var n;3>i?n=1:(n=2*i/3,2*i%3&&(n=parseInt(n,10)));for(var o=e.vlist,s=o.length,l=0;s>l;l++){var d=o[l];d.canScore="0",d.pd==n&&(d.canScore="1"),t.parseNewData(d),("selected"==d.js_selected||d.selected)&&(e.playingNum=l+1)}},parseNewData:function(e){var t,a=e,i=a.vpic||a.aPicUrl,n="";if(e.pubTime){var r=[],s="";t=e.pubTime;for(var l=0;l<t.length;l++)s+=t.charAt(l),0!==l&&0===(l+1)%2&&(r.push(s),s="");n=r?r[0]+"月"+r[1]+"日"+r[2]+":"+r[3]+"更新":"",e.yugaoevent="j-delegate=genbo"}e.yugao=n,a.tvYear&&(a.js_tvyear=a.tvYear.replace(/-/g,"")),a.aName||a.vn,e.series_name="第"+a.pd+"集",e.yugao&&(e.series_name+="预告片");var c=this.picsize||"_160_90";i&&(e.js_itemPic=o(i,c)),e.vUrl&&this.vfrm?e.vUrl=a.vUrl+"#vfrm="+this.vfrm:this.vfrm&&a.vurl&&(e.vurl=a.vurl+"#vfrm="+this.vfrm),e.js_isvip=1==e.purType?1:0,e.js_tvid=e.tvId||e.id,e.js_selected=parseInt(e.tvId||e.id,10)==d.tvId?"selected":"no",e.js_itemName=a.vt||a.tvSbtitle||a.aName||a.vn,0===e.freeProbation&&(e.isNeedPay=!0),e.js_yugao=e.isYugao?"":"dn",e.js_fufei="dn",e.js_new="dn",e.js_needVip="dn",e.js_needfufei="dn",e.js_needTicket="dn",e.isNeedPay&&(e.js_fufei=""),e.isNeedPay||e.purType&&2===e.purType?(e.js_fufei="",1===e.payMark?e.js_needVip="":2===e.payMark?e.js_needfufei="":3===e.payMark&&(e.js_needTicket="")):e.isNew&&(e.js_new="")}}})});
define("interfaces/cache_avlistInterface.js",["../kit/remoteInterface","./config","../kit/checkI18nType"],function(e,t,n){var a,i=e("../kit/remoteInterface"),r=e("./config"),o=e("../kit/checkI18nType");o.type||(a="zh_tw"),n.exports=Q.Class("CacheAvListInterFace",{construct:function(){this._remoteInterface=new i({cacheAvListData:{baseUrl:r.interfaces.avlist}})},methods:{request:function(e,t){e=e||{},e.pageNo=e.pageNo||1;var n=this._remoteInterface._remoteInterfaces.cacheAvListData;n.url=n.baseUrl+e.albumId+"/"+e.pageNo+"/",e.pageNum&&(n.url+=e.pageNum+"/"),a&&(e.locale=a),this._remoteInterface.send({ifname:"cacheAvListData",param:e,dataType:"jsonp",qoe:!0,memory:!0},function(n){t&&t(n,e)})}}})});
define("kit/videoIsNewYugao.js",[],function(e,t,a){a.exports={newsur:!1,playJujiTag:function(e){return e.pt&&e.pm&&e.pt<e.pm||0===e.pm&&e.pt&&e.pt>e.pm?1:0},videoIsYu:function(e){for(var t=e.vlist||[],a=t.length,i=0;a>i;i++){var n=t[i];"pubTime"in n&&(n.isYugao=!0)}},videoIsNew:function(e){var t,a,i=0,n=new Date,o=n.getTime();t=e.pt-e.pg*e.pp,t=0>=t?3:t>=3?0:3-t;var r=e.vlist||[],s=r.length;if(0!==t)for(var l=s-1;l>=0;l--){var d=r[l],c=d.publishTime;if(c&&(a=(o-c)/864e5,a>=0&&7>=a&&!r[l].isYugao&&(r[l].isNew=1,i++),i>=t))break}}}});
define("interfaces/movieSoundInterface.js",["../kit/remoteInterface","./config"],function(e,t,a){var i=e("../kit/remoteInterface"),n=e("./config").interfaces;a.exports=Q.Class("MovieSoundInterface",{construct:function(e){e=e||{},this._remoteInterface=new i({soundAlbums:{url:n.soundAlbums+e.aid+"/songs/"},soundVideos:{url:n.soundVideos+e.tvid+"/songs/"}})},methods:{requestAlbums:function(e,t){e=e||{},this._remoteInterface.send({ifname:"soundAlbums",param:e,dataType:"jsonp"},function(e){t&&t(e)})},requestVideos:function(e,t){e=e||{},this._remoteInterface.send({ifname:"soundVideos",param:e,dataType:"jsonp"},function(e){t&&t(e)})}}})});
define("interfaces/cache_othlistInterface.js",["../kit/remoteInterface","./config","../kit/checkI18nType"],function(e,t,a){var n,i=e("../kit/remoteInterface"),o=e("./config"),r=e("../kit/checkI18nType");r.type||(n="zh_tw"),a.exports=Q.Class("CacheOthlistInterface",{construct:function(e){e=e||{},this._remoteInterface=new i({otherlist:{url:o.interfaces.othlist+e.sourceidOrAlbumid+"/"+e.content_type+"/desc/"}})},methods:{request:function(e,t){e=e||{},n&&(e.locale=n),this._remoteInterface.send({ifname:"otherlist",param:e,qoe:!0,dataType:"jsonp"},function(a){t&&t(a,e)})}}})});
define("units/seriesForScroll.js",["../components/units/pageJob","../components/action/checkDoms","../action/tab","../action/scrollV2","../kit/responsive","../kit/qiyiPlayer"],function(e,t,a){var i,n,o,r,s=e("../components/units/pageJob"),l=e("../components/action/checkDoms"),d=e("../action/tab"),c=e("../action/scrollV2"),u=e("../kit/responsive"),p=e("../kit/qiyiPlayer"),m=p.getPlayer("video"),h=Q.PageInfo&&Q.PageInfo.respInfo||{},f=Q('[data-widget-trywatch="trywatch"]'),g=f&&f.attr("data-isbossmixer")||"0",v=Q(".J_drama_title"),b=Q(".J_drama_update"),y=Q.$(".J_drama_vip")||Q.$('[data-widget-moviepaybtn="btn"]')||Q.$('[data-paopao-newpaybtn="btn"]'),w=Q(".J_drama_activity"),V=Q(".J_drama_tabtag"),k=Q.$("#general_info_wrap"),U=Q(".J_drama_scroll"),_=["daramseries","pointscroll","trailerscroll","vipbuy"],x=Q.event.customEvent,I=Q.$("#fixed_vipbuy_btn"),C=Q.$("#fixed_info_wrap"),L=Q.$("#fixed-dingyue-wrap"),P=Q.$("#fixed-award-wrap"),T="seriesForScroll";s.create(T,{getDependentDoms:function(){var e=Q.$("#widget-dramaseries")||Q.$("#widget-sourcelatest");return e&&(i={wrap:e}),i},check:function(e){return l(e),!!i.wrap},init:function(){var e=this;e.bindEvent()},exec:function(){},bindEvent:function(){var e=this;n=d.getTab("dramaseriesTab"),n&&n.on("focuschange",function(){o=!0,e.doChange()}),Q.event.customEvent.on("serires-update-dom",function(){e.doChange()}),u.on("bodyClassChange",function(t){t=t||{},e.doChange(1)}),m.on("authenticationResult",function(t){e.handleAuth(t)}),x.on("tabshow-shop",function(t){var a=t&&t.data||{};e.shopSelect(a)}),x.on("vipChargeFloater-changesize",function(t){t=t||{},t=t.data||{};var a=t.small;a&&e.doChange()}),x.on("video-vipBtn",function(t){t=t||{},t=t.data||{},e.showVipBtn(t.isShow)}),x.on("logout",function(){"1"===g?e.handleAuth({data:!0}):e.handleAuth({data:!1})})},doChange:function(e){if(e||"newPaopapWrap"!==i.wrap.attr("data-drama-wrap")){var t=this,a=u.getCurrentLayout();t.setHeight(a),t.resetScroll()}},showVipBtn:function(e){var t=this;e?(y&&y.css("display",""),I&&(I.removeClass("dn"),C.attr("isLoad","true"),r=C.down("[data-bigvip-elem=update]"),r.addClass("dn")),L&&L.addClass("dn"),P&&P.addClass("dn")):(y&&y.hide(),I&&(I.addClass("dn"),r.removeClass("dn")),L&&!L.attr("showCss")&&L.removeClass("dn"),P&&P.attr("isLoad")&&P.removeClass("dn")),k?Q.event.customEvent.fire({type:"reset_xuanji_scroll"}):t.doChange()},setHeight:function(e){var t=this;e=e||h;var a=e.curLayout||e.layout,n=h.cnf[a]||{},o=n.extraInfo.rightWrapHeight||417,r=t.getHeight(v),s=o-r,l=0;b&&"none"!==b.css("display")&&(l=t.getHeight(b)),s-=l;var d=t.getHeight(w);s-=d;var c=0;y&&"none"!==y.css("display")&&"newPaopapWrap"!==i.wrap.attr("data-drama-wrap")&&(c=t.getHeight(y)),s-=c;var u=V.outerHeight(!0);s-=u,s+="px",U&&U.height(s)},getHeight:function(e){var t=0;return e&&e.length&&(t+=e.css("paddingTop"),t+=e.css("paddingBottom"),t+=e.css("marginTop"),t+=e.css("marginBottom"),t+=e.css("borderTop"),t+=e.css("borderBottom"),t=parseInt(t,10),t+=e.height()),t},resetScroll:function(){for(var e=0;e<_.length;e++){var t=_[e],a=c.getScroll(t);if(a){var i=a._view._doms.widget;i.isInScreen()&&a.reset()}}},shopSelect:function(e){if(n){n._view._doms.titles;var t=n.getTabIndex("shop")+1;n.select(t),o=!1,e&&e.switchback&&setTimeout(function(){o||n.select(1)},1e4)}},handleAuth:function(e){var t=this,a=e.data.isTryWatch;void 0===a&&(a=e.data),a?y&&y.length&&"none"===y.css("display")&&(y.css("display",""),t.doChange()):y&&y.length&&"none"!==y.css("display")&&(y.hide(),t.doChange())}}),a.exports=T});
define("units/dramaTrailer.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/cache_othlistInterface","../action/tab","../kit/getPicUrl","../kit/qiyiPlayer"],function(e,t,a){var i,n,o,r,s,l,d=e("../components/units/pageJob"),c=e("../components/action/checkDoms"),u=e("../interfaces/cache_othlistInterface"),p=e("../action/tab"),m=e("../kit/getPicUrl"),h=e("../kit/qiyiPlayer"),f=h.getPlayer("video"),g="dramaTrailer",v=Q.PageInfo&&Q.PageInfo.playPageInfo||{},b=v.albumId,y=v.tvId,w=v.vType,V="trailer"===w,k="selected",U=null,_=!0,x=!1,I=Q.$("#widget-tab-0"),C=0;d.create(g,{getDependentDoms:function(){var e=Q.$("#widget-dramatrailer");return e&&(i={wrap:e,cont:e.down('*[data-dramatrailer-elem="cont"]'),list:e.down('*[data-dramatrailer-elem="list"]'),load:e.down('*[data-dramatrailer-elem="load"]'),error:e.down('*[data-dramatrailer-elem="error"]'),tpl:e.down('*[data-dramatrailer-elem="tpl"]')}),i},check:function(e){return c(e),!!e},init:function(){var e=this;i.slidebtn=i.wrap.down('*[data-slide-elem="slidebtnwrap"]');var t=Q.url.queryToJson(window.location.hash.substring(1)),a=t.vfrm||"";e.urlVfrm=a.replace(/\d$/,"2"),e.vfrm=i.wrap.attr("data-trailer-vfrm")||"",e.picsize="_160_90",Q.event.customEvent.on("getVideoFromVrs-error",function(t){t=t||{},_=!1,e.dohandleNoDrama()})},exec:function(){var e=this;e.initJujiTab(),e.getTrailerData(),e.bindEvent()},initJujiTab:function(){n||(n=p.getTab("dramalistTab")),n||(n=p.getTab("dramaseriesTab")),n&&(o=n._view._doms.titles,r=n._view._doms.bodies,s=o[n.getTabIndex("trailer")],n.on("focuschange",function(e){var t=e.data.title,a=t.attr("data-flag"),n=t.attr("data-isload");n||"trailer"!==a||(t.attr("data-isload","true"),Q.event.customEvent.fire({type:"lazyInitSlide",data:{widget:i.wrap}}),Q.event.customEvent.fire({type:"singleSlideResp-btnShowHide",data:{wrap:i.wrap,len:C}}),Q.event.customEvent.fire({type:"widgetInit-scroll",data:{wrap:i.wrap,name:"trailerscroll"}}))}))},initDataDom:function(){var e=this,t={sourceidOrAlbumid:b,content_type:i.wrap.attr("data-trailer-conttype")},a=new u(t),n={},o=i.wrap.attr("data-trailer-idtype");o&&(n.idType=o),a.request(n,function(t){"A00000"===t.code?(V&&e.addToFlash(t.data),e.renderData(t.data)):e.getDataError(),e.dohandleNoPianhua()})},renderData:function(e){var t=this,a=e.list;if(a.length){C=a.length,t.showWholeblock(),U=a,i.load.hide();var n=i.tpl.value(),o="",r=i.wrap.attr("data-vnmaxsize")||"0";r=parseInt(r,10);for(var s=0;s<a.length;s++){var l=a[s];if(V?(l.isPianhua=V,l.js_vurl="javascript:void(0);"):l.js_vurl=l.vurl,r&&l.vn){var d=Q.string.getLength(l.vn);l["vn_"+r]=d>r?Q.string.truncate(l.vn,r,"..."):l.vn}l.idx=s;var c=t.dohandleData(l);o+=Q.plugins.Mustache.render(n,c)}i.list.html(o),i.list.css("display",""),i.cont.css("display",""),i.error.hide(),t.showTabtag(),i.slidebtn&&i.slidebtn.css("display",""),Q.event.customEvent.fire({type:"newplaycount-lazyload",data:{wrap:i.cont}}),V&&Q.event.customEvent.fire({type:"widgetInit-scroll",data:{wrap:i.wrap,name:"trailerscroll"}})}else t.hideTabtag()},showTabtag:function(){if(s){var e=Q.$(s);"none"===e.css("display")&&e.css("display","")}},hideTabtag:function(){if(s){var e=Q.$(s);"none"!==e.css("display")&&e.hide(),V&&n.select(1)}},getDataError:function(){this.hideTabtag()},dohandleNoPianhua:function(){var e=this;_?e.showWholeblock():U?(e.showWholeblock(),e.doHandleAddEvent()):e.hideWholeblock()},dohandleNoDrama:function(){var e=this;U?(e.showWholeblock(),e.doHandleAddEvent()):e.hideWholeblock()},doHandleAddEvent:function(){var e=this;if(!x){x=!0,e.addToList(),e.responsVideochange();var t=n.getTabIndex("shop")+1;setTimeout(function(){n.select(t)},50)}},showWholeblock:function(){I&&"none"==I.css("display")&&I.css("display","")},hideWholeblock:function(){I&&I.hide()},addToList:function(){for(var e=this,t=[],a=0;a<U.length;a++){var i=U[a];t.push({videoName:i.vn,vid:i.vid,aId:i.aid||b,tvId:i.id,tvYear:i.tvYear,tvPicUrl:i.vpic,cid:i.channelId,exclusive:i.exclusive,purType:i.purType})}var n={index:0,source:2,after:!1,before:!1,list:t,vfrm:e.urlVfrm};Q.event.customEvent.fire({type:"common-list-ready",data:n})},responsVideochange:function(){var e=this;i.phList=i.list.down("li"),i.phList&&(e.changeStatus({tvid:y}),i.phList.length>1&&f.on("videoChanged",function(t){t=t||{},t=t.data||{};var a=t.tvid;e.changeStatus({tvid:a})}))},changeStatus:function(e){e=e||{};var t=e.tvid;t&&i.phList.forEach(function(e){var a=Q.$(e),i=a.attr("data-tvid");t==i?a.addClass(k):a.hasClass(k)&&a.removeClass(k)})},dohandleData:function(e){var t=this,a=e;e.timeLength&&(a.playTime=Q.date.formatSeconds(e.timeLength));var i=e.vpic;return i&&(a.vpic_160_90=i.replace(".jpg","_160_90.jpg")),a.only=parseInt(e.exclusive,10),a.exclusive=parseInt(e.exclusive,10),a._1080p=parseInt(e.is_1080p,10),a._iqiyiself=parseInt(e.qiyiProduced,10),a.vurl&&t.vfrm&&-1===a.vurl.indexOf("vfrm")&&(a.vUrl_vf=a.vurl+"#vfrm="+t.vfrm),a},getTrailerData:function(){var e=this;f.getVideoInfo(function(t){t&&(e.doHandleCurrentVideo(t),e.initDataDom())})},bindEvent:function(){var e=this;V&&f.on("videoChanged",function(t){e.changeListStatus(t)}),i.wrap.delegate("videoPlayList-short",function(e){Q.event.get(e.event).preventDefault();var t=Q.$(e.target),a=t.attr("data-tvid"),i=t.attr("data-vid");f.switchVideo&&f.switchVideo({tvid:a,vid:i,tvId:a})})},addToFlash:function(e){e=e||{},e=e.list||[];for(var t=this,a=[],i=0,n=0;n<e.length;n++){var o=e[n];a.push({tvId:o.id,vid:o.vid,albumId:o.aId,describe:o.desc,cid:o.cid||v.cid,publishTime:o.tvYear,channelId:o.vpic,exclusive:o.exclusive,vpic:o.vpic,purType:o.purType,title:o.vn||o.shortTitle}),o.id===v.tvId&&(o.selcss="selected",i=n+1),o.isPianhua="true"}V&&!i&&(e.unshift(l),a.unshift(l));var r={index:0,source:2,after:!1,before:!1,list:a,vfrm:t.urlVfrm};Q.event.customEvent.fire({type:"common-list-ready",data:r})},doHandleCurrentVideo:function(e){var t={vn:e.vn,vid:e.vid,aId:e.aid,id:e.tvid,tvYear:e.ty,vpic:e.vpic,selcss:"selected",isPianhua:"true"};this.picsize&&(t["tvPicUrl"+this.picsize]=m(t.vpic,this.picsize)),l=t},changeListStatus:function(e){e=e||{},e=e.data||{};var t=e.tvid||e.tvId,a=i.list=i.wrap.down("*[data-tvid]");a.length&&a.forEach(function(e){var a=Q.$(e),i=a.attr("data-tvid");i==t?a.addClass("selected"):a.removeClass("selected")})},initTrailerScroll:function(){Q.event.customEvent.fire({type:"widgetInit-scroll",data:{wrap:i.wrap,name:"trailerscroll"}})}}),a.exports=g});
define("units/sourceViewpoint.js",["../components/units/pageJob","../components/action/checkDoms","../kit/videoInfo","../action/tab","../kit/qiyiPlayer"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms"),e("../kit/videoInfo");var n,o,r,s,l,d=e("../action/tab"),c=e("../kit/qiyiPlayer"),u=c.getPlayer("video"),p=new Q.ic.InfoCenter({moduleName:"SourceViewpoint"}),m="sourceViewpoint",h=0,f=!1,g=Q.PageInfo||{},v=g.playPageInfo||{},b=v.wallId;i.create(m,{getDependentDoms:function(){var e=Q.$("#widget-sourceviewpoint");return e&&(n={wrap:e,vwrap:e.down('*[data-sourceviewpoint-elem="wrap"]'),vlist:e.down('*[data-sourceviewpoint-elem="list"]'),tpl:e.down('*[data-sourceviewpoint-elem="tpl"]')}),n},check:function(){return!0},init:function(){var e=this;e.getTab(),f=b&&Q("[data-paopao-ele=titleBtn]")[0]?!0:!1,e.getPointData(),e.bindEvent()},bindEvent:function(){var e=this;Q.$(document).delegate("j-videoKeyPoints",function(e){var t=Q.event.get(e.event);t.preventDefault();var a=Q.$(e.target),i=a.attr("data-timestamp");i?u.seek(i):p.warn("this videoKeyPoint don't has an timestamp")}),u.on("videoChanged",function(t){t=t||{},t=t.data||{};var a=t.circle||{},i=t.isDisplayCircle||t.displayCircle;1==i&&2==a.type&&a.id?f=!0:(f=!1,e.getPointData())}),Q.event.customEvent.on("vip-videoChanged",function(t){t=t||{},t=t.data||{};var a=t.circle||{},i=t.isDisplayCircle||t.displayCircle;1==i&&2==a.type&&a.id?f=!0:(f=!1,e.getPointData())}),Q.event.customEvent.on("paoControl_update",function(t){t=t.data||{},f=t.paopaoWall?!0:!1,e.getPointData()})},itemEvent:function(){var e="videoTit-green";n.list=n.wrap.down('*[data-sourceviewpoint-elem="item"]'),n.list&&(n.list.on("mouseenter",function(){var t=Q.$(this);t.addClass(e)}),n.list.on("mouseleave",function(){var t=Q.$(this);t.removeClass(e)}))},getTab:function(){var e=this;o||(o=d.getTab("sourceListTab")),o||(o=d.getTab("dramalistTab")),o||(o=d.getTab("dramaseriesTab")),o&&(l=o.getTabIndex("viewpoint"),r=o._view._doms.titles,s=o._view._doms.bodies,o.on("focuschange",function(t){var a=t.data.title,i=a.attr("data-flag");"viewpoint"===i&&e.initPointScroll()}))},getPointData:function(){var e=this,t="",a=n.tpl.value();u.getVideoInfo(function(i){var s=0;if(Q.array.isArray(i.votes)&&i.votes.length>0)for(var d=0;d<i.votes.length;d++){var c=i.votes[d];3!==c.type&&2!==c.type||!c.id||s++}if(f&&!Q.browser.IE6&&s++,s>0)return e.hideViewpoint(),void 0;if(i&&i.fl&&i.fl.length&&i.fl[0].img){for(var u=0;u<i.fl.length;u++){var p=i.fl[u];p.index=u,p.des=p.c;var m=p.t,g=Math.floor(m/60)+"分";g.length<2&&(g="0"+g);var v=m%60+"秒处";p.time=g+v,p.img&&p.img.indexOf("_180_101")<0&&(p.img=p.img.replace(".jpg","_180_101.jpg")),t+=Q.plugins.Mustache.render(a,p)}h=i.fl.length;var b=r[l];b&&(b=Q.$(b),b.attr("data-isload")?b.attr("data-isnew","false"):b.attr("data-isnew","true"));var y=o._model._data.focus;y||(y+=1),y-1==l&&e.resetSlide()}t.trim()?(n.vlist.html(t),e.showViewpoint()):e.hideViewpoint(),e.itemEvent()})},showViewpoint:function(){var e=r[l];e&&Q.$(e).css("display","")},hideViewpoint:function(){var e=r[l];if(e){Q.$(e).hide();var t=o._model._data.focus;t===l+1&&o.select(1)}},initPointScroll:function(){Q.event.customEvent.fire({type:"widgetInit-scroll",data:{wrap:n.wrap,name:"pointscroll"}})},initPointSlide:function(){n.slidebtn=n.wrap.down('*[data-slide-elem="slidebtnwrap"]'),n.slidebtn&&n.slidebtn.css("display",""),Q.event.customEvent.fire({type:"lazyInitSlide",data:{widget:n.wrap}}),Q.event.customEvent.fire({type:"singleSlideResp-btnShowHide",data:{wrap:n.wrap,len:h}})},resetSlide:function(){setTimeout(function(){Q.event.customEvent.fire({type:"singleSlideResp-reset",data:{name:"dramapoint",total:h}})},50)}}),a.exports=m});
define("units/sourcePopularBang.js",["../components/units/pageJob","../components/action/checkDoms","../kit/flashCall","../kit/videoInfo","../kit/userInfo","../kit/qiyiPlayer","../kit/artTemplate","../kit/qitan/totime","../kit/juicer","../kit/qitan/publishV2","../kit/qitan/transcode","../components/action/floater","../components/view/floaterView","../action/scrollV2","../action/tab","../action/qipaLogin","../action/qidouPay","../action/qitan/addLike","../action/deleteRunningMan","../model/qitan/qitanListModel","../interfaces/qitan/publish","../interfaces/vote2Interface","../interfaces/vienxInterface","../action/qitan/getUserInfo","../kit/parentByProp"],function(e,t,a){new Q.ic.InfoCenter({moduleName:"SourcePopularbang"});var i="sourcePopularbang",n=e("../components/units/pageJob"),o=e("../components/action/checkDoms");e("../kit/flashCall"),e("../kit/videoInfo");var r,s,l,d=e("../kit/userInfo"),c=e("../kit/qiyiPlayer").getPlayer("video"),u=e("../kit/artTemplate"),m=e("../kit/qitan/totime"),p=e("../kit/juicer"),h=e("../kit/qitan/publishV2"),f=e("../kit/qitan/transcode"),g=e("../components/action/floater"),v=e("../components/view/floaterView"),y=e("../action/scrollV2"),b=e("../action/tab"),V=e("../action/qipaLogin"),U=e("../action/qidouPay"),w=e("../action/qitan/addLike"),k=e("../action/deleteRunningMan"),_=e("../model/qitan/qitanListModel"),x=e("../interfaces/qitan/publish"),I=e("../interfaces/vote2Interface"),L=e("../interfaces/vienxInterface"),C=e("../action/qitan/getUserInfo"),W=e("../kit/parentByProp"),T=140,P="请输入140字以内",S={},E={};s=Q.PageInfo&&Q.PageInfo.playPageInfo||{},l=s.tvId;var X,D,K,A,N,F,J,M,B,O,R,z,H=3,j=null,q={},$={},G=0,Y=0,Z="<div class='rm-openvip'><div class='rm-openvip-box'><a href='javascript:;' class='rm-open_exit' j-delegate='closeTips'>×</a><h2 class='rm-openvip_title'>开通爱奇艺会员，免费试用会员专属道具一次可以<span class='rm-openvip_info'>+10人气</span>哦~</h2><a href='http://serv.vip.iqiyi.com/order/preview.action?pid=a0226bd958843452&platform=b6c13e26323c537d&fc=829e714472164f6f'target='_blank' class='rm-openvip_link' rseat='509232_3'>购买会员</a></div></div>",et="<div class='rm-openvip'><div class='rm-openvip-box'><a href='javascript:;' class='rm-open_exit' j-delegate='closeTips'>×</a><h2 class='rm-cash_info'>支付失败！请重试~</h2></div></div>";n.create(i,{getDependentDoms:function(){var e=this.doms=Q.$("#widget-popularbang");return e&&(K={wrap:e,vwrap:e.down('[data-popularlist-elem="wrap"]'),rankpoppulartitle:e.down('[data-popularlist-elem="rankpoppulartitle"]'),rankpoppularlist:e.down('[data-popularlist-elem="rankpoppularlist"]'),rankpoppulartpl:e.down('[data-popularlist-elem="rankpoppulartpl"]'),starsrank:e.down('[data-popularlist-elem="starsrank"]'),staraddpopular:e.down('[data-popularlist-elem="staraddpopular"]'),commentfixer:e.down('[data-populalist-elem="commentfixer"]'),addValue:Q("[data-elem-running=addValue]"),startInfo:Q("[data-elem-running=startInfo]")}),K},check:function(){return o(K),!!K},init:function(){var e=this;e.populartpl=K.rankpoppulartpl.value(),B=K.wrap.down('[data-popularlist-elem="gotorichlisttrigger"]'),O=K.wrap.down('[data-popularlist-elem="rankrichtitle"]'),R=K.wrap.down('[data-popularlist-elem="rankrichlist"]'),z=K.wrap.down('[data-popularlist-elem="rankrichtpl"]'),e._getTab(),e._getListData("initList"),e._bindEvent(),e.bindProductEvent()},_bindEvent:function(){var e=this;K.rankpoppularlist.delegate("item",function(t){var a=Q.event.get(t.event);a.preventDefault();var i=Q.$(t.target);e._handlePopularData(i)}),K.rankpoppularlist.delegate("addPopular",function(t){if(!Y){Q.event.get(t).preventDefault(),G=1;var a=Q.$(t.target);J=W(a,"data-popularlist-elem","pumpwrap"),e._handlePopularData(J,function(){e.sendVote(e.getStarInfo().starOid,1,null)})}}),B&&B.on("click",function(e){Q.event.get(e).preventDefault();var t=y.getScroll("popularlistscroll"),a=K.rankpoppulartitle.height()+K.rankpoppularlist.height();t.reset();var i=t._model.get();t.scroll((a+i.contentPos)/i.rate)}),c.on("videoChanged",function(){A&&A._model._data.focus===e._getTabIndex()+1&&A.select(1),e._getListData("videoChange")}),Q.event.customEvent.on("vip-videoChanged",function(){A&&A._model._data.focus===e._getTabIndex()+1&&A.select(1),e._getListData("videoChange")})},_handlePopularData:function(e,t){var a=this;c.getVideoInfo(function(i){return a.setStarInfo({tvId:i.tvid,voteId:j,qitanId:e.attr("data-commentid"),starRank:e.attr("data-rank"),starName:e.attr("data-name"),starFace:e.attr("data-face"),starCount:e.attr("data-popularnum"),starUid:e.attr("data-uid"),starOid:e.attr("data-oid")}),t?(t(),void 0):(a._showPopularStarPanel(),M=Q.$("#productBoxShow"),M&&a.getProduct(),a.getStarInfoMess(),a.pLsetDom(),a.pLsetParam(),a.plAddComment(),a.pLbindEvent(),a.plListenScroll(),void 0)})},_handleAddPopular:function(){if(J){var e=J.down('[data-popularlist-elem="pumpnum"]');if(e){var t=J.down('[data-elem-running="numAddTip"]');t.removeClass("dn");var a=parseInt(e.html(),10)+1;e.html(a),J.attr("data-popularnum",a),window.setTimeout(function(){t.addClass("dn")},3e3)}}},_getTab:function(){var e=this;A||(A=b.getTab("sourceListTab")||b.getTab("dramaseriesTab")),A&&(N=A._view._doms.titles,F=A._view._doms.bodies,A.on("focuschange",function(t){var a=t.data.title,i=a.attr("data-flag");"popularlist"===i&&(e._showPopularListPanel(!0),e._initScroll())}))},_getTabIndex:function(){var e,t=this;N||(t.getTab(),N=A._view._doms.titles);for(var a=0;a<N.length;a++)if("popularlist"===Q.$(N[a]).attr("data-flag")){e=a;break}return e},_getListData:function(){var e=this;c.getVideoInfo(function(t){if(Q.array.isArray(t.votes)&&t.votes.length>0)for(var a=0;a<t.votes.length;a++){if(t.votes[a]&&3===t.votes[a].type&&t.votes[a].id){j=t.votes[a].id;break}j=null}else j=null;j?e._getPopulalistData(j):e._hideTabTrigger()})},_getPopulalistData:function(e){var t=this,a={vid:e,orderby:1};d.isLogin()?a.uid=d.getUid():a.openudid=Q.cookie.get("QC005")||Q.cookie.get("QC006")||"",(new I).getRankStar(a,function(e){var a="",i=u.compile(t.populartpl);"A00000"===e.code?(e.data&&e.data.options&&e.data.options.length>0&&e.data.options.forEach(function(e,t){a+=i({rank:t+1,oid:e.oid,nickname:e.text,uid:e.metaAttri?e.metaAttri.starUid:"",face:e.metaAttri?e.metaAttri.starImg:"",popularNum:e.showNum,showNum:e.showNum,commentId:e.commentId})}),a.trim()?(K.rankpoppularlist.html(a),t._showTabTrigger(),t._getPopularCommentData(),O&&R&&z&&(t.richtpl=z.value(),t._getRichlistData())):t._hideTabTrigger()):t._hideTabTrigger()})},_getPopularCommentData:function(){var e=K.rankpoppularlist.down('[data-commentnum="commentnum"]'),t=[];e&&e.forEach(function(e){t.push(Q.$(e).attr("data-commentid"))});var a={res_type:1,cmt_types:1,ids:t.join()};t.length>0&&(new I).getBatchCommentCount(a,function(t){"A00000"===t.code&&Q.object.isObject(t.data)&&e.forEach(function(e){var a=Q.$(e),i=0,n=a.attr("data-commentid");n in t.data&&(i=t.data[n],i>999&&(i="999+")),a.html("("+i+")")})})},_getRichlistData:function(){var e=this,t={partner_code:"7bmdFIaJ9VyBAedX",top_num:5,platform:"1_10_101"};(new L).getRankStar(t,function(t){var a="",i=u.compile(e.richtpl);"A00000"===t.code?(t.data&&t.data.length>0&&(B.css("display",""),R.css("display",""),O.css("display",""),t.data.forEach(function(e,t){a+=i({rank:t+1,uid:e.user_id,nickname:e.nickname||"",face:e.icon||"",qidou:e.score||0})})),a.trim()?R.html(a):(B.css("display","none"),R.css("display","none"),O.css("display","none"))):(B.css("display","none"),R.css("display","none"),O.css("display","none"))})},_showPopularListPanel:function(e){K.starsrank.show(),K.staraddpopular.css("position","absolute").css("left","-1000px").css("top","-1000px"),K.commentfixer.hide(),this._resetScroll(),e&&this._getListData(),Q.log.server({t:"21",block:"509231_10",pu:d.getUid(),u:Q.cookie.get("QC005")||Q.cookie.get("QC006")||"",p:"10",p1:"101",pf:"1"},"http://msg.71.am/b")},_showPopularStarPanel:function(){K.staraddpopular.show().css("position","static"),K.starsrank.hide(),K.commentfixer.show(),this._resetScroll(),Q.log.server({t:"21",block:"509231_11",pu:d.getUid(),u:Q.cookie.get("QC005")||Q.cookie.get("QC006")||"",p:"10",p1:"101",pf:"1"},"http://msg.71.am/b")},_showTabTrigger:function(){var e=this,t=N[e._getTabIndex()];if(t){var a=Q.$(t);a.css("display",""),a.hasClass("selected")&&e._initScroll()}},_hideTabTrigger:function(){var e=this,t=N[e._getTabIndex()];if(t){Q.$(t).hide();var a=A._model._data.focus;a===H+1&&A.select(1)}},_initScroll:function(){Q.event.customEvent.fire({type:"widgetInit-scroll",data:{wrap:K.wrap,name:"popularlistscroll"}})},_resetScroll:function(){var e=y.getScroll("popularlistscroll");e&&e.reset()},getProduct:function(){var e=this;(new L).getProduct(null,function(t){if("A00000"==t.code){t.data.downList=[];var a=Q("#productBoxHide"),i=a.html();if(0===t.data.length)return;for(var n=0;n<t.data.length;n++)n>0&&4>n&&t.data.downList.push(t.data[n]);var o=u.compile(i),r=o({data:t.data});M.html(r),e.getProIcon(M),Q("[data-elem-running=buyItem]").on("mouseenter",function(){Q.$(this).down("[data-elem-running=tips]").removeClass("dn")}),Q("[data-elem-running=buyItem]").on("mouseleave",function(){Q.$(this).down("[data-elem-running=tips]").addClass("dn")})}})},getStarInfoMess:function(){var e=this;q=e.getStarInfo();var t=q.starCount;K.startInfo.find("img").attr("src",q.starFace),K.startInfo.find("[data-elem-running=startNum]").html(q.starRank),K.startInfo.find("[data-elem-running=startNum]").removeClass(),K.startInfo.find("[data-elem-running=startNum]").addClass("ranking").addClass("ranking"+q.starRank),K.startInfo.find("[data-elem-running=startName]").html(q.starName),K.startInfo.find("[data-elem-running=startValue]").html(t+"人气"),"1"==q.starRank?Q("[data-elem-running=startCrown]").css("display","inline-block"):Q("[data-elem-running=startCrown]").css("display","none")},getStatCount:function(e){return e>99999999?e=(e/1e8).toFixed(1)+"亿":e>9999&&(e=(e/1e4).toFixed(1)+"万"),e},getProIcon:function(e){var t=e.down("*[data-running-src]");if(t)for(var a=0,i=t.length;i>a;a++){var n=Q(t[a]).attr("data-running-src");Q(t[a]).attr("src",n)}},buyProduct:function(e,t,a){var i=this,n=i.getStarInfo().voteId,o={authcookie:d.getAuthCookies(),to_uid:t,product_id:e,num:"1",money_type:"1",partner_code:"7bmdFIaJ9VyBAedX",platform:"1_10_101",extra:{}};return o.extra.vid=n,o.extra.oid=a,o.extra.appid=1,o.extra=Q.url.jsonToQuery(o.extra),d.isLogin()?((new L).payBuy(o,function(e){"E00001"==e.code&&"余额不足"==e.msg?((new U).openQidouPayWindow(),Q("[data-addfee-pop=pop]").css("z-index","4200")):"A00000"==e.code?i.buySuccess(e.data.pay_price):i.createfloater(et)}),void 0):(V.openLoginWindow(null,function(){}),!1)},buySuccess:function(e){K.addValue.removeClass("dn"),K.addValue.find("[data-elem-running=valueNum]").html("+"+e);var t=q.starCount;q.starCount=parseInt(t,10)+parseInt(e,10),K.startInfo.find("[data-elem-running=startValue]").html(q.starCount+"人气"),window.setTimeout(function(){K.addValue.addClass("dn"),K.addValue.find("[data-elem-running=valueNum]").html(" ")},3e3)},createfloater:function(e){r||(r=new g({view:new v({isResize:!0,zIndex:4850})}),r.show({html:e}))},getStarInfo:function(){return this.currentShowStarInfo},setStarInfo:function(e){this.currentShowStarInfo=e},sendVote:function(e,t,a){var i=this,n=i.getStarInfo().voteId,o={vid:n,options:{},resType:"0",appid:"1",num:t};o.options[n]=[e],o.options=JSON.stringify(o.options),a?o.authcookie=a:o.openudid=Q.cookie.get("QC005")||Q.cookie.get("QC006")||"",(new I).freeBuy(o,function(e){if("A00000"==e.code)1===G?i._handleAddPopular():i.buySuccess(t),G=0;else{var a=Q("[data-elem-running=failTips]"),n=a.find(".rm-fail_info");"V00003"==e.code||"V00018"==e.code?n.html("投票次数用完，明天再来~"):"V00002"==e.code||"V00004"==e.code||"V00012"==e.code?n.html("投票次数已用完"):"V00010"==e.code?n.html("投票已结束"):"V00006"==e.code?n.html("投票太频繁"):"V00005"==e.code||"V00007"==e.code?n.html("投票失败，请重试~"):e.msg?n.html(e.msg):n.html("投票失败，请重试~"),Y=1,a.removeClass("dn"),window.setTimeout(function(){a.addClass("dn"),Y=0},3e3)}})},bindProductEvent:function(){var e=this;Q.$(document).delegate("closeTips",function(e){Q.event.get(e).preventDefault(),r.destroy(),r=null}),Q.$(document).delegate("hideStarPanel",function(t){Q.event.get(t).preventDefault(),e._showPopularListPanel(!0)}),Q.$(document).delegate("freeBuy",function(t){Q.event.get(t).preventDefault(),e.sendVote(e.getStarInfo().starOid,1,null)}),Q.$(document).delegate("vipBuy",function(t){Q.event.get(t).preventDefault(),d.isLogin()?d.checkVipInfo(function(){var t=d.getAuthCookies(),a=parseInt(d.getVipType(),10);3==a||1==a||4==a?e.sendVote(e.getStarInfo().starOid,10,t):e.createfloater(Z)}):V.openLoginWindow(null,function(){})}),Q.$(document).delegate("payBuy",function(t){Q.event.get(t).preventDefault();var a=Q.$(t.target),i=a.attr("data-widget-runningid");e.buyProduct(i,e.getStarInfo().starUid,e.getStarInfo().starOid)})},pLsetDom:function(){var e=Q("#widget-popularbang");$.plcontent=e.find(".mod-rmComment-box"),$.pubarea=e.find('[data-feedcontent="content"]'),$.submit=e.find("#submitPL"),$.scroll=y.getScroll("popularlistscroll")},pLsetParam:function(){var e=this.getStarInfo();X=e.tvId||l,D=e.qitanId,S=new x({}),E=new _({config:{tvid:0,qitan_comment_type:11,qitanid:D,pageNum:{pinglun:30}},listtype:0})},pLbindEvent:function(){var e=this;if(Q("#saybutton").off("click").on("click",function(e){Q.event.get(e).preventDefault(),Q("#inputPL").removeClass("dn"),Q(document).on("click.runningman",function(e){var t=Q.event.get(e).target;t!=Q("#submitPL")[0]&&t!=Q("#cancelPL")[0]&&t!=$.pubarea[0]&&t!=Q("#saybutton")[0]&&(Q("#inputPL").addClass("dn"),Q(document).off("click.runningman"))})}),Q("#cancelPL").off("click").on("click",function(e){Q.event.get(e).preventDefault(),$.pubarea.val(P),$.submit.addClass("cs-btn-disabled"),Q("#inputPL").addClass("dn"),Q(document).off("click.runningman")}),$.pubarea.length){var t=new h({wrapper:Q.$($.pubarea[0]),iMax:T,curtext:P,isCheck:!0,sources:"paonan"});t.init(),t.on("count",function(t){var a=t.data.num;a==T?$.submit.addClass("cs-btn-disabled"):$.submit.removeClass("cs-btn-disabled"),0===a&&e.showtip(Q.$($.pubarea[0]),"已达到140字上限")})}$.submit.off("click").on("click",function(t){e.dosubmit(t)}),Q.event.customEvent.un("login",e.loginhandle),Q.event.customEvent.on("login",e.loginhandle),Q.event.customEvent.un("logout",e.logouthandle),Q.event.customEvent.on("logout",e.logouthandle)},loginhandle:function(){$.ulcontent.length&&$.ulcontent.find("li").each(function(){Q(this).attr("user-id")==Q.cookie.get("P00003")&&Q(this).find('[data-click="delete"]').removeClass("dn")})},logouthandle:function(){$.ulcontent.length&&$.ulcontent.find('[data-click="delete"]').each(function(){Q(this).hasClass("dn")||Q(this).addClass("dn")})},dosubmit:function(e){var t=this;if(d.isLogin()!==!0)return V.openLoginWindow({from:"comment"},function(){}),Q.event.get(e.event).preventDefault(),void 0;if(0===$.pubarea.val().trim().length||$.pubarea.val().trim()==P)return t.showtip(Q.$($.pubarea[0]),"内容不能为空"),void 0;var a={tvid:X,qitan_comment_type:11,qitanid:D,current_url:window.location.href,text:$.pubarea.val()};switch(a.qitan_comment_type){case"2":a.appid=0;break;case"6":a.appid=0;break;default:a.appid=21}S.request(a,function(e){"A00000"==e.code?(t.showtip(Q.$($.pubarea[0]),"发布成功!"),t.addMsg(e.data.contentId),$.pubarea.val(P),$.submit.addClass("cs-btn-disabled"),Q("#inputPL").addClass("dn"),Q(document).off("click.runningman")):t.showtip(Q.$($.pubarea[0]),e.data)})},addMsg:function(e){var t='<li class="rmComment-list_info" data-contentid="${contentId}"><span class="rmComment-list_user">${uname}</span><a class="rmComment-list_delete" href="javascript:void(0)" data-click="delete" data-uid-del="${uid}" contentid="${contentId}">删除</a><span class="rmComment-list_des">${content}</span><div class="rmComment-list_other"><span class="rmComment-list_time" data-elem="time">刚刚</span><a href="javascript:;" data-delegate="like" contentid="${contentId}"><span class="rmComment-list_like">喜欢(<em data-elem-num="like">0</em>)</span></a></div></li>';(new C).getData(function(a){var i=p(t,{uname:a.user.uname,content:$.pubarea.val(),contentId:e});$.ulcontent.children().length?Q($.ulcontent.children()[0]).before(i):$.ulcontent.append(i)})},plListenScroll:function(){var e=this,t=!1;$.scroll&&$.scroll.on("moving",function(){var a=-parseInt($.scroll._view._doms.scrollContent.css("marginTop"),10),i=$.scroll._view._doms.scrollWrap.height();if(a+i>=$.scroll._view._doms.scrollContent.height()-5&&!t){t=!0;var n=parseInt($.plcontent.find("#plcontent").attr("data-page"),10)+1;E.setValue("page",n),E._getData(function(a){if(0!==a.count){for(var i=new f,o=0;o<a.comments.length;o++)a.comments[o].content=i.decodeHtml(a.comments[o].content),a.comments[o].cookie=Q.cookie.get("P00003");var r=p(e.getresTPL(),a);$.ulcontent.append(r),$.ulcontent.find(".rmComment-list_des").length&&$.ulcontent.find(".rmComment-list_des").each(function(){var e=Q(this).html();e=e.replace(/\\n/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\\r/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),Q(this).html(e)}),$.plcontent.find("#plcontent").attr("data-page",n),t=!1,$.scroll.check({})}})}})},showtip:function(e,t){if(!Q('[data-source="tips"]').length){var a=Q("body"),i=Q(document.createElement("div"));i.addClass("rm-fail"),i.attr("data-source","tips"),i.css("z-index",1e3),i.css("position","absolute");var n='<div class="rm-fail-box"><h2 class="rm-fail_info" style="text-align:center;">'+t+"</h2>"+"</div>";i.html(n),a.append(i),i.css("left",e.left()+e.width()/2),i.css("top",e.top()+e.height()/2),setTimeout(function(){i.remove()},3e3)}},plAddComment:function(){var e=this;E._getData(function(t){t.cookie=Q.cookie.get("P00003");var a=new f,i=p(e.getTPL(),t);$.plcontent.html(i),$.ulcontent=Q("#conts"),$.plcontent.find('[data-elem="time"]').length&&$.plcontent.find('[data-elem="time"]').each(function(){var e=Q(this).html();e=1e3*e,Q(this).html(new m(e).formatdate())}),$.ulcontent.length&&$.ulcontent.find(".rmComment-list_des").length&&$.ulcontent.find(".rmComment-list_des").each(function(){var e=Q(this).html();e=e.replace(/\\n/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\\r/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),e=a.decodeHtml(e),Q(this).html(e)}),new w({doms:Q.$($.ulcontent[0]),config:{}}),new k({doms:Q.$($.ulcontent[0]),config:{}}),$.scroll.reset()})},getTPL:function(){var e='<div data-page="1" id="plcontent"><h2 class="rmComment-title">评论({@if count >= 10000}${(count/10000).toFixed(1)}万{@else}${count}{@/if})</h2><ul class="rmComment-list" id="conts">{@each comments as item}<li class="rmComment-list_info" data-contentid="${item.contentId}" user-id="${item.userInfo.uid}"><span class="rmComment-list_user">${item.userInfo.uname}</span><a class="rmComment-list_delete {@if item.userInfo.uid != cookie}dn{@/if}" href="javascript:void(0)" data-click="delete" contentid="${item.contentId}">删除</a><span class="rmComment-list_des">${item.content}</span><div class="rmComment-list_other"><span class="rmComment-list_time" data-elem="time">${item.addTime}</span><a href="javascript:;" data-delegate="like" contentid="${item.contentId}"><span class="rmComment-list_like">喜欢(<em data-elem-num="like">${item.counterList.likes}</em>)</span></a></div></li>{@/each}</ul></div>';return e},getresTPL:function(){var e='{@each comments as item}<li class="rmComment-list_info" data-contentid="${item.contentId}" user-id="${item.userInfo.uid}"><span class="rmComment-list_user">${item.userInfo.uname}</span><a class="rmComment-list_delete {@if item.userInfo.uid != item.cookie}dn{@/if}" href="javascript:void(0)" data-click="delete" contentid="${item.contentId}">删除</a><span class="rmComment-list_des">${item.content}</span><div class="rmComment-list_other"><span class="rmComment-list_time" data-elem="time">${item.addTime}</span><a href="javascript:;" data-delegate="like" contentid="${item.contentId}"><span class="rmComment-list_like">喜欢(<em data-elem-num="like">${item.counterList.likes}</em>)</span></a></div></li>{@/each}';return e}}),a.exports=i});
define("kit/qitan/totime.js",[],function(e,t,a){function i(e){this.sendTime=e}i.prototype.formatdate2=function(){var e=new Date,t=e.getTime(),a=t-this.sendTime;return this.value=60>a?"刚刚":a>60&&86400>a?Q.date.format(new Date(this.sendTime),"今天HH:mm"):Q.date.format(new Date(this.sendTime),"M月d日 HH:mm"),this.value},i.prototype.enddate=function(){var e,t,a,i,n=new Date,o=n.getTime(),r=this.sendTime-o/1e3;return r>0?(e=Math.floor(r/86400),r-=86400*e,t=Math.floor(r/3600),r-=3600*t,a=Math.floor(r/60),r-=60*a,i=Math.floor(r),10>t&&(t="0"+t),10>a&&(a="0"+a),this.value=e+"天"+t+"小时"+a+"分钟"):this.value="到期",this.value},i.prototype.formatdate=function(){var e=new Date,t=e.getTime();if("string"!=typeof this.sendTime){var a=parseInt((t-this.sendTime)/1e3,10);return this.value=0>a?"刚刚":60>a?a+"秒前":a>=60&&3600>a?Math.floor(a/60)+"分钟前":a>=3600&&86400>a?Math.floor(a/3600)+"小时前":a>=86400&&604800>a?Math.floor(a/86400)+"天前":a>=604800&&2419200>a?Math.floor(a/604800)+"周前":a>=2419200&&31449600>a?0===Math.floor(a/2592e3)?"1个月前":Math.floor(a/2592e3)+"个月前":Q.date.format(new Date(this.sendTime),"yyyy-MM-dd "),this.value}},i.prototype.videotime=function(){var e=0,t=0,a=0,i=this.sendTime;return e=parseInt(i/3600,10),i%=3600,t=parseInt(i/60,10),i%=60,a=i,10>e&&(e="0"+e),10>t&&(t="0"+t),10>a&&(a="0"+a),this.value=e+":"+t+":"+a,this.value},a.exports=i});
define("kit/qitan/publishV2.js",["../../kit/eventPlugin"],function(e,t,a){var i=e("../../kit/eventPlugin"),n=Q.Class("Publish",{plugins:[new i],construct:function(e){this.wrapper=e.wrapper,this.count=e.count,this.iMax=2*(e.iMax||140),this.curtext=e.curtext||"",this.isCheck=e.isCheck&&!0,this.sources=e.sources||""},methods:{init:function(){return this._render(),this},_render:function(){this.wrapper&&""===this.wrapper.value()&&this.wrapper.value(this.curtext),this.count&&this.count.html(this.iMax),this._bindEvent()},_bindEvent:function(){var e=this;this.wrapper&&(this.wrapper.on("focus",function(){(e.wrapper.value()==e.curtext||e.wrapper.hasClass("grayDark"))&&(e.wrapper.value(""),e.wrapper.removeClass("grayDark")),"reply"==e.sources?e.wrapper.parent()&&e.wrapper.parent().addClass("stc-selected"):"pinglun"==e.sources?Q(e.wrapper).parents(".say-textarea-comment").addClass("stc-selected"):"yingping"==e.sources&&Q(e.wrapper).parents(".say-textarea-movie").addClass("stc-selected")}),this.wrapper.on("blur",function(){""===e.wrapper.value()&&(e.wrapper.value(e.curtext),e.wrapper.attr("value")&&e.wrapper.value(e.wrapper.attr("value")),e.wrapper.addClass("grayDark")),"reply"==e.sources?e.wrapper.parent()&&e.wrapper.parent().removeClass("stc-selected"):"pinglun"==e.sources?Q(e.wrapper).parents(".say-textarea-comment").removeClass("stc-selected"):"yingping"==e.sources&&Q(e.wrapper).parents(".say-textarea-movie").removeClass("stc-selected"),e.fire({type:"blur",data:{}})})),/msie/i.test(navigator.userAgent)?(this.wrapper[0].attachEvent("onpropertychange",function(){e._changeCount()}),this.wrapper[0].attachEvent("onkeyup",function(){e._changeCount()})):this.wrapper&&this.wrapper.on("input",function(){e._changeCount()}),this.wrapper.on("keydown",function(t){e._changeCount(t)}),this.wrapper.on("keyup",function(t){e._changeCount(t)})},_changeCount:function(e){var t=this,a=t.wrapper.value();a=a.replace(/\s+/g,""),a=a.replace(/\\n/g,"");var i=a.replace(/([\u4E00-\u9FA5\uf900-\ufa2d])/g,"aa").length;if(t.wrapper.value()==t.curtext&&(i=0),this.isCheck&&i>this.iMax){var n=i-this.iMax;Q.event.get(e).preventDefault();for(var o=a.length-1;o>0&&n>=0;o--)n-=a.charAt(o).match(/[\u4E00-\u9FA5\uf900-\ufa2d]/)?2:1;t.wrapper.value(a.slice(0,o+1)),i=this.iMax}t._wordCount(t.iMax,i,t.count,a,e)},_wordCount:function(e,t,a,i,n){var o;o=0>e-t?!1:!0,this.fire({type:"count",data:{num:Math.floor((e-t)/2),isok:o,text:i,event:n}})}}});a.exports=n});
define("kit/qitan/transcode.js",[],function(e,t,a){function i(){this.REGX_HTML_ENCODE=/"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g,this.REGX_HTML_DECODE=/&\w+;|&#(\d+);/g,this.HTML_DECODE={"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&quot;":'"',"&copy;":""}}i.prototype.encodeHtml=function(e){return e=void 0!==e?e:this.toString(),"string"!=typeof e?e:e.replace(this.REGX_HTML_ENCODE,function(e){var t=e.charCodeAt(0),a=["&#"];return t=32==t?160:t,a.push(t),a.push(";"),a.join("")})},i.prototype.decodeHtml=function(e){var t=this.HTML_DECODE;return e=void 0!==e?e:this.toString(),"string"!=typeof e?e:e.replace(this.REGX_HTML_DECODE,function(e,a){var i=t[e];return void 0===i&&(i=isNaN(a)?e:String.fromCharCode(160==a?32:a)),i})},a.exports=i});
define("action/qidouPay.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../components/action/floater","../components/view/floaterView"],function(e,t,a){e("../components/units/pageJob"),e("../components/action/checkDoms"),e("../kit/userInfo"),e("../components/action/floater"),e("../components/view/floaterView"),Q.event.customEvent;var i=Q.Class("QidouPay",{construct:function(){},methods:{openQidouPayWindow:function(){function e(){a=Q.$(a),a.css("position","fixed"),a.css("display","none"),a.css("width",Q.page.getViewWidth()+"px"),a.css("height",Q.page.getViewHeight()+"px"),a.css("zIndex",100),a.css("backgroundColor","#000"),a.css("opacity","0.6"),Q.browser.IE6&&(a.css("position","absolute"),a[0].style.filter.opacity="60"),document.body.appendChild(a[0]),n.on("click",function(){a.hide(),Q.$(this).parent().hide(),Q.$(document).un("mousewheel"),clearInterval(s)})}function t(e){a.show(),e.show(),a.css("top",0),a.css("left",0);var t=parseInt(Q.page.getViewWidth()/2,10),i=parseInt(Q.page.getViewHeight()/2,10);t-=e.width()/2,i-=e.height()/2,Q.browser.IE6&&(e.css("position","absolute"),a.css("top",Q.page.getScrollTop()+"px"),i+=Q.page.getScrollTop(),Q.$(document).on("mousewheel",function(e){Q.event.get(e).stop()})),e.css("top",i+"px"),e.css("left",t+"px"),e.css("zIndex",500)}var a="",i=!1,n=Q.$('[data-pop-close="close"]'),o=Q.$('[data-addFee-pop="pop"]'),r=Q.$('[data-addFee-pop="pop"]');Q.$('[data-noFee-pop="pop"]');var s=null;i=!0,a=document.createElement("div"),a.id="mask",e(),t(o);var l=Q.$("#order_key"),d=Q.$('[data-buyfee-btn="btn"]');d.on("click",function(){function e(e){i(a,{order_key:e,callback:"order"},function(e){if("A00000"==e.code){var t=parseInt(e.data.code,10);(400==t||201==t)&&(clearInterval(s),r.hide())}})}var t=(""+(new Date).getTime()*Math.random()).split(".").join("").substring(0,13);l.value(t);var a="http://account.iqiyi.com/order/status.action",i="";s=setInterval(function(){e(t)},5e3)})}}});a.exports=i});
define("action/qitan/addLike.js",["../../components/action/adapter","../../model/qitan/addLikeModel","../../view/qitan/addLikeView"],function(e,t,a){var i=e("../../components/action/adapter"),n=e("../../model/qitan/addLikeModel"),o=e("../../view/qitan/addLikeView");a.exports=Q.Class("AddLike",{extend:i,construct:function(e){e=e||{},e.ctrl=this,e.model=e.model||new n(e),e.view=e.view||new o(e),this.callsuper(e)},methods:{init:function(){},addLike:function(e){var t=this;this._model.addLike(e,function(e){"A00000"==e.code?(t._view.succ(),t._view.show(1)):t._view.show(0)})}}})});
define("model/qitan/addLikeModel.js",["../../components/model/model","../../interfaces/qitan/like"],function(e,t,a){var i=e("../../components/model/model"),n=e("../../interfaces/qitan/like");a.exports=Q.Class("AddLikeModel",{extend:i,construct:function(e){this.callsuper(e),this.config=e.config,this.ctrl=e.ctrl},methods:{addLike:function(e,t){var a=this.config,i={};i.qitanid=a.qitanid,i.tvid=a.tvid,Q.PageInfo&&(Q.PageInfo.playPageInfo||Q.PageInfo.livePlayInfo)&&(i.is_video_page=!0),i.qypid="01010011010000000000",i.albumid=a.vrs_album_id,i.uid=Q.cookie.get("P00003"),i.contentid=e,(new n).request(i,function(e){t(e)})}}})});
define("interfaces/qitan/like.js",["../../kit/remoteInterface","../../config/qitanConfig"],function(e,t,a){var i=e("../../kit/remoteInterface"),n=e("../../config/qitanConfig");a.exports=Q.Class("joinLike",{construct:function(){this._remoteInterface=new i({joinLike:{url:n.interfaces.like,struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{request:function(e,t){e=e||{},e.cb="fnsucc",e.qitancallback=e.cb,e.t=Math.random(),e.antiCsrf=Q.crypto.md5(Q.cookie.get("P00001")),this._remoteInterface.send({param:e,ifname:"joinLike"},function(e){t&&t(e)})}}})});
define("config/qitanConfig.js",[],function(e,t,a){var i={projectName:"qiyiV2",projectVersion:"20161014155655",templateVersion:"20161013162223",developer:"liujinjuan",jobPath:"jobs/qitan",templatePath:"templates/scripts",env:"product",projectDebug:!1,http:{timeout:2e4},cookie:{pc:"QC020"},supportTs:Q.browser.iPad||Q.browser.iPhone,interfaces:{allinone:"http://api.t.iqiyi.com/qx_api/framework/all_in_one",queryconfig:"http://cmts.iqiyi.com/comment/comment_config",votelist:"http://vote.i.iqiyi.com/eagle/comment/get_vote_list",like:"http://api.t.iqiyi.com/qx_api/comment/like",reply:"http://api.t.iqiyi.com/qx_api/comment/reply",votedetail:"http://vote.i.iqiyi.com/eagle/comment/get_vote_detail",addvote:"http://vote.i.iqiyi.com/eagle/comment/add_vote",addimp:"http://api.t.iqiyi.com/qx_api/comment/role/add_impression",rolelist:"http://api.t.iqiyi.com/qx_api/comment/role/get_role_list",joinvote:"http://vote.i.iqiyi.com/eagle/comment/join_vote",addreport:"http://api.t.iqiyi.com/qx_api/comment/report_comment",deletecommite:"http://api.t.iqiyi.com/qx_api/comment/delete",deletereply:"http://api.t.iqiyi.com/qx_api/comment/delete_reply",getreview:"http://api.t.iqiyi.com/qx_api/comment/review/get_review_list",sendreview:"http://api.t.iqiyi.com/qx_api/comment/review/add_review",editreview:"http://api.t.iqiyi.com/qx_api/comment/review/edit_review",pageshow:"http://api.t.iqiyi.com/qx_api/comment/get_comment_with_repies",getreplies:"http://api.t.iqiyi.com/qx_api/comment/get_replies",getinfo:"http://api.t.iqiyi.com/qx_api/comment/get_user_simple_info",arguments:"http://api.t.iqiyi.com/qx_api/comment/get_video_comments",ugcGetUserPopup:"http://www.iqiyi.com/u/api/user/user_card",ugcAddFollow:"http://www.iqiyi.com/u/api/relation/follow",ugcRemoveFollow:"http://www.iqiyi.com/u/api/relation/unfollow",ugcPushFollow:"http://www.iqiyi.com/u/api/relation/get_recommendation_users",ugcRemoveFans:"http://www.iqiyi.com/u/api/relation/remove_fans",ugcGetFans:"http://www.iqiyi.com/u/api/relation/get_fans",ugcGetFollows:"http://www.iqiyi.com/u/api/relation/get_follower",ugcGetTimeline:"http://www.iqiyi.com/u/api/timeline/get_user_timeline",ugcGetRel:"http://sns.uc.iqiyi.com/apis/friend/are_friends.action",getvotenum:"http://vote.i.iqiyi.com/eagle/comment/get_vote_amount",deleteVote:"http://vote.i.iqiyi.com/eagle/comment/delete_vote",yukongConfig:"http://control.i.iqiyi.com/control/content_config"}};"development"==i.env&&Q.object.extend(i.interfaces,{tm:"/h5/tmm/",a:"/h5/a/",ss:"/h5/s/",sc:"/h5/sd/",cp:"/h5/qiyichupin/",index:"/h5/index/",ch:"/h5/c/",v:"/h5/vlist/",s:"/h5/slist/",sd:"/h5/sdate/",vj:"http://cache.m.iqiyi.com/vj/",topicAlbum:"/h5/tal/",topicBrother:"/h5/htl/",topicInfo:"/h5/ti/",topicList:"/h5/tl/",wx:"http://202.108.14.212/api/getWxInfo",cu:"http://202.108.14.212/api/getClientUrl",qipavs:"http://pub.m.iqiyi.com/qipa-api/services/source/status",qipaweixininfo:"http://10.10.166.45:8080/qipa-api/services/weixin/sourceinfo",wxInfo:"http://202.108.14.212/api/getWxInfo",sdvlst:"http://10.10.131.28:8080/sdvlst/"}),a.exports=i});
define("view/qitan/addLikeView.js",["../../components/view/view","../../kit/userInfo","../../kit/qitan/login","../../kit/qitan/popsucc","../../action/qipaLogin","../../kit/parentByProp","../../components/action/overlay"],function(e,t,a){var i=e("../../components/view/view"),n=e("../../kit/userInfo");e("../../kit/qitan/login");var o=e("../../kit/qitan/popsucc"),r=e("../../action/qipaLogin"),s=e("../../kit/parentByProp"),l=e("../../components/action/overlay");a.exports=Q.Class("AddLikeView",{extend:i,construct:function(e){this.callsuper(e),this.ctrl=e.ctrl,this.wrapper=e.doms},methods:{init:function(){this.bindEvent()},bindEvent:function(){var e=this;Q.$(this.wrapper).delegate("like",function(t){if(e.obj=t.target,n.isLogin()!==!0){var a=s(Q.$(e.obj),"data-elem-reply","pageshow");if(a){var i=a.css("zIndex");l._originZIndex[l._count++]=i,l._originZIndex[l._count++]=i}return r.openLoginWindow({from:"comment"},function(){window.console.log()}),Q.event.get(t.event).preventDefault(),void 0}var o=Q.$(e.obj).attr("contentid");e.ctrl.addLike(o)})},show:function(e){o.show(Q.$(this.obj),e)},succ:function(){var e=Q.$(this.obj).down('[data-elem-num="like"]'),t=parseInt(e.html(),10);e.html(t+1)}}})});
define("kit/qitan/login.js",[],function(e,t,a){var i;a.exports={init:function(e){i=e},show:function(){i.show.apply(this,arguments)},hide:function(){i.hide.apply(this,arguments)},on:function(){i.on.apply(this,arguments)}}});
define("kit/qitan/popsucc.js",[],function(e,t,a){a.exports={show:function(e,t){var a,i,n=Q.$("body"),o=Q.$(document.createElement("div"));0===t?(a="喜欢过了哦！",i="info"):(a="喜欢成功！",i="success"),i="success";var r='<div class="tac mt10"><i class="csIcon csIcon-msg-'+i+'"></i>'+'<em class="vm-inline-block-inline" title="'+a+'!">'+a+"</em>";o.addClass("cs-tooltip-box-noArrow dn"),o.attr("data-elem-popup","qitan"),o.html(r),n.append(o),o.css("position","absolute"),o.removeClass("dn"),o.css("left",e.left()+"px"),o.css("top",e.top()-o.height()+"px"),setTimeout(function(){n.remove(o)},700)}}});
define("action/deleteRunningMan.js",["../components/action/adapter","../model/qitan/deleteModel","../view/deleteRunningManView"],function(e,t,a){var i=e("../components/action/adapter"),n=e("../model/qitan/deleteModel"),o=e("../view/deleteRunningManView");a.exports=Q.Class("delete",{extend:i,construct:function(e){e=e||{},e.ctrl=this,e.model=e.model||new n(e),e.view=e.view||new o(e),this.callsuper(e)},methods:{init:function(){},setdata:function(e){this._model.setdata(e)}}})});
define("model/qitan/deleteModel.js",["../../components/model/model","../../interfaces/qitan/delete","../../interfaces/qitan/deletevote"],function(e,t,a){var i=e("../../components/model/model"),n=e("../../interfaces/qitan/delete"),o=e("../../interfaces/qitan/deletevote");a.exports=Q.Class("DeleteModel",{extend:i,construct:function(e){this.callsuper(e),this.config=e.config,this.ctrl=e.ctrl},methods:{setdata:function(e,t){e=e||{},(new n).request(e,function(e){"A00000"==e.code&&t&&t(e)})},setvotedata:function(e,t){e=e||{},(new o).request(e,function(e){"A00000"==e.code&&t&&t(e)})}}})});
define("interfaces/qitan/delete.js",["../../kit/remoteInterface","../../config/qitanConfig"],function(e,t,a){var i=e("../../kit/remoteInterface"),n=e("../../config/qitanConfig");a.exports=Q.Class("deleteCommite",{construct:function(){this._remoteInterface=new i({deleteCommite:{url:n.interfaces.deletecommite,struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{request:function(e,t){e=e||{},e.cb="fnsucc",e.qitancallback=e.cb,e.t=Math.random(),e.antiCsrf=Q.crypto.md5(Q.cookie.get("P00001")),this._remoteInterface.send({param:e,ifname:"deleteCommite"},function(e){t&&t(e)})}}})});
define("interfaces/qitan/deletevote.js",["../../kit/remoteInterface","../../config/qitanConfig"],function(e,t,a){var i=e("../../kit/remoteInterface"),n=e("../../config/qitanConfig");a.exports=Q.Class("deleteVote",{construct:function(){this._remoteInterface=new i({deleteVote:{url:n.interfaces.deleteVote,struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{request:function(e,t){e=e||{},e.cb="fnsucc",e.votecallback=e.cb,e.t=Math.random(),e.antiCsrf=Q.crypto.md5(Q.cookie.get("P00001")),this._remoteInterface.send({param:e,dataType:"jsonp",ifname:"deleteVote"},function(e){t&&t(e)})}}})});
define("view/deleteRunningManView.js",["../components/view/view","../kit/parentByProp"],function(e,t,a){var i=e("../components/view/view");e("../kit/parentByProp"),a.exports=Q.Class("DeleteRunningManView",{extend:i,construct:function(e){this.callsuper(e),this.ctrl=e.ctrl,this.wrapper=e.doms},methods:{init:function(){this.bindEvent()},bindEvent:function(){var e=this;Q(this.wrapper[0]).delegate('a[data-click="delete"]',"click",function(t){Q.event.get(t).preventDefault(),Q.event.get(t).stopPropagation();var a=t.target;e.confirm(Q.$(a))})},confirm:function(e){var t=e,a='<div>确定要删除这条评论吗?</div><div class="mt10"><a href="javascript:;" class="cs-btn cs-btn-green" title="确认"data-elem-sure="sure">确认</a><a class="cs-linkbtn" href="javascript:;" data-elem-reset="reset">取消</a></div>',i=Q.$(document.createElement("div"));i.addClass("cs-tooltip-box-noArrow"),i.html(a),i.css("position","absolute");var n=t.left()-134,o=t.top()-15;i.css("left",n+"px"),i.css("top",o+"px"),Q.$("body").append(i),this.confirmEvent({elem:t,popup:i,left:n,top:o})},confirmEvent:function(e){var t=this,a=e.elem,i=e.popup;e.left,e.top;var n=a.attr("contentid"),o=i.down("[data-elem-sure=sure]"),r=i.down("[data-elem-reset=reset]"),s=t.wrapper;o.on("click",function(){t.ctrl.setdata({contentid:n}),t.update(s,n),t.hidden(i)}),r.on("click",function(){t.hidden(i)})},update:function(e,t){e.remove(Q.$("[data-contentid="+t+"]")),null==e.children()&&e.html('<div class="cs-feed-noContent" data-elem-feed="nocontent">还没有用户发表评论，快来<a href="javascript:;" data-delegate="focus-publisher">抢沙发！</a> </div>')},hidden:function(e){Q.$("body").remove(e)}}})});
define("model/qitan/qitanListModel.js",["../../components/model/model","../../interfaces/qitan/commitelist","../../interfaces/qitan/vote_list","../../interfaces/qitan/review_list"],function(e,t,a){var i=e("../../components/model/model"),n=e("../../interfaces/qitan/commitelist"),o=e("../../interfaces/qitan/vote_list"),r=e("../../interfaces/qitan/review_list");a.exports=Q.Class("ArgumentsModel",{extend:i,construct:function(e){this.callsuper(e),this.conf=e.config,this.listtype=e.listtype;var t="hot";e.config.base&&e.config.base.part&&e.config.base.part[0].sorttype&&(t=e.config.base.part[0].sorttype),this._data={page:1,type:t||"hot"}},methods:{_getData:function(e){var t=this.conf,a={},i=0;a.sort=this._data.type,a.tvid=t.tvid,a.qitan_comment_type=t.qitan_comment_type,a.page=this._data.page||1,a.aid=t.qitanid,a.qitanid=t.qitanid,a.categoryid=t.categoryid,a.escape="true",a.need_reply="true",a.page_size_reply=3,a.need_total=1;var s="hot";switch(t.base&&t.base.part&&t.base.part[0].sorttype&&(s=t.base.part[0].sorttype),a.reply_sort=s,Q("*[data-qitancomment-qitanid]").length||(a.tvid=0),Q.PageInfo&&(Q.PageInfo.playPageInfo||Q.PageInfo.livePlayInfo)&&(a.is_video_page=!0),a.qypid="01010011010000000000",a.albumid=t.vrs_album_id,this.listtype){case 0:i=t.pageNum.pinglun,a.page_size=i,a.need_subject=!0,(new n).request(a,function(t){"A00000"==t.code&&e(t.data)});break;case 1:i=t.pageNum.yingping,a.page_size=i,(new r).request(a,function(a){"A00000"==a.code&&(a.data.config=t,e(a.data))});break;case 2:i=t.pageNum.toupiao,a.page_size=i,(new o).request(a,function(t){"A00000"==t.code&&e(t.data)})}},setValue:function(e,t){var a=this._data;a[e]=t}}})});
define("interfaces/qitan/commitelist.js",["../../kit/remoteInterface","../../config/qitanConfig"],function(e,t,a){var i=e("../../kit/remoteInterface"),n=e("../../config/qitanConfig");a.exports=Q.Class("commite",{construct:function(){this._remoteInterface=new i({getCommite:{url:n.interfaces.arguments,struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{request:function(e,t){e=e||{},11===e.qitan_comment_type?(e.cb="fnsucc"+(new Date).getTime(),e.qitancallback=e.cb):(e.cb="fnsucc",e.qitancallback=e.cb),e.t=Math.random(),this._remoteInterface.send({param:e,ifname:"getCommite"},function(e){t&&t(e)})}}})});
define("interfaces/qitan/vote_list.js",["../../kit/remoteInterface","../../config/qitanConfig"],function(e,t,a){var i=e("../../kit/remoteInterface"),n=e("../../config/qitanConfig");a.exports=Q.Class("voteList",{construct:function(){this._remoteInterface=new i({voteList:{url:n.interfaces.votelist,struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{request:function(e,t){e=e||{},e.cb="fnsucc"+(new Date).getTime(),e.votecallback=e.cb,e.t=Math.random(),this._remoteInterface.send({param:e,ifname:"voteList"},function(e){t&&t(e)})}}})});
define("interfaces/qitan/review_list.js",["../../kit/remoteInterface","../../config/qitanConfig"],function(e,t,a){var i=e("../../kit/remoteInterface"),n=e("../../config/qitanConfig");a.exports=Q.Class("getreviews",{construct:function(){this._remoteInterface=new i({getReviews:{url:n.interfaces.getreview,struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{request:function(e,t){e=e||{},e.cb="fnsucc",e.qitancallback=e.cb,e.t=Math.random(),this._remoteInterface.send({param:e,ifname:"getReviews"},function(e){t&&t(e)})}}})});
define("interfaces/qitan/publish.js",["../../kit/remoteInterface2","../../config/siteDomain"],function(e,t,a){var i=e("../../kit/remoteInterface2"),n=e("../../config/siteDomain");a.exports=Q.Class("commite",{construct:function(){this._remoteInterface=new i({publish:{url:"http://api.t."+n.SITE_DOMAIN+"/qx_api/comment/publish",struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{request:function(e,t){e=e||{},e.antiCsrf=Q.crypto.md5(Q.cookie.get("P00001")),this._remoteInterface.send({param:e,ifname:"publish",method:"POST"},function(e){t&&t(e)})}}})});
define("interfaces/vote2Interface.js",["../kit/remoteInterface","./config"],function(e,t,a){var i=e("../kit/remoteInterface"),n=e("./config");a.exports=Q.Class("vote2Interface",{construct:function(){this._remoteInterface=new i({getVoteRankStar:{url:n.interfaces.getVoteRankStar},getBatchCommentCount:{url:n.interfaces.getBatchCommentCount},freeBuy:{url:"http://vote.i.iqiyi.com/eagle/runman/join_vote"},getRunmanVotes:{url:n.interfaces.getRunmanVotes}})},methods:{getRankStar:function(e,t){e=e||{},this._remoteInterface.send({param:e,dataType:"jsonp",ifname:"getVoteRankStar",antiCsrf:!0},function(e){t&&t(e)})},getBatchCommentCount:function(e,t){e=e||{},this._remoteInterface.send({param:e,dataType:"jsonp",ifname:"getBatchCommentCount",antiCsrf:!0},function(e){t&&t(e)})},freeBuy:function(e,t){e=e||{},this._remoteInterface.send({param:e,dataType:"jsonp",ifname:"freeBuy",antiCsrf:!0},function(e){t&&t(e)})},getRunmanVotes:function(e,t){e=e||{},this._remoteInterface.send({param:e,dataType:"jsonp",ifname:"getRunmanVotes",antiCsrf:!0},function(e){t&&t(e)})}}})});
define("interfaces/vienxInterface.js",["../kit/remoteInterface","./config"],function(e,t,a){var i=e("../kit/remoteInterface"),n=e("./config");a.exports=Q.Class("vienxInterface",{construct:function(){this._remoteInterface=new i({getVienxRankStar:{url:n.interfaces.getVienxRankStar},payBuy:{url:"http://buy.vienx.iqiyi.com/v1/purchase/send.json"},getProduct:{url:"http://product.vienx.iqiyi.com/v1/product/all.json?partner_code=7bmdFIaJ9VyBAedX&platform=1_10_101"}})},methods:{getRankStar:function(e,t){e=e||{},this._remoteInterface.send({param:e,dataType:"jsonp",ifname:"getVienxRankStar",antiCsrf:!0},function(e){t&&t(e)})},payBuy:function(e,t){e=e||{},this._remoteInterface.send({param:e,dataType:"jsonp",ifname:"payBuy",antiCsrf:!0},function(e){t&&t(e)})},getProduct:function(e,t){e=e||{},this._remoteInterface.send({param:e,dataType:"jsonp",ifname:"getProduct",antiCsrf:!0},function(e){t&&t(e)})}}})});
define("action/qitan/getUserInfo.js",["../../components/action/adapter","../../model/qitan/getUserInfoModel","../../kit/eventPlugin","../../kit/userInfo"],function(e,t,a){var i,n=e("../../components/action/adapter"),o=e("../../model/qitan/getUserInfoModel"),r=e("../../kit/eventPlugin"),s=e("../../kit/userInfo");a.exports=Q.Class("GetUserInfo",{extend:n,plugins:[new r],statics:{getInstance:function(){return i}},construct:function(e){e=e||{},e.model=e.model||new o(e),this.callsuper(e),i=this},methods:{getData:function(e){var t=this;s.isLogin()===!0?this._model._getData(function(a){t.fire({type:"changeStatus",data:{status:1}}),e(a)}):e(null)},logout:function(){this.fire({type:"changeStatus",data:{status:0}})},login:function(){this.fire({type:"changeStatus",data:{status:1}})},getUserInfo:function(){return this._model._data.userinfo}}})});
define("model/qitan/getUserInfoModel.js",["../../components/model/model","../../interfaces/qitan/getInfo"],function(e,t,a){var i=e("../../components/model/model"),n=e("../../interfaces/qitan/getInfo");a.exports=Q.Class("GetUserInfoModel",{extend:i,construct:function(e){this.callsuper(e),this._data={userinfo:""}},methods:{_getData:function(e){var t=this,a=a||{};(new n).request(a,function(a){"A00000"==a.code&&(e(a.data),t.setInfo(a.data))})},setInfo:function(e){this._data.userinfo=e},destoryInfo:function(){this._data.userinfo=null}}})});
define("interfaces/qitan/getInfo.js",["../../kit/remoteInterface","../../config/qitanConfig","../../kit/userInfo"],function(e,t,a){var i=e("../../kit/remoteInterface"),n=e("../../config/qitanConfig"),o=e("../../kit/userInfo");a.exports=Q.Class("getInfo",{construct:function(){this._remoteInterface=new i({getInfo:{url:n.interfaces.getinfo,struct:{code:{type:"string"},data:{type:"object"}}}})},methods:{request:function(e,t){var a={},i={};a.user=o.getUserInfo(),a.user.gender="",a.user.icon="",a.user.profileUrl="",a.user.suid=a.user.uid,a.user.uname=a.user.nickname,a.user.subAccount=o.isSubaccount(),a.unreadNum={unreadNum:"0",unreadUrl:""},o.getIsLoginInfo(function(e){a.user.icon=e.icon}),a.mecount=0,t&&o.getBindedSnsInfo(function(e){e?(e.kaixin=e.kaixin?!0:!1,e.qweibo=e.qweibo?!0:!1,e.qzone=e.qzone?!0:!1,e.renren=e.renren?!0:!1,e.weibo=e.weibo?!0:!1):e={kaixin:!1,qweibo:!1,qzone:!1,renren:!1,weibo:!1},a.sync=e,i.code="A00000",i.data=a,t(i)})}}})});
define("units/sourcePKBang.js",["../components/units/pageJob","../components/action/checkDoms","../kit/videoInfo","../kit/userInfo","../kit/qiyiPlayer","../kit/artTemplate","../action/scrollV2","../action/tab","../view/sourcePKBangTPL","../interfaces/vote2Interface"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms");e("../kit/videoInfo");var o=e("../kit/userInfo"),r=e("../kit/qiyiPlayer").getPlayer("video"),s=e("../kit/artTemplate"),l=e("../action/scrollV2"),d=e("../action/tab"),c=e("../view/sourcePKBangTPL"),u=e("../interfaces/vote2Interface");new Q.ic.InfoCenter({moduleName:"SourcePKBang"});var m,p,h,f,g="sourcePKBang",v=null,y=!1,b=Q.PageInfo||{},V=b.playPageInfo||{},w=V.wallId;i.create(g,{getDependentDoms:function(){var e=this.doms=Q.$("#widget-pkbang");return e&&(m={wrap:e,vwrap:e.down('[data-pkbang-elem="wrap"]')}),m},check:function(){return n(m),!!m},init:function(){var e=this;e._getTab(),y=w&&Q("[data-paopao-ele=titleBtn]")[0]?!0:!1,e._getData(),r.on("videoChanged",function(t){t=t||{},t=t.data||{};var a=t.circle||{},i=t.isDisplayCircle||t.displayCircle;1==i&&2==a.type&&a.id?y=!0:(y=!1,e.contentInited=!1,e._getData())}),Q.event.customEvent.on("vip-videoChanged",function(t){t=t||{},t=t.data||{};var a=t.circle||{},i=t.isDisplayCircle||t.displayCircle;1==i&&2==a.type&&a.id?y=!0:(y=!1,e.contentInited=!1,e._getData())}),Q.event.customEvent.on("paoControl_update",function(t){t=t.data||{},y=t.paopaoWall?!0:!1,e.contentInited=!1,e._getData()})},_formatNum:function(e){var t=e||"0";if(1e7>t)t=Q.string.divideNumber(t);else{var a=1e8>t?"万":"亿",i=1e8>t?1e4:1e8,n=(t/i+"").split("."),o=n[1]&&n[1].length<2?"0":"",r=n[1]?n[1].substring(0,2)+o:"00";t=n[0]+"."+r+a}return t},_getTab:function(){var e=this;p||(p=d.getTab("sourceListTab")||d.getTab("dramaseriesTab")),p&&(h=p._view._doms.titles,f=p._view._doms.bodies,p.on("focuschange",function(t){var a=t.data.title,i=a.attr("data-flag");"pklist"===i&&(e.contentInited||(e.contentInited=!0,e._renderContent()),e._initScroll(),e._sendShowPingback())}))},_getPKIndex:function(){var e,t=this;h||(t._getTab(),h=p._view._doms.titles);for(var a=0;a<h.length;a++)if("pklist"===Q.$(h[a]).attr("data-flag")){e=a;break}return e},_getData:function(){var e=this;r.getVideoInfo(function(t){var a=0;if(v=null,Q.array.isArray(t.votes)&&t.votes.length>0)for(var i=0;i<t.votes.length;i++)t.votes[i]&&3===t.votes[i].type&&a++,t.votes[i]&&2===t.votes[i].type&&t.votes[i].id&&(v=t.votes[i].id);if(y&&a>0&&!Q.browser.IE6&&(v=null),v){var n={vids:[v],appid:0};o.isLogin()?n.uid=o.getUid():n.openudid=Q.cookie.get("QC005")||Q.cookie.get("QC006")||"",(new u).getRunmanVotes(n,function(t){var a=!1;if("A00000"===t.code){if(t.data&&t.data[0]&&t.data[0].childs&&t.data[0].childs.length>0){var i=t.data[0],n=i.childs[0],o=[],r=0;if(n.options&&n.options.length>=2){for(var s=n.options,l=0;2>l;l++)r+=s[l].showNum,o.push({oid:s[l].oid,nickname:s[l].text,faceurl:s[l].metaAttri.starImg||"",showNum:e._formatNum(s[l].showNum),originalNum:s[l].showNum,voteTip:s[l].voteTip||"",userCouldJoinTimes:s[l].userCouldJoinTimes});a=!0}e._setInfo({title:n.title||"",totalOrigNum:r,totalShowNum:e._formatNum(r),status:i.status,pkinfo:o})}a?e._showTabTrigger():e._hideTabTrigger()}else e._hideTabTrigger()})}else e._hideTabTrigger()})},_setInfo:function(e){this._info=e},_getInfo:function(){return this._info},_renderContent:function(){var e=this,t=e._getInfo(),a=s.compile(c),i=a(t);m.vwrap.html(i),e._renderChart(),e._bindEvent(),e._resetScroll()},_bindEvent:function(){var e,t=this,a=m.vwrap.down('[data-pkbang-elem="tovote"]'),i=m.vwrap.down('[data-pkbang-elem="tovotefail"]'),n=m.vwrap.down('[data-pkbang-elem="votetip"]'),r=m.vwrap.down('[data-pkbang-elem="votetiptext"]');a&&a.on("click",function(s){Q.event.get(s).preventDefault();var l=Q.$(this),d=parseInt(l.attr("data-index"),10),c=l.attr("data-oid"),m=o.getAuthCookies(),p={vid:v,options:{},resType:0,appid:1};p.options[v]=[c],p.options=JSON.stringify(p.options),m?p.authcookie=m:p.openudid=Q.cookie.get("QC005")||Q.cookie.get("QC006")||"",(new u).freeBuy(p,function(o){if("A00000"==o.code)t._voteSuccess(d);else switch(o.code){case"V00003":a.hide(),i.css("display","").html("明天再来");break;case"V00010":a.hide(),i.css("display","").html("已结束");break;case"V00005":case"V00007":n.css("display",""),r.html("投票失败，请点击重试"),clearTimeout(e),e=setTimeout(function(){n.hide()},3e3);break;default:n.css("display",""),r.html(o.info),clearTimeout(e),e=setTimeout(function(){n.hide()},3e3)}})})},_voteSuccess:function(e){var t=this,a=m.vwrap.down('[data-pkbang-elem="votesuccess"][data-index="'+e+'"]'),i=m.vwrap.down('[data-pkbang-elem="popularnumleft"]'),n=m.vwrap.down('[data-pkbang-elem="popularnumright"]'),o=m.vwrap.down('[data-pkbang-elem="popularnumtotal"]'),r=t._getInfo();r.pkinfo[e].originalNum+=1,r.pkinfo[e].showNum=Q.string.divideNumber(r.pkinfo[e].originalNum),r.totalOrigNum=r.pkinfo[0].originalNum+r.pkinfo[1].originalNum,r.totalShowNum=Q.string.divideNumber(r.totalOrigNum),t._setInfo(r),t._renderChart(),i.html(r.pkinfo[0].showNum),n.html(r.pkinfo[1].showNum),o.html(r.totalShowNum),a&&(a.css("display",""),setTimeout(function(){a.hide()},3e3))},_renderChart:function(){var e=this,t=m.vwrap.down('[data-pkbang-elem="chart"]'),a=e._getInfo(),i=Math.round(100*a.pkinfo[0].originalNum/a.totalOrigNum),n=[["RIGHT",100-i],["LEFT",i]],o="#FB7427",r="#6B9F01",s={chart:{renderTo:t[0],type:"pie",width:180,height:180,margin:[0,0,0,0],backgroundColor:null},title:{text:""},credits:{enabled:!1},plotOptions:{pie:{size:"100%",innerSize:"90%",borderWidth:4,borderColor:"#1f1f1f",colors:[o,r],dataLabels:{enabled:!1},states:{hover:{brightness:.1}}}},tooltip:{enabled:!1},series:[{data:n}]};seajs.use("http://static.iqiyi.com/js/qiyiV2/lib/highcharts.js",function(e){var t=s.series[0].data,a=t[0][1],i=t[1][1];0===a&&(s.plotOptions.pie.borderWidth=0,s.plotOptions.pie.colors.shift(),t.shift()),0===i&&(s.plotOptions.pie.borderWidth=0,s.plotOptions.pie.colors.pop(),t.pop()),s.plotOptions.pie.startAngle=30>=a?140-360*(a/100)/2:a>=70?224+360*(i/100)/2:180+360*(i/100),new e.Chart(s,function(){})})},_showTabTrigger:function(){var e=this._getPKIndex(),t=h[e];t&&Q.$(t).css("display","")},_hideTabTrigger:function(){var e=this._getPKIndex(),t=h[e];if(t){Q.$(t).hide();var a=p._model._data.focus;a===e+1&&p.select(1)}},_initScroll:function(){Q.event.customEvent.fire({type:"widgetInit-scroll",data:{wrap:m.wrap,name:"pkbangscroll"}})},_resetScroll:function(){var e=l.getScroll("pkbangscroll");e&&e.reset()},_sendShowPingback:function(){Q.log.server({t:"21",block:"509232_10",pu:o.getUid(),u:Q.cookie.get("QC005")||Q.cookie.get("QC006")||"",p:"10",p1:"101",pf:"1"},"http://msg.71.am/b")}}),a.exports=g});
define("view/sourcePKBangTPL.js",[],function(e,t,a){var i=['<div class="pk-starWrap">','<div class="pk-title"><h3>{{title}}</h3></div>','<div class="pk-digitalWrap">','<div class="pk-digital">','<div class="pk-digital_circle">','<div style="position: relative; margin: 0 40px;">','<div data-pkbang-elem="chart" style="position: absolute; left: -21px; top: -10px; height: 200px; width: 200px; z-index: 1;"></div>',"</div>",'<div class="pk-digital_join">','<span class="icon-pkVS"></span>','<p><span data-pkbang-elem="popularnumtotal">{{totalShowNum}}</span>人参与</p>',"</div>","</div>","</div>",'<div class="pk-num">','<p class="pk-numL">人气值<span data-pkbang-elem="popularnumleft">{{pkinfo[0].showNum}}</span></p>','<p class="pk-numR">人气值<span data-pkbang-elem="popularnumright">{{pkinfo[1].showNum}}</span></p>',"</div>","</div>",'<div class="pk-star clearfix">',"{{each pkinfo as item index}}",'<div class="pk-star_item">','<div class="pk-star_img">','<img src="{{item.faceurl}}" width="70" height="70" />','<p class="pk-star_name">{{item.nickname}}</p>','<div class="mod-rm-animation" data-pkbang-elem="votesuccess" data-index="{{index}}" style="display:none;">','<span class="rm-addPopular-font">+1</span>',"</div>","</div>",'<a href="javascript:;" class="pk-vote" data-pkbang-elem="tovote" data-oid="{{item.oid}}" data-index="{{index}}" rseat="509232_{{index+1}}"',' {{if status != 2 || item.userCouldJoinTimes == 0}}style="display: none;"{{/if}}>','<i class="icon-pkVote"></i>',"<span>投票</span>","</a>",'<a href="javascript:;" class="rm-fail_link" data-pkbang-elem="tovotefail"  ','{{if !(status != 2 || item.userCouldJoinTimes == 0)}}style="display: none;"{{/if}}>',"{{ if status == 3 }}已结束{{ else if (item.userCouldJoinTimes <= 0) }}明日再来{{/if}}","</a>","</div>","{{/each}}","</div>","</div>",'<div class="rm-fail" data-pkbang-elem="votetip" style="display:none;">','<div class="rm-fail-box">','<h2 class="rm-fail_info" data-pkbang-elem="votetiptext"></h2>',"</div>","</div>"].join("");a.exports=i});
define("units/starsBarrage.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/barrageInterface","../kit/userInfo","../kit/barragerUserStatus","../action/tab","../action/scrollV2","../kit/artTemplate","../kit/qiyiPlayer"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o=e("../interfaces/barrageInterface"),r=e("../kit/userInfo"),s=e("../kit/barragerUserStatus"),l=e("../action/tab"),d=e("../action/scrollV2"),c=e("../kit/artTemplate"),u=e("../kit/qiyiPlayer"),p=u.getPlayer("video");new Q.ic.InfoCenter({moduleName:"starsBarrage"});var m,h,f;m=Q.PageInfo&&Q.PageInfo.playPageInfo||{},f=m.tvId,h=m.position;var g,v,b,y,w,V,k,U=!0,_=[],x=0,I="selected",C=0,L={},P=!1,T=!1,S=!1,W=!1,E="starsBarrage";i.create(E,{getDependentDoms:function(){var e=Q.$("#widget-starbarrage");return e&&(g={wrap:e,cont:e.down('*[data-starbarrage-elem="cont"]'),list:e.down('*[data-starbarrage-elem="list"]'),tpl:e.down('*[data-starbarrage-elem="tpl"]'),shownum:e.attr("data-shownum")||"50"}),g},check:function(e){return n(e),!!e},init:function(){var e=this;g.shownum=parseInt(g.shownum,10),g.nocont=g.wrap.down('*[data-starbarrage-elem="nocont"]'),g.scrollwrap=g.wrap.down('*[data-starbarrage-elem="scrollwrap"]'),g.usertpl=g.wrap.down('*[data-starbarrage-elem="usertpl"]'),g.startpl=g.wrap.down('*[data-starbarrage-elem="startpl"]'),g.tucaotpl=g.wrap.down('*[data-starbarrage-elem="tucaotpl"]'),P=r.isLogin(),e.getDefaultSwitchStatus()},exec:function(){var e=this;e.bindEvent()},bindEvent:function(){var e=this,t=Q.event.customEvent;t.on("login",function(){P=!0;var t=Q.object.isEmpty(L);t||e.getRealInfo(L,function(){y&&location.reload()})}),t.on("logout",function(){P=!1,y&&location.reload()}),t.on("barrage-switch-self",function(t){t=t||{},t=t.data||{},t.isOpen?(T=!0,C&&e.selectTab()):T=!1}),t.on("barrage-commentsend",function(t){t=t||{},t=t.data||{},C&&e.selectTab()}),p.on("setBarrageInteractInfo",function(t){t=t.data,e.getRealInfo(t)}),p.on("barrageReceiveData",function(t){if(U){e.insertStop();var a=0,i=0;if(t=t.data,t=t.barrageData,t.length)for(i=0,a=t.length;a>i;i++){var n=t[i].data;if(n&&n.length)for(var o=0;o<n.length;o++){var r="";if(C){var s=n[o].contentType;if(y&&P){if(2==s)continue}else if(2!=s)continue}r=e.getHtml(n[o]),_.push(r)}}}}),p.on("videoChanged",function(t){t=t||{},f=t.data.tvid,e.setPb(f),C||e.loadData(f)}),g.wrap.delegate("starbarrage-replay",function(e){Q.event.get(e).preventDefault();var t=Q.$(e.target),a=t.attr("data-name")||"",i=t.attr("data-uid")||"";C&&Q.event.customEvent.fire({type:"barrage-switch-other",data:{isOpen:T,vfrom:"flashright"}}),Q.event.customEvent.fire({type:"swf_barrageReply",data:{name:a,uid:i,origin:h}})}),g.list.on("mouseenter",function(){U=!1,e.insertStop()}),g.list.on("mouseleave",function(){U=!0}),w=l.getTab("sourceListTab"),w&&(V=w._view._doms.titles,w.on("focuschange",function(t){var a=t.data.title,i=a.attr("data-flag");a.attr("data-isload"),"danmu"===i&&(C?T||Q.event.customEvent.fire({type:"barrage-switch-other",data:{isOpen:1}}):e.loadData(f))}),e.setPb()),k=e.autoInsert.bind(this),setInterval(k,1e3)},setPb:function(e){e=e||f;var t="qpid="+e,a=V[4];if(a){a=Q.$(a),a.attr("data-pb",t);var i=a.down("a");i&&i.attr("data-pb",t)}},getDefaultSwitchStatus:function(){var e=Q.cookie.get("QC118")||{};try{e=JSON.parse(e),T="1"==e.isOpen?!0:!1}catch(t){}var a=Q.$("[data-widget-barrage1_5]");if(a){var i=a.attr("data-barrage1_5-defaultopen");"1"===i&&(T=!0)}},getRealInfo:function(e,t){var a=this;C?1==e.isConnected?(L=e,C=1,p.getPlayInfo(function(i){var n=i.tvid||i.tvId;y=s.userIsStar(e,n),a.selectTab(),t&&t()})):(C=0,_&&_.length||a.loadData(f)):1==e.isConnected?(a.changeToNonReal(),L=e,C=1,p.getPlayInfo(function(i){var n=i.tvid||i.tvId;y=s.userIsStar(e,n),a.selectTab(),t&&t()})):C=0},initScroll:function(e){var t=this,a=e||g.wrap;a&&(t.wheelParam(),b?b.reset({keepPos:!0}):(Q.event.customEvent.fire({type:"widgetInit-scroll",data:{wrap:g.wrap,name:"starbarrage"}}),setTimeout(function(){t.scrollOption()},10)))},scrollOption:function(){var e=this;if(b=d.getScroll("starbarrage")){var t=b._view._doms.scrollBar;t.on("mousedown",function(t){t=t||{},U=!1,e.insertStop()}),b.on("finishmove",function(e){e=e||{},U=!0})}},itemMouseOverEvent:function(e){if(C){var t=Q.$(e.target||e.srcElement);t&&t.addClass(I)}},itemMouseLeaveEvent:function(e){if(C){var t=Q.$(e.target||e.srcElement);t&&t.hasClass(I)&&t.removeClass(I)}},addBlistEvent:function(){var e=this,t=g.blist;t&&(t.on("mouseenter",function(t){e.itemMouseOverEvent(t)}),t.on("mouseleave",function(t){e.itemMouseLeaveEvent(t)}))},addItemEvent:function(){var e=this,t=g.blist;if(t){var a=Q.$(t[0]);a&&(a.on("mouseenter",function(t){e.itemMouseOverEvent(t)}),a.on("mouseleave",function(t){e.itemMouseLeaveEvent(t)}))}},domNumChange:function(){var e=g.blist,t=g.shownum;if(e&&e.length>t)for(var a=e.length-1;a>=t;a--){var i=e[a],n=Q.$(i).parent();n[0].removeChild(i)}},loadData:function(e){var t=this,a=g.shownum;v||(v=new o),v.requestSortedBullets({tvid:e,order:"addtime_desc",target:"all",limit:a},function(e){var a=e.data,i="";if(a&&a.length){for(var n=0,o=a.length;o>n;n++){var r=a[n];if(C&&P)if(y){if(2==r.contentType)continue}else if(2!=r.contentType)continue;i+=t.getHtml(r)}t.insertEvent(i,"list")}else t.setNoBarrage()})},getHtml:function(e){var t=e,a=t.userInfo&&t.userInfo.name,i=t.content;if(i=i.replace(/\[([0-9]{1}||[0-9]{3})[0-9a-z]{2}\]/g,""),!i.trim())return"";var n=g.tpl.value();a||(a=s.getAnonyUserName()),"true"===e.isReply&&e.replyUserInfo&&e.replyUserInfo.name&&(i="回复@"+e.replyUserInfo.name+"："+i),t={idx:x,name:a,uid:t.userInfo&&t.userInfo.uid,content:i,addTime:t.addTime,contentId:t.contentId,picurl:t.userInfo.picS,tvid:f},x++,t.isStar=2==e.contentType?!0:!1,t.addTime=parseInt(t.addTime,10),t.time=Q.date.format(new Date(t.addTime),"yyyy-MM-dd HH:mm:ss");var o=c.compile(n),r=o(t);return r},insertEvent:function(e,t){var a=this;t&&g.list.html(""),g.list.html("AFTERBEGIN",e),g.blist=g.wrap.down('*[data-dm-elem="item"]'),a.showCont(),a.domNumChange(),a.initScroll(),t?a.addBlistEvent():a.addItemEvent()},autoInsert:function(){var e=this;if(U&&_.length){var t=_.shift();if(!t)return;!S&&W&&e.hideTips(),S=!0,e.insertEvent(t)}},insertStop:function(){_.length&&(_=[],_.length=0)},showCont:function(){"none"===g.list.css("display")&&g.list.css("display",""),g.nocont&&"none"!==g.nocont.css("display")&&g.nocont.hide()},changeToNonReal:function(){var e=this;e.showCont();var t=g.tucaotpl;t&&(t=t.value(),g.list.html("AFTERBEGIN",t)),setTimeout(function(){_.length||e.nocontent()},5e3)},hideTips:function(){S=!1,W=!1;var e=g.list.down('li[data-dm-elem="tips"]');e&&g.list[0].removeChild(e[0])},nocontent:function(){if(C&&!S){W=!0;var e=g.usertpl,t=g.startpl,a="";y&&t?a=t.value():e&&(a=e.value()),a=a.trim(),a&&g.list.html("AFTERBEGIN",a)}},setNoBarrage:function(){g.list.hide(),g.nocont&&g.nocont.css("display",""),g.scrollwrap&&g.scrollwrap.hide()},selectTab:function(){var e=5,t=V[e-1];if(t){var a=Q.$(t),i=a.css("display");"none"==i&&a.css("display",""),w.select(e)}},wheelParam:function(){var e,t=g.blist.length;t>0&&(e=100>t?3:200>t?30:60*Math.ceil(t/100),b?b._view.setWheelDelta(e):g.wrap.attr("data-scroll-wheeldelta",e))}}),a.exports=E});
define("units/videoBuy.js",["../components/units/pageJob","../components/action/checkDoms","../kit/responsive","../action/scrollV2","../kit/artTemplate","../kit/formatNumber","../kit/anim","../kit/qiyiPlayer","../interfaces/pcMallInterface","../kit/findParent","../kit/userInfo","../action/qipaLogin","../kit/showPingBack"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n,o,r,s,l,d,c,m,u,p,h,f,g=e("../kit/responsive"),v=e("../action/scrollV2"),U="videoBuy",V=Q.$("#videoBuyContainer"),y=Q.$("#flashAreaCon"),b=Q.$("#videoArea"),k=Q.$(".container-dianshiju"),w=e("../kit/artTemplate"),_=e("../kit/formatNumber"),x=e("../kit/anim"),L=e("../kit/qiyiPlayer"),I=!1,C=!1,W=0,X={},T=!1,S=!1,E="",K=Q.$("#videoBuySmallImgCon"),P=e("../interfaces/pcMallInterface"),A=e("../kit/findParent"),D=e("../kit/userInfo"),F=e("../action/qipaLogin"),J=Q.PageInfo&&Q.PageInfo.playPageInfo,N="0",B=Q.$('*[data-widget-trywatch="trywatch"]'),M=Q.$("#widget-dramaseries"),O=e("../kit/showPingBack"),R=1;i.create(U,{check:function(){return!!V},init:function(){var e=this;l=Q.$("#goosBtn");var t=Q.$("#videoBuyItemTpl");t&&(E=t.value()),Q.event.customEvent.on("swf_initAds",function(t){e.initAds(t.data),e.bindEvent()}),Q.event.customEvent.on("swf_startAd",function(t){e.showSmallItem(t.data.startTime);var a=Q.$("#widget-dramaseries");return J&&6===J.cid&&J.sourceId||a&&2===J.cid||"true"==V.attr("data-initshop")?(Q.event.customEvent.fire({type:"tabshow-shop",data:{switchback:!0,switchToShowingTab:"true"==V.attr("data-switchtoshowingtab")}}),e.showBigItem(t.data.startTime),e._shopFlicker(),I||(u=t.data.startTime),void 0):(I?(e.showBigItem(t.data.startTime),e._shopFlicker()):u=t.data.startTime,void 0)}),Q.event.customEvent.on("swf_expandAd",function(t){e.showBigItem(t.data.startTime),e._shopFlicker()}),Q.event.customEvent.on("swf_clearAds",function(){R=1,B&&(N=B.attr("data-payInfo-display")||"0","1"===N&&(I=!1)),e.clear(),Q.event.customEvent.fire({type:"js-hideShop"})}),Q.event.customEvent.on("swf_setJsDoSomething",function(t){var a=t&&t.data||{};if("CollectionGoods"==a.handleType&&"flash"==a.origin){var i=Q.$("#scrollContent-vipbuy").down('[data-item-elem="item"][data-addtofav-id]');if(i){i=Q.$(i[0]),e._showMallTip();var n=Q.$("#flashAreaCon")||Q.$("#flashArea"),o=n&&n.hasClass("flashArea_shop");if(o){var r=Q.$('[data-flag="shop"]');if(!r||r.hasClass("selected")){var s=parseInt(i.attr("data-index"),10);e.showBigItem(i.attr("data-time"),s)}}}}}),s=v.getScroll("vipbuy"),L.getPlayer("video").on("findGoods",function(t){var a=t.data.time;return e.showSmallItem(a),e.showBigItem(a),Q.event.customEvent.fire({type:"tabshow-shop"}),!0}),g.on("bodyClassChange",function(){s.reset({keepPos:!0})}),L.getPlayer("video").on("Paused",function(){T=!0}),L.getPlayer("video").on("Playing",function(){T=!1}),L.getPlayer("video").on("switchFullScreen",function(t){S="true"===t.data,S||e.noticeShow()}),Q.event.customEvent.on("showShop-analogClick",function(t){t=t||{},t=t.data||{},I=t.isShow?!1:!0,I?e.hide():u?e.showBigItem(u):(Q.event.customEvent.fire({type:"showGuidePingBack"}),e.showpingback(),e.show())}),Q.event.customEvent.on("login",e._initFavorites),Q.event.customEvent.on("logout",e._clearFavorites)},_shopFlicker:function(){var e=Q.$("#scrollWrap-vipbuy");e.addClass("shop-flicker");var t;t=setTimeout(function(){e.removeClass("shop-flicker"),clearTimeout(t)},2500)},_preHandleAdData:function(e){for(var t,a=[],i=[],n="",o=!0,r=0;r<e.ads.length;r++){var s=e.ads[r];s.js_index=r+1;var l=Math.floor(s.startTime/60)+"";if(o=t==l,o?(s.iconParent="mod-shop-tit-sub",s.iconLink="titLink-sub",s.iconDot="icon-dot"):(i=[],t=l,l+="分处",s.js_time=l,s.iconParent="mod-shop-tit",s.iconLink="titLink",s.iconDot="icon-lineDot"),s.volume&&s.volume>10?s.volume=_.format(s.volume):(s.volume=0,s.js_hideVolume=!0),s.price&&s.discountedPrice&&s.discountedPrice!=s.price||(s.js_hidePrice=!0,s.discountedPrice==s.price&&""===s.price&&(s.js_hideDiscountPrice=!0)),s.price>1e4&&s.price<1e8)s.price=parseFloat((s.price/1e4).toFixed(1),10)+"万";else if(s.price>=1e8){s.price=parseFloat((s.price/1e8).toFixed(),10)+"亿";var d=s.price%1e8/1e4;d&&(s.price+=parseFloat(d.toFixed(),10)+"万")}s.discountedPrice=parseFloat(s.discountedPrice,10).toFixed(2),isNaN(s.discountedPrice)&&(s.discountedPrice=""),s.discountedPrice=s.discountedPrice||s.price,s.realPrice=s.discountedPrice,s.goodsId=s.goodsId||"",n+='<p j-delegate="videoBuy-showBig" data-time="'+s.startTime+'" data-index="'+(r+1)+'" class="picItem"><img src="'+s.imgUrl+'"></p>',i.push(s),o||0===i.length||a.push(i)}return{data:a,smallHTML:n}},initAds:function(e){var t=this;e&&e.ads&&0!==e.ads.length||t.clear(),l&&l.removeClass("def-bar-gray").show(),c=e.templateType,d=e.adZoneId,p=w.compile(E);for(var a=t._preHandleAdData(e),i=a.data,n="",r=0,m=i.length;m>r;r++){var u=i[r];n+=0===r?1===m&&1===u.length?'<div class="mod-shop-con firstShop firstShop-line">':'<div class="mod-shop-con firstShop">':'<div class="mod-shop-con" >';for(var h=0,g=u.length;g>h;h++){var v=u[h];n+=p(v)}n+="</div>"}if(a.smallHTML){K.show().html(a.smallHTML),Q.$("#scrollContent-vipbuy").html(n);var U=Q.$('[widget-prodcut-slidewidget = "widget"]');Q.event.customEvent.fire({type:"initBuySlide",data:{widget:U}}),Q.event.customEvent.fire({type:"initGoodsGuide"}),Q.event.customEvent.fire({type:"shop-renderdone"}),f=e.ads.length;var y=5>f?f:5;W=35*y,V.addClass("play-shop-open"),x({elem:K,style:"height",from:0,to:W}),o=setTimeout(function(){x({elem:K,style:"height",to:0,done:function(){V.removeClass("play-shop-open"),Q.$("#videoBuyNumTip").html(f).show()}})},5e3),l.attr("rseat","508121_1"),t.pingbackForSmall()}if(t._initFavorites(),t._initShow){t.show();var b=Q.$('[data-flag="shop"]');(!b||b.hasClass("selected"))&&(Q.event.customEvent.fire({type:"showGuidePingBack"}),t.showpingback())}setTimeout(function(){s.reset()},0)},_showMallTip:function(){var e=this;e.hideSmallItem();var t=Q.$('[j-delegate="hideMallTip"]');t.show();var a=Q.$('[data-elem-malltip="mallTip"]');a.show(),V.addClass("play-shop-open"),K.addClass("dn"),h=setTimeout(e._hideMallTip,1e4)},_hideMallTip:function(e){e&&Q.event.get(e.event).preventDefault();var t=Q.$('[j-delegate="hideMallTip"]');t.hide();var a=Q.$('[data-elem-malltip="mallTip"]');a.hide(),V.removeClass("play-shop-open"),K.removeClass("dn"),h&&(clearTimeout(h),h=null)},_initFavGoods:function(e,t){for(var a in e){var i=e[a],n=Q.$("[data-fav-id="+a+"]");if(n){var o=parseInt(n.attr("data-fav-source"),10);if(o===t)if(n.css("display",""),i){n.addClass("selected"),n.attr("j-delegate","removeFromFavorite"),n.attr("title","已收藏"),n.html('<i class="site-icons icon-stow"></i>已收藏');var r=A(n,'[data-item-elem="item"]');r&&r.attr("data-addtofav-id",a)}else n.removeClass("selected"),n.attr("j-delegate","addToFavorite"),n.attr("title","收藏商品"),n.html('<i class="site-icons icon-stow"></i>收藏商品')}}},_initFavorites:function(){var e=this,t=Q.$("#scrollContent-vipbuy").down("[data-fav-id]");if(t&&0!==t.length){if(!D.isLogin())return e._clearFavorites(),void 0;var a=[],i=[];t.forEach(function(e){var t=Q.$(e),n=t.attr("data-fav-id"),o=parseInt(t.attr("data-fav-source"),10);n&&!isNaN(o)&&(1===o?a.push(n):2===o&&i.push(n))}),a.length>0&&P.isFavorite({target_ids:a.join(","),interest_type:"0"},function(t){"A00000"==t.code&&e._initFavGoods(t.data,1)}),i.length>0&&P.isFavorite({target_ids:i.join(","),interest_type:"2"},function(t){"A00000"==t.code&&e._initFavGoods(t.data,2)})}},_clearFavorites:function(){var e=Q.$("#scrollContent-vipbuy").down("[data-fav-id]");e.forEach(function(e){var t=Q.$(e),a=parseInt(t.attr("data-fav-source"),10),i=t.attr("data-fav-id")||"";isNaN(a)||(i?t.css("display",""):t.hide()),t.attr("j-delegate","addToFavorite"),t.attr("title","收藏商品"),t.removeClass("selected"),t.html('<i class="site-icons icon-stow"></i>收藏商品');var n=A(t,'[data-item-elem="item"]');n&&n.removeAttr("data-addtofav-id")})},_addGoodsToFavorite:function(e){if(e){var t=e.attr("data-fav-source"),a="0";"2"===t&&(a="2");var i={target_id:e.attr("data-fav-id")||"",interest_type:a,source:"1",target_url:e.attr("data-fav-url")||""};"2"===a&&Q.object.extend(i,{target_icon:e.attr("data-fav-icon")||"",target_name:e.attr("data-fav-tname")||"",target_source_icon:e.attr("data-fav-logo")||"",mall_name:e.attr("data-mall-name")||"",snapshot_price:e.attr("data-fav-price")||""}),P.addToFavorite(i,function(t){if("A00000"==t.code){e.attr("j-delegate","removeFromFavorite"),e.attr("title","已收藏"),e.addClass("selected"),e.html('<i class="site-icons icon-stow"></i>已收藏');var a=A(e,'[data-item-elem="item"]');a&&a.attr("data-addtofav-id",i.target_id)}})}},clear:function(){this._initShow=!!I,this.hide(),clearTimeout(n),clearTimeout(r),X={},u=0,l&&(l.hide(),Q.$("#videoBuyNumTip").html(""))},show:function(){y&&(y.addClass("flashArea_shop"),Q.event.customEvent.fire({type:"reinitBuySlide",data:{}})),b&&b.addClass("videoArea-vip"),k&&k.addClass("container-dianshiju-vip"),l&&l.addClass("def-bar-gray"),I=!0,s&&s.reset({keepPos:!0}),S||this.noticeShow(),l.attr("data-goods-display","1"),B&&!M&&B.css("display","none")},hide:function(){y&&y.removeClass("flashArea_shop"),b&&b.removeClass("videoArea-vip"),k&&k.removeClass("container-dianshiju-vip"),I=!1,B&&(N=B.attr("data-payInfo-display")||"0"),l.attr("data-goods-display","2"),"1"!==N||M||B.css("display","block")},exec:function(){Q.external=Q.external||{},Q.external.jobdone=function(){return!0}},bindEvent:function(){var e=this;e.binded||(l.on("click",function(t){var a=Q.event.get(t);return"hideMallTip"==Q.$(a.target).attr("j-delegate")?(a.preventDefault(),void 0):(I?e.hide():u?e.showBigItem(u):(Q.event.customEvent.fire({type:"showGuidePingBack"}),e.showpingback(),e.show()),void 0)}),K.delegate("videoBuy-showBig",function(t){var a=Q.$(t.target);setTimeout(function(){e.showBigItem(a.attr("data-time"),a.attr("data-index"))},0)}),Q.$("#scrollContent-vipbuy").delegate("videoBuy-opentab",function(e){var t=Q.$(e.target);T||L.getPlayer("video").pause();var a=A(t,'[data-item-elem="item"]');L.getPlayer("video").jsNotifyAdManager({action:"onAdClick",data:{adZoneId:d,templateType:c,adUid:a.attr("data-cupid")||""}})}),Q.$("#scrollContent-vipbuy").delegate("videoBuy-scrollTo",function(t){var a=Q.$(t.target),i=A(a,'[data-item-elem="item"]'),n=parseInt(i.attr("data-index"),10);e.showBigItem(a.attr("data-time"),n)}),s.on("moving",function(){clearTimeout(m),m=setTimeout(function(){e.noticeShow()},500)}),e.binded=!0);var t=Q.$(document);t.delegate("hideMallTip",e._hideMallTip),t.delegate("addToFavorite",function(t){var a,i=Q.$(t.target),n=Q.$("[data-fav-cancel]"),o=function(){a.hide()};D.isLogin()?(e._addGoodsToFavorite(i),a=i.next("div"),a.show()):F.openLoginWindow({from:"favorite"},function(){e._addGoodsToFavorite(i),a=i.next("div"),a.show(),setTimeout(o,2e3)}),setTimeout(o,2e3),n.on("click",o)}),t.delegate("removeFromFavorite",function(e){var t=Q.$(e.target),a=t.attr("data-fav-source"),i="0";"2"===a&&(i="2");var n={target_id:t.attr("data-fav-id")||"",interest_type:i};P.removeFromFavorite(n,function(e){if("A00000"==e.code){t.attr("j-delegate","addToFavorite"),t.attr("title","收藏商品"),t.removeClass("selected"),t.html('<i class="site-icons icon-stow"></i>收藏商品');var a=A(t,'[data-item-elem="item"]');a&&a.removeAttr("data-addtofav-id")}})})},noticeShow:function(){var e=s._view._doms.scrollContent,t=Math.abs(e.css("marginTop").split("px")[0]),a=t+s._view._doms.scrollWrap.height(),i=Q.$("#scrollContent-vipbuy").down("div[data-time]");if(i)for(var n=0,o=0;o<i.length;o++){var r=Q.$(i[o]);n+=r.height(),0===o&&(n+=18),t>=n||n-r.height()>=a?X[o+1]=!1:X[o+1]||(X[o+1]=!0,L.getPlayer("video").jsNotifyAdManager({action:"onAdImpression",data:{adZoneId:d,templateType:c,adUid:r.attr("data-cupid")||""}}))}},hideSmallItem:function(){K.children().hide(),K.css("height","0"),clearTimeout(o),clearTimeout(n),clearTimeout(r),Q.$("#videoBuyNumTip").html(f).show()},showSmallItem:function(e){var t=this;t.hideSmallItem();var a=K.down("[data-time='"+e+"']");a.show(),n=setTimeout(function(){V.addClass("play-shop-open"),x({elem:K,style:"height",from:0,to:35}),C=!0,r=setTimeout(function(){x({elem:K,style:"height",to:0,done:function(){V.removeClass("play-shop-open"),C=!1}})},9e3)},8e3)},showBigItem:function(e,t){Q.event.customEvent.fire({type:"showGuidePingBack"}),u=0;var a=this;a.showpingback(),a.show();var i=Q.$("#scrollContent-vipbuy").down("div[data-time='"+e+"']");if(i){1!==i.length&&(i=Q.$(i[0]));var n=t||parseInt(i.attr("data-index"),10)||1;if(!X[n]){var o=A(i,'[data-item-elem="item"]')||i;L.getPlayer("video").jsNotifyAdManager({action:"onAdImpression",data:{adZoneId:d,templateType:c,adUid:o.attr("data-cupid")||""}})}X[n]=!0;for(var r,l,m=Q.$("#scrollContent-vipbuy").down('[data-item-elem="item"]'),p=18,h=0;n-1>h;h++)l=Q.$(m[h]),r||(r=l),l.attr("data-time")!=r.attr("data-time")&&(r=l),p+=l.height()+18;var f=s._model.get();s.scroll((p+f.contentPos)/f.rate)}},showpingback:function(){if(0!==R){var e={rn:Math.random(),ve:Q.getVideoEventID()||"",ce:"",bstp:0,block:"507212_0"};O.init(e),R=0}},pingbackForSmall:function(){var e=Q.cookie.get("QC005")||"",t=Q.cookie.get("QC006")||"",a={t:"21",bstp:1,pf:1,p:10,p1:101,block:"508121_0",u:e,pu:D.getUid()||"",jsuid:t,tn:parseInt(999999*Math.random(),10)};Q.log.server(a,"http://msg.71.am/b")}}),a.exports=U});
define("interfaces/pcMallInterface.js",["./config","../kit/remoteInterface","../kit/userInfo"],function(e,t,a){var i=e("./config"),n=e("../kit/remoteInterface");e("../kit/userInfo");var o=Q.Class("PCMallInterface",{construct:function(){this._remoteInterface=new n({addToFavoriteAPI:{url:i.interfaces.addToFavorite},isFavoriteAPI:{url:i.interfaces.isFavorite},removeFromFavoriteAPI:{url:i.interfaces.removeFromFavorite}})},methods:{addToFavorite:function(e,t){e=e||{};var a={dataType:"jsonp",ifname:"addToFavoriteAPI",param:e};this._remoteInterface.send(a,function(e){t&&t(e)})},isFavorite:function(e,t){e=e||{};var a={dataType:"jsonp",ifname:"isFavoriteAPI",param:e};this._remoteInterface.send(a,function(e){t&&t(e)})},removeFromFavorite:function(e,t){e=e||{};var a={dataType:"jsonp",ifname:"removeFromFavoriteAPI",param:e};this._remoteInterface.send(a,function(e){t&&t(e)})}}});a.exports=new o});
define("kit/showPingBack.js",[],function(e,t){var a="http://msg.71.am/b?t=21&pf=1&p=10&p1=101",i=function(e,t){e=e||{},e.jsuid=Q.cookie.get("QC006")||"",e.u=Q.cookie.get("QC005")||"",e.pu=Q.cookie.get("P00003")||"",t+=-1==t.indexOf("?")?"?":"&";var a=+new Date;e._=a;for(var i in e)e.hasOwnProperty(i)&&(t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i])+"&");"&"===t[t.length-1]&&(t=t.slice(0,-1));var n=new Image;n.src=t};t.init=function(e){i(e,a)}});
define("units/productSlide.js",["../components/units/pageJob","../components/action/checkDoms","../action/slideWidgetV2"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../action/slideWidgetV2"),o="productSlide";i.create(o,{check:function(){return!0},init:function(){var e=function(e){if(e){var t=e.down("*[data-slide-elem=list]"),a={pbtn:e.down("*[data-slide-elem=pbtn]"),nbtn:e.down("*[data-slide-elem=nbtn]"),content:e.down("*[data-slide-elem=content]"),list:t,item:t.down("*[data-slide-item]")||t.down("li"),widget:e},i=parseInt(e.attr("data-slide-disp"),10)||0,o=parseInt(e.attr("data-slide-step"),10)||1,r="true"===e.attr("data-slide-usedefaultoffset"),s=new n({interval:parseInt(e.attr("data-slide-interval"),10)||3e3,disableWheel:e.attr("data-slide-disablewheel")||!1,dura:parseInt(e.attr("data-slide-dura"),10),autoPlay:void 0!==e.attr("data-slide-autoplay"),name:e.attr("data-slide-name"),enableScroll:"true"===e.attr("data-slide-enableScroll"),enableTouch:"true"===e.attr("data-slide-enableTouch"),lBtnClass:e.attr("data-slide-lBtnClass"),rBtnClass:e.attr("data-slide-rBtnClass"),itemWidth:e.attr("data-slide-itemWidth"),itemfocusclass:e.attr("data-slide-itemfocusclass"),style:e.attr("data-slide-style"),dir:e.attr("data-slide-dir"),navBarWrap:e.down("*[data-slide-navbarwrap]"),navDotWrap:e.down("*[data-slide-navdotwrap]"),navDotTpl:e.down("*[data-slide-navdottpl]"),useDefaultOffset:r||e.down("*[data-slide-useDefaultOffset]"),circle:e.attr("data-slide-circle"),doms:a,lazyLoadImage:e.attr("data-slide-lazyload"),total:a.item.length||0,disp:i,step:o,first:parseInt(e.attr("data-slide-first"),10)||1,offset:parseInt(e.attr("data-slide-offset")||0,10)});return s.start(),s}};Q.event.customEvent.on("initBuySlide",function(t){for(var a=t.data.widget,i=[],n=0;n<a.length;n++)try{i.push(e(Q.$(a[n])))}catch(o){}Q.event.customEvent.on("reinitBuySlide",function(){for(var e=0;e<a.length;e++)try{i[e].reinit()}catch(t){}})})}}),a.exports=o});
define("units/sourceTabSelect.js",["../components/units/pageJob","../components/action/checkDoms","../action/tab","../action/scrollV2","../kit/qiyiPlayer"],function(e){var t=e("../components/units/pageJob");e("../components/action/checkDoms");var a=e("../action/tab"),i=e("../action/scrollV2"),n=e("../kit/qiyiPlayer"),o=n.getPlayer("video");new Q.ic.InfoCenter({moduleName:"sourceTabSelect"});var r,s,l=!1,d=Q.$("#goosBtn"),c="sourceTabSelect",u=Q.event.customEvent,m=!0,p=Q.$("#widget-vip-vdoinfo"),h=Q.$("#widget-sourcelatest")||Q.$("#widget-dramaseries")||Q.$("#widget-relativevidoesforsubject"),f=Q.PageInfo&&Q.PageInfo.playPageInfo||{},g=f.cid,v=!1;t.create(c,{check:function(){return!!h},init:function(){this.initEvent()},exec:function(){},initEvent:function(){var e=this;u.on("swf_initAds",function(t){t=t||{},t=t.data||{},t.ads&&t.ads.length?(l=!0,e.initTab(),e.showShop(),e.showGoodArea()):l=!1}),u.on("tabshow-shop",function(t){var a=t&&t.data||{};e.shopSelect(a)}),u.on("swf_expandAd",function(){e.shopSelect()}),o.on("videoChanged",function(e){e=e||{},e=e.data||{},g=e.c||e.cid,l=!1}),u.on("js-hideShop",function(){e.hideShop()}),u.on("bigVipInfo-update",function(e){e=e||{},e=e.data||{};var t=Q.$("#flashArea"),a="play-zongyiWrap-oneRow";t&&(e.isAddOnerow?t.addClass(a):t.removeClass(a),e.isAddOnerow!=v&&(Q.event.customEvent.fire({type:"widgetInit-scroll",data:{wrap:h,name:"sourcelist"}}),v=e.isAddOnerow));var i=Q.$("#widget-bigvip-update");e.isAddOnerow?i&&i.parent().addClass("dn"):i&&i.parent().removeClass("dn")}),d&&d.on("click",function(t){var a=Q.event.get(t);return"hideMallTip"==Q.$(a.target).attr("j-delegate")?(a.preventDefault(),void 0):(e.shopSelect(),void 0)}),u.on("vip-flashExpand",function(t){t=t||{},e.showFlashArea(t.data)}),Q.event.customEvent.on("swf_cupid",function(t){var a=t.data||{};e.handleShopWhenCupidAds(a)}),o.on("change",function(){e.handleShopWhenCupidAds({action:"show3rdPartyAds"})})},initTab:function(){r||(r=a.getTab("sourceListTab")||a.getTab("dramaseriesTab"),r&&(s=r._view._doms.titles,r.on("focuschange",function(e){var t=e.data.title,a=t.attr("data-flag");if("shop"===a){var n=i.getScroll("vipbuy");n&&n.reset({});var o=t.attr("data-isfirstload");o||(t.attr("data-isfirstload","true"),Q.event.customEvent.fire({type:"showShop-analogClick",data:{isShow:!0}})),Q.event.customEvent.fire({type:"reinitBuySlide",data:{}})}})))},shopSelect:function(e){if(r){var t=0===r.getCurrentTab().seq?1:r.getCurrentTab().seq,a=this.getShopIndex();isNaN(a)||r.select(a+1),e&&e.switchback&&setTimeout(function(){e.switchToShowingTab?r.select(t):r.select(1)},1e4)}},showGoodArea:function(e){var t=this;e=e||{},p&&(m&&t.hideVipInfo(),Q.event.customEvent.fire({type:"showShop-analogClick",data:{isShow:!0}}))},showFlashArea:function(e){var t=this;e&&l&&(t.hideVipInfo(),Q.event.customEvent.fire({type:"showShop-analogClick",data:{isShow:!0}})),m=e},hideVipInfo:function(){var e=Q.$('*[data-widget-trywatch="trywatch"]');p&&e&&e.hide()},showVipInfo:function(){var e=Q.$('*[data-widget-trywatch="trywatch"]');p&&e&&e.css("diplay","")},getShopIndex:function(){var e;if(s)for(var t=0;t<s.length;t++)if("shop"===Q.$(s[t]).attr("data-flag")){e=t;break}return e},showShop:function(){if(r){var e=this.getShopIndex();isNaN(e)||Q.$(s[e]).css("display","")}},hideShop:function(){if(r){var e=this.getShopIndex();if(!isNaN(e)){Q.$(s[e]).hide();var t=r.getCurrentTab();t.seq-1===e&&r.select(1)}}},handleShopWhenCupidAds:function(e){var t=r.getCurrentTab(),a=this.getShopIndex();switch(e.action){case"hide3rdPartyAds":t.seq-1===a&&r.select(1),Q.$(s[a]).attr("data-tab-disabletitleclick","true");break;case"show3rdPartyAds":Q.$(s[a]).removeAttr("data-tab-disabletitleclick")}}}),t.add(c)});
define("units/sourceForScroll.js",["../components/units/pageJob","../components/action/checkDoms","../action/scrollV2","../kit/responsive","../action/tab"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../action/scrollV2"),o=e("../kit/responsive");e("../action/tab");var r,s="sourceForScroll",l={};i.create(s,{check:function(){return!0},init:function(){var e=this;Q.event.customEvent.on("widgetInit-scroll",function(t){t=t||{},t=t.data||{},e.initScroll(t)}),r=Q.$("#widget-ugcBodan")},exec:function(){var e=this;e.bindEvent()},bindEvent:function(){o.on("bodyClassChange",function(){for(var e in l){var t=l[e],a=t._view._doms.widget;if(a.isInScreen()){var i=t._model.get();t.reset({});var n=a.down(".selected");if(n){var o=n.attr("data-idx");r&&o--,o=parseInt(o||"1",10);var s=80*o;s||(s=0),t.scroll((s+i.contentPos)/i.rate)}}}})},initScroll:function(e){var t=e.name,a=e.wrap;if(t&&a){var i=l[t];if(i)i.reset({});else{var o={doms:{widget:a,scrollBar:a.down('*[data-scrollbar="'+t+'"]'),scrollWrap:a.down('*[data-scrollwrap="'+t+'"]'),scrollContent:a.down('*[data-scrollcontent="'+t+'"]')},name:t},r=a.attr("data-scroll-wheeldelta");r&&(o.wheeldelta=parseInt(r,10)),e.conRateWheel&&(o.conRateWheel=!0);var s=a&&a.attr("data-scrollheight");s&&(o.scrollWrapHeight=s);try{i=new n(o),l[t]=i}catch(d){}}}},getScroll:function(e){return l[e]}}),a.exports=s});
define("units/videoinfoChange.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../interfaces/episodeVideoPlayInfoInterface","../interfaces/breadTagsVI","../action/tab","../kit/showPingBack","../action/slideWidgetV2","../kit/userInfo","../kit/checkI18nType","../kit/changeToTwUrl"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../kit/qiyiPlayer"),o=e("../interfaces/episodeVideoPlayInfoInterface"),r=e("../interfaces/breadTagsVI");e("../action/tab");var s,l,d,c=e("../kit/showPingBack"),u=e("../action/slideWidgetV2"),p=e("../kit/userInfo"),m=n.getPlayer("video"),h="",f="",g="",v=Q.$("#datainfo-desc-text"),b=Q.$("#data-desc-expend"),y=Q.$("#data-desc-collapse"),w=Q.$("#datainfo-dabanging"),V=Q.$("#widget-musicnewbanglink"),k=Q.$("#datainfo-descwrap"),U="",_=84,x=Q.$("#datainfo-tag-desc"),I=Q.$("#data-videopoint"),C=Q.$("#data-vpointlist"),L=Q.$("#widget-editorincharge"),P=Q.$("#playerAreaScore"),T={},S={},W=!1,E=e("../kit/checkI18nType"),D=e("../kit/changeToTwUrl"),A="videoinfoChange",X=Q.PageInfo&&Q.PageInfo.playPageInfo||{},N=X.vType;i.create(A,{check:function(){return!0},init:function(){},exec:function(){var e=this;this.bindEvent(),e.expandEvent(),m.getVideoInfo(function(t){t=t||{},V&&e.changeMusicBang(t),e.changeEditor(t)}),Q.event.customEvent.on("vip-videoChanged",function(t){t=t||{},e.changeTitle(t.data),e.changeTitleAndPubtime(t.data),e.changeMetaTitle(t.data),e.changeIntro(t.data),e.changeBaike(t.data.baikeUrl),e.changePointTag(t.data),e.changeEditor(t.data)}),e.initPointTags(),m.on("videoChanged",function(t){var a=Q.$("#widget-qiyu-zebra");if(a){var i=a.attr("data-qiyu-hookup");if("true"===i||"changestatus"===i){var n=a.down("*[data-qiyu-elem=list]"),r=n.down("li"),s=u.getSlide("qiyuSlide")[0];t.data.c;var l=function(e){if(!e){var t=s._view._doms.list.down("li.selected");t&&(e=parseInt(t.attr("data-seq"),10))}e?(s._model._data.total,s.moveTo(e-2),s.focusTo(e)):(s.moveTo(1),s.focusTo(1))};h=t.data.tvid||"",f=t.data.ve||"",r.forEach(function(e){var a=Q.$(e);a.removeClass("selected"),a.attr("data-videolist-tvid")&&a.attr("data-videolist-tvid")==t.data.tvid&&(a.addClass("selected"),l())})}}new o({tvid:t.data.tvid.toString(),jsonpCbName:"playInfo"+parseInt(100*Math.random(),10)}).send({},function(t){if("A00000"==t.code){if(Q.event.customEvent.fire({type:"relateRole-changed",data:t.data}),Q.event.customEvent.fire({type:"paopaoRole-changed",data:t.data}),e.dataHandle(t.data),e.changeTitle(t.data),e.changeAlbumName(t.data),e.changePubtime(t.data),e.changeTitleAndPubtime(t.data),e.changeMetaTitle(t.data),e.changeBaike(t.data.baikeUrl),e.changeNav(t.data.crumbList),e.changeTag(t.data.categories),e.changeIntro(t.data),e.changeDesc(t.data),e.changeMusicBang(t.data),t.data.cast){var a=t.data.cast;e.changeDirector(a.directors),e.changeActor(a.mainActors),e.changeGuest(a.guests),e.changeHost(a.hosts),e.changeSinger(a.singers),e.changeSpeakers(a.speakers)}e.changeCategory(t.data.categories),e.changePointTag(t.data),e.changeVideoTitle(t.data),e.changeEditor(t.data),1===X.cid&&X.cid!==t.data.channelId?P.hasClass("dn")||P.addClass("dn"):1===X.cid&&X.cid===t.data.channelId&&P.hasClass("dn")&&P.removeClass("dn");var i=Q.$("#flashbox");i&&i.attr("data-player-albumid",t.data.albumId)}})})},bindEvent:function(){var e=Q.$('*[data-widget-elem="synopsisBtn"]'),t=Q.$('*[data-widget-elem="synopsisContent"]'),a=!1,i=this;if(e&&t&&(e.on("mouseenter",function(){t.hasClass("dn")&&(t.removeClass("dn"),i.showfloatpingback({block:"608290_shw"}))}),e.on("mouseleave",function(){setTimeout(function(){a||t.hasClass("dn")||t.addClass("dn")},200)}),t.on("mouseenter",function(){a||(a=!0)}),t.on("mouseleave",function(){t.hasClass("dn")||t.addClass("dn"),a=!1})),v&&b&&y){var n,o;b.on("click",function(){o=v.attr("data-desc-origin"),n=v[0].innerHTML,v.html(o),E.type&&y.css("display",""),b.hide()}),y.on("click",function(){v.html(n),y.hide(),b.css("display","")})}},expandEvent:function(){function e(){var e=s.html();return s.html(s.attr("data-changetxt")),s.attr("data-changetxt",e),s}function t(t){if(t)v.html(U);else{var a=Q.string.truncate(U,120,"...");v.html(a)}var i=e();i&&v[0].appendChild(i[0])}k&&(s=k.down('a[data-desc-btn="expend"]'),s&&(U=v.attr("data-desc-origin"),s.on("click",function(e){var a=Q.$(this),i=a.attr("data-isexpand");i&&("true"===i?(i=0,a.attr("data-isexpand","false")):"false"===i&&(i=1,a.attr("data-isexpand","true")),Q.event.get(e.target).preventDefault(),t(i))})))},dataHandle:function(e){var t="",a=e.period;if(a){var i=a.slice(0,4),n=a.slice(4,6),o=a.slice(6,8);i?o&&n&&(t+=i,t+="-"+n+"-"+o):o&&n&&(t+=n+"-"+o)}e._period=t},changeTitle:function(e){var t=Q.$("#widget-videotitle"),a=Q.$("#datainfo-vn"),i=Q.$("#widget-videosourceName"),n="",o="";if(i&&(e.solo||!e.sourceId&&!e.series?(i.addClass("dn"),n=""):(t&&(n=t.attr("data-titlesplit")||""),i.hasClass("dn")&&i.removeClass("dn"),o=e.sourceName||e.albumName,i.attr("href",e.url),i.attr("title",o),i.html(o))),t){var r=e[t.attr("data-titlekey")||"shortTitle"]||e.shortTitle||e.name;t.html(n+r)}if(a){var s=e[a.attr("data-titlekey")||"shortTitle"]||e.name;a.html(s),a.attr("title",s)}},changeAlbumName:function(e){var t=Q.$("#datainfo-albumname"),a=Q.$("#datainfo-albumname-text");if(t&&a){var i=t.attr("data-ankey")||"sourceName",n=e[i];if(n){if(t.css("display",""),a.html(n),a.attr("rseat",n),a.attr("title",n),"albumName"===i){var o=e.albumUrl;o?a.attr("href",o):a.attr("href","javascript:void(0);")}}else t.hide()}},changePubtime:function(e){var t=Q.$("#datainfo-year");if(t){var a=e._period;a?g!=a&&(g=a,t.html("第"+a+"期")):t.html("")}},changeTitleAndPubtime:function(e){var t,a=Q.$("#datainfo-timeAndShorttile"),i=Q.$("#datainfo-sourceName"),n="";if(i?e.solo||!e.sourceId&&!e.series?(t=i,a.addClass("dn")):(a&&(t=a,t.hasClass("dn")&&t.removeClass("dn")),n=e.sourceName||e.albumName,i.attr("rseat","zhuanji"),i.attr("title",n),i.attr("href",e.albumUrl),i.html(n)):t=a,t){var o=e.url,r=e[t.attr("data-titlekey")||"subtitle"],s=e[t.attr("data-titlekey")||"shortTitle"]||e.shortTitle||e.name;E.type||(s=e.shortTitle||e.focus||e.subtitle,"video"===N||e.sourceId||(s=e.name||s));var l="";if(e.sourceId){var d=e._period;d&&(l+=d+"期"+" "),l+=s}else if(e.series){var c=e.order;c&&(l+=5===e.channelId?"第"+c+"首":"第"+c+"集"),r&&(l+=" "+r)}else e.solo&&(2===e.channelId&&e.albumUrl||(l=s));"bodan"===t.attr("data-type")&&(l=Q.date.format(new Date(e.issueTime),"yyyy-MM-dd HH:mm")+" "+s),t.html(l),t.attr("title",l),t.attr("rseat",l),t.attr("href",o||""),!E.type&&"trailer"===N&&e.series&&a.hide()}},changeMetaTitle:function(e){var t=Q.$("#widget-videochage-title")||Q.$("[data-crumbbar-widget=crumb]");if(t){var a="";if(e.series){a=e.albumName||e.shortTitle||e.name;var i=e.order;i&&(a+=5===e.channelId?" 第"+i+"首":" 第"+i+"集")}else if(1===e.channelId||16===e.channelId)a=e.name||e.shortTitle;else if(10===e.channelId||13===e.channelId)a=e.albumName||e.shortTitle;else if(e.sourceId&&1!==e.channelId&&13!==e.channelId&&14!==e.channelId){var n=e.sourceName;n&&(a+=n+" "),e.period&&(a+=e.period+"：");var o=e.subtitler||e.shortTitle||e.name;o&&(a+=o)}else a=e.shortTitle||e.subtitle||e.name;t.attr("data-title-shorttitle")&&(a+=t.attr("data-title-shorttitle")),Q.event.customEvent.fire({type:"changeTitle",data:{title:a}})}},changeDirector:function(e){var t=Q.$("#datainfo-director"),a=Q.$("#datainfo-director-list");if(t&&a){if(!e||!e.length)return t.hide(),void 0;t.css("display","");var i="";e.forEach(function(e){i&&(i+=" / "),i+='<a href="http://www.iqiyi.com/lib/s_'+e.id+'.html" target="_blank" '+'alt="'+e.name+'" title="'+e.name+'" rseat="'+e.name+'">'+e.name+"</a>"}),a.html(i)}},changeActor:function(e){var t=Q.$("#datainfo-actor"),a=Q.$("#datainfo-actor-list");if(t&&a){if(!e.length)return t.hide(),void 0;t.css("display","");for(var i="",n=0;n<e.length;n++){i&&(i+=" / ");var o=e[n];i+='<a href="http://www.iqiyi.com/lib/s_'+o.id+'.html" alt="'+o.name+'" title="'+o.name+'" target="_blank" rseat="'+n+'">'+o.name+"</a>";var r=o.roles;r&&r.length&&(r=r[0],i+='<span class="ml5 fs12 c-666" rseat="饰_'+r+'">饰</span>',i+='<span class="ml5 fs12 c-666" rseat="角色_'+r+'">'+r+"</span>")}a.html(i)}},changeBaike:function(e){var t=Q.$("#datainfo-baike"),a=Q.$("#datainfo-baike-link");if(t&&a){if(!e)return t.hide(),void 0;t.css("display",""),a.attr("href",e)}},changeNav:function(e){var t=Q.$("#datainfo-navlist");if(t)if(e&&e.length){t.css("display","");for(var a=t.attr("data-indexName")||"爱奇艺首页",i=t.attr("data-indexHref")||"http://www.iqiyi.com/",n="<a class='green' href='"+i+"' title='"+a+"' "+"rseat='shouye1'>"+a+"</a> ",o=0;o<e.length;o++){var r=e[o];-1==r.title.indexOf("首页")&&(n+=r.url&&""!==r.url.trim()?"> <a  class='green' href='"+r.url+"' title='"+r.title+"' rseat=shouye"+(o+2)+">"+r.title+"</a>":"> <span  class='green' title='"+r.title+"' rseat=shouye"+(o+2)+">"+r.title+"</span>")}t.html(n)}else t.hide()},changeTag:function(e){var t=Q.$("#datainfo-taglist");if(t)if(e){E.type||(e=D.changeToTwUrl(e)),t.css("display","");var a=e.length;a>3&&(a=3);for(var i="",n=0;a>n;n++){var o=e[n];i+="<a href='"+o.url+"' title='"+o.name+"' rseat=key"+(n+1)+">"+o.name+"</a> "}t.html(i)}else t.hide()},changeIntro:function(e){var t=e.description||"",a=Q.$("#datainfo-desc-alink"),i=function(e,t){e&&t&&(e.hide(),t.hide())},n=function(e){e&&e.hide()},o=function(e,t){e&&t&&(t.css("display",""),t.attr("href",e))};if(!k||!v)return i(b,y),n(a),void 0;if(t=t.trim(),t||(t=e.focus),!t&&!k.attr("data-elem-ishide"))return i(b,y),n(a),k.hide(),void 0;k.css("display","");var r=Q.string.getLength(t);r>_&&(v.attr("data-desc-origin",t),t=Q.string.truncate(t,_,"..."));var s="";e.sourceId&&E.type?(r>_?(s=e.albumUrl,s||(s=k.attr("data-albumurlkey")),o(s,a)):n(a),i(b,y)):e.series&&E.type?(r>_?(s=e.albumUrl,s||(s=k.attr("data-albumurlkey")),o(s,a)):n(a),i(b,y)):(r>_?b&&y&&(b.css("display",""),y.hide()):i(b,y),n(a)),v[0].innerHTML=t},changeDesc:function(e){if(x){var t=e.description||"";if(t=t.trim(),t||(t=e.focus),!t)return k.hide(),void 0;U=t,k.css("display","");var a=Q.string.getLength(t);a>_&&(x.attr("data-desc-origin",t),t=Q.string.truncate(t,_,"..."));var i="";e.sourceId?a>_?(x.html(t),i=k.attr("data-albumurlkey"),i&&(s.attr("href",i),s[0].removeAttribute("data-isexpand"),x[0].appendChild(s[0]))):x.html(t):e.series?a>_?(x.html(t),i=e.albumUrl,i||(i=k.attr("data-albumurlkey")),i&&(s.attr("href",i),s[0].removeAttribute("data-isexpand"),x[0].appendChild(s[0]))):x.html(t):a>_?(x.html(t),s.attr("data-isexpand","false"),x[0].appendChild(s[0]),s.html("详情&gt")):x.html(t)}},changeCategory:function(e){var t=Q.$("#datainfo-category"),a=Q.$("#datainfo-category-list");if(t&&a)if(e&&e.length){t.css("display","");var i="";e.forEach(function(e,t){i&&(i+=" / "),i+='<a href="'+e.url+'" alt="'+e.name+'" title="'+e.name+'" rseat="cat'+(t+1)+'">'+e.name+"</a>"}),a.html(i)}else t.hide()},changeHost:function(e){var t=Q.$("#datainfo-host"),a=Q.$("#datainfo-host-list");if(t&&a)if(e&&e.length){t.css("display","");var i="";e.forEach(function(e,t){i&&(i+=" / "),i+='<a target="_blank" href="http://www.iqiyi.com/lib/s_'+e.id+'.html" rseat="host'+(t+1)+'">'+e.name+"</a>\n"}),a.html(i)}else t.hide()},changeSpeakers:function(e){var t=Q.$("#datainfo-speaker"),a=Q.$("#datainfo-speaker-list");if(t&&a)if(e&&e.length){t.css("display","");var i="";e.forEach(function(e,t){i&&(i+=" / "),i+='<a target="_blank" href="http://www.iqiyi.com/lib/s_'+e.id+'.html" rseat="speaker'+(t+1)+'">'+e.name+"</a>\n"}),a.html(i)}else t.hide()},changeSinger:function(e){var t=Q.$("#datainfo-singer"),a=Q.$("#datainfo-singer-list");if(t&&a)if(e&&e.length){t.css("display","");var i="";e.forEach(function(e,t){i&&(i+=" / "),i+='<a target="_blank" href="http://www.iqiyi.com/lib/s_'+e.id+'.html" rseat="singer'+(t+1)+'">'+e.name+"</a>\n"}),a.html(i)}else t.hide()},changeGuest:function(e){var t=Q.$("#datainfo-guest"),a=Q.$("#datainfo-guest-list");if(t&&a)if(e&&e.length){t.css("display","");var i="";e.forEach(function(e,t){i&&(i+=" / "),i+='<a target="_blank"  href="http://www.iqiyi.com/lib/s_'+e.id+'.html" rseat="act'+(t+1)+'" alt="'+e.name+'" title="'+e.name+'">'+e.name+"</a>"}),a.html(i)}else t.hide()},changeMusicBang:function(e){if(w&&V)if(e.topChart||e.isTopChart){w.css("display","");var t=V.attr("href");t?w.attr("href",t):"none"!=w.css("display")&&w.hide()}else"none"!=w.css("display")&&w.hide()},getCurListViewCount:function(){if(Q.browser.IE6||Q.browser.IE7)return{extraInfo:{playListViewCount:4}};var e=Q.PageInfo.respInfo.curLayout,t=null;return Q.PageInfo.respInfo.cnf.forEach(function(a){return a.layout==e?(t=a,!1):void 0}),t},initPointTags:function(){var e=this;I&&C&&(S={qipuId:I.attr("data-qipuid"),area:I.attr("data-area")||"azalea",limit:I.attr("data-numlimit")||"10",numshow:I.attr("data-numshow")||"6"},d=function(){var t=S.qipuId;return t?(I.show(),I.isInScreen()||I.attr("data-elem-nochange")?(e.getTags({qipuId:t}),Q.$(window).un("scroll",d),W=!1):I.hide(),void 0):(Q.$(window).un("scroll",d),void 0)},Q.$(window).on("scroll",d),W=!0,d())},changePointTag:function(e){e=e||{},I&&C&&!I.attr("data-elem-nochange")&&(S.qipuId=e.qipuId,W||(Q.$(window).on("scroll",d),W=!0),d())},getTags:function(e){var t=this,a=e.qipuId,i=S.area,n=parseInt(S.limit,10),o=parseInt(S.numshow,10);l||(l=new r),l.request({entity_id:a,limit:n,area:i},function(e){if("A00000"!=e.code)return I.hide(),void 0;var i=e.data;if(i&&i.length){I.css("display","");var n="",r=i.length;r>o&&(r=o);for(var s=0;r>s;s++){var l=i[s];n+='<a target="_blank" rseat="videotag_'+(s+1)+'" data-rank="'+s+'" title="'+l.tag+'" href="'+l.url+'">'+l.tag+"</a>"}C.html(n),T={area:e.area||"",event_id:e.event_id||"",bkt:e.bucket||"",aid:a},t.tagEvent()}else I.hide()})},tagEvent:function(e){e=e||T;var t=this,a=[],i=I.down("a");i&&(i.forEach(function(e){var t=Q.$(e),i=t.attr("title");a.push(i)}),i.on("click",function(a){Q.event.get(a).preventDefault();var i=Q.$(a.target||a.srcElement),n=i.attr("href"),o={usract:"click",rank:i.attr("data-rank"),itemid:i.attr("title")};Q.object.extend(o,e),t.tagPingback(o),setTimeout(function(){window.location.href=n},1)}));var n=function(e){e=e||T;var i={usract:"show",itemid:a.join(","),rank:"/"};Q.object.extend(i,e),t.tagPingback(i)};n()},tagPingback:function(e){var t="http://msg.video.qiyi.com/tmpstats.gif",a=11;Q.browser.iPad&&(a=21);var i={type:"videopage",platform:a,uid:Q.cookie.get("QC005")||Q.cookie.get("QC006"),ppuid:Q.cookie.get("P00003")||""};Q.object.extend(i,e),Q.log.server(i,t)},initparm:function(e,t,a){var i={};i=Q.url.queryToJson(t),i.block=e.attr("id").replace("block-",""),i.qpid=h||Q.PageInfo.playPageInfo.tvId,i.c1=Q.PageInfo.playPageInfo.cid,i.ve=f||Q.videoEventID,i.ce=Q.webEventID,i.ri="V2P",i.bstp="19-zstp",this.clickpingback(e,i),this.showpingback(i,a)},clickpingback:function(e,t){var a=Q.url.jsonToQuery(t);e.attr("data-pb",a)},showpingback:function(e,t){e.res=t,c.init(e)},showfloatpingback:function(e){var t={};t.t="21",t.bstp=0,t.pf=1,t.p=10,t.p1=101,t.u=Q.cookie.get("QC006"),t.pu=p.getUid(),t.jsuid=Q.cookie.get("QC006")||"",t.rn=(new Date).getTime(),t.subtype="1",t.flshuid=Q.cookie.get("QC005"),Q.object.extend(t,e),Q.log.server(t,"http://msg.71.am/b")},changeVideoTitle:function(e){var t=Q.$("#widget-i18n-albumname"),a=Q.$("#widget-i18n-curtitle"),i=Q.$("#widget-i18n-bdtitle"),n=Q.$("#widget-i18n-jiemuTit");if(a||i){var o=e.subtitle,r=e.shortTitle||e.focus||e.subtitle,s="";if(e.sourceId){var l=e._period;l&&(s+=l+"期"+" "),r&&(s+=r)}else if(e.series){var d=e.order;d&&(s+=5===e.channelId?"第"+d+"首"+" ":"第"+d+"集"+" "),o&&(s+=o)}else 1!==e.contentType&&13!==e.contentType&&(s+=r);if(i)return s=e.name,i.removeClass("dn"),i.html(" : "+s),void 0;if(s?(a.removeClass("dn"),a.html(" : "+s)):a.addClass("dn"),"video"!==N&&!e.sourceId){a.hide();var c=e.name||r;t.html(c),n&&(n.html(c),n.attr("title",c))}}},changeEditor:function(e){if(L){var t=L.down("span");t&&e.editorInfo?(t.html(e.editorInfo),L.show()):L.hide()}}}),a.exports=A});
define("interfaces/episodeVideoPlayInfoInterface.js",["../kit/remoteInterface","./config","../kit/checkI18nType"],function(e,t,a){var i,n=e("../kit/remoteInterface"),o=e("./config"),r=e("../kit/checkI18nType");a.exports=Q.Class("episodePlay",{construct:function(e){var t;r.type||(t="zh_tw");var a=o.interfaces.episodeVideoPlay+e.tvid+"?select=user,credit,focus,star,cast&status=1";t&&(a+="&locale="+t),i=e.jsonpCbName,this._remoteInterface=new n({url:a})},methods:{send:function(e,t){e.param=e.param||{},e.method="GET",e.dataType="jsonp",e.jsonp="callback",e.jsonpCallback=i,this._remoteInterface.send(e,function(e){t&&t(e)})}}})});
define("interfaces/breadTagsVI.js",["../kit/remoteInterface","./config"],function(e,t,a){var i=e("../kit/remoteInterface"),n=e("./config").interfaces;a.exports=Q.Class("TagVI",{construct:function(){var e=n.tagsVI;this._remoteInterface=new i({tagVi:{url:e}})},methods:{request:function(e,t){e=e||{},this._remoteInterface.send({ifname:"tagVi",param:e,dataType:"jsonp"},function(e){t&&t(e)})}}})});
define("units/authExpandV2.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o="authExpandV2",r=e("../kit/qiyiPlayer"),s={},l=Q.$("#widget-dramaseries");i.create(o,{getDependentDoms:function(){return s.player=Q.$("*[data-widget-player]"),s.videoArea=Q.$('[data-widget-videoarea="videoarea"]'),s},check:function(e){return n(e),!0},init:function(){s.tryWatch=Q.$('*[data-widget-trywatch="trywatch"]'),this.bindEvent()},exec:function(){},bindEvent:function(){var e=this,t=r.getPlayer("video");t.on("authenticationResult",function(t){t.data&&t.data.tvid&&Q.event.customEvent.fire({type:"vipTryWatch",data:{tvid:t.data.tvid}}),e.showPayArea(t)}),Q.event.customEvent.on("showTryWatch",function(t){e.showPayArea(t)})},showPayArea:function(e){if(s.tryWatch&&!l){var t=e.data.isTryWatch;void 0===t&&(t=e.data);var a=Q.$("#flashArea"),i=Q.$(".data-episode-container"),n="",o=Q.PageInfo&&Q.PageInfo.playPageInfo&&3==Q.PageInfo.playPageInfo.cid,r=Q.PageInfo&&Q.PageInfo.playPageInfo&&2==Q.PageInfo.playPageInfo.cid,d=o?"flashMain_vip":"flashMain_dianying_vip",c=Q.$("#flashAreaCon");t?(s.tryWatch.attr("data-payInfo-display","1"),r||(s.videoArea.removeClass("videoArea-vip"),s.videoArea.addClass("videoArea-vip"),a.removeClass("flashArea-vip"),a.addClass("flashArea-vip")),c&&c.addClass("flashMain_channel_vip"),i&&(i.removeClass("container-dianshiju-vip"),i.addClass("container-dianshiju-vip")),s.tryWatch.show(),n=Q.$('[data-widget-danmu="vip"]'),n&&(n.addClass(d),s.videoArea.removeClass("videoArea-noFloat"),s.videoArea.addClass("videoArea-vip"))):(s.tryWatch.attr("data-payInfo-display","2"),s.videoArea.removeClass("videoArea-vip"),a.removeClass("flashArea-vip"),c&&c.removeClass("flashMain_channel_vip"),i&&i.removeClass("container-dianshiju-vip"),s.tryWatch.hide(),n=Q.$('[data-widget-danmu="vip"]'),n&&(n.removeClass(d),s.videoArea.addClass("videoArea-noFloat"),s.videoArea.removeClass("videoArea-vip"))),Q.event.customEvent.fire({type:"vip-flashExpand",data:t})}}}),a.exports=o});
define("units/playerPopup.js",["../components/units/pageJob","../action/playerPopup","../kit/qiyiPlayer","../interfaces/vipLiveInterface","../kit/checkRechargeCode","../kit/checkI18nType"],function(e,t,a){var i,n,o,r=e("../components/units/pageJob"),s="playerPopup",l=e("../action/playerPopup"),d=e("../kit/qiyiPlayer"),c=e("../interfaces/vipLiveInterface"),u=d.getPlayer("video");Q.$("#widget-dramaseries");var m=Q('[data-widget-trywatch="trywatch"]');m&&m.attr("data-isbossmixer")||"0";var p,h=e("../kit/checkRechargeCode"),f=e("../kit/checkI18nType"),g=Q.PageInfo.playPageInfo||{};r.create(s,{check:function(){try{i=g.albumId,p=g.cid}catch(e){i=Q.$("*[data-widget-player]").attr("data-player-albumid")}return i?!0:void 0},init:function(){var e=this;o=i,n=new l({albumId:i,channelId:p,buyBtn:Q.$("*[data-widget-moviepaybtn]")}),u.on("recharge",function(t){if(!d.rechargeTag){if(t.data&&t.data.tvid&&n){n.destroy();var a;if(Q.$("#pps-widget-movielist")||Q.$("#widget-sourcelatest")){var i=Q.$("#flashbox");i&&(a=i.attr("data-player-albumid"))}n._model._data.localData.albumId=a||t.data.aid||o,n._model._data.localData.channelId=t.data.c||p}e.popupCharge(t.data.code),u.fire({type:"authenticationResult",data:!0}),Q.event.customEvent.fire({type:"vipTryWatch",data:{tvid:t.data.tvid,vid:t.data.vid}})}}),u.on("videoChanged",function(e){n&&(n.destroy(),n._model._data.localData.albumId=e.data.aid,n._model._data.localData.channelId=e.data.c,Q.PageInfo.bodanPlaylist&&(o=e.data.aid)),m.length>0&&Q.event.customEvent.fire({type:"vipTryWatch",data:{tvid:e.data.tvid,changeTag:"0"}})}),lib.swf.notice.list&&lib.swf.notice.list.swf_recharge&&Q.event.customEvent.fire(lib.swf.notice.list.swf_recharge[0]),Q.event.customEvent.on("login",function(){n&&(n.destroy(),n._model._data.localData.albumId=o,n._model._data.localData.channelId=p,e.actInit())}),Q.event.customEvent.on("logout",function(){n&&(n.destroy(),n._model._data.localData.albumId=o,n._model._data.localData.channelId=p,e.actInit())}),!f.type&&Q.$("#widget-ugcBodan")&&u.on("error",function(){n&&n.destroy()}),Q.event.customEvent.on("vipChargeFloater-changesize",function(e){e=e||{},e=e.data||{},n&&n._view.resize()})},exec:function(){var e=this;e.actInit()},actInit:function(){var e=g.albumPurType;if(e&&0!==e&&12!==g.cid){var t={aid:i,cid:"afbe8fd3d73448c9",P00001:Q.cookie.get("P00001")||"",t:Math.random()};f.type||(t.platform="01010021010010000000"),c.checkBuyState(t,function(e){e=e||{},"A00000"===e.code||"Q00508"===e.code?Q.event.customEvent.fire({type:"video-vipBtn",data:{isShow:!1}}):n&&(n.init(),n.renderPayBtn({channelId:p}))})}},popupCharge:function(e){var t=h(e);1===t.type||2===t.type?n.showCharge(t.code):n.showError(t.htmlCode)}}),a.exports=s});
define("action/playerPopup.js",["../components/action/baseAdapter","../view/playerPopupView","../model/playerPopupModel","../kit/eventPlugin"],function(e,t,a){var i=e("../components/action/baseAdapter"),n=e("../view/playerPopupView"),o=e("../model/playerPopupModel"),r=e("../kit/eventPlugin"),s=Q.event.customEvent,l=Q.Class("PlayerPopup",{extend:i,plugins:[new r],construct:function(e){e.view=e.view||new n,e.model=e.model||new o,e.model.set({localData:{albumId:e.albumId,channelId:e.channelId}}),this.callsuper(e),this.buyBtn=e.buyBtn},methods:{init:function(){var e=this;e.on("vip-btnshow",function(t){t=t||{},t=t.data||{},e.payAboutCodeImg(t)})},showCharge:function(e){s.fire({type:"js_switchLight",data:!0}),this.asyncGet({code:e})},showLayer:function(e){var t=this;s.fire({type:"js_switchLight",data:!0}),this._model[e.action]({aid:e.aid},function(a){t._view.update({localData:{html:a,tvid:e.tvid,albumId:e.aid,from:e.from}})})},showError:function(e){s.fire({type:"js_switchLight",data:!0}),this.syncSet({html:e})},renderPayBtn:function(e){e=e||{};var t=this;t.buyBtn&&this._model.getMovieBuyBtn(e,function(e){e=e||{};var a=e.html||"";t._view.renderPayBtn(a);var i=!0;a||(i=!1),s.fire({type:"video-vipBtn",data:{isShow:i}}),setTimeout(function(){t.fire({type:"vip-btnshow",data:{wrap:t.buyBtn}})},0)})},destroy:function(){this._view.destroy()},payAboutCodeImg:function(e){e=e||{};var t=this,a=e.wrap;if(a){var i=a.down(".data-vip-imgbtn");if(i){var n=i.attr("data-delay")||"0";n=parseInt(n,10);var o=function(){i[0].isclick=!1,clearTimeout(i[0].timer),i[0].timer=setTimeout(function(){i[0].isclick=!0,i.addClass("hover")},1e3*n)};i.on("click",function(){i[0].isclick&&(i.removeClass("hover"),t.createCodeImg(i,function(){o()}))}),o()}}},createCodeImg:function(e,t){var a=e.down("img");if(a){var i=e.attr("data-src")||"http://serv.vip.iqiyi.com/services/h5PayQRCode.action?",n=null,o={pid:e.attr("data-pid")||"",aid:e.attr("data-aid")||"",width:e.attr("data-width")||"",P00001:Q.cookie.get("P00001")||"",ut:+new Date};o.platform="1_10_101",Q.browser.iPad&&(o.platform="2_20_202");var r=e.attr("data-fc");r&&(o.fc=r);var s=o.pid+"_"+o.platform+"_"+o.ut+"_"+"2385461878_";o.sign=Q.crypto.md5(s);var l=[];for(var d in o)l.push(d+"="+o[d]);n=i+l.join("&"),a.attr("src",n)}t&&t()}}});a.exports=l});
define("view/playerPopupView.js",["../components/view/view","../components/action/floater","../components/view/floaterCustomView","../kit/pageSizeListener","../action/underframe","../kit/iframeLocation","../kit/userInfo","../kit/player"],function(e,t,a){var i,n=e("../components/view/view"),o=null,r=e("../components/action/floater"),s=e("../components/view/floaterCustomView"),l=new Q.ic.InfoCenter({moduleName:"PlayerPopupView"}),d=e("../kit/pageSizeListener"),c=e("../action/underframe"),u=e("../kit/iframeLocation"),m=e("../kit/userInfo"),p=e("../kit/player"),h=new p({playerid:"flash"}),f=Q.PageInfo.playPageInfo||{},g="2",v=Q.$("#widget-shortrecmd");v&&Q.browser.IE7&&(g="21"),"album"===f.topicKey&&(g="21");var b=Q.Class("PlayerPopupView",{extend:n,methods:{init:function(e){this._ctrl=e,this._doms={player:Q.$("[data-widget-player=flash]")}},update:function(e){var t=this,a=e.localData.html,n=null;n=Q.$("[data-player-ismember]")?Q.$("[data-player-ismember]").attr("data-player-ismember"):"false",o||(o=new r({view:new s({zIndex:g,isResponsive:!0,pos:function(){return{left:t._doms.player.getPosition().left,top:t._doms.player.getPosition().top}},boxSize:function(){return{width:t._doms.player.width(),height:t._doms.player.height()}}})})),o.show({html:a});var l=Q("#flashArea_paypop");l.length>0&&l.parent().css("visibility","visible");var u=Q.$(".J_play-underFrame");u&&u.parent().remove(u),i=new c({elem:o.getFloater(),bg:"#232323",_class:"J_play-underFrame"}),i.show(),d.on("sizeChange",function(){setTimeout(function(){i.show()},50)}),this.sendPingBack();var m=Q.$("#buyfloater-wrap")||Q.$("div.zhengtibaowei");if(m){var p=m.down('*[data-moviepay-btn="open"]')||m.down(".btn_orange_m")||m.down("a.kaitong_vipm");p&&p.on("click",this.evadelogin)}Q.event.customEvent.fire({type:"playerPopupShow",data:{popup:o.getFloater(),albumId:e.localData.albumId,tvid:e.localData.tvid,from:e.localData.from}}),setTimeout(function(){t._ctrl.fire({type:"vip-btnshow",data:{wrap:o.getFloater()}})},0),t._showHideCloseBtn(n),t._sendPingback()},renderPayBtn:function(e){l.log("html: "+e);var t=Q.$("[data-widget-moviepaybtn]"),a=Q.$("#fixed_vipbuy_btn");if(t){t.html(e);var i=t.down('*[data-moviepay-btn="open"]')||Q.$(".btn_orange_m");i&&i.on("click",this.evadelogin)}if(a){a.html(e);var n=a.down(".btn_orange_m"),o=Q(e).find("a").html();n&&(-1===o.indexOf("购买")?n.html("开通VIP免费看"):n.html(o),n.on("click",this.evadelogin))}Q.event.customEvent.fire({type:"resetScrollArea",data:{}})},destroy:function(){if(o)o.destroy(),o=null,i.hide();else try{var e=lib.component.login=lib.component.login||{};e.dialog.close()}catch(t){}},resize:function(){o&&o._view.adjustPosition({floater:o}),i&&i.show()},sendPingBack:function(){Q.log.server({type:"membernotifydiv2013031",jsuid:Q.cookie.get("QC006"),flashuid:Q.cookie.get("QC005"),pru:Q.cookie.get("P00PRU")||"",ppuid:Q.cookie.get("P00003")},"http://msg.71.am/tmpstats.gif")},evadelogin:function(e){e.preventDefault();var t=Q.cookie.get("HZ00011"),a=window.location.href;if(h._flashcall("getQiyiPlayerInfo",void 0,function(t){var i=t||"",n=i?JSON.parse(i.replace(/\r/g,"").replace(/\n/g,"")):"";n&&(n.currentTime=n.currentTime/1e3),Q.log.server({type:"508261_1",pla:11,r:n.tvid,u:Q.cookie.get("QC005")||"",pu:m.getUid(),tml:n.currentTime,purl:a},"http://msg.71.am/tmpstats.gif"),setTimeout(function(){var t,a,i,n=Q.$("[data-hrefBtn-elem=buyHref]");n&&(t=n.attr("href"),a=Q.array.isArray(t)?t[0]:t),i=e.target||e.srcElement,window.location.href=a||i.href||i.parentElement.href},200)}),t&&"11"==t&&!m.isLogin()){e=Q.event.get(e),e.stop();var i=Q.url.parse(window.location.href),n=i.protocol+"://"+i.host+i.path;u.href("http://v.139site.com/pretrade.do?spid=13&preurl="+n+"&ucode=HZ00011&keystr=bf49359a5e0ef6eb0d75b0906c3c4f36")}},_showHideCloseBtn:function(e){"false"===e?Q.$('[data-delegate="d-btn-close"]')&&Q.$('[data-delegate="d-btn-close"]').removeClass("dn"):Q.$('[data-delegate="pop-i-kown"]')&&Q.$('[data-delegate="pop-i-kown"]').addClass("dn")},_getPingBack:function(e){var t=JSON.parse(Q.cookie.get("P00002")),a=t.uid,i={t:21,rn:Math.random(),p:10,pf:1,p1:101,bstp:0,pu:a,jsuid:Q.cookie.get("QC006")||"",ve:Q.getVideoEventID()||"",ce:"",u:Q.cookie.get("QC005")||"",block:e};Q.log.server(i,"http://msg.71.am/b")},_sendPingback:function(){var e=this,t=Q.$("#J_bindPhone-step1"),a=Q.$("#J_bindPhone-step2"),i=Q.$("#J_bindPhone-step3"),n=Q.$("#J_binded-step1"),o=Q.$("#J_binded-step2");return i?(e._getPingBack("1501068_shw"),!1):(a&&e._getPingBack("1501066_shw"),t?(e._getPingBack("1501063_shw"),!1):o?(e._getPingBack("1501067_shw"),!1):n?(e._getPingBack("1501064_shw"),!1):void 0)}}});a.exports=b});
define("model/playerPopupModel.js",["../components/model/baseModel","../interfaces/movieLayer"],function(e,t,a){var n=e("../components/model/baseModel"),i=e("../interfaces/movieLayer");a.exports=Q.Class("PlayerPopupModel",{extend:n,construct:function(e){e=Q.object.extend({ri:i,remoteMethods:{get:"getChargeHtml",getMovieBuyBtn:"getMovieBuyBtn",getMixLayer:"getMixLayer"},remoteGetParam:function(){return{aid:this._data.localData.albumId,channelId:this._data.localData.channelId}}},e),this._remoteGetMovieBuyParam=function(){return{aid:this._data.localData.albumId,channelId:this._data.localData.channelId}},this.callsuper(e)},methods:{asyncGet:function(e,t){var a=this;e=e||{},e.cb=e.cb||"__getPopupChargeWin__cb_",a.callsuper("asyncGet",e,function(e){a.set({html:e.remoteData.html}),t&&t(a.get())})},getMovieBuyBtn:function(e,t){e=e||{},e.cb=e.cb||"__getPayBtn__cb_",e.tt=(new Date).getTime(),e=Q.object.extend(this._remoteGetMovieBuyParam(),e);var a=new this._remoteInterface;this._remoteMethods.getMovieBuyBtn&&a[this._remoteMethods.getMovieBuyBtn](e,function(e){t&&t(e)})},getMixLayer:function(e,t){e=e||{},e.cb=e.cb||"__getMixLayer__cb_",e.tt=(new Date).getTime(),e=Q.object.extend(this._remoteGetMovieBuyParam(),e);var a=new this._remoteInterface;this._remoteMethods.getMixLayer&&a[this._remoteMethods.getMixLayer](e,function(e){t&&t(e.html)})}}})});
define("interfaces/movieLayer.js",["../kit/remoteInterface","../config/siteDomain","../kit/checkRechargeCode","../kit/checkI18nType"],function(e,t,a){var n,i=e("../kit/remoteInterface"),o=e("../config/siteDomain"),r=e("../kit/checkRechargeCode"),s=e("../kit/checkI18nType");s.type||(n="tw"),a.exports=Q.Class("RIMark",{construct:function(){this._remoteInterface=new i({get:{url:"http://serv.vip."+o.SITE_DOMAIN+"/pay/movieLayer.action"},getVip:{url:"http://passport.iqiyi.com/pages/fragment/vip_unfreeze.action"},getBuyBtn:{url:"http://serv.vip."+o.SITE_DOMAIN+"/pay/movieBuy.action"},getMixLayer:{url:"http://serv.vip."+o.SITE_DOMAIN+"/pay/mixLayer.action"}})},methods:{getChargeHtml:function(e,t){var a=null,i=null;i=e.authcookie?e.authcookie:Q.cookie.get("P00001"),a=i?"getVip":"get";var o=r(e.code);if(2===o.type){var s=Q.$(".J_play-underFrame");s&&s.parent().remove(s),a="get"}n&&"get"===a&&(e.mod=n),this._remoteInterface.send({param:e,ifname:a},function(e){"A00000"==e.code&&t&&t(e.data)})},getMovieBuyBtn:function(e,t){n&&(e.mod=n),this._remoteInterface.send({ifname:"getBuyBtn",param:e},function(e){"A00000"==e.code&&t&&t(e.data)})},getMixLayer:function(e,t){this._remoteInterface.send({ifname:"getMixLayer",param:e},function(e){"A00000"==e.code&&t(e.data)})}}})});
define("kit/checkRechargeCode.js",[],function(e,t,a){var n='<div class="qiyuePopup" style="width:515px;height:287px;background:url(http://www.qiyipic.com/common/fix/qiyue_images/popupBg1.png)"><p style="margin:60px 0 10px 45px; font-size:14px;">网络连接错误，请稍候再试。</p><p style="padding:15px 20px 10px;text-align:right;line-height:30px;"><a href="http://vip.'+lib.SITE_DOMAIN+'">返回会员专区首页</a></p>'+"</div>",i='<div class="qiyuePopup" style="width:515px;height:287px;background:url(http://www.qiyipic.com/common/fix/qiyue_images/popupBg1.png)"><p style="margin:60px 0 10px 45px; font-size:14px;">用户不存在，请<a href="http://passport.'+lib.SITE_DOMAIN+'/register/reg.php">注册</a>后重试。</p>'+'<p style="padding:15px 20px 10px;text-align:right;line-height:30px;">'+'<a href="http://vip.'+lib.SITE_DOMAIN+'">返回会员专区首页</a></p>'+"</div>",o='<div class="qiyuePopup" style="width:515px;height:287px;overflow:hidden;background:url(http://www.qiyipic.com/common/fix/qiyue_images/popupBg1.png)"><p style="margin:60px 0 10px 45px; font-size:14px;">参数错误，请重试。</p><p style="padding:15px 20px 10px;text-align:right;line-height:30px;"><a href="http://vip.'+lib.SITE_DOMAIN+'">返回会员专区首页</a></p>'+"</div>";a.exports=function(e){switch(e){case"Q00311":case"Q00312":case"A10002":return{type:1,code:e};case"Q00310":case"Q00302":case"Q00304":case"Q00503":case"Q00504":case"Q00505":case"Q00506":case"Q00508":return{type:2,code:e};case"A00011":case"A00012":case"A00013":return{type:3,htmlCode:n};case"Q00305":return{type:4,htmlCode:i};default:return{type:5,htmlCode:o}}}});
define("units/qiyu.js",["../components/units/pageJob","../components/action/checkDoms","../action/qiyuRecommend","../model/qiyuRecommendModelV2","../view/qiyuVideoView","./releaseDate","../kit/userInfo","../kit/langTransform","../kit/checkI18nType"],function(e,t,a){var i,n,o,r=e("../components/units/pageJob"),s=e("../components/action/checkDoms"),l=e("../action/qiyuRecommend"),d=e("../model/qiyuRecommendModelV2"),c=e("../view/qiyuVideoView"),m=e("./releaseDate"),u=e("../kit/userInfo"),p=e("../kit/langTransform"),h="qiyu",f=0,g=e("../kit/checkI18nType");g.type||(o="zh_tw");var v,U,y,b,V;v=Q.PageInfo&&Q.PageInfo.playPageInfo||{},V=Q.PageInfo||{},U=v.tvId,y=v.albumId,b=v.cid;var w=Q.url.queryToJson(window.location.hash.substring(1));r.create(h,{getDependentDoms:function(){return i=Q.$("*[data-widget-qiyu]"),{widget:i}},check:function(e){return s(e),!0},init:function(){n=i.length,i.forEach(function(e){var t=Q.$(e);if(t){var a={ul:t.down("[data-qiyu-elem=list]")||t.down("[data-qiyu-elem=bodan]"),tplNode:t.down("[data-qiyu-tpl=list]"),loading:t.down("[data-qiyu-loading]"),player:Q.$("[data-widget-player=flash]")},i=Q.$("#check-is-movie-tpl"),r="true"==t.attr("data-qiyu-focustoself")?!0:!1,s="true"==t.attr("data-qiyu-isrelatedvideo")?!0:!1,h="true"==t.attr("data-qiyu-withrefer")?!0:!1,g=t.attr("data-qiyu-requeststatus"),v=t.attr("data-qiyu-categoryid")||b,k=t.attr("data-qiyu-rltnum")||12,_=t.attr("data-qiyu-area"),x=t.down("[data-qiyu-failelem]"),L=t.attr("data-qiyu-domain"),I=t.attr("data-qiyu-lessrltnum"),C="";a.player&&(C=a.player.attr("data-player-expandstate"));var W=u.getUid(),X=t.attr("data-qiyu-numofcutname"),T=t.attr("data-qiyu-hookup"),S=t.attr("data-qiyu-hookupfilter"),E=t.attr("data-qiyu-playcount"),K=t.attr("data-qiyu-fc"),P=t.attr("data-qiyu-ls")||"",A=w.vfrm||"",D=t.attr("data-qiyu-vfrm")||A.replace(/\d$/,"3"),F=Q.browser.iPad?21:Q.browser.android||Q.browser.iPhone?31:11;11!==F&&(_="h_"+_);var J,N=11==F?Q.cookie.get("QC005"):21==F||31==F?Q.cookie.get("QC006"):null,B=-4==v?1:0,M=t.attr("data-qiyu-tpler");a.tplNode&&(J=a.tplNode.value(),V.i18n&&"TW_T"===V.i18n.toUpperCase()&&(J=p.transformTpl(J,"TW")));var O=new d,R=new c({isMovieTpl:i,focus2self:r,isRelatedVideo:s,doms:{recommend:a.ul,fail:x,widget:t,loading:a.loading},tpl:J,withRefer:h,numOfCutName:X,albumId:y,categoryId:v,pb_platform:F,ppuid:W,viptype:B,uid:N,rltnum:k,area:_,domain:L,requeststatus:g,hookup:T,isPlayCount:E,fc:K,ls:P,which:"false"===C?"black":"white",lessrltnum:I,vfrm:D,tpler:M}),z=new l({model:O,view:R}),H={platform:1,tvId:U,uid:N,ppuid:W,viptype:B,area:_,domain:L,albumId:y,cb:"cb_"+parseInt(1e10*Math.random(),10).toString(36),aid:y,categoryId:v,rltnum:k,size:k,withRefer:h,ls:P};o&&(H={type:"video",area:"bee_tw",channelId:b,referenceId:U,locale:o,purchaseTypes:0,playPlatform:"PC_QIYI"}),z.init(H),z.registPlugin({releaseDataPlugin:m}),z.on("qiyu-data-ready",function(){f++,window.addd=z._view._doms.widget,f!==n||o||Q.event.customEvent.fire({type:"movie_add_score",data:{}})}),T&&z.on("qiyu-data-ready",function(e){var t=Q.$("#flashbox"),a=t.attr("data-player-ismember"),i=[];if(S&&"false"==a){for(var n=0,o=e.data.data.length;o>n;n++){var r=e.data.data[n];if(r.purchaseType>0)break;i.push(r)}e.data.data=i}if("true"!=a){e.data.vfrm=D,Q.event.customEvent.fire({type:"qiyu-data-ready",data:e.data});var s=R._doms.recommend.down("li")[0];s&&Q.$(s).on("click",function(){location.reload()})}})}})}}),a.exports=h});
define("model/qiyuRecommendModelV2.js",["../model/templateModel","../interfaces/ugcVideoRecmdInterface","../components/model/recommendModelUtil"],function(e,t,a){var i=e("../model/templateModel"),n=e("../interfaces/ugcVideoRecmdInterface"),o=e("../components/model/recommendModelUtil"),r=Q.date.formatSeconds;a.exports=Q.Class("QiyuRecommendModel",{extend:i,construct:function(e){e=e||{},this.callsuper(e),this.rmu=new o},methods:{makeupData:function(e,t){var a=this;e.locale&&"zh_tw"===e.locale||(e=this._bulidParams(e)),(new n).request(e,function(e){e=e||{},e=a._bulidData(e),t&&t(e)})},_bulidParams:function(e){e=e||{};var t={referenceId:e.tvId||""};t.albumId=e.albumId||"",t.channelId=e.categoryId||"",t.cookieId=e.uid||"",t.withRefer=e.withRefer||"false",t.area=e.area||"",t.size=e.size||"",t.type=e.type||"video",t.pru=Q.cookie.get("P00PRU")||"",t.locale=e.locale||"";var a="PC_QIYI";return Q.browser.iPad?a="PAD_WEB_QIYI":(Q.browser.android||Q.browser.iPhone)&&(a="ANDROID_PHONE_IQIYI"),t.playPlatform=a,t},__parseData:function(e){var t=this;e.album_channel;var a={};if(a.albumId=e.albumId,a.categoryId=e.channelId,a.albumPlayUrl=e.url,a.firstTvid=e.tvId,a.firstVid=e.vid,a.isPurchase=e.isPurchase,a.sourceId=e.sourceId,a.downloadAllowed=e.downloadAllowed,a.name=e.albumName||e.name,e.playCount&&(a.playcount=t.rmu.formatPlayCount(e.playCount)),e.timeLength||e.duration){var i=e.timeLength||e.duration;a._play_length=Q.date.formatSeconds(i)}if(e.sourceId){if(e.phase)a.updateOrQishu=e.phase+"期";else if(parseInt(e.prem_date||e.period,10)){var n="";if(e.prem_date)n=e.prem_date.slice(5);else if(e.period){var o=e.period.slice(0,4),s=e.period.slice(4,6),l=e.period.slice(6,8);o?l&&s&&(n+=o,n+="-"+s+"-"+l):l&&s&&(n+=s+"-"+l)}n&&(a.updateOrQishu=n+"期")}var d=e.sourceName||e.shortTitle||e.name,c=e.shortTitle||e.subtitle||e.focus;a.biaoti=Q.string.truncate(d,20),a.biaoti_v2=d,a.yijuhua=Q.string.truncate(c,24),a.yijuhua_v2=c}else if(e.series){var m="",u=e.total_set_num,p=e.current_set_num;p||(p=e.latestOrder),u||(u=e.videoCount),u&&u!=p?(p&&(m="更新至"+p),m?m+="集":m=u+"集全"):(u?m=u+"集全":p&&(m="更新至"+p+"集"),e.bossMixerAlbum&&(e.isPurchase=0)),a.updateOrQishu=m;var h=e.albumName||e.shortTitle||e.name,f=e.albumFocus||e.focus;a.biaoti=Q.string.truncate(h,20),a.biaoti_v2=h,a.yijuhua=Q.string.truncate(f,24),a.yijuhua_v2=f}else if(1==e.channelId||16==e.channelId){a.updateOrQishu=1==e.channelId?"":a._play_length;var g=e.shortTitle||e.albumName||e.name,v=e.subtitle||e.focus;a.biaoti=Q.string.truncate(g,20),a.biaoti_v2=g,a.yijuhua=Q.string.truncate(v,24),a.yijuhua_v2=v}else a.updateOrQishu=a._play_length,a.biaoti=e.shortTitle||e.albumName||e.name,a.biaoti_v2=a.biaoti,a.yijuhua="",a.yijuhua_v2="";var U=e.imageUrl;if(a.album_pic_url=U,a.apic=U.replace(".jpg","_110_70.jpg"),a.initIssueTime=Q.date.format(new Date(e.issueTime),"yyyy-MM-dd HH:mm:ss"),e.duration&&(a.playTime=r(e.duration)),a.purchaseType=parseInt(e.isPurchase,10),a.reason=e.reason,a.tag=e.reason,a.only=parseInt(e.exclusive,10),a.exclusive=parseInt(e.exclusive,10),a._1080p=parseInt(e.is_1080p||e.mode1080p,10),a._iqiyiself=parseInt(e.qiyiProduced,10),2==e.isPurchase){var y=e.payMark||"";2==e.purchaseType&&(a.jiaobiao_db="1"),1==y?a.jiaobiao_vip="1":2==y?a.jiaobiao_pay="1":3===y&&(a.jiaobiao_ticket="1")}return a.scoreTag=1===e.channelId&&0!==e.sourceId?0:1,a},_bulidData:function(e){var t=e.attribute,a=e.self||e.refer,i=this,n=[],o=e.mixinVideos||[];return o.forEach(function(e){var t=i.__parseData(e);n.push(t)}),a&&(a=i.__parseData(a),a.isMySelf=!0),{data:n,self:a,attributes:t}}}})});
define("interfaces/ugcVideoRecmdInterface.js",["../kit/remoteInterface","./config"],function(e,t,a){var n=e("../kit/remoteInterface"),i=e("./config").interfaces;a.exports=Q.Class("UgcVideoRecmdInterface",{construct:function(){var e=i.ugcVRecommend;this._remoteInterface=new n({vgcVR:{url:e}})},methods:{request:function(e,t){e=e||{},this._remoteInterface.send({ifname:"vgcVR",param:e,dataType:"jsonp"},function(e){t&&t(e)})}}})});
define("view/qiyuVideoView.js",["../view/templateView","../kit/userInfo","../kit/iframeLocation","../kit/artTemplate"],function(e,t,a){var i=e("../view/templateView");e("../kit/userInfo");var n=e("../kit/iframeLocation"),o=e("../kit/artTemplate"),r=Q.PageInfo||{},s=new Q.ic.InfoCenter({moduleName:"QiyuVideoView"}),l=Q.Class("QiyuVideoView",{extend:i,construct:function(e){this.callsuper(e),this._tpl=e.tpl,this._doms=e.doms||"",this.isMovieTpl=e.isMovieTpl,this.focus2self=e.focus2self,this.isRelatedVideo=e.isRelatedVideo,this.requeststatus=e.requeststatus||"0",this.albumid=e.albumId,this.categoryId=e.categoryId,this.rltnum=e.rltnum||4,this.area=e.area,this.pb_platform=e.pb_platform,this.ppuid=e.ppuid,this.uid=e.uid,this.domain=e.domain,this.numOfCutName=e.numOfCutName||20,this.viptype=e.viptype,this.hookup="true"==e.hookup?1:parseInt(e.hookup,10)||0,this.isPlayCount=e.isPlayCount||0,this.searchPrefix=e.searchPrefix||"http://so.iqiyi.com/so/q_",this.fc=e.fc||"",this.ls=e.ls||"",this.which=e.which||"white",this.lessrltnum=e.lessrltnum,this._vfrm=e.vfrm||"",this._tpler=e.tpler},methods:{init:function(e){this._ctrl=e,this.initEvent(),this.platform="1",this._doms.loading||(this._doms.loading=this._doms.recommend.down(".loading"))},toRender:function(e){var t=this;if(e){e=this._getData(e);var a,i=Q.$('[data-qiyu-elem="bodan"]');if(i){t.bodanUl=i;var n=i.children()&&i.children().length||0,l=6-n;e.data=e.data.splice(0,l);var d=o.compile(this._tpl);a=d({data:e.data})}else if(this._tpler){o.onerror=function(e){s.log(e),s.error(e.temp)};var c=o.compile(this._tpl);a=c({data:e.data})}else a=Q.plugins.Mustache.render(this._tpl,e);if(a){t._renderUHtml(a);var m=t._doms.recommend.down(".mod-listTitle_right");if(m.forEach(function(e){e=Q.$(e),""===e.html().trim()&&e.hide()}),this.isRelatedVideo||r.i18n&&"TW_T"===r.i18n.toUpperCase()){var u=Q.$(".data-qiyu-slidewidget");u&&(Q.event.customEvent.fire({type:"lazyInitSlide",data:{widget:u}}),Q.event.customEvent.fire({type:"singleSlideResp-btnShowHide",data:{wrap:u,len:e.data.length}}))}t._ctrl.fire({type:"qiyu-recommend-done",data:{data:e,doms:t._doms,optional:{uid:t.uid,ls:t.ls,albumid:t.albumid,categoryId:t.categoryId,platform:t.pb_platform,hookup:t.hookup,area:t.area,event_id:t.event_id,bkt:t.bkt}}}),Q.event.customEvent.fire({type:"qiyu-recommend-done",data:e})}}},dynamicPlayCount:function(){1==this.isPlayCount&&Q.event.customEvent.fire({type:"dynamicPlayCount",data:{container:this._doms.recommend}})},initEvent:function(){this._doms.fail&&this._doms.fail.on("click",this._reloadQiyu.bind(this));var e=this;e._ctrl.on("qiyu-recommend-done",function(){Q.event.customEvent.fire({type:"qidan_add_renderDone",data:{wrapper:e._doms.recommend}}),e.dynamicPlayCount(),e._enableTouchOrClick()})},_enableTouchOrClick:function(){var e=this,t=e.fingerEvent(),a=t.start.bind(e),i=t.end.bind(e);e.clickHandler=function(t){e.doClick(t,this)};var n=e._doms.recommend,o=n.down("a"),r=n.down("li"),s=Q.browser.iPad||Q.browser.iPhone;if(s){var l=function(e){i(e,this)};"black"===e.which?(r.on("touchstart",a),r.on("touchend",l)):(o.on("touchstart",a),o.on("touchend",l))}else"black"==e.which?r.on("click",e.clickHandler):o.on("click",e.clickHandler)},fingerEvent:function(){var e=0,t=0,a=0,i=0;return{start:function(a){e=a.targetTouches[0].pageX,t=a.targetTouches[0].pageY},end:function(n,o){a=n.changedTouches[0].pageX,i=n.changedTouches[0].pageY;var r=Math.abs(i-t)<5&&Math.abs(a-e)<5;r&&this.doClick(n,o)}}},doClick:function(e,t){Q.event.get(e).preventDefault(),(this.isMovieTpl||1!=this.hookup)&&n.href(t.href),this._ctrl.fire({type:"qiyu-item-click",data:{src:t,which:this.which,doms:this._doms,optional:{uid:this.uid,ls:this.ls,albumid:this.albumid,categoryId:this.categoryId,platform:this.pb_platform,hookup:this.hookup,area:this.area,event_id:this.event_id,bkt:this.bkt}}})},_reloadQiyu:function(e){Q.event.get(e).preventDefault(),this._doms.fail&&this._doms.fail.hide(),this._doms.loading.show(),this._ctrl.init({platform:1,ppuid:this.ppuid,uid:this.uid,area:this.area,viptype:this.viptype,domain:this.domain,albumId:this.albumid,aid:this.albumid,categoryId:this.categoryId,rltnum:this.rltnum,ls:this.ls})},_getData:function(e){this._doms.loading&&this._doms.loading.hide();var t=[];if(e.self&&1==this.hookup){var a=e.self;a.selectstatus="selected",this.isMovieTpl||t.push(a)}if(t=t.concat(e.data),!e||e&&0===e.data.length||"true"===this.lessrltnum&&parseInt(this.rltnum,10)>e.data.length)return"0"==this.requeststatus?this._doms.widget&&this._doms.widget.hide():"1"==this.requeststatus&&this._doms.fail&&this._doms.fail.show(),!1;this._doms.fail&&this._doms.fail.hide(),this.area=e.attributes.area,this.bkt=e.attributes.bkt||e.attributes.bucket,this.event_id=e.attributes.event_id||e.attributes.eventId;for(var i=0,n=t.length;n>i;i++){var o=t[i];o.purchaseType&&this.fc?(o.albumPlayUrl=this._vfrm?o.albumPlayUrl+"?fc="+this.fc+"#vfrm="+this._vfrm:o.albumPlayUrl+"?fc="+this.fc,o.isvip="1",o._isvip="1"):this._vfrm&&(o.albumPlayUrl=o.albumPlayUrl+"#vfrm="+this._vfrm),o.shortname=Q.string.truncate(o.name,this.numOfCutName),o.searchUrl=this.searchPrefix,o.tvid=o.firstTvid||o.tvid;var r=this._ctrl._plugins.releaseDataPlugin;r&&(o.recReason=r.parseRecommendReason(o.reason),o.releaseDate=r.parseReleaseDate(o.initIssueTime));var s=o.album_pic_url;o.vpic=s.replace(".jpg","_160_90.jpg"),o.vpic_180_236=s.replace(".jpg","_180_236.jpg"),o.identity=i+1}var l;try{l=Q.PageInfo.respInfo.cnf[Q.PageInfo.respInfo.cnf.length-1].extraInfo.playListViewCount}catch(d){l=5}var c=this._splitData(t,l);return{data:t,splitData:c,qiyuArea:this.area,attributes:e.attributes}},_splitData:function(e,t){for(var a={},i=0,n=0;i<=e.length;i+=t,n++)a["d"+n]=e.slice(i,i+t);return a},_renderUHtml:function(e){if(this.bodanUl){var t=this.bodanUl.html()+e;this.bodanUl.html(t)}else this._doms.recommend&&this._doms.recommend.html(e)}}});a.exports=l});
define("units/releaseDate.js",[],function(e,t,a){a.exports={parseRecommendReason:function(e){if(e&&~e.indexOf(":")){var t=e.split(":"),a=t[1].split(",");return{reasonLink:!0,linkTitle:t[0]+":",tag:a.slice(0,2)}}return{reasonLink:!1,tag:e}},parseReleaseDate:function(e){if(!e)return"";var t,a,i="发布于 ";a=this._parseDate(e);var n,o=new Date(a[0],a[1]-1,a[2],a[3]||0,a[4]||0,a[5]||0),r=new Date-o,s=new Date,l=s.getMinutes(),d=o.getMinutes(),c=s.getHours(),m=o.getHours();switch(this._detectSameDay(o)){case 1:0>r-36e5?(n=c>m?l+(60-d):l-d,t=n+"分钟前",0===o.getMinutes()&&0===o.getSeconds()&&(t="今天")):t=0===o.getMinutes()&&0===o.getSeconds()?"今天":"今天"+e.slice(11,16);break;case 2:t="昨天";break;case 3:t="前天";break;default:t=e.slice(0,10)}return i+t},_parseDate:function(e){if(!e)return"";var t=e.split(" "),a=t[0].split("-").concat(t[1].split(":"));return a},_detectSameDay:function(e){var t=new Date;return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()?e.getDate()==t.getDate()?1:e.getDate()==t.getDate()-1?2:e.getDate()==t.getDate()-2?3:0:0},releaseDateV2:function(e){if(!e)return"";var t,a,i="发布于 ";e=Q.date.format(new Date(e),"yyyy-MM-dd HH:mm:ss"),a=this._parseDate(e);var n,o=new Date(a[0],a[1]-1,a[2],a[3]||0,a[4]||0,a[5]||0),r=new Date-o,s=new Date,l=s.getMinutes(),d=o.getMinutes(),c=s.getHours(),m=o.getHours(),u=s.getDate(),p=o.getDate(),h=s.getMonth(),f=o.getMonth();switch(this.detectDiffDay(o)){case 1:0>r-36e5?(n=c>m?l+(60-d):l-d,t=n+"分钟前",0===o.getMinutes()&&0===o.getSeconds()&&(t="今天")):t=0===o.getMinutes()&&0===o.getSeconds()?"今天":"今天"+e.slice(11,16);break;case 2:t="昨天";break;case 3:t="前天";break;case 4:t=u-p+"天前";break;case 5:t=h-f+"月前";break;default:t=e.slice(0,10)}return i+t},detectDiffDay:function(e){var t=new Date;return e.getFullYear()==t.getFullYear()?e.getMonth()==t.getMonth()?e.getDate()==t.getDate()?1:e.getDate()==t.getDate()-1?2:e.getDate()==t.getDate()-2?3:4:5:0}}});
define("kit/langTransform.js",[],function(e,t,a){var i={};new Q.ic.InfoCenter({moduleName:"langTransform"});var n=Q.PageInfo||{};i.TW=n.i18nLang;var o={cn_Zh2TW:function(e){var t,a=/[\u4e00-\u9fa5]+/g,n=e.match(a);return n&&n.length>0&&n.forEach(function(a){t=new RegExp(a),i.TW&&i.TW[a]&&(e=e.replace(t,i.TW[a]))}),e}};a.exports={tranformData:function(e,t){function a(i){var n={};if(e.constructor===Object)for(var r in e)e.hasOwnProperty(r)&&(e[r].constructor===Object?n[r]=a(e[r]):e[r].constructor===String&&(n[r]=o["cn_Zh2"+t](e[r])));return Q.object.extend(i,n)}return a(e)},transformTpl:function(e,t){return o["cn_Zh2"+t](e)}}});
define("units/playCount.js",["../components/units/pageJob","../kit/qiyiPlayer","../interfaces/playCountInterfaceJSONP","../kit/formatNumber"],function(e,t,a){var i,n,o,r,s=e("../components/units/pageJob"),l=e("../kit/qiyiPlayer"),d=e("../interfaces/playCountInterfaceJSONP"),c=e("../kit/formatNumber"),u="playCount",m=null,p=[];i=Q.PageInfo&&Q.PageInfo.playPageInfo||{},n=i.tvId,o=i.albumId,r=i.cid,s.create(u,{getDependentDoms:function(){m=Q.$("*[data-widget-playcount]")||Q.$("[data-widget-playcount=filminfo]")||Q.$("[data-widget=playcounts]")},check:function(){var e=!0;return m.length||(e=!1),e},_renderAll:function(e){var t,a,i=0;if(p.length=0,e&&e.forEach(function(e){e=Q.$(e),p.push(e.attr("data-dynamic-albumid")||e.attr("data-playcount-albumid")||e.attr("data-albumid")||o)}),p.length)for(var n=0;n<p.length;n++)p[n]||(p.splice(n,1),n--);var r=1;if(0!==p.length){p.length<=1&&(r=2);var s=function(e){return"[object Array]"==Object.prototype.toString.call(e)?!0:!1};new d({path:p.join(",")+"/",single:p.length<=1}).send({timeout:5e3,param:{src:"760859ef3a0046e0932d0381e641cbb6"},dataType:"jsonp"},function(n){if(n.length){if(s(n)&&1==n.length){for(var l in n[0])n=n[0][l];n.timestamp=+new Date}e&&e.forEach(function(e,s){e=Q.$(e),1===r?(t=e.attr("data-dynamic-albumid")||e.attr("data-playcount-albumid")||e.attr("data-albumid")||o,i=n[s][t]+""):i=n,a=c.format(i),"bodan"==e.attr("data-playcount-type")?a+="次播放":"uc"==e.attr("data-playcount-type")&&(a=i>0?'<i class="ff-icon"></i>'+a:""),i=Q.string.divideNumber(i);var l=Q.$("[data-widget-playcount=filminfo]");l&&l.length>0?i&&("list"==l.attr("data-playcount-type")?e.html("<em>播放次数:</em><em>"+i+"次</em>"):e.html("总播放："+i+"次")):i&&e.html(a),Q.event.customEvent.fire({type:"playCountUpdated"})})}})}},init:function(){var e=this;Q.event.customEvent.on("dynamicPlayCount",function(t){var a=t.data.container.down("[data-widget-dynamic]")||t.data.container.down("[data-widget-playcount]");e._renderAll(a)}),this._renderAll(m);var t;t=l.getPlayer("video"),t.on("videoChanged",function(t){var a=t.data.aid;a&&e.renderAll(a)})},renderAll:function(e){m&&m.forEach(function(t){var a=Q.$(t);a.attr("data-playcount-albumid",e)}),this._renderAll(m)}}),a.exports=u});
define("units/relateRoles.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../kit/followInfo","../action/followTrigger","../action/tab","../interfaces/sameRoleInterface","../kit/artTemplate","./responseForSlide","../kit/responsive"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o=e("../kit/userInfo"),r=e("../kit/followInfo"),s=e("../action/followTrigger"),l=e("../action/tab"),d=e("../interfaces/sameRoleInterface"),c=e("../kit/artTemplate");e("./responseForSlide");var u,p,m,h,f,g,v,b,y=e("../kit/responsive"),w="relateRoles",V=Q.browser.iPad?21:Q.browser.android||Q.browser.iPhone?31:11;b=Q.PageInfo&&Q.PageInfo.playPageInfo||{};var k,U="actor";i.create(w,{getDependentDoms:function(){var e=Q.$(".widget-relateRoles");return h={widget:e,tab:Q.$(".widget-realteactorstab"),tpl:e.down('[data-qiyu-tpl="roles"]')}},check:function(){return n(h),!0},init:function(){var e=this;e.changeActorsNumResp(),Q.object.extend(h,{loading:h.widget.down('[data-relateroles-elem="loading"]')}),u=new l({doms:{widget:h.tab,titles:h.tab.down('[data-tab-title="realteactorstab"]'),bodies:h.tab.down('[data-tab-body="realteactorstab"]')}}),k=h.widget.attr("data-video-isneedchanged"),Q.event.customEvent.on("relateRole-changed",function(t){if("false"!==k){t=t||{},t=t.data||{};var a=e.getParamSetting(t);e.changeRoles(a);var i=l.getTab("relateactors");i&&i.select(1)}})},exec:function(){var e=this;g=h.widget.attr("data-relateactors-num")||10,u.on("focuschange",function(t){e.roleTabSelect(t)}),this.follow=s.getFollow("related")},roleTabSelect:function(e){var t=this,a=e.data.body,i=e.data.title;p=i.attr("data-tab-text"),m=i.attr("data-tab-text2");var n=i.attr("data-tab-cid")||b.cid,o=i.attr("data-tab-cate"),r=i.attr("data-tab-qipuid")||b.tvid;if("1"===o?U="actor":"2"===o&&(U="director"),p&&p!=m){var s={tag:p,cate:o,cid:n,qipuid:r,rltnum:g};t.requestActor(i,a,s)}},requestActor:function(e,t,a){var i=this;v||(v=new d),v.request({tag_category:a.tag+"_"+a.cate,cid:a.cid,qipuid:a.qipuid,rltnum:a.rltnum},function(n){i.resultHandler(e,t,a,n)})},resultHandler:function(e,t,a,i){var n=this;h.loading&&h.loading.hide();var o=t.down('[data-relateroles-elem="cont"]'),r=t.down('[data-relateroles-elem="nocont"]');if(o&&r){var s=t.down('[data-relateroles-elem="list"]');t.down('[data-relateactors-elems="nocontent"]');var l,d,u;if("A00000"!==i.code)return r.show(),o.hide(),void 0;var p=i.data;if(!p||!p.length)return r.show(),o.hide(),void 0;r.hide(),o.show(),e.attr("data-tab-text2",a.tag),l=i.attributes,s.attr("data-eid",i.event_id),s.attr("data-area",i.area),s.attr("data-bucket",i.bucket),d=c.compile(h.tpl.value()),p.forEach(function(e){var t="",a="",i="",n="";if(e.sourceName){if(i=e.sourceName,n=e.shortTitle||e.name,a=Q.string.truncate(i,20),e.globalPublishDate){var o=e.globalPublishDate;t+=o.slice(0,4),t+="-"+o.slice(4,6),t+="-"+o.slice(6,8),t+="期"}}else if(2==e.channelId||4==e.channelId)e.totalEpisodeNum&&e.totalEpisodeNum!=e.latestEpisode?(e.latestEpisode&&(t="更新至"+e.latestEpisode),t?t+="集":t=e.totalEpisodeNum+"集全"):(e.totalEpisodeNum?t=e.totalEpisodeNum+"集全":e.latestEpisode&&(t="更新至"+e.latestEpisode+"集"),e.isBossMixer&&(e.isMemberOnly=0)),i=e.shortTitle||e.name,a=Q.string.truncate(i,20),n=e.promptDescription;else if(1==e.channelId)i=e.shortTitle||e.name,a=Q.string.truncate(i,20),n=e.promptDescription;else if(7==e.channelId){if(a=e.shortTitle||e.name,i=a,e.timeDuration){var r=e.timeDuration;t=Q.date.formatSeconds(r)}}else if(a=e.shortTitle||e.name,i=a,e.timeDuration){var s=e.timeDuration;t=Q.date.formatSeconds(s)}if(e.qishu=t,e.biaoti=a,e.biaoti_v2=i,e.yijuhua=n,e.picUrl_180=e.pictureUrl.replace(".jpg","_180_236.jpg"),e.picUrl=e.pictureUrl.replace(".jpg","_160_90.jpg"),e.aid=e.albumId,e.cid=e.channelId,e.exclusive=e.isExclusive,e.jiaobiao_dubo=e.isExclusive,e.isMemberOnly){var l=e.payMark;1==l?e.jiaobiao_vip="1":2==l?e.jiaobiao_pay="1":3===l&&(e.jiaobiao_ticket="1")}var d=e.snsScore+"",c=d.split(".");"-1"===c[0]||1===e.channelId&&0!==e.parentAlbumId?(e.score1="",e.score2=""):(e.score1=c[0],c[1]=c[1]||0,e.score2="."+c[1])}),u=d(i),s.html(u);var m=s.down(".mod-listTitle_right");m.forEach(function(e){e=Q.$(e),""===e.html().trim()&&e.hide()});var f=e.attr("data-role-slideisload");if(f){var g=t.attr("data-slide-name");Q.event.customEvent.fire({type:"singleSlideResp-reset",data:{name:g,total:p.length}}),setTimeout(function(){Q.event.customEvent.fire({type:"singleSlideResp-btnShowHide",data:{wrap:t,len:p.length}})},0)}else e.attr("data-role-slideisload","true"),Q.event.customEvent.fire({type:"lazyInitSlide",data:{widget:t}}),Q.event.customEvent.fire({type:"singleSlideResp-btnShowHide",data:{wrap:t,len:p.length}}),s.delegate("delegate-relateactors",function(t){var a=Q.$(t.target);n.sendpingback(s,{usract:"userclick",taid:a.attr("data-aid"),tcid:a.attr("data-cid"),rank:a.attr("data-seq")-1},e)});Q.event.customEvent.fire({type:"qidan_add_renderDone",data:{wrapper:s}}),n.sendpingback(s,{usract:"show"},e)}},changeActorsNumResp:function(){var e=this;h.rolelist=h.widget.down(".widget-actorHideResp");var t=h.rolelist;t&&t.length&&(h.series=Q.$("#widget-series-title"),setTimeout(function(){e.changeActorEvent()},400),y.on("bodyClassChange",function(t){t=t||{},t=t.data||{},e.changeActorEvent(t)}),Q.event.customEvent.on("seriesDone",function(){e.changeActorEvent()}))},changeActorEvent:function(e){var t,a=this,i=a.getResponseInfo(e),n=i.hideNum;h.series&&(t=h.series.css("display")),"none"===t?a.hideActors(h.rolelist,i.total,n-1):a.hideActors(h.rolelist,i.total,n)},getResponseInfo:function(e){var t=e||Q.PageInfo.respInfo,a=t.cnf[t.curLayout],i=a.extraInfo.actorHideNum,n=a.extraInfo.actorTotal;return{hideNum:i,total:n}},hideActors:function(e,t,a){for(var i=t-a,n=0,o=0;i>o;o++){var r=Q.$(e[o]);if(r){var s=r.attr("data-role-hasdata");"true"===s&&("none"===r.css("display")&&r.css("display",""),n++)}}for(var l=n;t>l;l++){var d=Q.$(e[l]);d&&d.hide()}},getParamSetting:function(e){var t=this,a="guests,mainActors,directors";f=a.split(",");for(var i=e.stars,n=e.cast,o=[],r=f.length,s=0;r>s;s++){var l=f[s],d=n[l];if(d&&d.length)for(var c=0;c<d.length;c++){var u=d[c];t.roleHandle(u,l,e.channelId,e.qipuId),o.push(u)}}if(!o.length)for(var p=0;p<i.length;p++){var m=i[p];t.roleHandle(m,"stars"),o.push(m)}return o},roleHandle:function(e,t,a,i){e.nodata="hosts"===t?"主持人":"guests"===t?"嘉宾":"directors"===t?"导演":"mainActors"===t?6===a||7===a||31===a?"主持人":5===a?"歌手":12===a?"主讲人":"主演":"singers"===t?"歌手":"writers"===t?"编剧":"composers"===t?"作曲家":"lyricists"===t?"诗人":"publishers"===t?"出品人":"",e.imageUrl_80=e.imageUrl.replace(".jpg","_80_80.jpg"),e.roles&&e.roles.length&&(e._role=e.roles[0]),e.userId&&"0"!=e.userId+""&&(e.user_id=e.userId),e.channelId=a,e.qipuid=i},changeRoles:function(e){var t=this,a=h.rolelist;if(a&&a.length){var i,n=a.length,o=0,s=e.length;if(s&&a.forEach(function(a){i=1;var n=Q.$(a),s=e[o];if(s&&n&&n.attr("data-role-hasdata")){var l=s.name||"",d="";d=s.user_id?"http://www.iqiyi.com/u/"+s.user_id:"http://www.iqiyi.com/lib/s_"+s.id+".html";var c=n.down('*[data-role-item="aimg"]');c&&(c.attr("href",d),c.attr("title",l),c.attr("rseat",l));var u=n.down('img[data-role-item="image"]');if(u){var p=s.imageUrl_80||"http://pic9.qiyipic.com/common/20140917/92139f7df57b423f9ee5be6ee1db30ed.png";u.attr("src",p),u.attr("title",l),u.attr("alt",l),t.setAttrPopup(s,u,o+1)}var m=n.down('*[data-role-item="actors"]');m&&(s._role?m.html("饰"+s._role):m.html(s.nodata));var h=n.down('*[data-role-item="aname"]');h&&(h.html()===l&&(i=0),h.attr("href",d),h.attr("title",l),h.html(l),t.setAttrPopup(s,h,o+1)),n.attr("data-tab-text",l);var f=n.down(".btn-subscription_play");if(f){var g=f.down(".btn-care");s.user_id?(g&&r.getRel({uids:s.user_id},function(e){var a=e.data,i=0;a&&a[0]&&a[0].type&&(i=a[0].type),t.follow.changeOriginState(g,i,s.user_id)}),f.show()):(t.follow.clearState(g),f.hide())}if("导演"===s.nodata?n.attr("data-tab-cate","2"):n.attr("data-tab-cate","1"),s.channelId?(s.channelId+"",n.attr("data-tab-cid",s.channelId)):n.attr("data-tab-cid","1,2,4,5,6,7"),s.qipuid){if(0===i){var v=n.attr("data-tab-qipuid"),y=n.attr("data-tab-qipuid2")||b.albumId;(void 0===y||"null"===y)&&n.attr("data-tab-qipuid2",v),n.attr("data-qipuid-tag","0")}else n.attr("data-tab-qipuid2","null"),n.attr("data-qipuid-tag","1");n.attr("data-tab-qipuid",s.qipuid)}n.attr("data-role-hasdata","true"),o++}}),n>o)for(var l=o;n>l;l++){var d=Q.$(a[l]);d&&(d.hide(),d.attr("data-role-hasdata","false"))}t.changeActorEvent()}},setAttrPopup:function(e,t,a){e.user_id?(t.attr("j-delegate","userinfopopup"),t.attr("data-userinfopopup-id",e.user_id),t.attr("data-idx",a)):(t.removeAttr("j-delegate"),t.removeAttr("data-userinfopopup-id"),t.removeAttr("data-idx"))},sendpingback:function(e,t,a){var i=[];"show"==t.usract&&(e.down("li").forEach(function(e){i.push(Q.$(e).attr("data-aid"))}),a.attr("data-qipuid-tag","1"));var n,r,s,l=b.sourceId;n=l?b.tvId:b.albumId,r=a.attr("data-tab-cid")||b.cid,-1!=r.indexOf(",")&&(r=b.cid);var d=a.attr("data-qipuid-tag");"0"===d?s=a.attr("data-tab-qipuid2")||n:(s=a.attr("data-tab-qipuid")||n,a.attr("data-tab-qipuid2",s));var c={type:"recctplay20121226",usract:t.usract,ppuid:o.getUid(),uid:Q.cookie.get("QC005"),pru:Q.cookie.get("P00PRU")||"",event_id:e.attr("data-eid"),cid:r,aid:s||"",bkt:e.attr("data-bucket"),area:e.attr("data-area"),platform:V,fea_type:U,albumlist:i.join()};"show"!=t.usract&&(delete c.albumlist,c.tcid=t.tcid,c.taid=t.taid,c.rank=t.rank),Q.log.server(c,"http://msg.71.am/tmpstats.gif")}}),a.exports=w});
define("interfaces/sameRoleInterface.js",["../kit/remoteInterface"],function(e,t,a){var i=e("../kit/remoteInterface");a.exports=Q.Class("SameRoluInterface",{construct:function(){this._remoteInterface=new i({url:"http://qiqu.iqiyi.com/apis/tagcategoryvideos"})},methods:{request:function(e,t){var a={tag_category:e.tag_category,rltnum:e.rltnum||100,area:e.area||"violet",tag_limit:e.tag_limit||"0",cid:e.cid||"",id:e.qipuid||"",rltfmt:"json"},i="PC_QIYI";Q.browser.iPad?i="PAD_WEB_QIYI":(Q.browser.android||Q.browser.iPhone)&&(i="ANDROID_PHONE_IQIYI"),a.play_platform=i,this._remoteInterface.send({dataType:"jsonp",param:a,memory:e.memory},function(e){t&&t(e)})}}})});
define("units/adVideoExtension.js",["../components/units/pageJob","../interfaces/adVideoInterface","../kit/artTemplate","../kit/qiyiPlayer"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../interfaces/adVideoInterface");e("../kit/artTemplate");var o,r,s,l,d,c,u=e("../kit/qiyiPlayer").getPlayer("video"),p="adVideoExtension",m={},h="203685412";s=Q.PageInfo&&Q.PageInfo.playPageInfo||{},i.create(p,{getDependentDoms:function(){o=Q.$('[data-advideo-extension="wrap"]'),r=Q.$('[data-advideo-extension="tpl"]')},check:function(){return o&&r?!0:void 0},init:function(){var e=this;l=o.attr("data-advideo-qipuid")||s.advideo_qipuid,d=s.tvId+"",c=s.cid+"",e.initTuiguangWrap(),u.on("videoChanged",function(t){d=t.data.tvid+"",m?e.renderData(m):e.initTuiguangWrap()})},initTuiguangWrap:function(){var e=this;new n({qid:h}).send({dataType:"jsonp"},function(t){m=t,e.renderData(t)})},renderData:function(e){var t,a,i,n=this,s=0,u=e.items.length;if(u>0){for(var p=0;u>p;p++)if(i=e.items[p],""!==i.kvs.special_id&&(s=n.checkId(i.kvs.special_id,d)),"video"===i.kvs.special_type&&s){t=i.pageUrl,a=i.imageUrl;break}if(!t||!a)for(var m=0;u>m;m++)if(i=e.items[m],""!==i.kvs.special_id&&(s=n.checkId(i.kvs.special_id,l)),"album"===i.kvs.special_type&&s){t=i.pageUrl,a=i.imageUrl;break}if(!t||!a)for(var h=0;u>h;h++)if(i=e.items[h],""!==i.kvs.special_id&&(s=n.checkId(i.kvs.special_id,c)),"channel"===i.kvs.special_type&&s){t=i.pageUrl,a=i.imageUrl;break}if(!t||!a)for(var f=0;u>f;f++)if(i=e.items[f],"common"===i.kvs.special_type){t=i.pageUrl,a=i.imageUrl;break}}var g={};g.vurl=t,g.imgurl=a;var v=Q.plugins.Mustache.render(r.value(),g);o.html(v)},checkId:function(e,t){for(var a=e.split(","),i=0,n=0;n<a.length;n++)if(a[n]===t){i=1;break}return i}}),a.exports=p});
define("interfaces/adVideoInterface.js",["../kit/remoteInterface"],function(e,t,a){var i=e("../kit/remoteInterface");a.exports=Q.Class("adVideoInterface",{construct:function(e){var t="http://mixer.video.iqiyi.com/jp/mixin/resources/"+e.qid;this._remoteInterface=new i({url:t})},methods:{send:function(e,t){e.param=e.param||{},e.method="GET",e.dataType="jsonp",this._remoteInterface.send(e,function(e){t&&t(e)})}}})});
define("units/playerBangdans.js",["../components/units/pageJob","../components/action/checkDoms","../action/tab","../interfaces/episodeVideoPlayInfoInterface","../kit/qiyiPlayer"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n,o,r,s,l,d,c,u=e("../action/tab"),p=e("../interfaces/episodeVideoPlayInfoInterface"),m=e("../kit/qiyiPlayer"),h=m.getPlayer("video"),f="",g="playerBangdans";i.create(g,{getDependentDoms:function(){n=Q.$('[data-bangdan-type="jsgetinc"]')},check:function(){return n?!0:!1},init:function(){var e=this;h.getVideoInfo(function(t){e.getTabType(t.tvid.toString())})},getTabType:function(e){var t=this;new p({tvid:e,jsonpCbName:"playInfo"+parseInt(100*Math.random(),10)}).send({},function(e){if("A00000"==e.code){f="";var a=e.data.categories||[],i=a.length;if(a&&i)for(var n=0;i>n;n++){var o=a[n];(1===o.subType||2===o.subType)&&("美剧"===o.name&&(o.name="美国"),f+=o.name+" ")}t.showBangdanTab(f)}})},showBangdanTab:function(){var e,t=n.attr("data-tabname");o=o||u.getTab(t);var a=!0;o&&(r=r||o._view._doms.titles,s=s||o._view._doms.bodies,l=l||r.length,r.forEach(function(t,i){var n=Q.$(t),o=Q.$(s[i]),r=n.attr("data-tab-name")||"";e=n.attr("inc-url"),(-1!=f.indexOf(r)||"vipBang"===r)&&(a&&"vipBang"!==r&&(n.addClass("selected"),a=!1),Q.http.text(e,{method:"GET",onsuccess:function(e,t){t&&(o.html(t),n.css("display","block"),n.hasClass("selected")&&o.css("display","block"),Q.event.customEvent.fire({type:"bangDanHover",data:{widget:o.down('[data-bangdan-wrap="hasHover"]')}}))}})),"totalBang"===r&&(d=n,c=o)}),a&&(e=d.attr("inc-url"),d.addClass("selected"),Q.http.text(e,{method:"GET",onsuccess:function(e,t){t&&(c.html(t),d.css("display","block"),c.css("display","block"),Q.event.customEvent.fire({type:"bangDanHover",data:{widget:c.down('[data-bangdan-wrap="hasHover"]')}}))}})))}}),a.exports=g});
define("units/appDownload.js",["../components/units/pageJob","../components/action/checkDoms","../config/siteDomain","../kit/checkReferrerHost","../interfaces/getDownloadUrlInterface"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../components/action/checkDoms");e("../config/siteDomain"),e("../kit/checkReferrerHost");var o,r=e("../interfaces/getDownloadUrlInterface"),s="appDownload";n.create(s,{getDependentDoms:function(){var e=Q.$("#widget-appdown-container")||Q.$("[data-widget-appdown=container]");o={container:e,widget:e.down('[data-widget-appdown="playpage"]')}},check:function(){return i(o),!0},init:function(){o.widget.forEach(function(e){var t=Q.$(e);t.on("click",function(e){var a=Q.event.get(e.event);a.preventDefault();var n={pubarea:t.attr("pubarea"),srcchannel:document.referrer};window.location.href=r.getDownloadUrl(n)})}),o.widget.forEach(function(e){var t=Q.$(e);if("getAddDownloadUrl"===t.attr("data-widget-getUrl")){var a=t.attr("pubarea");t.on("click",function(e){e.preventDefault();var t={pubarea:a,srcchannel:document.referrer};window.location.href=r.getDownloadUrl(t)})}})}}),a.exports=s});
define("kit/checkReferrerHost.js",[],function(e,t,a){a.exports=function(e){var t=document.referrer,a=0;if(!t)return a;var n=null;try{n=Q.url.parse(t).host,a=n&&-1===n.indexOf("iqiyi.com")&&-1===n.indexOf("pps.tv"),a=a?1:0}catch(i){a=0}return a&&e&&n&&-1!==n.indexOf(e)&&(a=2),a}});
define("units/toHistoryUrl.js",["../components/units/pageJob","../components/action/checkDoms","../kit/iframeLocation","../model/playhistoryModel"],function(e,t,a){var n=e("../components/units/pageJob");e("../components/action/checkDoms");var i="toHistoryUrl",o=e("../kit/iframeLocation"),r=e("../model/playhistoryModel");n.create(i,{check:function(){return!0},init:function(){var e=this;Q.event.customEvent.on("history-loction2Watched",function(t){t=t&&t.data||{};var a=t.aid,n=t.url;e.getHistoryUrl({aid:a,url:n})}),this._initDelegate()},_initDelegate:function(){Q.$(document).delegate("loction2Watched",this._loction2Watched.bind(this))},_loction2Watched:function(e){var t=this,a=Q.event.get(e.event);a.preventDefault();var n=Q.$(e.currentTarget||e.target||e.srcElement),i=n.attr("data-aid"),o=n.attr("href"),r={aid:i,url:o};t.getHistoryUrl(r)},getHistoryUrl:function(e){e=e||{};var t=e.aid||"",a=e.url,n={param:{albumId:t}},i=new r;n.onsuccess=function(e){e&&e.videoUrl?o.href(e.videoUrl):o.href(a)},n.onfailure=function(){o.href(a)},i.getPlayHistoryByAlbum(n)}}),a.exports=i});
define("units/movieTickets.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../interfaces/movieTicketsInterface"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../kit/qiyiPlayer").getPlayer("video"),o=e("../interfaces/movieTicketsInterface"),r=null,s="movieTickets";i.create(s,{check:function(){return!0},init:function(){try{r=Q.PageInfo.playPageInfo.albumId}catch(e){}this.bindEvent()},bindEvent:function(){n.on("refreshPage",function(){location.reload()}),n.on("videoChanged",function(e){r=e.data.aid}),Q.$(document).delegate("movieTickets",function(e){e=Q.event.get(e.event||window.event),e.preventDefault();var t={aid:r,version:"1.0",platform:"b6c13e26323c537d"},a=new o;a.request(t,function(e){"A00000"==e.code&&location.reload()})})}}),a.exports=s});
define("interfaces/movieTicketsInterface.js",["../kit/remoteInterface"],function(e,t,a){var i=e("../kit/remoteInterface");a.exports=Q.Class("VipTrialInterface",{construct:function(){this._remoteInterface=new i({movieTickets:{url:"http://serv.vip.iqiyi.com/services/use_vodcoupon.action"}})},methods:{request:function(e,t){e=e||{},e.callback=t||"movieTickets",e.t=(new Date).getTime(),this._remoteInterface.send({ifname:"movieTickets",param:e,dataType:"jsonp",memory:!0},function(e){t&&t(e)})}}})});
define("units/iqiyiHot.js",["../components/units/pageJob","../components/action/checkDoms","../interfaces/qiyuP13n20RecommendInterface","../model/qiyuP13n20RecommendModel","../kit/artTemplate","../kit/userInfo"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o=e("../interfaces/qiyuP13n20RecommendInterface");e("../model/qiyuP13n20RecommendModel");var r,s,l,d=e("../kit/artTemplate"),c=e("../kit/userInfo"),u=new Q.ic.InfoCenter({moduleName:"iqiyiHot"}),p="iqiyiHot";i.create(p,{getDependentDoms:function(){var e=Q("#widget-iqiyi-hot"),t=Q.$("#widget-iqiyi-hot");return e.length&&(r={wrap:e,oldwrap:t,cont:e.find("[data-hot-elem=cont]"),list:e.find("[data-hot-elem=list]"),tpl:e.find("[data-hot-elem=tpl]")}),r},check:function(e){return n(e),!!r},init:function(){var e=this;try{s=Q.PageInfo.playPageInfo.albumId,l=Q.PageInfo.playPageInfo.cid}catch(t){}r.title=r.wrap.find("[data-hot-elem=title]"),e.bindEvent()},exec:function(){},bindEvent:function(){var e=this,t=function(){var a=r.oldwrap;a.isInScreen()&&(e.initWidget(),Q.$(window).un("scroll",t))};Q.$(window).on("scroll",t),t()},initWidget:function(){var e=this,t=r.wrap,a=t.attr("data-hot-area")||"rabbit";15!==l&&(l=t.attr("data-hot-cid")||l||"1");var i=t.attr("data-hot-rltnum")||10,n=l+"_"+i,s=Q.cookie.get("QC005")||"",d=c.getUid(),u={area:a,uid:s,ppuid:d,cid_num:n,rltfmt:"json"},p="PC_QIYI";Q.browser.iPad?p="PAD_WEB_QIYI":(Q.browser.android||Q.browser.iPhone)&&(p="ANDROID_PHONE_IQIYI"),u.play_platform=p;var m=new o,h="p13nRecommend";m.request(u,h,e.p13nCallback.bind(this))},p13nCallback:function(e){var t=this;"A00000"===e.code&&(Q.event.customEvent.fire({type:"iqiyihotvideo-getSuc",data:{attributes:e.attributes}}),t.renderHtml(e))},renderHtml:function(e){var t,a=this;try{t=e.channel_recommendation[0].resys_element}catch(i){}if(t&&t.length){var n=a.doHandledata(t);if(n&&n.length){d.onerror=function(e){u.log(e),u.error(e.temp)};var o=r.tpl.val(),s=d.compile(o),l=s({data:n});r.list.html(l),r.cont.css("display",""),r.title.length&&r.title.css("display",""),setTimeout(function(){Q.event.customEvent.fire({type:"lazyInitSlide",data:{widget:r.oldwrap}}),Q.event.customEvent.fire({type:"qidan_add_renderDone",data:{wrapper:r.oldwrap}})},0)}}},doHandledata:function(e){for(var t=[],a=0;a<e.length;a++){var i=e[a];if(!Q.isEmptyObject(i)){var n={};if(n.albumId=i.album_aid,n.channelId=i.channel_id,n.albumPlayUrl=i.page_url,n.tvId=i.tv_id,n.vid=i.vid,n.name=i.name,n.shortTitle=i.short_title,n.subTitle=i.sub_title,n.iscore=i.iscore,n.iscore&&1===n.channelId){var o=i.iscore+"",r=o.split(".");r.length&&(n.js_score_lt=r[0]||0,n.js_score_rt=r[1]||0)}var s=i.time_duration;s&&(n._playLength=Q.date.formatSeconds(s));var l=i.prompt_description||i.short_title||i.sub_title;n.yijuhua=Q.string.truncate(l,24),n.yijuhua_v2=l,n.updateOrQishu="";var d=i.total_episode_num;if(d){var c=i.latest_episode||"0";c=parseInt(c,10),n.updateOrQishu=c?"更新至"+c+"集":d+"集全";var u=i.name||i.short_title||i.sub_title;n.biaoti=Q.string.truncate(u,20),n.biaoti_v2=u}else if(i.source){var p="";if(i.latest_episode){if(p=i.latest_episode,8===p.length){var m="";m+=p.slice(0,4),m+="-"+p.slice(4,6),m+="-"+p.slice(6,8),p=m}}else i.global_publish_date&&(p=i.global_publish_date);n.updateOrQishu=p+"期";var h=i.source||i.short_title||i.sub_title;n.biaoti=Q.string.truncate(h,20),n.biaoti_v2=h}else if(1==n.channelId||16==n.channelId){n.updateOrQishu=1==n.channelId?"":n._playLength;var f=i.short_title||i.sub_title||i.name;n.biaoti=Q.string.truncate(f,20),n.biaoti_v2=f}else n.updateOrQishu=n._playLength,n.biaoti=i.short_title||i.sub_title||i.name,n.biaoti_v2=n.biaoti,n.yijuhua="",n.yijuhua_v2="";var g=i.picture_url;n.vpic_180_236=g.replace(".jpg","_180_236.jpg"),n._exclusive=parseInt(i.is_exclusive,10),n._isonly=parseInt(i.is_exclusive,10),n._1080p=parseInt(i.is_1080p,10),n._3d=parseInt(i.is_3d,10),n._isvip=parseInt(i.is_member_only,10),n._iqiyiself=i.is_qiyi_produced;var v=i.pay_mark||"";1==v?n.jiaobiao_vip="1":2==v?n.jiaobiao_pay="1":3===v&&(n.jiaobiao_ticket="1"),t.push(n)}}return t}}),a.exports=p});
define("interfaces/qiyuP13n20RecommendInterface.js",["../kit/remoteInterface","./config"],function(e,t,a){var i=e("../kit/remoteInterface"),n=e("./config");a.exports=Q.Class("QiyuP13n20RecommendInterface",{construct:function(){this._remoteInterface=new i({p13nRecommend:{url:n.interfaces.p13n20Recommend},tw_ugcVRecommend:{url:n.interfaces.ugcVRecommend}})},methods:{request:function(e,t,a){e=e||{},e.rltfmt="json";var i=e.timeout;delete e.timeout,this._remoteInterface.send({ifname:t,param:e,dataType:"jsonp",timeout:i||5e3},function(e){a&&a(e)})}}})});
define("model/qiyuP13n20RecommendModel.js",["../model/templateModel","../interfaces/qiyuP13n20RecommendInterface","../components/model/recommendModelUtil"],function(e,t,a){var i=e("../model/templateModel"),n=e("../interfaces/qiyuP13n20RecommendInterface"),o=e("../components/model/recommendModelUtil");Q.date.formatSeconds,a.exports=Q.Class("QiyuP13n20RecommendModel",{extend:i,construct:function(e){e=e||{},this.callsuper(e),this.rmu=new o},methods:{makeupData:function(e,t){var a=this;e=this._bulidParams(e);var i=new n(e),o="p13nRecommend";i.request(e,o,function(e){e=e||{},"A00000"===e.code?(e=a._bulidData(e),t&&t(e)):t(!1)})},_bulidParams:function(e){e=e||{};var t={};return t.area=e.area||"",t.uid=e.uid||"",t.ppuid=e.ppuid||"",t.rltfmt="json",t.cid_num=e.cids||"",t},__parseData:function(e){var t={};return t._aid=e.album_aid,t._cid=e.channel_id,t._tvid=e.tv_id,t._vid=e.vid,t._play_url=e.page_url,t._pic_url=e.picture_url,t._name=e.name,t._vip=e.is_member_only,t._exclusive=e.is_exclusive,t._focus=e.reason,t._1080p=e.is_1080p,t},_bulidData:function(e){var t=e.attributes,a=this,i=[],n=e.channel_recommendation||[];return n.forEach(function(e){var t={cid:e.channel_id};t.album=e.resys_element.map(a.__parseData),i.push(t)}),{data:i,attributes:{area:t.area,bucket:t.bucket,bkt:t.bucket,event_id:t.event_id}}}}})});
define("units/iqiyiHotPingback.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../kit/checkI18nType"],function(e,t,a){var i,n=e("../components/units/pageJob"),o=e("../components/action/checkDoms"),r=e("../kit/userInfo"),s=e("../kit/checkI18nType"),l=new Q.ic.InfoCenter({moduleName:"IqiyiHotPingback"}),d="iqiyiHotPingback",c=Q.browser.iPad?21:Q.browser.android||Q.browser.iPhone?31:11,u={};Q.PageInfo.playPageInfo.tvId;var p=Q.PageInfo.playPageInfo.cid;n.create(d,{getDependentDoms:function(){return i={widget:Q.$("#widget-iqiyi-hot")}},check:function(e){return o(e),!0},init:function(){var e=this;Q.event.customEvent.on("iqiyihotvideo-getSuc",function(t){t=t||{},t=t.data||{},e.initOpt(t.attributes)}),e.initOpt()},exec:function(){var e=this;e.bindEvent()},initOpt:function(e){if(e=e||{},Q.object.isEmpty(e)){var t=i.widget;u={area:t.attr("data-hot-area"),bkt:t.attr("data-hot-bkt"),event_id:t.attr("data-hot-eventid"),platform:c}}else u={area:e.area,bkt:e.bucket,event_id:e.event_id||e.eventId,platform:c}},bindEvent:function(){var e=this,t=i.widget,a=0,n=function(){setTimeout(function(){if(t.isInScreen()){if(a)return;a=1,e._sendShowPingBack(),Q.$(window).un("scroll",n),Q.$(window).un("resize",n)}},200)};Q.$(window).on("scroll",n),Q.$(window).on("resize",n),t.delegate("iqiyi-hot",e.sendClickPingback.bind(this)),n()},_sendShowPingBack:function(){var e=this,t=i.widget,a=t.down('*[data-delegate="iqiyi-hot"]')||[],n={},o=[];a.length&&(a.forEach(function(e){var t=Q.$(e),a=t.attr("data-aid");a&&o.push(a)}),o.length&&(n.albumlist=o.join(",")),n.cid=p,n.usract="1",n.type="showlizard20130613",Q.object.extend(n,u),e._sendPingBack(n))},sendClickPingback:function(e){var t=this,a=Q.$(e.target),i={type:"recctplay20121226",usract:"userclick",taid:a.attr("data-aid"),tcid:a.attr("data-cid"),rank:a.attr("data-idx")};Q.object.extend(i),t._sendPingBack(i)},_sendPingBack:function(e){var t={ppuid:r.getUid()||"",uid:Q.cookie.get("QC005")||"",pru:Q.cookie.get("P00PRU")||"",platform:e.platform,mod:s.mod};Q.object.extend(t,e),Q.object.extend(t,u),Q.log.server(t,"http://msg.video.qiyi.com/tmpstats.gif"),l.debug("qiyu pingback参数："+JSON.stringify(e))}}),a.exports=d});
define("units/qiyuSendPingback.js",["../components/units/pageJob","../components/action/checkDoms","../action/qiyuRecommend","../kit/userInfo","../kit/checkI18nType","../kit/responsive"],function(e,t,a){var i,n=e("../components/units/pageJob"),o=e("../components/action/checkDoms"),r=e("../action/qiyuRecommend"),s=e("../kit/userInfo"),l=e("../kit/checkI18nType"),d=e("../kit/responsive"),c=new Q.ic.InfoCenter({moduleName:"qiyuSendPingback"}),u=Q.PageInfo&&Q.PageInfo.playPageInfo||{},m="qiyuSendPingback";n.create(m,{getDependentDoms:function(){return i={widget:Q.$("*[data-widget-qiyu]")}},check:function(e){return o(e),!0},init:function(){var e=this,t=r.getInstance();t.forEach(function(t){t._count=0,t.on("qiyu-item-click",function(t){var a=t.data.src,i=t.data.which,n=t.data.optional,o=t.data.doms,r={},s=Q.$(a),l=null,d=null;"black"==i?(l=Q.$(s.down("[data-qiyu-hrefelem]")[0]),d=s):"white"==i&&(l=s,d=s.parent("li")),r.href=l&&l.attr("href"),r.idx=d.attr("data-qiyu-idx")||"0",r.cid=d.attr("data-videolist-cid"),r.aid=d.attr("data-videolist-aid");var c=o.widget.attr("data-qiyu-pbcid")||u.cid;d.attr("data-videolist-this")||d.hasClass("focus2self")||(Q.object.extend(r,n),c&&(r.categoryId=c),e._sendPingBack(r))}),t.on("qiyu-recommend-done",function(a){function i(){n.recommend.isInScreen()&&(e._sendPingBack(p),Q.$(window).un("scroll",i))}var n=a.data.doms,o=a.data.data.data,r=a.data.optional,s=0;if(n.recommend.down("li").forEach(function(e){Q.$(e).attr("data-videolist-this")||Q.$(e).attr("data-qiyu-idx",s++)}),1==r.hookup){var l=Q.kit.QiyiPlayer.getPlayer("video");l.on("videoChanged",function(t){l.getSwitchVideoType(function(a){if("0"==a||"1"==a||"2"==a){var i=t.data,n=Q.$("[data-videolist-tvid="+i.tvid+"]"),o=n.attr("data-qiyu-idx")||"0",s={};s.idx=o,s.href=n.attr("data-videolist-href"),s.cid=n.attr("data-videolist-cid"),s.aid=n.attr("data-videolist-aid"),s.usract="0"==a?"ctplay":"userclick",n.attr("data-videolist-this")||(Q.object.extend(s,r),e._sendPingBack(s))}})})}var c=d.getCurrentLayout().bodyClass,m="qy"+c.split("-")[1]+"-hidden"||"qy1680-hidden",p={};p.idx="",p.usract="show";var h=[];o.forEach(function(e){if(!e.isMySelf){var t=n.recommend.down('[data-videolist-aid="'+e.albumId+'"]');t.hasClass(m)||h.push(e.albumId)}}),p.albumlist=h.join(",");var f=n.widget.attr("data-qiyu-pbcid")||u.cid;Q.object.extend(p,r),f&&(p.categoryId=f),n.recommend.isInScreen()&&(e._sendPingBack(p),t._count++),t._count<1&&Q.$(window).on("scroll",i)})})},_sendPingBack:function(e){Q.log.server({type:"recctplay20121226",usract:e.usract||"userclick",ppuid:s.getUid(),uid:e.uid,pru:Q.cookie.get("P00PRU")||"",aid:e.albumid||"",event_id:e.event_id,cid:e.categoryId,bkt:e.bkt,area:e.area,rank:e.idx,url:e.href||"",tag:"field",tn:(new Date).getTime()+Math.random(),platform:e.platform,tcid:e.cid||"",taid:e.aid||"",ls:e.ls||"",pay_type:e.pay_type||"",s_num:e.s_num||0,albumlist:e.albumlist||"",mod:l.mod},e.serverurl||"http://msg.71.am/tmpstats.gif"),c.debug("qiyu pingback参数："+JSON.stringify(e))}}),a.exports=m});
define("units/activityNoticeTopNav.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo","../action/qipaLogin","../interfaces/activityNoticeInterface","../kit/qiyiPlayer"],function(e,t,a){var n=e("../components/units/pageJob"),i=e("../components/action/checkDoms"),o=e("../kit/userInfo");e("../action/qipaLogin");var r,s=e("../interfaces/activityNoticeInterface"),l=e("../kit/qiyiPlayer").getPlayer("video"),d="activityNoticeTopNav",c=Q.$("[data-widget-activity=activitynoticedetail]"),m=c&&c.down("li"),h="<div data-widget-activityName='topNav'><div class='mod-nav-notify' data-activity-bottom='bottom'><a class='closeIco-notify' data-activity-close='close' style='cursor:pointer;'>×</a><div class='notify-main' data-activity-attendBox='activity-box'><i class='notify-msgIco' data-activity-noticeIcon='activity-msg'></i><span class='notify-content' data-activity-content='content'></span><span class='notify-join' data-activity-notice='activity-join'><a style='cursor:pointer;' data-activity-attentBtn='attent'>去看看</a></span></div></div><iframe class='mod-nav-notify-iframe'></iframe></div>",u=0;Q.PageInfo&&Q.PageInfo.playPageInfo&&Q.PageInfo.playPageInfo.tvId&&(u=Q.PageInfo.playPageInfo.tvId),n.create(d,{getDependentDoms:function(){var e=Q.$("[data-widget-activity=topNavBox]");return r={widget:e}},check:function(e){return i(e),!0},init:function(){var e,t,a,n,i,d,c,p,f=this,g="",U=new s,V={authcookie:o.getAuthCookies(),agent_type:1};if(Q.event.customEvent.on("logout",function(){r.widget.html(" "),(Q.browser.IE6||Q.browser.IE7)&&r.widget.addClass("dn")}),o.isLogin()&&(U.get(V,function(o){var s=[];if("A00000"==o.code){var l=o.data.danmakuMessages;if(o.data.danmakuMessages.length>0){for(var m=0,U=o.data.danmakuMessages.length;U>m;m++)s[m]=o.data.danmakuMessages[m].notice_start_time;f.exchangeTime(s);for(var v=0,y=0;y<s.length;y++)for(var b=0;b<o.data.danmakuMessages.length;b++)if(s[y]==o.data.danmakuMessages[b].notice_start_time){e=o.data.danmakuMessages[b].details,t=o.data.danmakuMessages[b].notice_start_time,a=o.data.danmakuMessages[b].notice_end_time,i=o.data.danmakuMessages[b].correlation_url,d=o.data.danmakuMessages[b].notice_type,c=o.data.danmakuMessages[b].correlation_id,p=o.data.danmakuMessages[b].notice_id,n=f.compareTime(t,a,e,d,"0");var k=1e3*t-(new Date).getTime(),w=Math.floor(k/6e4);if(31>w&&" "!=n){if("已结束"!=n&&" "!=n){"0"==v?(r.widget.html(h),r.widget.down("[data-widget-activityName]").attr("data-widget-activityName",v)):(r.widget.html(g+h),r.widget.down("[data-widget-activityName="+(v-1)+"]").next().attr("data-widget-activityName",v),"1"==v?r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-bottom=bottom]").css("bottom","-117px"):"2"==v&&r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-bottom=bottom]").css("bottom","-174px")),(Q.browser.IE6||Q.browser.IE7)&&r.widget.removeClass("dn"),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-close]").attr("data-activity-close",v),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-content=content]").html(n),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("data-activity-attentBtn",v),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("data-pb","rseat=1502162_msgclk&noticeid="+p),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn="+v+"]").attr("href",i),"1"==d&&r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("target","_blank"),g=r.widget.html(),v+=1;var x={t:"21",pf:1,p:10,p1:101,p2:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),block:"1502162_msgshw",noticeid:p};Q.object.extend(x,V),Q.log.server(x,"http://msg.71.am/b")}}else window.setTimeout(function(){if(n=f.compareTime(t,a,e,d,"0"),"已结束"!=n&&" "!=n){"0"==v?(r.widget.html(h),r.widget.down("[data-widget-activityName]").attr("data-widget-activityName",v)):(r.widget.html(g+h),r.widget.down("[data-widget-activityName="+(v-1)+"]").next().attr("data-widget-activityName",v),"1"==y?r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-bottom=bottom]").css("bottom","-117px"):"2"==y&&r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-bottom=bottom]").css("bottom","-174px")),(Q.browser.IE6||Q.browser.IE7)&&r.widget.removeClass("dn"),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-close]").attr("data-activity-close",v),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-content=content]").html(n),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("data-activity-attentBtn",v),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("data-pb","rseat=1502162_msgclk&noticeid="+p),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn="+v+"]").attr("href",i),"1"==d&&r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("target","_blank"),g=r.widget.html(),v+=1;var o={t:"21",pf:1,p:10,p1:101,p2:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),block:"1502162_msgshw",noticeid:p};Q.object.extend(o,V),Q.log.server(o,"http://msg.71.am/b")}},1e3*60*(w-30))}}r.widget.down("[data-activity-close]")&&r.widget.down("[data-activity-close]").on("click",function(){f.siblingsChangeState(Q.$(this).attr("data-activity-close"))}),r.widget.down("[data-activity-attentBtn]")&&r.widget.down("[data-activity-attentBtn]").on("click",function(){f.siblingsChangeState(Q.$(this).attr("data-activity-attentBtn"))}),c!=u&&(f.timeOutFun(s,l),window.setTimeout(function(){f.timeOutFun(s,l)},18e5))}}),window.setInterval(function(){U.get(V,function(o){var s=[];if("A00000"==o.code){var l=o.data.danmakuMessages;if(o.data.danmakuMessages.length>0){for(var m=0,U=o.data.danmakuMessages.length;U>m;m++)s[m]=o.data.danmakuMessages[m].notice_start_time;f.exchangeTime(s);for(var v=0,y=0;y<s.length;y++)for(var b=0;b<o.data.danmakuMessages.length;b++)if(s[y]==o.data.danmakuMessages[b].notice_start_time){e=o.data.danmakuMessages[b].details,t=o.data.danmakuMessages[b].notice_start_time,a=o.data.danmakuMessages[b].notice_end_time,i=o.data.danmakuMessages[b].correlation_url,d=o.data.danmakuMessages[b].notice_type,c=o.data.danmakuMessages[b].correlation_id,p=o.data.danmakuMessages[b].notice_id,n=f.compareTime(t,a,e,d,"0");var k=1e3*t-(new Date).getTime(),w=Math.floor(k/6e4);if(31>w){if("已结束"!=n&&" "!=n){"0"==v?(r.widget.html(h),r.widget.down("[data-widget-activityName]").attr("data-widget-activityName",v)):(r.widget.html(g+h),r.widget.down("[data-widget-activityName="+(v-1)+"]").next().attr("data-widget-activityName",v),"1"==v?r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-bottom=bottom]").css("bottom","-117px"):"2"==v&&r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-bottom=bottom]").css("bottom","-174px")),(Q.browser.IE6||Q.browser.IE7)&&r.widget.removeClass("dn"),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-close]").attr("data-activity-close",v),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-content=content]").html(n),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("data-activity-attentBtn",v),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("data-pb","rseat=1502162_msgclk&noticeid="+p),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn="+v+"]").attr("href",i),"1"==d&&r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("target","_blank"),g=r.widget.html(),v+=1;var x={t:"21",pf:1,p:10,p1:101,p2:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),block:"1502162_msgshw",noticeid:p};Q.object.extend(x,V),Q.log.server(x,"http://msg.71.am/b")}}else window.setTimeout(function(){if(n=f.compareTime(t,a,e,d,"0"),"已结束"!=n&&" "!=n){"0"==v?(r.widget.html(h),r.widget.down("[data-widget-activityName]").attr("data-widget-activityName",v)):(r.widget.html(g+h),r.widget.down("[data-widget-activityName="+(v-1)+"]").next().attr("data-widget-activityName",v),"1"==y?r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-bottom=bottom]").css("bottom","-117px"):"2"==y&&r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-bottom=bottom]").css("bottom","-174px")),(Q.browser.IE6||Q.browser.IE7)&&r.widget.removeClass("dn"),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-close]").attr("data-activity-close",v),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-content=content]").html(n),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("data-activity-attentBtn",v),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("data-pb","rseat=1502162_msgclk&noticeid="+p),r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn="+v+"]").attr("href",i),"1"==d&&r.widget.down("[data-widget-activityName="+v+"]").down("[data-activity-attentBtn]").attr("target","_blank"),g=r.widget.html(),v+=1;var o={t:"21",pf:1,p:10,p1:101,p2:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),block:"1502162_msgshw",noticeid:p};Q.object.extend(o,V),Q.log.server(o,"http://msg.71.am/b")}},1e3*60*(w-35))}}r.widget.down("[data-activity-close]")&&r.widget.down("[data-activity-close]").on("click",function(){f.siblingsChangeState(Q.$(this).attr("data-activity-close"))}),r.widget.down("[data-activity-attentBtn]")&&r.widget.down("[data-activity-attentBtn]").on("click",function(){f.siblingsChangeState(Q.$(this).attr("data-activity-attentBtn"))}),c!=u&&(f.timeOutFun(s,l),window.setTimeout(function(){f.timeOutFun(s,l)},18e5))}})},18e5)),m){for(var v,y,b,k,w,x,_,L,I=[],W=0,X=m.length;X>W;W++)I[W]=Q.$(m[W]).attr("data-activity-detailStartTime");f.exchangeTime(I);for(var C=0,K=I.length;K>C;C++)for(var T=new Date(Q.$(m[C]).attr("data-activity-detailEndTime").replace(/-/g,"/")).getTime()-(new Date).getTime(),E=(new Date(I[C].replace(/-/g,"/")).getTime()-(new Date).getTime())/6e4,S=0,P=m.length;P>S;S++)Q.$(m[S]).attr("data-activity-detailStartTime")==I[C]&&(v=Q.$(m[S]).attr("data-activity-detailId"),y=Q.$(m[S]).attr("data-activity-detailStartTime"),b=Q.$(m[S]).attr("data-activity-detailEndTime"),k=Q.$(m[S]).attr("data-activity-detailContent"),w=Q.$(m[S]).attr("data-activity-datailHref"),_=Q.$(m[S]).attr("data-activity-detailActivityType"),L=Q.$(m[S]).attr("data-activity-detailActivityVideoId"),x=f.compareTime(new Date(y.replace(/-/g,"/")).getTime(),new Date(b.replace(/-/g,"/")).getTime(),k,_,"1"),(L!=u||"1"==_)&&(11>E&&T>0?l.setActivityNoticeInfo({activityContent:x,linkUrl:w,noticeid:v}):E>10&&window.setTimeout(function(){x=f.compareTime(new Date(y.replace(/-/g,"/")).getTime(),new Date(b.replace(/-/g,"/")).getTime(),k,_,"1"),l.setActivityNoticeInfo({activityContent:x,linkUrl:w,noticeid:v})},1e3*60*(E-11))))}},timeOutFun:function(e,t){var a,n,i,o,r,s,d,c=this;if(t)for(var m=0,h=e.length;h>m;m++){var u=(1e3*e[m]-(new Date).getTime())/6e4;if(11>u)for(var p=0,f=t.length;f>p;p++)t[p].notice_start_time==e[m]&&(a=t[p].notice_id,n=t[p].notice_start_time,i=t[p].notice_end_time,o=t[p].details,r=t[p].correlation_url,d=t[p].notice_type,s=c.compareTime(n,i,o,d,"0"),l.setActivityNoticeInfo({activityContent:s,linkUrl:r,noticeid:a}))}},exchangeTime:function(e){for(var t=0,a=0;a<e.length;a++)for(var n=0;n<e.length-a;n++)parseInt(e[n],10)>parseInt(e[n+1],10)&&(t=e[n+1],e[n+1]=e[n],e[n]=t)},siblingsChangeState:function(e){"0"==e&&(r.widget.down("[data-widget-activityName=2]")?(r.widget.down("[data-widget-activityName=1]").down("[data-activity-bottom=bottom]").css("bottom","-60px"),r.widget.down("[data-widget-activityName=2]").down("[data-activity-bottom=bottom]").css("bottom","-117px")):r.widget.down("[data-widget-activityName=1]")&&r.widget.down("[data-widget-activityName=1]").down("[data-activity-bottom=bottom]").css("bottom","-60px")),"1"==e&&r.widget.down("[data-widget-activityName=2]")&&("-174px"==r.widget.down("[data-widget-activityName=2]").down("[data-activity-bottom=bottom]").css("bottom")?r.widget.down("[data-widget-activityName=2]").down("[data-activity-bottom=bottom]").css("bottom","-117px"):r.widget.down("[data-widget-activityName=2]").down("[data-activity-bottom=bottom]").css("bottom","-60px")),r.widget.down("[data-widget-activityName="+e+"]").hide()},compareTime:function(e,t,a,n,i){var o,r,s,l=new Date;"0"==i?(r=1e3*e,s=1e3*t):"1"==i&&(r=e,s=t);var d=r-l.getTime();Math.floor(d/864e5),Math.floor(d/36e5);var c=Math.floor(d/6e4),m=new Date(r).getHours(),h=new Date(r).getMinutes(),u=new Date(s).getHours(),p=new Date(s).getMinutes();10>m&&(m="0"+m),10>h&&(h="0"+h),10>u&&(u="0"+u),10>p&&(p="0"+p);var f=m+":"+h+"-"+u+":"+p+"，",g=m+":"+h;return"0"==n?c>0&&40>c?o=f+a+" "+c+"分钟后开始":l.getTime()>new Date(r).getTime()&&l.getTime()<new Date(s).getTime()?o=f+a+" "+"正在进行中...":l.getTime()>new Date(s).getTime()&&(o="已结束"):"1"==n&&(c>0&&40>c?o=g+a+" "+c+"分钟后开始":l.getTime()>new Date(r).getTime()&&l.getTime()<new Date(s).getTime()?o=a+" "+"正在进行中...":l.getTime()>new Date(s).getTime()&&(o="已结束")),o}}),a.exports=d});
define("units/flashPlayerControl.js",["../components/units/pageJob","../components/action/checkDoms"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n,o,r,s,l,d="flashPlayerControl";i.create(d,{getDependentDoms:function(){n=Q.$("#jujiPlayListShow"),o=Q.$("#jujiPlayListHide")},check:function(){return n&&o?!0:!1},init:function(){var e=this;s=Q.$("#playListContainer"),l=Q.$("#jujiPlayWrap"),r=Q.$("#jujiPlayListRight");var t=Q.$("#goosBtn");t&&t.on("click",function(t){t=Q.event.get(t.event),t.preventDefault(),o.hasClass("dn")&&e.playListShow(),Q.event.customEvent.fire({type:"showShopView"})});var a="listcontrol-pack-hover";n.on("mouseenter",function(){n.addClass(a)}),n.on("mouseleave",function(){n.removeClass(a)}),n.delegate("showPlayList",function(t){t=Q.event.get(t.event),t.preventDefault(),e.playListShow(),e.changePlayerFloater(1),e.resetScrollArea()}),o.delegate("hidePlayList",function(t){t=Q.event.get(t.event),t.preventDefault(),Q.event.customEvent.fire({type:"showShopView",data:1}),e.playListHide(),e.changePlayerFloater(0)}),Q.event.customEvent.on("swf_expandAd",function(){o.hasClass("dn")&&e.playListShow()}),Q.event.customEvent.on("isPlayListShow",function(t){t=t.data||{},t.isshow?e.playListShow():e.playListHide()})},playListShow:function(){n.addClass("dn"),o.removeClass("dn"),r.removeClass("dn"),l.removeClass("play-rc-pack"),s&&s.removeClass("container-dianshiju")},playListHide:function(){n.removeClass("dn"),o.addClass("dn"),r.addClass("dn"),l.addClass("play-rc-pack"),s&&s.addClass("container-dianshiju")},changePlayerFloater:function(e){Q.event.customEvent.fire({type:"vipChargeFloater-changesize",data:{small:e}})},resetScrollArea:function(){Q.event.customEvent.fire({type:"resetScrollArea",data:{}})}}),a.exports=d});
define("units/changeTrywatchTitle.js",["../components/units/pageJob","../components/action/checkDoms","../kit/qiyiPlayer","../interfaces/ugcVI"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../kit/qiyiPlayer"),o=n.getPlayer("video"),r="changeTrywatchTitle",s=e("../interfaces/ugcVI");i.create(r,{check:function(){return!0},init:function(){function e(){var e=new s({tvid:t});e.request({callback:"ugcvi"+t},function(e){if(e=e.data||{},n.length&&r.length){var t=e.description||"",i=e[n.attr("data-titlekey")||"subtitle"],o="";if(e.series){var s=e.order;s&&(o+="第"+s+"集"),i&&(o+=" "+i),n.html(o),t.length>150&&(t=t.substring(0,148)+"..."),r.html(t)}}"1"!==a||Q.object.isEmpty(e)||Q.event.customEvent.fire({type:"vip-videoChanged",data:e})})}var t,a,i=Q.PageInfo&&Q.PageInfo.playPageInfo||{},n=Q("#play_topright_title"),r=Q("#play_topright_desc"),l=i.tvId+"";Q.event.customEvent.on("vipTryWatch",function(i){t=i.data.tvid+"",a=i.data.changeTag||"1",o._tvid=t;var n=i.data.vid;if(n&&(o._videoid=n),l!==t){l=t;var r=Q(".J_play-underFrame");r.length>0&&r.remove();var s=Q("#flashArea_paypop");s.length>0&&s.parent().css("visibility","hidden"),e()}})}}),a.exports=r});
define("units/checkJujiVipWrap.js",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../kit/userInfo"),o="checkJujiVipWrap",r=[],s=[],l="0";i.create(o,{getDependentDoms:function(){r=Q('*[data-widget-trywatch="trywatch"]')},check:function(){return r.length?!0:!1},init:function(){var e=this,t=r.attr("data-isbossmixer")||"0";"1"===t&&(s=Q.$("#goosBtn"),e.checkPayWrap(),Q.event.customEvent.on("login",e.checkPayWrap.bind(e)),Q.event.customEvent.on("logout",e.checkPayWrap.bind(e)))},checkPayWrap:function(){var e=this;s.length&&(l=s.attr("data-goods-display")||"0"),n.isLogin()?n.getVipType(function(t){"1"===t||"4"===t?Q.event.customEvent.fire({type:"showTryWatch",data:!1}):(Q.event.customEvent.fire({type:"showTryWatch",data:!0}),e.mergeVipGoods())}):(Q.event.customEvent.fire({type:"showTryWatch",data:!0}),e.mergeVipGoods())},mergeVipGoods:function(){"1"===l&&r.css("display","none")}}),a.exports=o});
define("units/videoShopGuide.js",["../components/units/pageJob","../interfaces/adVideoInterface","../kit/artTemplate","../kit/qiyiPlayer","../action/scrollV2"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../interfaces/adVideoInterface");e("../kit/artTemplate");var o,r,s,l,d,c,u,m,p,h=e("../kit/qiyiPlayer").getPlayer("video"),f=e("../action/scrollV2"),g="videoShopGuide",v=["video","album","channel","common"],y="205524412",b=1;l=Q.PageInfo&&Q.PageInfo.playPageInfo||{},i.create(g,{getDependentDoms:function(){o=Q.$("#scrollContent-vipbuy"),r=Q.$("#videoShopGuideTpl"),s=Q.$("#videoShopGuideWrap")},check:function(){return o&&r&&s?!0:!1},init:function(){var e=this;m=f.getScroll("vipbuy"),d=s.attr("data-shop-albumid")||l.albumId+"",c=l.tvId+"",u=l.cid+"",Q.event.customEvent.on("initGoodsGuide",function(){e.initGuideWrap()}),Q.event.customEvent.on("showGuidePingBack",function(){b&&p&&(e.showPingBack(21,"507211_2"),b=0)}),h.on("videoChanged",function(e){b=1,c=e.data.tvid+""})},initGuideWrap:function(){var e=this;new n({qid:y}).send({dataType:"jsonp"},function(t){e.renderData(t)})},checkData:function(e,t,a,i){for(var n,o=this,r={},s=0,l=0;t>l;l++)if(n=e.items[l],""!==n.kvs.special_id&&""!==i&&(s=o.checkId(n.kvs.special_id,i)),n.kvs.special_type===a&&(s||"common"===a)){r.vurl=n.pageUrl,r.imgurl=n.imageUrl,r.name=n.name,r.btext=n.kvs.button_text;break}return r},renderData:function(e){var t,a=this,i=e.items.length;p=0;var n={0:c,1:d,2:u,3:""};if(i>0)for(var l=0;4>l;l++)if(t=a.checkData(e,i,v[l],n[l]),t.vurl&&t.name&&t.btext){p=1,t.titlename=t.name,t.name.length>19&&(t.name=t.name.substring(0,19));break}if(1===p){var h=Q.plugins.Mustache.render(r.value(),t);s.html(h),s.css("display","block"),o.insertBefore(s,o.children()[0]),m&&m.reset()}else s.css("display","none")},checkId:function(e,t){for(var a=e.split(","),i=0,n=0;n<a.length;n++)if(a[n]===t){i=1;break}return i},showPingBack:function(e,t){var a=JSON.parse(Q.cookie.get("P00002")),i="";a&&(i=a.uid);var n={t:e,rn:Math.random(),p:10,pf:1,p1:101,bstp:0,pu:i,jsuid:Q.cookie.get("QC006")||"",ve:Q.getVideoEventID()||"",ce:"",u:Q.cookie.get("QC005")||"",block:t};Q.log.server(n,"http://msg.71.am/b")}}),a.exports=g});
define("units/videoScore.js",["../components/units/pageJob","../components/action/checkDoms","../action/videoScoreAction"],function(e,t,a){var i=e("../components/units/pageJob");e("../components/action/checkDoms");var n,o=e("../action/videoScoreAction"),r=null,s="videoScore";i.create(s,{getDependentDoms:function(){return r={wrap:Q.$("#data-singleScore")}},check:function(e){return!!e},init:function(){},exec:function(){var e=this;e.initScore(r)},initScore:function(e){var t=e.wrap,a={wrap:t,cont:t.down("[data-watchScore-elem=content]"),score:t.down("[data-watchScore-elem=score]"),tips:t.down("[data-watchScore-elem=scoretip]"),scoreBg:t.down("[data-watchScore-elem=bg]"),qipu_id:t.attr("tvid")};n=new o(a),n.init()}}),a.exports=s});
define("action/videoScoreAction.js",["../kit/qiyiPlayer","../kit/userInfo","../kit/parentByProp","../interfaces/perMovIndexInterface","../action/qipaLogin"],function(e,t,a){var i,n,o,r=e("../kit/qiyiPlayer").getPlayer("video"),s=e("../kit/userInfo"),l=e("../kit/parentByProp"),d=e("../interfaces/perMovIndexInterface"),c=e("../action/qipaLogin"),u={},p={appid:Q.browser.iPad?48:21};i=Q.PageInfo&&Q.PageInfo.playPageInfo||{},n=i.cid,o=i.albumId;var m=["score-inner-one","score-inner-two","score-inner-three","score-inner-four","score-inner-five"],h=["不想看","超烂","差劲","凑合","不错","完美"];a.exports=Q.Class("VideoScoreAction",{construct:function(e){e=e||{},this.wrap=e.wrap,this.cont=e.cont,this.score=e.score,this.tips=e.tips,this.scoreBg=e.scoreBg;var t=this.wrap.attr("data-type");this.vInfo={score:-1,qipu_id:e.qipu_id,cid:n,type:t},this.isSendLogin=!1,this.flashScore=null},methods:{init:function(){var e=this;e.bindEvent(),e.getInitScore()},bindEvent:function(){var e=this,t=function(){e.wrap.show(),e.wrap.isInScreen()?(e.getInitScore(),Q.$(window).un("scroll",t)):e.wrap.hide()};if(Q.$(window).on("scroll",t),Q.$(window).delegate("hideloginiframe",function(){e.flashScore=null}),Q.event.customEvent.on("login",function(){return e.flashScore?(e.flashSetScore(e.flashScore),void 0):e.isSendLogin?(e.isSendLogin=!1,void 0):(e.getInitScore(),void 0)}),Q.event.customEvent.on("logout",function(){e.getInitScore()}),Q.event.customEvent.on("accountSwitched",function(){}),r.on("userClickScore",function(t){t=t&&t.data||{},e.flashScore=t,s.isLogin()&&e.flashSetScore(t)}),e.scoreBg.on("click",function(t){t=Q.event.get(t);var a=e.getCurScore(t.pageX,t.pageY);a>=0&&6>a&&(e.vInfo.score=a,s.isLogin()?(e.setScoreAttr({score:a}),e.changeScore(a),e.onScore(a)):(e.pingbackParam(a),c.openLoginWindow({from:""},function(){e.isSendLogin=!0,e.setScoreAttr({score:a}),e.changeScore(a),e.onScore(a)})))}),!Q.browser.iPad){var a=["mouseover","mousemove"];a.forEach(function(t){e.scoreBg.on(t,function(t){t=Q.event.get(t);var a=e.vInfo.score,i=e.getCurScore(t.pageX,t.pageY);i>=0&&6>i&&(a=i),e.changeScore(a)})}),e.scoreBg.on("mouseleave",function(){e.vInfo.score=parseInt(e.cont.attr("score"),10),e.changeScore(e.vInfo.score)})}},flashSetScore:function(e){var t=this;r.getVideoInfo(function(a){a=a.data||{},t.update({score:e.score,qipu_id:a.videoQipuId}),t.flashScore=null})},getInitScore:function(){var e=this;if(s.isLogin()){var t=e.vInfo.qipu_id;e.getScoreData({qipu_id:t})}else e.setEmpty()},setEmpty:function(){var e=this,t=-1;e.vInfo.score=t,e.setScoreAttr({score:t}),e.changeScore(t)},getScoreData:function(e){e=e||{};var t=this,a=e.qipu_id;if(a){var i=u[a];i?(t.update({score:i,qipu_id:a}),t.wrap.show()):t.getScore(a)}},getScore:function(e){var t=this,a=t.vInfo.type,i=Q.cookie.get("P00003")||"",n=Q.cookie.get("P00PRU")||"",o=Q.cookie.get("QC005")||"",r={uid:i,pru:n,qipu_id:e,udid:o,type:a};Q.object.extend(r,p),d.getVideoScore(r,t.getScoreCallback.bind(this))},setScore:function(e){var t=this,a=t.vInfo.qipu_id,i=t.vInfo.type,n=Q.cookie.get("QC005")||"",o=Q.cookie.get("P00001")||"",r=Q.cookie.get("P00007")||"",s={score:e,qipu_id:a,udid:n,authcookie:o,pauthcookie:r,type:i};Q.object.extend(s,p),d.uploadScoreOfVideo(s)},getScoreCallback:function(e){var t=this;if("A00000"===e.code){var a=e.data&&e.data[0],i=a.score;i=i[0],t.update({score:i,qipu_id:t.vInfo.qipu_id}),t.wrap.show()}else t.setEmpty()},update:function(e){e=e||{};var t=this;e.score<-1&&(e.score=-1),e.score>5&&(e.score=5),t.setScoreAttr(e),t.setVideonInfo(e),t.changeScore(e.score)},setScoreAttr:function(e){e=e||{};var t=e.qipu_id,a=e.score,i=e.cid||this.vInfo.cid;a&&(this.wrap.attr("score",a),this.cont.attr("score",a)),t&&this.wrap.attr("tvid",t),i&&this.wrap.attr("cid",i)},setVideonInfo:function(e){e=e||{};var t=this;e.score&&(u[e.qipu_id+""]=e.score,t.vInfo.score=e.score),t.vInfo.qipu_id=e.qipu_id,e.cid&&(t.vInfo.cid=e.cid)},changeScore:function(e){var t=this;m.forEach(function(e){t.score.removeClass(e)}),m[e-1]&&t.score.addClass(m[e-1]),t.tips.html(h[e]||"我来评分")},onScore:function(e){var t=this,a=t.cont;t.vInfo.qipu_id;var i=a.prev();i[0]&&!i.attr("score")&&(i=i.prev()),i[0]&&i.attr("score")&&i.attr("score",e),t.pingbackParam(e),t.setScore(e),this._sendClickPingback({rseat:"609051_vscore"})},getCurScore:function(e,t){var a=this,i=a.scoreBg,n=a.score,o=i.left(),r=19,s=3,l=5,d=n.top(),c=d+n.height();return e>=o&&e<=o+(r*m.length-s)&&t>=d&&c>=t&&(l=Math.floor((e-o)/r)),l+1},pingbackParam:function(e){var t=this,a=3,i=t.cont,n=Q.$("#iwatch-rated-movie"),o=l(i,"data-pingback-srccode","6"),r=i.attr("data-pingback-srccode");n?a=n.attr("data-pingback-srccode"):o?a=6:r&&(a=r);var s,d=l(i,"data-widget-fullcol","fullcol");d&&(s=d.attr("event_id")),t._sendRatePingback(e,s,a)},_sendRatePingback:function(e,t,a){var i=s.getUid()||"NA",o=Q.cookie.get("QC005")||"",r=Q.cookie.get("P00PRU")||"",l=11;Q.browser.iPad&&(l=21),a||(a=3);var d=this.vInfo.qipu_id,c=this.vInfo.cid||n||1,u=Q.date.format(new Date,"yyyy-MM-dd HH:mm:ss"),p={type:"user_rating_20141014",usract:3,ppuid:i,uid:o,pru:r,event_id:t,platform:l,taid:d,rate:e,date_time:u,src_code:a,channel_id:c};Q.log.server(p,"http://msg.video.qiyi.com/tmpstats.gif")},_sendClickPingback:function(e){var t={};t.t="20",t.pf=1,t.p=10,t.p1=101,t.u=Q.cookie.get("QC006"),t.pu=s.getUid(),t.jsuid=Q.cookie.get("QC006")||"",t.rn=(new Date).getTime(),t.subtype="1",t.flshuid=Q.cookie.get("QC005"),Q.object.extend(t,e),Q.log.server(t,"http://msg.71.am/b")}}})});
define("interfaces/perMovIndexInterface.js",["../kit/remoteInterface","./config","../interfaces/episodeVideoPlayInfoInterface"],function(e,t,a){var i=e("../kit/remoteInterface"),n=e("./config"),o=e("../interfaces/episodeVideoPlayInfoInterface"),r=Q.Class("PerMovIndexInterface",{construct:function(){this._remoteInterface=new i({uploadSettingOfVideo:{url:n.interfaces.uploadSettingOfVideo},uploadScoreOfVideo:{url:n.interfaces.uploadScoreOfVideo},uploadActionOfVideo:{url:n.interfaces.uploadActionOfVideo},saveUserTag:{url:n.interfaces.saveUserTag},getVideoScore:{url:n.interfaces.getVideoScore},getActionOfVideo:{url:n.interfaces.getActionOfVideo},getAlbumInfo:{url:""}})},methods:{request:function(e,t){var a={ifname:e.ifname,method:e.method||"GET",param:e};e.jsonp?a.dataType="jsonp":a.encodeFn=function(e){return encodeURIComponent(e)},delete e.ifname,delete e.method,delete e.jsonp,this._remoteInterface.send(a,t)},uploadSettingOfVideo:function(e,t){this.request(Q.object.extend({ifname:"uploadSettingOfVideo",jsonp:!0},e),t)},uploadScoreOfVideo:function(e,t){this.request(Q.object.extend({ifname:"uploadScoreOfVideo",jsonp:!0},e),t)},uploadActionOfVideo:function(e,t){this.request(Q.object.extend({ifname:"uploadActionOfVideo",jsonp:!0},e),t)},getActionOfVideo:function(e,t){this.request(Q.object.extend({ifname:"getActionOfVideo",jsonp:!0},e),t)},saveUserTag:function(e,t){this.request(Q.object.extend({ifname:"saveUserTag",jsonp:!0},e),t)},getVideoScore:function(e,t){this.request(Q.object.extend({ifname:"getVideoScore",jsonp:!0},e),t)},getVideoInfo:function(e,t){var a=e.substr(e.length-2);"00"==a?new o({tvid:e,jsonpCbName:"playInfo"+parseInt(100*Math.random(),10)}).send({},t):"01"==a&&(this._remoteInterface._remoteInterfaces.getAlbumInfo.url="http://mixer.video.iqiyi.com/jp/albums/"+e,this.request(Q.object.extend({ifname:"getAlbumInfo",jsonp:!0},{}),function(e){t({code:"A00000",data:e})}))}}});a.exports=new r});
define("units/appleAdInPlay.js",["../components/units/pageJob"],function(e,t,a){var i=e("../components/units/pageJob"),n="appleAdInPlay";i.create(n,{getDependentDoms:function(){return this.doms=[Q.$("#videoBuyContainer"),Q.$("#widget-appdown-random1"),Q.$("#widget-promotionad-con"),Q.$("#widget-randomad-container"),Q.$('[data-advideo-extension="wrap"]'),Q.$("#leftad"),Q.$("#right_ad_1"),Q.$("#1000000000200"),Q.$("#1000000000178")],{}},check:function(){return!0},hide3rdPartyAds:function(){this.doms.forEach(function(e){e&&e.addClass("dn")})},show3rdPartyAds:function(){this.doms.forEach(function(e){e&&e.removeClass("dn")})},exec:function(){var e=this;Q.event.customEvent.on("swf_cupid",function(t){var a=t.data||{};switch(a.action){case"hide3rdPartyAds":e.hide3rdPartyAds();break;case"show3rdPartyAds":e.show3rdPartyAds()}})}}),a.exports=n});
define("units/safe/popVip.js",["../../components/action/checkDoms","../../kit/validate","../../components/units/pageJob","../../units/safe/safeTool","../../interfaces/validateEmailInterface","../../interfaces/mobileRegistInterface","../../interfaces/verifyMobileInterface","../../kit/qiyiPlayer","../../kit/findParent","../../components/action/floater","../../components/view/floaterCustomView","../../action/underframe"],function(e,t,a){var i=e("../../components/action/checkDoms"),n=e("../../kit/validate"),o=e("../../components/units/pageJob"),r=e("../../units/safe/safeTool");e("../../interfaces/validateEmailInterface");var s=new(e("../../interfaces/mobileRegistInterface")),l=e("../../interfaces/verifyMobileInterface"),d=e("../../kit/qiyiPlayer"),c=e("../../kit/findParent");Q.browser.iPad?"touchstart":"click";var u=null,m=e("../../components/action/floater"),p=e("../../components/view/floaterCustomView"),h=e("../../action/underframe"),f=null,g={};new r;var v="popVip";o.create(v,{getDependentDoms:function(){g.check=!0},check:function(){return i(g),!0},init:function(){g=null,this.bindEvent()},bindEvent:function(){var e=this;e.getCodeEvent(),e.submitFormEvent(),e.closePop(),e.ikown()},getCodeEvent:function(){var e=this;Q.$(document).delegate("d-get-code",function(t){Q.event.get(t).preventDefault(),e._setDom();var a=t.target,i=Q.$(a).hasClass("disabled"),n=3;if(i)return!1;var o=e.getPhoneNum();if(!o)return!1;"html"===g.phoneNum.attr("type")&&(n=7);var r={requestType:n,serviceId:2,cellphoneNumber:o,authcookie:Q.cookie.get("P00001")};s.sendCode(r,function(t){if("A00000"===t.code){g.warnInfo.html("");var i='<i id="J_time-num">29</i>秒后重新发送';Q.$(a).addClass("disabled"),Q.$(a).html(i),g.numInfoElem=Q.$("#J_time-num"),e._EcountDown()}else g.warnInfo.html(t.msg)})})},getPhoneNum:function(){var e=null,t=g.phoneNum.attr("type");if("html"===t)e=g.phoneNum.attr("data-phone-num");else if("text"===t){if(e=g.phoneNum.value(),!n.empty(e))return g.warnInfo.html("手机号不能为空"),!1;if(!n.mobile(e))return g.warnInfo.html("手机号格式错误"),!1}return e},submitFormEvent:function(){var e=this;Q.$(document).delegate("d-btn-submit",function(t){Q.event.get(t).preventDefault(),e._setDom();var a=g.inpPw.value(),i=g.inpCode.value(),n=e.getPhoneNum(),o=e.verifyForm(a,n,i);if(o){var r={agenttype:1,requestType:7,authCode:i,cellphoneNumber:n,authcookie:Q.cookie.get("P00001"),passwd:a,serviceId:2},s=g.phoneNum.attr("type");"html"===s?(new l).checkPwAndCaptcha(r,function(t){"A00000"===t.code?(g.warnInfo.html(""),e._showFloater(t.data.html)):g.warnInfo.html(t.msg)}):"text"==s&&(r.requestType=3,(new l).checkMobileAndCaptcha(r,function(t){if("A00000"===t.code){var a=t.data.html;if(!a)return window.location.href=t.data.redirect,!1;g.warnInfo.html(""),e._showFloater(a)}else g.warnInfo.html(t.msg)}))}})},verifyForm:function(e,t,a){return n.empty(e)?n.empty(t)?n.mobile(t)?n.empty(a)?!0:(g.warnInfo.html("验证码不能为空"),!1):(g.warnInfo.html("手机号格式错误"),!1):(g.warnInfo.html("手机号不能为空"),!1):(g.warnInfo.html("密码不能为空"),!1)},closePop:function(){Q.$(document).delegate("d-btn-close",function(e){Q.event.get(e).preventDefault(),e.target;var t=Q.$(".J_pop-vip"),a=c(Q.$(".J_pop-vip"),"div");t.addClass("dn"),Q.$(".J_play-underFrame").addClass("dn"),a.addClass("dn"),d.getPlayer("video").initQiyiVideo()})},ikown:function(){var e=this;Q.$(document).delegate("pop-i-kown",function(t){e._setDom(),Q.event.get(t).preventDefault();var a=t.target,i=Q.$(a).attr("type");if("refresh"===i)window.location.reload();else if("close"===i){var n=Q.$(".J_pop-vip"),o=c(Q.$(".J_pop-vip"),"div");n.addClass("dn"),Q.$(".J_play-underFrame").addClass("dn"),o.addClass("dn"),d.getPlayer("video").initQiyiVideo()}})},_setDom:function(){return g?!1:(g={btnForm:Q.$("#J_btn-submit"),inpPw:Q.$("#J_inp-pw"),phoneNum:Q.$("#J_phone-num"),inpCode:Q.$("#J_inp-code"),btnGetCode:Q.$("#J_get-code"),warnInfo:Q.$("#J_pop-warnInfo")},void 0)},_EcountDown:function(){var e=28,t=null;clearInterval(t),t=setInterval(function(){return g.numInfoElem.html(""),g.numInfoElem.html(e),0===e?(g.btnGetCode.removeClass("disabled").html("重新获取验证码"),clearInterval(t),!1):(e--,void 0)},1e3)},_showFloater:function(e){var t=this;Q.$(".J_pop-vip").addClass("dn");var a=Q.$("[data-player-ismember]").attr("data-player-ismember"),i=Q.$("[data-widget-player=flash]");u||(u=new m({view:new p({zIndex:"2",isResponsive:!0,pos:function(){return{left:i.getPosition().left,top:i.getPosition().top}},boxSize:function(){return{width:i.width(),height:i.height()}}})})),u.show({html:e}),f=new h({elem:u.getFloater(),bg:"#232323",_class:"J_play-underFrame"}),f.show(),t._sendPingback(),"false"===a&&Q.$('[data-delegate="d-btn-close"]')&&Q.$('[data-delegate="d-btn-close"]').removeClass("dn")},_getPingBack:function(e){var t=JSON.parse(Q.cookie.get("P00002")),a=t.uid,i={t:21,rn:Math.random(),p:10,pf:1,p1:101,bstp:0,pu:a,jsuid:Q.cookie.get("QC006")||"",ve:Q.getVideoEventID()||"",ce:"",u:Q.cookie.get("QC005")||"",block:e};Q.log.server(i,"http://msg.71.am/b")},_sendPingback:function(){var e=this,t=Q.$("#J_bindPhone-step1"),a=Q.$("#J_bindPhone-step2"),i=Q.$("#J_bindPhone-step3"),n=Q.$("#J_binded-step1"),o=Q.$("#J_binded-step2");return i?(e._getPingBack("1501068_shw"),!1):(a&&e._getPingBack("1501066_shw"),t?(e._getPingBack("1501063_shw"),!1):o?(e._getPingBack("1501067_shw"),!1):n?(e._getPingBack("1501064_shw"),!1):void 0)}}),a.exports=v});
define("units/safe/safeTool.js",["../../kit/easyEventPlugin"],function(e,t,a){e("../../kit/easyEventPlugin");var i=Q.Class("safeTool",{construct:function(){},methods:{EcountDown:function(e,t){var a=e,i=t,n=null;clearInterval(n),i.timeoutResendElem.removeClass("dn"),i.emailResendSubmitElem.addClass("dn"),n=setInterval(function(){return i.timeoutRElem.html(""),i.timeoutRElem.html(a),0===a?(i.timeoutResendElem.addClass("dn"),i.emailResendSubmitElem.removeClass("dn"),clearInterval(n),i.timeoutRElem.html(a),!1):(a--,void 0)},1e3)}}});a.exports=i});
define("interfaces/validateEmailInterface.js",["../kit/remoteInterface","../config/siteDomain"],function(e,t,a){var i=e("../kit/remoteInterface"),n=e("../config/siteDomain"),o=n.getDomain();a.exports=Q.Class("validateEmailInterface",{construct:function(){this._remoteInterface=new i({verifyEmail:{url:"http://passport."+o+"/apis/secure/send_verify_email.action"},reVerifyEmail:{url:"http://passport."+o+"/apis/secure/resend_verify_email.action"}})},methods:{verifyEmail:function(e,t){this._remoteInterface.send({ifname:"verifyEmail",param:e,method:"get",dataType:"jsonp"},function(a){t&&t(a,e)})},reVerifyEmail:function(e,t){this._remoteInterface.send({ifname:"reVerifyEmail",param:e,method:"get",dataType:"jsonp"},function(a){t&&t(a,e)})}}})});
define("units/alading.js",["../components/units/pageJob","../kit/qiyiPlayer"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../kit/qiyiPlayer"),o="alading",r="http://api.open.baidu.com/pae/video/localset",s="bvfm",l="videolocal";i.create(o,{check:function(){return!0},init:function(){function e(){var e=Q.url.queryToJson(window.location.search);return e[s]&&e[s]===l?!0:!1}function t(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}function a(e){var a,i=!1,n=document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script"),s=e.pd,l=e.aid,d=e.showChannelId;if(2===d||4===d){if(!l||!s)return;l="http://www.iqiyi.com/"+l,a=r+"?ep_num="+t(s)+"&work_id="+t(l),o.src=a,o.onload=o.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,o.onload=o.onreadystatechange=null,n&&o.parentNode&&n.removeChild(o))},n.insertBefore(o,n.firstChild)}}if(e()){var i=n.getPlayer("video");i.getVideoInfo(a),i.on("videoChanged",function(){i.getVideoInfo(a)})}}}),a.exports=o});
define("units/paopaoLoad.js",["../components/units/pageJob","../components/action/checkDoms","../action/paopao/paopaoTip","../kit/paopao/paopaoList","../kit/qiyiPlayer","../kit/paopao/paoControl","../action/tab"],function(e,t,a){var i=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),o=e("../action/paopao/paopaoTip"),r=e("../kit/paopao/paopaoList"),s=e("../kit/qiyiPlayer"),l=e("../kit/paopao/paoControl"),d=s.getPlayer("video"),c=e("../action/tab"),u="paopaoLoad";new Q.ic.InfoCenter({moduleName:"paopaoLoad"});var p,m,h,f,g,v=Q.event.customEvent,b="";i.create(u,{getDependentDoms:function(){return p={paopaoBtn:Q.$("[data-paopao-ele=titleBtn]"),paopaoBody:Q.$("[data-paopao-ele=contentBody]")}},check:function(){return n(p),!0},init:function(){var e=this,t=p.paopaoBtn,a=p.paopaoBody;if(t&&a){e.getTab();var i=Q(a).find('[data-scrollcontent="paopaolist"]');Q.loadTemplate("paopao/paopaoQuan",function(e){i.html(e)},{jobFile:"jobs/pc/playDramaVideo",projectName:"qiyiV2",projectDebug:!1,templateVersion:"20161013162223"}),Q(t).one("click",e.loadFile),e.bindEvent(),b=r.getWallId(),!b||Q.browser.IE6?e.hidePaopao():(o.init(),l.update())}},bindEvent:function(){var e=this;d.on("videoChanged",function(t){t=t||{},t=t.data||{};var a=t.circle||{},i=t.isDisplayCircle||t.displayCircle;1==i&&2==a.type&&a.id?(b=a.id,l.update()):(e.hidePaopao(),o.setStart(!1))}),v.on("vip-videoChanged",function(t){t=t||{},t=t.data||{};var a=t.circle||{},i=t.isDisplayCircle||t.displayCircle;1==i&&2==a.type&&a.id?(b=a.id,l.update()):(e.hidePaopao(),o.setStart(!1))}),v.on("paoControl_update",function(t){t=t.data||{},t.paopaoWall&&!Q.browser.IE6?(e.showPaopao(),o.setStart(!0),o.restart(),v.fire({type:"pao_videoUpdate",data:{wallId:b}})):(o.setStart(!1),e.hidePaopao())})},loadFile:function(e){e.preventDefault(),i.async("paopao/paopaoQuan",function(){})},getTab:function(){m||(m=c.getTab("sourceListTab")||c.getTab("dramaseriesTab")),m&&(g=m.getTabIndex("paopao"),f=m._view._doms.titles,h=m._view._doms.bodies)},hidePaopao:function(){var e=f[g];if(e){Q(e).hide();var t=m._model._data.focus;t===g+1&&m.select(1)}},showPaopao:function(){var e=f[g];e&&Q(e).css("display","")}}),a.exports=u});
define("action/paopao/paopaoTip.js",["../../kit/userInfo","../../kit/paopao/paopaoList","../../kit/paopao/paoHomeInfo","../../interfaces/paopao/paoHomeInter","../../kit/paopao/pubCommonFuncs","../../kit/paopao/paoPingback"],function(e,t,a){var i=e("../../kit/userInfo"),n=e("../../kit/paopao/paopaoList"),o=e("../../kit/paopao/paoHomeInfo"),r=e("../../interfaces/paopao/paoHomeInter"),s=e("../../kit/paopao/pubCommonFuncs"),l=e("../../kit/paopao/paoPingback"),d=Q.event.customEvent,c="TQC021",u=Q.Class("PaopaoTip",{construct:function(){this.doms={btn:Q("[data-paopao-ele=titleBtn]"),redIcon:Q("[data-paopao-ele=redIcon]"),floater:Q("[data-paopao-ele=tipFloater]"),closeBtn:Q("[data-paopao-ele=closeTip]")},this.canStart=!1},methods:{init:function(){var e=this;e.doms.btn[0]&&e._bindEvent()},_bindEvent:function(){var e=this;d.on("paoHome_update",function(t){var a=t.data.type;("init"==a||"videoUpdate"==a||"videoChange"==a)&&e.restart()}),e.doms.btn.on("click",function(t){t.preventDefault(),e._setIconStyle(!1),e.doms.floater.addClass("dn"),l.send({t:"505231_1"})}),e.doms.closeBtn.on("click",function(t){t.preventDefault(),e.doms.floater.addClass("dn")})},setStart:function(e){this.canStart=e},showTip:function(){var e=this,t=Q.cookie.get(c),a={count:1};t?(t=JSON.parse(t),t.count<3&&(e._showfloater(),a.count=t.count+1,e._setState(JSON.stringify(a)))):(e._showfloater(),e._setState(JSON.stringify(a)))},showRedIcon:function(){var e=this;if(!o.getUpdateReady())return!1;if(1==o.getCollected()){var t=n.getWallId(),a={uid:i.getUid(),circleids:t},l=new r;l.getNewMegCount(a,function(a){"A00000"==a.code&&a.data&&parseInt(a.data[t+"_1"],10)>0?(e._setIconStyle(!0),n.setNewMsg(!0),s.newMsgTip(!0)):(e._setIconStyle(!1),n.setNewMsg(!1),s.newMsgTip(!1))})}else e.showTip()},restart:function(){var e=this,t=n.getWallId();t&&e.canStart&&(i.isLogin()?e.showRedIcon():e.showTip())},_setIconStyle:function(e){var t=this;e?t.doms.redIcon.removeClass("dn"):t.doms.redIcon.addClass("dn")},_showfloater:function(){var e=this;Q.browser.IE7||(e.doms.floater.removeClass("dn"),setTimeout(function(){e.doms.floater.addClass("dn")},15e3))},_setState:function(e){Q.cookie.set(c,e,{expires:864e5,path:"/",domain:"iqiyi.com"})}}}),p=new u;a.exports=p});
define("kit/paopao/paopaoList.js",["../remoteInterface","../../config/siteDomain","../userInfo","../qiyiPlayer"],function(e,t,a){var i=new Q.ic.InfoCenter({moduleName:"kit/paopao/paopaoList"}),n=Q.event.customEvent,o=e("../remoteInterface"),r=e("../../config/siteDomain"),s=r.getDomain(),l=e("../userInfo"),d=[],c="TQC022",u="8ffffbc44F3tKBShRo5tC9Bm1J5k01EeIqm1jnhIKXLdVMRB2m11Ctom4",p="pc_web",m=Q.PageInfo||{},h=m.playPageInfo||{},f=e("../qiyiPlayer"),g=f.getPlayer("video"),v=Q.Class("PaopaoListInfo",{properties:{atoken:u,device_id:p},construct:function(){this._remoteInterface=new o({url:"http://paopao."+s+"/apis/e/paopao/atoken.action"}),this.wallId=h.wallId||"",this.tvid=h.tvid||h.tvId,this.albumid=h.albumId||"",this.categoryid=h.cid||"",this.newMsg=!1},methods:{init:function(){this.bindEvent()},bindEvent:function(){var e=this;g.on("videoChanged",function(t){t=t||{},t=t.data||{};var a=t.circle||{};e.tvid=t.tvid||t.tvId||"",e.wallId=a.id||"",e.albumid=t.aid||t.albumId||""}),n.on("vip-videoChanged",function(t){t=t||{},t=t.data||{};var a=t.circle||{};e.tvid=t.tvid||t.tvId||"",e.wallId=a.id||"",e.albumid=t.aid||t.albumId||""})},updateFromInterface:function(e){var t=this,a=l.getAuthCookies(),o={authcookie:a,device_id:Q.crypto.md5(a),agenttype:"118"};d&&d.length?d.push({cb:e}):(d.push({cb:e}),this._remoteInterface.send({dataType:"jsonp",param:o,method:"GET"},function(e){for("A00000"==e.code&&e.data?(i.log("调用paopao-list.action信息接口成功。"),t._setCookieInfo({au:a,ak:e.data})):(i.warn("调用paopao-list.action信息接口失败。"),t._setAnonymous());d&&d.length>0;)try{var o=d.shift();o.cb&&o.cb(t._getCookieInfo().ak)}catch(r){i.log(r)}n.fire({type:"pao_atokenUpdate"})}))},_setAnonymous:function(){this._setCookieInfo({au:"",ak:u})},_setCookieInfo:function(e){e=JSON.stringify(e),Q.cookie.set(c,e,{expires:864e5,path:"/",domain:"iqiyi.com"})},_getCookieInfo:function(){var e={au:"",ak:u},t=Q.cookie.get(c);if(!t)return this._setAnonymous(),e;try{return t=JSON.parse(t)}catch(a){return this._setAnonymous(),e}},_getAtoken:function(e){var t=this._getCookieInfo(),a=l.getAuthCookies();a&&t.au!==a?this.updateFromInterface(e):e(t.ak)},_getDevice:function(){return l.isLogin()?Q.crypto.md5(l.getAuthCookies()):p},_getAuthCookie:function(){return l.getAuthCookies()||""},_getWallId:function(){return this.wallId},_getTvid:function(){return this.tvid},_getAlbumId:function(){return this.albumid},_getCategoryId:function(){return this.categoryid},_setNewMsg:function(e){this.newMsg=e},_getNewMsg:function(){var e=this.newMsg;return this.newMsg=!1,e}}}),b=new v;b.init(),a.exports={getAtoken:function(e){return b._getAtoken(e)},getAuthCookie:function(){return b._getAuthCookie()},getDevice:function(){return b._getDevice()},getWallId:function(){return b._getWallId()},getTvid:function(){return b._getTvid()},getAlbumId:function(){return b._getAlbumId()},getCategoryId:function(){return b._getCategoryId()},getNewMsg:function(){return b._getNewMsg()},setNewMsg:function(e){b._setNewMsg(e)}}});
define("kit/paopao/paoHomeInfo.js",["../../interfaces/paopao/paoHomeInter","./paopaoList"],function(e,t,a){var i=Q.PageInfo||{};i.playPageInfo||{};var n=e("../../interfaces/paopao/paoHomeInter"),o=Q.event.customEvent,r=e("./paopaoList"),s=r.getWallId(),l=Q.Class("PaoHomeInfo",{construct:function(){this.icon="",this.name="",this.memberCount=0,this.collected=0,this.feedCount=0,this.updateReady=!1},methods:{init:function(){s&&this.updateHome("init"),this.bindEvent()},bindEvent:function(){var e=this;o.on("login",function(){e.updateHome("login")}),o.on("logout",function(){e.updateHome("out")}),o.on("paopao-feedPub",function(){e.updateHome("feedCount",1)}),o.on("paopao-feedDelete",function(){e.updateHome("feedCount",-1)}),o.on("pao_videoUpdate",function(t){t=t.data||{},t.wallId!=s?(s=t.wallId,e.updateHome("videoUpdate")):e.fireEvent("videoChange")})},updateHome:function(e,t){var a=this;if(a.updateReady=!1,"out"===e)a.collected=0,a.fireEvent("out");else if("join"===e)a.collected=1,a.memberCount+=1,a.fireEvent("join");else if("quit"===e)a.collected=0,a.memberCount-=1,a.fireEvent("quit");else if("feedCount"===e)a.feedCount=a.feedCount+t,a.fireEvent("feedCount");else{var i=new n;i.sendHome(s,function(t){"A00000"==t.code&&t.data?(a.setHomeInfo(t.data),a.fireEvent(e)):a.collected=0})}},fireEvent:function(e){var t=this;t.updateReady=!0,o.fire({type:"paoHome_update",data:{type:e}})},getUpdateReady:function(){return this.updateReady},getCollected:function(){return this.collected},getMemberCount:function(e){return e?this.memberCount:this.format(this.memberCount)},getFeedCount:function(e){return e?this.feedCount:this.format(this.feedCount)},setHomeInfo:function(e){this.icon=e.icon,this.name=e.name,this.memberCount=e.memberCount,this.collected=e.collected,this.feedCount=e.feedCount},getHomeInfo:function(){return{icon:this.icon,name:this.name,memberCount:this.format(this.memberCount),collected:this.collected,feedCount:this.format(this.feedCount)}},format:function(e){var t;return 1e4>e?e:(t=e/1e4,t=t.toFixed(1),t+"万")}}}),d=new l;d.init(),a.exports={getUpdateReady:function(){return d.getUpdateReady()},getCollected:function(){return d.getCollected()},getMemberCount:function(e){return d.getMemberCount(e)},getFeedCount:function(){return d.getFeedCount()},getHomeInfo:function(){return d.getHomeInfo()},setCollected:function(e){var t=1==e?"join":"quit";d.updateHome(t)}}});
define("interfaces/paopao/paoHomeInter.js",["../../kit/remoteInterface","../../config/siteDomain","../../kit/paopao/paopaoList"],function(e,t,a){var i=e("../../kit/remoteInterface"),n=e("../../config/siteDomain"),o=n.getDomain(),r=e("../../kit/paopao/paopaoList");a.exports=Q.Class("PaopaoHomeInter",{construct:function(){this._remoteInterface=new i({sendHome:{url:"http://paopao."+o+"/apis/e/starwall/home.action"},sendCollect:{url:"http://paopao."+o+"/apis/e/starwall/collect.action"},getNewMegCount:{url:"http://api.t."+o+"/feed/get_unread_cnt"},readIncrease:{url:"http://api.t."+o+"/feed/read_inc"}})},methods:{sendHome:function(e,t){var a=this,i={authcookie:r.getAuthCookie(),device_id:r.getDevice(),agenttype:"118",wallId:e||r.getWallId(),version:1,source:2};r.getAtoken(function(e){i.atoken=e,a._remoteInterface.send({dataType:"jsonp",ifname:"sendHome",param:i,method:"GET"},function(e){t&&t(e)})})},sendCollect:function(e,t){var a=this;e=e||{},e.authcookie=Q.cookie.get("P00001")||"",e.device_id=r.getDevice(),e.agenttype="118",e.source=2,r.getAtoken(function(i){e.atoken=i,a._remoteInterface.send({dataType:"jsonp",ifname:"sendCollect",param:e,method:"GET"},function(e){t&&t(e)})})},getNewMegCount:function(e,t){var a=this;e=e||{},e.authcookie=Q.cookie.get("P00001")||"",e.device_id=r.getDevice(),e.agenttype="118",e.feedTypes="[[1]]",r.getAtoken(function(i){e.atoken=i,a._remoteInterface.send({dataType:"jsonp",ifname:"getNewMegCount",param:e,method:"GET"},function(e){t&&t(e)})})},readIncrease:function(e,t){var a=this;a._remoteInterface.send({dataType:"jsonp",ifname:"readIncrease",param:e,method:"GET"},function(e){t&&t(e)})}}})});
define("kit/paopao/pubCommonFuncs.js",["../userInfo","../../action/qipaLogin","../../interfaces/paopao/paoHomeInter"],function(e,t,a){var i=e("../userInfo"),n=e("../../action/qipaLogin"),o=e("../../interfaces/paopao/paoHomeInter");a.exports={changeDomStateByInput:function(e,t,a){e&&t&&a&&(/msie/i.test(navigator.userAgent)?(e[0].attachEvent("onpropertychange",function(){t(a)}),e[0].attachEvent("onkeyup",function(){t(a)})):e.on("input",function(){t(a)}),e.on("keydown",function(){t(a)}),e.on("keyup",function(){t(a)}))},loginTo:function(e){i.isLogin()?e&&e():n.openLoginWindow({from:"paopao"},function(){e&&e()})},feedHandleMsg:function(e,t,a){var i=Q('[data-paopao-ele="feedMsg"]');t=t||" 网络不给力，请检查后重试~ ",a=a||2e3,"normal"===e?i.find('[data-paopao-ele="tip1"]').html(t).end().removeClass("dn send-succeed send-failed"):"success"===e?i.find('[data-paopao-ele="tip2"]').html(t).end().removeClass("dn send-failed").addClass("send-succeed"):"fail"===e?i.find('[data-paopao-ele="tip3"]').html(t).end().removeClass("dn send-succeed").addClass("send-failed"):i.addClass("dn"),e&&setTimeout(function(){i.addClass("dn")},a)},doDescription:function(e){var t=18,a=5;if(e.description){var i=e.description.length,n="";i/t>a&&(n=e.description.substring(0,t*a-1)+"...",e.j_desSummary=n)}},readIncrease:function(e,t){var a=new o;a.readIncrease({feedId:e,inc:t||1})},newMsgTip:function(e){var t=Q('[data-paopao-ele="newTrend"]');e?(t.removeClass("dn"),setTimeout(function(){t.addClass("dn")},1e4)):t.addClass("dn")}}});
define("kit/paopao/paoPingback.js",["../userInfo","./paopaoList"],function(e,t){var a=e("../userInfo"),i=e("./paopaoList");t.send=function(e,t){var n="http://msg.71.am/pop",o={p1:"1_10_101",u:Q.cookie.get("QC006"),pu:a.getUid(),mkey:"",v:"",popv:"",startp:2};o.wallid=i.getWallId(),o.wallnm=Q("[data-paopao-wallName]").attr("data-paopao-wallName"),Q.object.extend(o,e),Q.log.server(o,n)}});
define("kit/paopao/paoControl.js",["./paopaoList","../remoteInterface","../../config/siteDomain.js"],function(e,t,a){var i=e("./paopaoList"),n=e("../remoteInterface"),o=e("../../config/siteDomain.js").isPPS(),r=Q.event.customEvent,s=Q.Class("PaoControl",{construct:function(){this._remoteInterface=new n({getConfigs:{url:"http://control.i.iqiyi.com/control/content_config"}}),this.configs={inputBoxEnable:!0,fakeWriteEnable:!0,paopaoWall:!0}},methods:{updateFromInter:function(e){var t=this,a={business:"paopao_wall",qypid:o?"01010011020000000000":"01010011010000000000",tvid:i.getTvid(),albumid:i.getAlbumId(),categoryid:i.getCategoryId(),wallId:i.getWallId(),is_iqiyi:!0};this._remoteInterface.send({dataType:"jsonp",param:a,ifname:"getConfigs"},function(a){"A00000"===a.code&&t._setConfigs(a.data),r.fire({type:"paoControl_update",data:t._getConfigs()}),e&&e(t._getConfigs())})},_setConfigs:function(e){this.configs={inputBoxEnable:e.inputBoxEnable,fakeWriteEnable:e.fakeWriteEnable,paopaoWall:e.paopaoWall}},_getConfig:function(e){return e?this.configs[e]:null},_getConfigs:function(e){return e&&e(this.configs),this.configs}}}),l=new s;a.exports={getInputBoxEnable:function(){return l._getConfig("inputBoxEnable")},getFakeWriteEnable:function(){return l._getConfig("fakeWriteEnable")},getPaopaoWall:function(){return l._getConfig("paopaoWall")},getAllConfigs:function(e){return l._getConfigs(e)},update:function(e){return l.updateFromInter(e)},getDefaultConfigs:function(){return{inputBoxEnable:!0,fakeWriteEnable:!0,paopaoWall:!0}}}});
//# buildBy serverV2-UglifyJS2-FullCache at Fri Oct 14 2016 15:59:56 GMT+0800 (CST) take time: 3906 ms

!function(global){"use strict";var template=function(uri,content){return template[/string|function/.test(typeof content)?"compile":"render"].apply(template,arguments)};var cache=template.cache={};var toString=function(value,type){if(typeof value!=="string"){type=typeof value;if(type==="number"){value+=""}else if(type==="function"){value=toString(value.call(value))}else{value=""}}return value};var escapeMap={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"};var escapeHTML=function(content){return toString(content).replace(/&(?![\w#]+;)|[<>"']/g,function(s){return escapeMap[s]})};var isArray=Array.isArray||function(obj){return{}.toString.call(obj)==="[object Array]"};var each=function(data,callback){if(isArray(data)){for(var i=0,len=data.length;i<len;i++){callback.call(data,data[i],i,data)}}else{for(i in data){callback.call(data,data[i],i)}}};var resolve=function(from,to){var DOUBLE_DOT_RE=/(\/)[^/]+\1\.\.\1/;var dirname=from.replace(/^([^.])/,"./$1").replace(/[^/]+$/,"");var id=dirname+to;id=id.replace(/\/\.\//g,"/");while(id.match(DOUBLE_DOT_RE)){id=id.replace(DOUBLE_DOT_RE,"/")}return id};var helpers=template.helpers={$include:function(uri,data,from){var id=resolve(from,uri);return template.render(id,data)},$string:toString,$escape:escapeHTML,$each:each};var debug=function(e){var message="";for(var name in e){message+="<"+name+">\n"+e[name]+"\n\n"}if(message&&global.console){console.error("Template Error\n\n"+message)}return function(){return"{Template Error}"}};template.render=function(uri,data){var fn=template.get(uri)||debug({id:uri,name:"Render Error",message:"No Template"});return data?fn(data):fn};template.compile=function(uri,fn){var isFunction=typeof fn==="function";var render=cache[uri]=function(data){try{return isFunction?new fn(data,uri)+"":fn}catch(e){return debug(e)()}};render.prototype=helpers;if(isFunction){fn.prototype=helpers}render.toString=function(){return fn+""};return render};template.get=function(id){return cache[id.replace(/^\.\//,"")]};template.helper=function(name,helper){helpers[name]=helper};if(typeof define==="function"){define("templates/scripts/template",[],function(){return template})}else if(typeof exports!=="undefined"){module.exports=template}else{global.template=template}}(this);
define("templates/scripts/pc/loginFloater",["templates/scripts/template"],function(require){return require("../template")("pc/loginFloater",function($data,$id){var $helpers=this,$line=0,$escape=$helpers.$escape,_domain=$data._domain,$out="";try{$out+='  <div data-private-display="block" data-widget-loginbox="loginbox" style="display: block; opacity: 1;" class="usrLogin-pop usrLogin-pop-star"> <div class="usrTxGeneral-box usrTx-box_popup usrTx-login-box" data-loginbox-elem="main"> <div class="userLogin-title"> <h2>登录爱奇艺，悦享品质生活<a class="loginIcon closeBtn" href="javascript:void(0);" j-delegate="hideloginiframe"></a></h2> </div>  <div data-loginbox-elem="table" class="usrTxGeneral-box_v3" style="display: block;"> <div class="mailType-box-login" style="display:none ;" data-loginbox-elem="loginMailSuggest"> <ul class="mailType-list"> <li data-mailsuggest-elem="item" data-index="0">请选择或继续输入...</li> <li data-mailsuggest-elem="item" data-index="1" class="selected">qiyiria@gmail.com</li> </ul> </div>  <div class="logReg-form"> <div data-loginbox-elem="errDom" class="errorArea"><span class="mobile-tips"></span></div> <table class="tabs-regRorm notest-tabs" data-loginbox-elem="loginTable"> <tbody> <tr data-loginbox-elem="emailTr"> <th>账&nbsp;&nbsp;&nbsp;号：</th> <td> <div data-loginbox-elem="emailWrap" class="acountBorder"> <input type="text" placeholder="请输入手机/邮箱" class="in-txt txt230" data-loginbox-elem="emailInput" tabindex="1"> <a title="爱奇艺手机APP扫二维码登录" data-loginbox-elem="switchToQrCodeLogin" class="iqyCode-mini" href="javascript:;" rseat="140711_tdenter_navlgin"></a> </div> </td> </tr> <tr data-loginbox-elem="passwdTr"> <th>密&nbsp;&nbsp;&nbsp;码：</th> <td> <div data-loginbox-elem="passwdWrap" class="acountBorder"> <input type="password" placeholder="请输入密码" data-loginbox-elem="passwdInput" class="in-txt" tabindex="2"> </div> </td> </tr> <tr style="display:none;" data-loginbox-elem="piccodeTr"> <th></th> <td> <div class="acountCode acountBorder acountYzm" data-loginbox-elem="piccodeWrap"> <input placeholder="请输入验证码" class="in-txt" data-loginbox-elem="piccodeInput" tabindex="3" type="text"> <span class="in-xline"></span><span class="yzimg" data-loginbox-elem="piccode"></span> </div> <a class="refreshContent" href="javascript" data-loginbox-elem="refreshPiccodeWrapper"><i class="loginIcon refreshIcon" data-loginbox-elem="refreshPiccode"></i></a> </td> </tr> <tr> <th></th> <td class="pb16"><div data-loginbox-elem="autoLoginWrap" class="itemregLast"> <div class="logAuto"><span data-loginbox-elem="autoLogin" class="selected">记住我</span></div> <div class="logAutoRightCon"> <a href="http://passport.iqiyi.com/pages/secure/password/find_pwd_index.action" target="_blank" j-delegate="hideloginiframe">找回密码</a> <i class="RegNowLine"></i> <a j-delegate="registerscroll" rseat="1411202_zcshw" href="http://passport.iqiyi.com/pages/register/index.action" target="_blank">立即注册</a> </div> </div></td> </tr> <tr> <th></th> <td class="pb0"><div class="login_submitV3"><a data-loginbox-elem="loginBtn" class="submitV3Btn" href="#" rseat="1412242_lgn">登录</a></div></td> </tr> <tr class="cooperation-account"> <th></th> <td class="pb0"> <div class="divide-line-ico"> <a class="J_pop-third-downbtn" href="javascript:void(0)"> 使用其他方式登录 <div class="divide-line-con"> <i class="loginIcon arrowDown"></i> </div> </a> <div class="arrowUpCon dn J_pop-third-box"> <div class="otherBind-big clearfix"> <a j-delegate="authLoginBtn" data-sourceid="2" class="loginIcon sinaweibo" href="http://passport.';$line=75;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=2&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="微博"></a> <a j-delegate="authLoginBtn" data-sourceid="4" class="loginIcon qq" href="http://passport.';$line=76;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=4&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="QQ"></a> <a j-delegate="authLoginBtn" data-sourceid="29" class="loginIcon weixin" href="http://passport.';$line=77;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=29&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="微信" ></a> <a j-delegate="authLoginBtn" data-sourceid="1" class="loginIcon baidu" href="http://passport.';$line=78;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=1&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="百度"></a> <a j-delegate="authLoginBtn" data-sourceid="5" class="loginIcon zhifubao" href="http://passport.';$line=79;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=5&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="支付宝"></a> <a j-delegate="authLoginBtn" data-sourceid="3" class="loginIcon renren" href="http://passport.';$line=80;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=3&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="人人"></a> <a j-delegate="authLoginBtn" data-sourceid="30" class="loginIcon xiaomi" href="http://passport.';$line=81;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=30&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="小米" rseat="1503171_mi"></a> <a j-delegate="authLoginBtn" data-sourceid="31" class="loginIcon jd" href="http://passport.';$line=82;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=31&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="京东"></a> </div> <div class="divide-line-con"> <a href="javascript:void(0)" class="J_pop-third-upbtn"> <i class="loginIcon arrowUp"></i> </a> </div> </div> </div> </td> </tr> </tbody> </table> </div>  </div>   <div class="iqyNav-code" data-widget-qrcodelogin="qrCodeLogin" style="display:none;"> <div class="iqyCode-wrap"> <div class="iqyCode-bd clearfix"> <div class="iqyCode-lt"> <p class="p-txt1">扫描二维码登录</p> <p class="p-txt2">使用爱奇艺手机APP"扫一扫"</p> <p class="p-txt2">用手机账号同步在电脑登录</p> <p class="p-tipPic"> <img width="119" height="108" src="http://www.qiyipic.com/common/fix/site/code-pic-small.png"> </p> </div> <div class="iqyCode-rt"> <p class="return-web"><a class="green" data-qrcodelogin-elem="returnBtn" href="javascript:;">返回&gt;</a></p>  <div style="display:;" class="iqyCode-container" data-qrcodelogin-elem="loadedWrapper"> <p class="iqyCode-pic" data-qrcodelogin-elem="qrcodeImgCon"> <img width="135" height="135" src="http://www.qiyipic.com/common/fix/site/iqyCode-small.jpg" data-qrcodelogin-elem="qrcodeImg"> </p> <p class="updateCode"> <em class="green" data-qrcodelogin-elem="refreshTimerNum">60</em>秒后为您更新二维码 </p> </div>   <div style="display:none" class="codeBorder suc-login-tip" data-qrcodelogin-elem="loginSuccessWrapper"> <span class="suc-txt green">您已成功登录！</span> </div>   <div class="getcodePic-con" data-qrcodelogin-elem="loadingWrapper" style="display:none;"> <div class="codeBorder getcodePic"> <div class="getCode-bd"> <p><img src="http://www.qiyipic.com/common/images/load.gif"></p> <span class="getIngTxt">正在获取...</span> </div> </div> <p class="updateCode"> <em class="green">60</em>秒后为您更新二维码 </p> </div>   <div class="codeBorder getCode-error" style="display:none" data-qrcodelogin-elem="loadFailWrapper"> <i></i> <div class="againGet"> <p>获取二维码失败</p> <p>请<a href="javascript:;" data-qrcodelogin-elem="reloadBtn">点击此处重试</a></p> </div> </div>  </div> </div> </div> </div>  </div> </div>   <div data-private-display="block" data-widget-registbox="registbox" data-from="popup" style="display: none; opacity: 0;" class="usrLogin-pop usrLogin-pop-star"> <div class="usrTxGeneral-box usrTx-box_popup usrTx-login-box mobileLoginBox" data-registbox-elem="main"> <div class="userLogin-title"> <h2>登录爱奇艺，悦享品质生活<a class="loginIcon closeBtn" href="javascript:void(0);" j-delegate="hideloginiframe"></a></h2> </div>  <div data-registbox-elem="registpanel" class="usrTxGeneral-box_v3 box_v3AddCode" style="display: block;"> <div class="logReg-form"> <div data-registbox-elem="errDom" class="errorArea"> </div> <table class="tabs-regRorm notest-tabs" data-registbox-elem="loginTable"> <tbody> <tr data-registbox-elem="emailTr" class="J_account-tr" data-type="phone"> <th class="J_account-title">手&nbsp;&nbsp;&nbsp;机：</th> <td> <div data-registbox-elem="emailWrap" class="acountBorder fl">  <input type="text" placeholder="请输入手机号码" class="in-txt J_account-inp" data-registbox-elem="emailInput" tabindex="1"> </div> </td> </tr> <tr data-registbox-elem="passwdTr"> <th>密&nbsp;&nbsp;&nbsp;码：</th> <td> <div data-registbox-elem="passwdWrap" class="acountBorder fl"> <input type="password" placeholder="8~20位字母、数字或字符，至少包含两种" data-registbox-elem="passwdInput" class="in-txt" tabindex="2"> </div> <div class="mod-passwordStrength dn passwordStrength_level1" data-registbox-elem="pwdstrong"> <div class="passwordStrength_results"> <span class="strengthResult_1">弱</span> <span class="strengthResult_2">中</span> <span class="strengthResult_3">强</span> </div> <div class="passwordStrength"> <div class="passwordStrength_blocks"> <span class="strengthBlock_1"></span><span class="strengthBlock_2"></span><span class="strengthBlock_3"></span> </div> </div> </div> </td> </tr> <tr data-registbox-elem="piccodeTr"> <th class="J_piccode-name">验证码：</th> <td> <div class="acountCode acountBorder acountYzm" data-registbox-elem="piccodeWrap"> <input placeholder="请输入右侧字母" class="in-txt J_code-phoder" data-registbox-elem="piccodeInput" tabindex="3" type="text"> </div> <div class="yzmPicBox fl"> <span class="in-xline"></span> <span class="yzimg J_pic-code" data-registbox-elem="piccode"> <img src="http://passport.iqiyi.com/register/vcode.php?r=0.8545576247216254"> </span> </div>  <a class="refreshContent J_pic-code-btn" href="javascript:void(0)" data-registbox-elem="refreshPiccodeWrapper"> <i class="loginIcon refreshIcon" data-registbox-elem="refreshPiccode"></i> </a>  </td> </tr>  <tr class="J_sms-box" data-registbox-elem="smscodeTr"> <th></th> <td> <div class="acountCode acountBorder f1 J_pic-code-box" data-registbox-elem="smscodeWrap"> <input placeholder="请输入验证码" class="in-txt" data-registbox-elem="smscodeInput" tabindex="4" type="text"> <span class="free-yzm-get" data-registbox-elem="sms"> <a href="" data-registbox-elem="getSms">免费获取短信</a> <span class="getSms_already" data-registbox-elem="timer" style="display:none;"> <span data-registbox-elem="timerNum"></span>秒后重新获得 </span> </span> </div> </td> </tr> <tr> <th></th> <td> <div data-registbox-elem="autoLoginWrap" class="itemregLast"> <div class="logAuto"><span data-registbox-elem="protocol" class="selected">我同意<a href="http://passport.iqiyi.com/register/protocol.php">《用户服务协议》</a></span></div> <div class="logAutoRightCon"><a href="#" j-delegate="loginscroll" rseat="1411201_lgn">立即登录</a></div> </div> </td> </tr> <tr> <th></th> <td class="pb0"> <div class="login_submitV3"><a data-registbox-elem="registBtn" class="submitV3Btn w200" rseat="1411201_rgt" href="javascript:void(0)">注册</a></div> </td> </tr> <tr class="cooperation-account"> <th></th> <td class="pb0"> <div class="divide-line-ico"> <a class="J_pop-third-downbtn" href="javascript:void(0)"> 使用其他方式登录 <div class="divide-line-con"> <i class="loginIcon arrowDown"></i> </div> </a> <div class="arrowUpCon dn J_pop-third-box"> <div class="otherBind-big clearfix"> <a j-delegate="authLoginBtn" data-sourceid="2" class="loginIcon sinaweibo" href="http://passport.';$line=261;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=2&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="微博"></a> <a j-delegate="authLoginBtn" data-sourceid="4" class="loginIcon qq" href="http://passport.';$line=262;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=4&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="QQ"></a> <a j-delegate="authLoginBtn" data-sourceid="29" class="loginIcon weixin" href="http://passport.';$line=263;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=29&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="微信" ></a> <a j-delegate="authLoginBtn" data-sourceid="1" class="loginIcon baidu" href="http://passport.';$line=264;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=1&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="百度"></a> <a j-delegate="authLoginBtn" data-sourceid="5" class="loginIcon zhifubao" href="http://passport.';$line=265;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=5&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="支付宝"></a> <a j-delegate="authLoginBtn" data-sourceid="3" class="loginIcon renren" href="http://passport.';$line=266;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=3&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="人人"></a> <a j-delegate="authLoginBtn" data-sourceid="30" class="loginIcon xiaomi" href="http://passport.';$line=267;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=30&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="小米" rseat="1503171_mi"></a> <a j-delegate="authLoginBtn" data-sourceid="31" class="loginIcon jd" href="http://passport.';$line=268;$out+=$escape(_domain);$out+='/apis/thirdparty/nlogin.action?type=31&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="京东"></a> </div> <div class="divide-line-con"> <a href="javascript:void(0)" class="J_pop-third-upbtn"> <i class="loginIcon arrowUp"></i> </a> </div> </div> </div> </td> </tr> </tbody> </table> </div> </div> </div> </div>  '}catch(e){throw{id:$id,name:"Render Error",message:e.message,line:$line,source:'\n<!-- 登录 开始 -->\n<div data-private-display="block" data-widget-loginbox="loginbox" style="display: block; opacity: 1;" class="usrLogin-pop usrLogin-pop-star">\n  <div class="usrTxGeneral-box usrTx-box_popup usrTx-login-box" data-loginbox-elem="main">\n    <div class="userLogin-title">\n      <h2>登录爱奇艺，悦享品质生活<a class="loginIcon closeBtn" href="javascript:void(0);" j-delegate="hideloginiframe"></a></h2>\n    </div>\n    <!--登陆输入框-->\n    <div data-loginbox-elem="table" class="usrTxGeneral-box_v3" style="display: block;">\n      <div class="mailType-box-login" style="display:none ;" data-loginbox-elem="loginMailSuggest">\n        <ul class="mailType-list">\n          <li data-mailsuggest-elem="item" data-index="0">请选择或继续输入...</li>\n          <li data-mailsuggest-elem="item" data-index="1" class="selected">qiyiria@gmail.com</li>\n        </ul>\n      </div>\n      <!--登陆box-->\n      <div class="logReg-form">\n        <div data-loginbox-elem="errDom" class="errorArea"><span class="mobile-tips"></span></div>\n        <table class="tabs-regRorm notest-tabs" data-loginbox-elem="loginTable">\n          <tbody>\n            <tr data-loginbox-elem="emailTr">\n              <th>账&nbsp;&nbsp;&nbsp;号：</th>\n              <td>\n                <div data-loginbox-elem="emailWrap" class="acountBorder"><!--得到焦点追加class acountIn  输入文字默认提示隐藏添加 acounHide-->\n                  <input type="text" placeholder="请输入手机/邮箱" class="in-txt txt230" data-loginbox-elem="emailInput" tabindex="1">\n                  <a title="爱奇艺手机APP扫二维码登录" data-loginbox-elem="switchToQrCodeLogin" class="iqyCode-mini" href="javascript:;" rseat="140711_tdenter_navlgin"></a>\n                </div>\n              </td>\n            </tr>\n            <tr data-loginbox-elem="passwdTr">\n              <th>密&nbsp;&nbsp;&nbsp;码：</th>\n              <td>\n                <div data-loginbox-elem="passwdWrap" class="acountBorder">\n                  <input type="password" placeholder="请输入密码" data-loginbox-elem="passwdInput" class="in-txt" tabindex="2">\n                </div>\n              </td>\n            </tr>\n            <tr style="display:none;" data-loginbox-elem="piccodeTr">\n              <th></th>\n              <td>\n                <div class="acountCode acountBorder acountYzm" data-loginbox-elem="piccodeWrap">\n                  <input placeholder="请输入验证码" class="in-txt" data-loginbox-elem="piccodeInput" tabindex="3" type="text">\n                  <span class="in-xline"></span><span class="yzimg" data-loginbox-elem="piccode"></span>\n                </div>\n                <a class="refreshContent" href="javascript" data-loginbox-elem="refreshPiccodeWrapper"><i class="loginIcon refreshIcon" data-loginbox-elem="refreshPiccode"></i></a> \n              </td>\n            </tr>\n            <tr>\n              <th></th>\n              <td class="pb16"><div data-loginbox-elem="autoLoginWrap" class="itemregLast">\n                  <div class="logAuto"><span data-loginbox-elem="autoLogin" class="selected">记住我</span></div>\n                  <div class="logAutoRightCon">\n                    <a href="http://passport.iqiyi.com/pages/secure/password/find_pwd_index.action" target="_blank" j-delegate="hideloginiframe">找回密码</a>\n                    <i class="RegNowLine"></i>\n                    <a j-delegate="registerscroll" rseat="1411202_zcshw" href="http://passport.iqiyi.com/pages/register/index.action" target="_blank">立即注册</a>\n                  </div>\n                </div></td>\n            </tr>\n            <tr>\n              <th></th>\n              <td class="pb0"><div class="login_submitV3"><a data-loginbox-elem="loginBtn" class="submitV3Btn" href="#" rseat="1412242_lgn">登录</a></div></td>\n            </tr>\n            <tr class="cooperation-account">\n              <th></th>\n              <td class="pb0">\n                <div class="divide-line-ico">\n                  <a class="J_pop-third-downbtn" href="javascript:void(0)">\n                  使用其他方式登录\n                    <div class="divide-line-con">\n                      <i class="loginIcon arrowDown"></i>\n                    </div>\n                  </a> \n                  <div class="arrowUpCon dn J_pop-third-box">\n                    <div class="otherBind-big clearfix">\n                      <a j-delegate="authLoginBtn" data-sourceid="2" class="loginIcon sinaweibo" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=2&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="微博"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="4" class="loginIcon qq" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=4&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="QQ"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="29" class="loginIcon weixin" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=29&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="微信" ></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="1" class="loginIcon baidu" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=1&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="百度"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="5" class="loginIcon zhifubao" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=5&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="支付宝"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="3" class="loginIcon renren" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=3&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="人人"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="30" class="loginIcon xiaomi" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=30&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="小米" rseat="1503171_mi"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="31" class="loginIcon jd" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=31&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="京东"></a>\n                    </div>\n                    <div class="divide-line-con">\n                      <a href="javascript:void(0)" class="J_pop-third-upbtn">\n                        <i class="loginIcon arrowUp"></i>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <!--登陆box end-->\n    </div>\n    <!--登陆输入框 end-->\n    <!--二维码-->\n    <div class="iqyNav-code" data-widget-qrcodelogin="qrCodeLogin" style="display:none;">\n      <div class="iqyCode-wrap">\n        <div class="iqyCode-bd clearfix">\n          <div class="iqyCode-lt">\n            <p class="p-txt1">扫描二维码登录</p>\n            <p class="p-txt2">使用爱奇艺手机APP"扫一扫"</p>\n            <p class="p-txt2">用手机账号同步在电脑登录</p>\n            <p class="p-tipPic">\n              <img width="119" height="108" src="http://www.qiyipic.com/common/fix/site/code-pic-small.png">\n            </p>\n          </div>\n          <div class="iqyCode-rt">\n            <p class="return-web"><a class="green" data-qrcodelogin-elem="returnBtn" href="javascript:;">返回&gt;</a></p>\n            <!-- 状态1 -->\n            <div style="display:;" class="iqyCode-container" data-qrcodelogin-elem="loadedWrapper">\n              <p class="iqyCode-pic" data-qrcodelogin-elem="qrcodeImgCon">\n                <img width="135" height="135" src="http://www.qiyipic.com/common/fix/site/iqyCode-small.jpg" data-qrcodelogin-elem="qrcodeImg">\n              </p>\n              <p class="updateCode">\n                <em class="green" data-qrcodelogin-elem="refreshTimerNum">60</em>秒后为您更新二维码\n              </p>\n            </div>\n            <!-- 状态1 end-->\n            <!-- 状态2-->\n            <div style="display:none" class="codeBorder suc-login-tip" data-qrcodelogin-elem="loginSuccessWrapper">\n              <span class="suc-txt green">您已成功登录！</span>\n            </div>\n            <!-- 状态2 end-->\n            <!-- 状态3-->\n            <div class="getcodePic-con" data-qrcodelogin-elem="loadingWrapper" style="display:none;">\n              <div class="codeBorder getcodePic">\n                <div class="getCode-bd">\n                  <p><img src="http://www.qiyipic.com/common/images/load.gif"></p>\n                  <span class="getIngTxt">正在获取...</span>\n                </div>\n              </div>\n              <p class="updateCode">\n                  <em class="green">60</em>秒后为您更新二维码\n                </p>\n            </div>\n            <!-- 状态3 end-->\n            <!-- 状态4-->\n            <div class="codeBorder getCode-error" style="display:none" data-qrcodelogin-elem="loadFailWrapper">\n              <i></i>\n              <div class="againGet">\n                <p>获取二维码失败</p>\n                <p>请<a href="javascript:;" data-qrcodelogin-elem="reloadBtn">点击此处重试</a></p>\n              </div>\n            </div>\n            <!-- 状态4 end-->\n          </div>\n        </div>\n      </div>\n    </div>\n    <!--二维码 end-->\n  </div>\n</div>\n<!--登录 结束-->\n<!-- 登录框结束，注册框开始 -->\n<div data-private-display="block" data-widget-registbox="registbox" data-from="popup" style="display: none; opacity: 0;" class="usrLogin-pop usrLogin-pop-star">\n  <div class="usrTxGeneral-box usrTx-box_popup usrTx-login-box mobileLoginBox" data-registbox-elem="main">\n    <div class="userLogin-title">\n      <h2>登录爱奇艺，悦享品质生活<a class="loginIcon closeBtn" href="javascript:void(0);" j-delegate="hideloginiframe"></a></h2>\n    </div>\n    <!--显示验证码的时候追加 box_v3AddCode-->\n    <div data-registbox-elem="registpanel" class="usrTxGeneral-box_v3 box_v3AddCode" style="display: block;">\n      <div class="logReg-form">\n        <div data-registbox-elem="errDom" class="errorArea">\n        </div>\n        <table class="tabs-regRorm notest-tabs" data-registbox-elem="loginTable">\n          <tbody>\n            <tr data-registbox-elem="emailTr" class="J_account-tr" data-type="phone">\n              <th class="J_account-title">手&nbsp;&nbsp;&nbsp;机：</th>\n              <td>\n                <div data-registbox-elem="emailWrap" class="acountBorder fl">\n                  <!--得到焦点追加class acountIn  输入文字默认提示隐藏添加 acounHide-->\n                  <input type="text" placeholder="请输入手机号码" class="in-txt J_account-inp" data-registbox-elem="emailInput" tabindex="1">\n                </div>\n              </td>\n            </tr>\n            <tr data-registbox-elem="passwdTr">\n              <th>密&nbsp;&nbsp;&nbsp;码：</th>\n              <td>\n                <div data-registbox-elem="passwdWrap" class="acountBorder fl">\n                  <input type="password" placeholder="8~20位字母、数字或字符，至少包含两种" data-registbox-elem="passwdInput" class="in-txt" tabindex="2">\n                </div>\n                <div class="mod-passwordStrength dn passwordStrength_level1" data-registbox-elem="pwdstrong">\n                  <div class="passwordStrength_results">\n                    <span class="strengthResult_1">弱</span>\n                    <span class="strengthResult_2">中</span>\n                    <span class="strengthResult_3">强</span>\n                  </div>\n                  <div class="passwordStrength">\n                    <div class="passwordStrength_blocks">\n                      <span class="strengthBlock_1"></span><span class="strengthBlock_2"></span><span class="strengthBlock_3"></span>\n                    </div>\n                  </div>\n                </div>\n              </td>\n            </tr>\n            <tr data-registbox-elem="piccodeTr">\n              <th class="J_piccode-name">验证码：</th>\n              <td>\n                <div class="acountCode acountBorder acountYzm" data-registbox-elem="piccodeWrap">\n                  <input placeholder="请输入右侧字母" class="in-txt J_code-phoder" data-registbox-elem="piccodeInput" tabindex="3" type="text">\n                </div>\n                <div class="yzmPicBox fl">\n                  <span class="in-xline"></span>\n                  <span class="yzimg J_pic-code" data-registbox-elem="piccode">\n                    <img src="http://passport.iqiyi.com/register/vcode.php?r=0.8545576247216254">\n                  </span>\n                </div>\n                <!--刷新Icon 开始-->\n                <a class="refreshContent J_pic-code-btn" href="javascript:void(0)" data-registbox-elem="refreshPiccodeWrapper">\n                  <i class="loginIcon refreshIcon" data-registbox-elem="refreshPiccode"></i>\n                </a> \n                <!--刷新Icon 结束-->               \n              </td>\n            </tr>\n            <!--验证码默认不显示-->\n            <tr class="J_sms-box" data-registbox-elem="smscodeTr">\n              <th></th>\n              <td>\n                <div class="acountCode acountBorder f1 J_pic-code-box" data-registbox-elem="smscodeWrap">\n                  <input placeholder="请输入验证码" class="in-txt" data-registbox-elem="smscodeInput" tabindex="4" type="text">\n                  <span class="free-yzm-get" data-registbox-elem="sms">\n                    <a href="" data-registbox-elem="getSms">免费获取短信</a>\n                    <span class="getSms_already" data-registbox-elem="timer" style="display:none;">\n                      <span data-registbox-elem="timerNum"></span>秒后重新获得\n                    </span>\n                  </span>\n                </div>              \n              </td>\n            </tr>\n            <tr>\n              <th></th>\n              <td>\n                <div data-registbox-elem="autoLoginWrap" class="itemregLast">\n                  <div class="logAuto"><span data-registbox-elem="protocol" class="selected">我同意<a href="http://passport.iqiyi.com/register/protocol.php">《用户服务协议》</a></span></div>\n                  <div class="logAutoRightCon"><a href="#" j-delegate="loginscroll" rseat="1411201_lgn">立即登录</a></div>\n              </div>\n              </td>\n            </tr>\n            <tr>\n              <th></th>\n              <td class="pb0">\n                <div class="login_submitV3"><a data-registbox-elem="registBtn" class="submitV3Btn w200" rseat="1411201_rgt" href="javascript:void(0)">注册</a></div>\n              </td>\n            </tr>\n            <tr class="cooperation-account">\n              <th></th>\n              <td class="pb0">\n                <div class="divide-line-ico">\n                  <a class="J_pop-third-downbtn" href="javascript:void(0)">\n                  使用其他方式登录\n                    <div class="divide-line-con">\n                      <i class="loginIcon arrowDown"></i>\n                    </div>\n                  </a> \n                  <div class="arrowUpCon dn J_pop-third-box">\n                    <div class="otherBind-big clearfix">\n                      <a j-delegate="authLoginBtn" data-sourceid="2" class="loginIcon sinaweibo" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=2&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="微博"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="4" class="loginIcon qq" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=4&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="QQ"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="29" class="loginIcon weixin" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=29&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="微信" ></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="1" class="loginIcon baidu" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=1&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="百度"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="5" class="loginIcon zhifubao" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=5&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="支付宝"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="3" class="loginIcon renren" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=3&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="人人"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="30" class="loginIcon xiaomi" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=30&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="小米" rseat="1503171_mi"></a>\n                      <a j-delegate="authLoginBtn" data-sourceid="31" class="loginIcon jd" href="http://passport.{{_domain}}/apis/thirdparty/nlogin.action?type=31&amp;isiframe=1&amp;_pos=1&amp;agenttype=1" title="京东"></a>\n                    </div>\n                    <div class="divide-line-con">\n                      <a href="javascript:void(0)" class="J_pop-third-upbtn">\n                        <i class="loginIcon arrowUp"></i>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- 登录框结束，注册框开始 end -->\n'.split(/\n/)[$line-1].replace(/^[\s\t]+/,"")}}return new String($out)})});
define("templates/scripts/pc/vipopup",["templates/scripts/template"],function(require){return require("../template")("pc/vipopup",function($data,$id){var $helpers=this,$line=0,templateId=$data.templateId,$escape=$helpers.$escape,popupLinkUrl=$data.popupLinkUrl,metadataList=$data.metadataList,popupTitle=$data.popupTitle,$string=$helpers.$string,buttonLinkUrl=$data.buttonLinkUrl,buttonTitle=$data.buttonTitle,firstImageLinkUrl=$data.firstImageLinkUrl,firstImageUrl=$data.firstImageUrl,firstTitle=$data.firstTitle,$each=$helpers.$each,$value=$data.$value,$index=$data.$index,button2LinkUrl=$data.button2LinkUrl,button2Title=$data.button2Title,$out="";try{$out+=" ";$line=2;if(templateId==3){$out+=' <div class="vip_rec_pop" style="position:absolute;" > <div class="vip_rec_b"></div> <div class="vip_rec_main"> <div class="vip_rec_hd mb10"> <a data-vipadpop-click="popup" href="';$line=7;$out+=$escape(popupLinkUrl);$out+='" data-vipadpop-fr="1" data-vipadpop-qpid="';$line=7;$out+=$escape(metadataList.sourceId);$out+='" target="_blank"><h2>';$line=7;$out+=$escape(popupTitle);$out+='</h2></a> </div> <div class="vip_rec_main_inner_closeBtn" href="javascript:void(0);"><a href="javascript:void(0);" class="vip_rec_close" data-Close="close" data-vipadpop-act="2">×</a></div> <div class="vip_rec_bd"> <div class="vip_rec_lt"> <a href="';$line=12;$out+=$escape(metadataList.imageLinkUrl);$out+='" data-vipadpop-qpid="';$line=12;$out+=$escape(metadataList.sourceId);$out+='" data-vipadpop-click="popup" data-vipadpop-fr="2" target="_blank"> <img src="';$line=13;$out+=$escape(metadataList.imageUrl);$out+='" width="120" height="160"> </a> </div> <div class="vip_rec_rt"> <p> <a href="';$line=18;$out+=$escape(metadataList.longTitleLinkUrl);$out+='" data-vipadpop-click="popup" data-vipadpop-fr="3" data-vipadpop-qpid="';$line=18;$out+=$escape(metadataList.sourceId);$out+='" target="_blank"> ';$line=19;$out+=$string(metadataList.longTitle);$out+=' </a> </p> <div class="look_xq"> <a href="';$line=23;$out+=$escape(buttonLinkUrl);$out+='" data-vipadpop-qpid="';$line=23;$out+=$escape(metadataList.sourceId);$out+='" data-vipadpop-click="popup" data-vipadpop-fr="4" target="_blank"> ';$line=24;$out+=$escape(buttonTitle);$out+=" </a> </div> </div> </div> </div> </div> ";$line=31}$out+=" ";$line=32;if(templateId==4){$out+='  <div class="vip_rec_pop" > <div class="vip_rec_b"></div> <div class="vip_rec_main"> <div class="vip_rec_hd mb10"> <a data-vipadpop-click="popup" href="';$line=38;$out+=$escape(popupLinkUrl);$out+='" data-vipadpop-fr="1" data-vipadpop-qpid="';$line=38;$out+=$escape(metadataList.sourceId);$out+='" target="_blank"> <h2>';$line=39;$out+=$escape(popupTitle);$out+='</h2></a> </div> <div class="vip_rec_main_inner_closeBtn" href="javascript:void(0);"><a href="javascript:void(0);" class="vip_rec_close" data-Close="close" data-vipadpop-act="2">×</a></div> <div class="vip_rec_bd"> <a href="';$line=43;$out+=$escape(metadataList.imageLinkUrl);$out+='" data-vipadpop-qpid="';$line=43;$out+=$escape(metadataList.sourceId);$out+='" data-vipadpop-click="popup" data-vipadpop-fr="2" target="_blank"> <img src="';$line=44;$out+=$escape(metadataList.imageUrl);$out+='" width="260" height="160"> </a> </div> </div> </div> ';$line=49}$out+=" ";$line=50;if(templateId==5){$out+='  <div class="vip_rec_pop" > <div class="vip_rec_b"></div> <div class="vip_rec_main"> <div class="vip_rec_hd mb10"> <a data-vipadpop-click="popup" href="';$line=56;$out+=$escape(popupLinkUrl);$out+='" data-vipadpop-fr="1" data-vipadpop-qpid="';$line=56;$out+=$escape(metadataList.sourceId);$out+='" target="_blank"> <h2>';$line=57;$out+=$escape(popupTitle);$out+='</h2> </a> </div> <div class="vip_rec_main_inner_closeBtn" ><a href="javascript:void(0);" class="vip_rec_close" data-Close="close"></a></div> <div class="vip_rec_bd"> <a href="';$line=62;$out+=$escape(metadataList.longTitleLinkUrl);$out+='" data-vipadpop-click="popup" data-vipadpop-fr="3" data-vipadpop-qpid="';$line=62;$out+=$escape(metadataList.sourceId);$out+='" target="_blank"> ';$line=62;$out+=$string(metadataList.longTitle);$out+=' </a> <div class="vip_pop_btn2 mt15 clearfix"><a data-vipadpop-qpid="';$line=63;$out+=$escape(metadataList.sourceId);$out+='" data-vipadpop-click="popup" href="';$line=63;$out+=$escape(buttonLinkUrl);$out+='" target="_blank" data-vipadpop-fr="4">';$line=63;$out+=$escape(buttonTitle);$out+="</a></div> </div> </div> </div> ";$line=67}$out+="  ";$line=69;if(templateId==6){$out+=' <div class="vip_rec_pop" > <div class="vip_rec_b"></div> <div class="vip_rec_main"> <div class="vip_rec_hd mb10"> <a data-vipadpop-click="popup" href="';$line=74;$out+=$escape(popupLinkUrl);$out+='" data-vipadpop-fr="1" data-vipadpop-qpid="';$line=74;$out+=$escape(metadataList.sourceId);$out+='" target="_blank"><h2>';$line=74;$out+=$string(popupTitle);$out+=' </h2></a> </div> <div class="vip_rec_main_inner_closeBtn" href="javascript:void(0);"><a href="javascript:void(0);" class="vip_rec_close" data-Close="close" data-vipadpop-act="2" data-vipadpop-fr="POP_DIRECT_CLOSE">×</a></div> <div class="vip_rec_img"> <a data-vipadpop-click="popup" data-vipadpop-fr="2" href="';$line=78;$out+=$escape(firstImageLinkUrl);$out+='" data-vipadpop-act="1" data-vipadpop-qpid="';$line=78;$out+=$escape(metadataList.sourceId);$out+='" data-vipadpop-fr="POP_IMG_XXX" target="_blank"> <img src="';$line=79;$out+=$escape(firstImageUrl);$out+='" width="260" height="90" alt="" /> <div class="vip_rec_img_title"><i class="site-icons play-icon fl"></i> <div class="vip_rec_img_left"> ';$line=81;$out+=$string(firstTitle);$out+='</div> </div> </a> </div> <ul class="vip_rec_item"> ';$line=86;$each(metadataList,function($value,$index){$out+=' <li><i class="site-icons icon-play"></i><a data-vipadpop-qpid="';$line=87;$out+=$escape($value.sourceId);$out+='" href="';$line=87;$out+=$escape($value.longTitleLinkUrl);$out+='" data-vipadpop-click="popup" data-vipadpop-fr="4" target="_blank">';$line=87;$out+=$string($value.title);$out+="</a></li> ";$line=88});$out+=" </ul> </div> </div> ";$line=92}$out+="  ";$line=94;if(templateId==7){$out+=' <div class="vip_rec_pop" > <div class="vip_rec_b"></div> <div class="vip_rec_main"> <div class="vip_rec_hd mb10"> <a data-vipadpop-click="popup" href="';$line=99;$out+=$escape(popupLinkUrl);$out+='" data-vipadpop-fr="1" data-vipadpop-qpid="';$line=99;$out+=$escape(metadataList.sourceId);$out+='" target="_blank"><h2>';$line=99;$out+=$escape(popupTitle);$out+=' </h2></a> </div> <div class="vip_rec_main_inner_closeBtn" href="javascript:void(0);"><a data-Close="close" href="javascript:void(0);" class="vip_rec_close"></a></div> <div class="vip_rec_bd"> <a href="';$line=103;$out+=$escape(metadataList.longTitleLinkUrl);$out+='" data-vipadpop-click="popup" data-vipadpop-fr="3" data-vipadpop-qpid="';$line=103;$out+=$escape(metadataList.sourceId);$out+='" target="_blank">';$line=103;$out+=$string(metadataList.longTitle);$out+='</a> <div class="vip_pop_btn1 mt15 clearfix"><a data-vipadpop-click="popup" target="_blank" data-vipadpop-qpid="';$line=104;$out+=$escape(metadataList.sourceId);$out+='" data-vipadpop-fr="4" href="';$line=104;$out+=$escape(buttonLinkUrl);$out+='">';$line=104;$out+=$escape(buttonTitle);$out+='</a><a data-vipadpop-click="popup" target="_blank" data-vipadpop-qpid="';$line=104;$out+=$escape(metadataList.sourceId);$out+='" data-vipadpop-fr="4" href="';$line=104;$out+=$escape(button2LinkUrl);$out+='" class="ml30">';$line=104;$out+=$escape(button2Title);$out+="</a></div> </div> </div> </div> ";$line=108}$out+=" "}catch(e){throw{id:$id,name:"Render Error",message:e.message,line:$line,source:'<!-- 1、标题+图片+文字+按钮 -->\r\n{{if templateId == 3 }}\r\n<div class="vip_rec_pop" style="position:absolute;" >\r\n        <div class="vip_rec_b"></div>\r\n        <div class="vip_rec_main">\r\n            <div class="vip_rec_hd mb10">\r\n                   <a data-vipadpop-click="popup" href="{{popupLinkUrl}}"  data-vipadpop-fr="1"   data-vipadpop-qpid="{{metadataList.sourceId}}"  target="_blank"><h2>{{popupTitle}}</h2></a>\r\n            </div>\r\n            <div class="vip_rec_main_inner_closeBtn" href="javascript:void(0);"><a href="javascript:void(0);" class="vip_rec_close" data-Close="close" data-vipadpop-act="2">×</a></div>\r\n            <div class="vip_rec_bd">\r\n                <div class="vip_rec_lt">\r\n                    <a href="{{metadataList.imageLinkUrl}}" data-vipadpop-qpid="{{metadataList.sourceId}}" data-vipadpop-click="popup"  data-vipadpop-fr="2" target="_blank">\r\n                        <img src="{{metadataList.imageUrl}}" width="120" height="160">\r\n                    </a>\r\n                </div>\r\n                <div class="vip_rec_rt">\r\n                    <p>\r\n                        <a href="{{metadataList.longTitleLinkUrl}}" data-vipadpop-click="popup"  data-vipadpop-fr="3"  data-vipadpop-qpid="{{metadataList.sourceId}}" target="_blank">\r\n                         {{=metadataList.longTitle}}\r\n                        </a>\r\n                    </p>\r\n                    <div class="look_xq">\r\n                        <a href="{{buttonLinkUrl}}" data-vipadpop-qpid="{{metadataList.sourceId}}" data-vipadpop-click="popup"  data-vipadpop-fr="4" target="_blank">\r\n                            {{buttonTitle}}\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n</div>\r\n{{/if}}\r\n{{if templateId == 4 }}\r\n<!-- 2、标题+图片 -->\r\n<div class="vip_rec_pop" >\r\n  <div class="vip_rec_b"></div>\r\n  <div class="vip_rec_main">\r\n    <div class="vip_rec_hd mb10">\r\n   <a data-vipadpop-click="popup" href="{{popupLinkUrl}}"  data-vipadpop-fr="1"   data-vipadpop-qpid="{{metadataList.sourceId}}"  target="_blank">\r\n      <h2>{{popupTitle}}</h2></a>\r\n    </div>\r\n    <div class="vip_rec_main_inner_closeBtn" href="javascript:void(0);"><a href="javascript:void(0);" class="vip_rec_close" data-Close="close" data-vipadpop-act="2">×</a></div>\r\n    <div class="vip_rec_bd">\r\n        <a href="{{metadataList.imageLinkUrl}}" data-vipadpop-qpid="{{metadataList.sourceId}}" data-vipadpop-click="popup"  data-vipadpop-fr="2"  target="_blank">\r\n            <img src="{{metadataList.imageUrl}}" width="260" height="160">\r\n        </a> \r\n    </div>\r\n  </div>\r\n</div>\r\n{{/if}}\r\n{{if templateId == 5 }}\r\n<!-- 3、标题+文字+按钮 -->\r\n<div class="vip_rec_pop" >\r\n  <div class="vip_rec_b"></div>\r\n  <div class="vip_rec_main">\r\n    <div class="vip_rec_hd mb10">\r\n   <a data-vipadpop-click="popup" href="{{popupLinkUrl}}"  data-vipadpop-fr="1"   data-vipadpop-qpid="{{metadataList.sourceId}}"  target="_blank">\r\n      <h2>{{popupTitle}}</h2>\r\n    </a>\r\n    </div>\r\n    <div class="vip_rec_main_inner_closeBtn" ><a href="javascript:void(0);" class="vip_rec_close"  data-Close="close"></a></div>\r\n    <div class="vip_rec_bd">\r\n      <a  href="{{metadataList.longTitleLinkUrl}}" data-vipadpop-click="popup"  data-vipadpop-fr="3"  data-vipadpop-qpid="{{metadataList.sourceId}}" target="_blank"> {{=metadataList.longTitle}} </a>\r\n      <div class="vip_pop_btn2 mt15 clearfix"><a data-vipadpop-qpid="{{metadataList.sourceId}}" data-vipadpop-click="popup" href="{{buttonLinkUrl}}" target="_blank"  data-vipadpop-fr="4">{{buttonTitle}}</a></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n{{/if}}\r\n <!-- 4、图片+多条内容 -->\r\n{{if templateId == 6 }}\r\n<div class="vip_rec_pop" >\r\n  <div class="vip_rec_b"></div>\r\n  <div class="vip_rec_main">\r\n    <div class="vip_rec_hd mb10">\r\n   <a data-vipadpop-click="popup" href="{{popupLinkUrl}}"  data-vipadpop-fr="1"   data-vipadpop-qpid="{{metadataList.sourceId}}"  target="_blank"><h2>{{=popupTitle}} </h2></a>\r\n    </div>\r\n    <div class="vip_rec_main_inner_closeBtn" href="javascript:void(0);"><a href="javascript:void(0);" class="vip_rec_close" data-Close="close" data-vipadpop-act="2" data-vipadpop-fr="POP_DIRECT_CLOSE">×</a></div>\r\n    <div class="vip_rec_img">\r\n        <a data-vipadpop-click="popup"  data-vipadpop-fr="2" href="{{firstImageLinkUrl}}" data-vipadpop-act="1" data-vipadpop-qpid="{{metadataList.sourceId}}" data-vipadpop-fr="POP_IMG_XXX" target="_blank">\r\n            <img src="{{firstImageUrl}}" width="260" height="90" alt="" />\r\n        <div class="vip_rec_img_title"><i class="site-icons play-icon fl"></i>\r\n            <div class="vip_rec_img_left"> {{=firstTitle}}</div>\r\n        </div>\r\n      </a>\r\n    </div>\r\n    <ul class="vip_rec_item">\r\n      {{each metadataList}} \r\n        <li><i class="site-icons icon-play"></i><a data-vipadpop-qpid="{{$value.sourceId}}"   href="{{$value.longTitleLinkUrl}}" data-vipadpop-click="popup" data-vipadpop-fr="4"  target="_blank">{{=$value.title}}</a></li>\r\n      {{/each}}\r\n    </ul>\r\n  </div>\r\n</div>\r\n{{/if}} \r\n<!-- VIP双按钮 -->\r\n{{if templateId == 7 }}\r\n<div class="vip_rec_pop" >\r\n  <div class="vip_rec_b"></div>\r\n  <div class="vip_rec_main">\r\n    <div class="vip_rec_hd mb10">\r\n   <a data-vipadpop-click="popup" href="{{popupLinkUrl}}"  data-vipadpop-fr="1"   data-vipadpop-qpid="{{metadataList.sourceId}}"  target="_blank"><h2>{{popupTitle}} </h2></a>\r\n    </div>\r\n    <div class="vip_rec_main_inner_closeBtn" href="javascript:void(0);"><a data-Close="close" href="javascript:void(0);" class="vip_rec_close"></a></div>\r\n    <div class="vip_rec_bd">\r\n  <a href="{{metadataList.longTitleLinkUrl}}" data-vipadpop-click="popup"  data-vipadpop-fr="3" data-vipadpop-qpid="{{metadataList.sourceId}}" target="_blank">{{=metadataList.longTitle}}</a>\r\n      <div class="vip_pop_btn1 mt15 clearfix"><a  data-vipadpop-click="popup"  target="_blank" data-vipadpop-qpid="{{metadataList.sourceId}}"  data-vipadpop-fr="4" href="{{buttonLinkUrl}}">{{buttonTitle}}</a><a data-vipadpop-click="popup" target="_blank" data-vipadpop-qpid="{{metadataList.sourceId}}"  data-vipadpop-fr="4" href="{{button2LinkUrl}}" class="ml30">{{button2Title}}</a></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n{{/if}} \r\n<!-- VIP双按钮 end-->'.split(/\n/)[$line-1].replace(/^[\s\t]+/,"")}}return new String($out)})});
define("templates/scripts/paopao/paopaoQuan",["templates/scripts/template"],function(require){return require("../template")("paopao/paopaoQuan",'<!-- 泡泡 top  模块  start-->\r\n<div class="pp_firstCon clearfix dn" data-paopao-ele="paoQuanHead">\r\n</div>\r\n<!-- 泡泡 top  模块  start-->\r\n<!-- feed 模块   start -->\r\n<div data-paopao-ele="paoFeedList" class="clearfix">\r\n</div>\r\n<!-- feed 模块   end -->\r\n<!-- 加载 gif   start -->\r\n<div class="feed_loading" data-paopao-ele="loading">\r\n    <img rseat="加载" src="http://www.qiyipic.com/common/fix/paopao/green-loading.gif" alt="正在加载...">\r\n    <em>正在加载中，请稍候...</em> \r\n</div>\r\n<!-- 加载 gif   end -->\r\n<!-- 翻页   start -->\r\n<div data-paopao-ele="paofeedOccupy">\r\n	<div class="pagination dn" data-paopao-ele="quanPageWrap">\r\n	    <div class="pagination_bd clearfix" id="feedWaterPager">\r\n	    </div>\r\n	</div>\r\n</div>\r\n<!-- 翻页   end -->\r\n<div data-paopao-ele="Occupying" style="height: 58px"></div>')});
//Built by iQiyi-FE @ Fri Oct 14 2016 16:00:56 GMT+0800 (CST)